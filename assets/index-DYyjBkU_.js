var cUe=Object.defineProperty;var fUe=(e,t,n)=>t in e?cUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var dUe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var kl=(e,t,n)=>fUe(e,typeof t!="symbol"?t+"":t,n);var iun=dUe((yln,Qae)=>{function hUe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pUe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var HU={exports:{}},Hk={},qU={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iue;function mUe(){if(Iue)return Cr;Iue=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(U,G,V){this.props=U,this.context=G,this.refs=m,this.updater=V||h}g.prototype.isReactComponent={},g.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},g.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function v(){}v.prototype=g.prototype;function b(U,G,V){this.props=U,this.context=G,this.refs=m,this.updater=V||h}var w=b.prototype=new v;w.constructor=b,p(w,g.prototype),w.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,C={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(U,G,V){var Y,ee={},ae=null,_e=null;if(G!=null)for(Y in G.ref!==void 0&&(_e=G.ref),G.key!==void 0&&(ae=""+G.key),G)T.call(G,Y)&&!I.hasOwnProperty(Y)&&(ee[Y]=G[Y]);var pe=arguments.length-2;if(pe===1)ee.children=V;else if(1<pe){for(var Se=Array(pe),Le=0;Le<pe;Le++)Se[Le]=arguments[Le+2];ee.children=Se}if(U&&U.defaultProps)for(Y in pe=U.defaultProps,pe)ee[Y]===void 0&&(ee[Y]=pe[Y]);return{$$typeof:e,type:U,key:ae,ref:_e,props:ee,_owner:C.current}}function N(U,G){return{$$typeof:e,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(V){return G[V]})}var j=/\/+/g;function F(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function H(U,G,V,Y,ee){var ae=typeof U;(ae==="undefined"||ae==="boolean")&&(U=null);var _e=!1;if(U===null)_e=!0;else switch(ae){case"string":case"number":_e=!0;break;case"object":switch(U.$$typeof){case e:case t:_e=!0}}if(_e)return _e=U,ee=ee(_e),U=Y===""?"."+F(_e,0):Y,E(ee)?(V="",U!=null&&(V=U.replace(j,"$&/")+"/"),H(ee,G,V,"",function(Le){return Le})):ee!=null&&(O(ee)&&(ee=N(ee,V+(!ee.key||_e&&_e.key===ee.key?"":(""+ee.key).replace(j,"$&/")+"/")+U)),G.push(ee)),1;if(_e=0,Y=Y===""?".":Y+":",E(U))for(var pe=0;pe<U.length;pe++){ae=U[pe];var Se=Y+F(ae,pe);_e+=H(ae,G,V,Se,ee)}else if(Se=d(U),typeof Se=="function")for(U=Se.call(U),pe=0;!(ae=U.next()).done;)ae=ae.value,Se=Y+F(ae,pe++),_e+=H(ae,G,V,Se,ee);else if(ae==="object")throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return _e}function Q(U,G,V){if(U==null)return U;var Y=[],ee=0;return H(U,Y,"","",function(ae){return G.call(V,ae,ee++)}),Y}function J(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(V){(U._status===0||U._status===-1)&&(U._status=1,U._result=V)},function(V){(U._status===0||U._status===-1)&&(U._status=2,U._result=V)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var ne={current:null},Z={transition:null},ie={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Z,ReactCurrentOwner:C};function q(){throw Error("act(...) is not supported in production builds of React.")}return Cr.Children={map:Q,forEach:function(U,G,V){Q(U,function(){G.apply(this,arguments)},V)},count:function(U){var G=0;return Q(U,function(){G++}),G},toArray:function(U){return Q(U,function(G){return G})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Cr.Component=g,Cr.Fragment=n,Cr.Profiler=i,Cr.PureComponent=b,Cr.StrictMode=r,Cr.Suspense=u,Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Cr.act=q,Cr.cloneElement=function(U,G,V){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Y=p({},U.props),ee=U.key,ae=U.ref,_e=U._owner;if(G!=null){if(G.ref!==void 0&&(ae=G.ref,_e=C.current),G.key!==void 0&&(ee=""+G.key),U.type&&U.type.defaultProps)var pe=U.type.defaultProps;for(Se in G)T.call(G,Se)&&!I.hasOwnProperty(Se)&&(Y[Se]=G[Se]===void 0&&pe!==void 0?pe[Se]:G[Se])}var Se=arguments.length-2;if(Se===1)Y.children=V;else if(1<Se){pe=Array(Se);for(var Le=0;Le<Se;Le++)pe[Le]=arguments[Le+2];Y.children=pe}return{$$typeof:e,type:U.type,key:ee,ref:ae,props:Y,_owner:_e}},Cr.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},Cr.createElement=R,Cr.createFactory=function(U){var G=R.bind(null,U);return G.type=U,G},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(U){return{$$typeof:a,render:U}},Cr.isValidElement=O,Cr.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:J}},Cr.memo=function(U,G){return{$$typeof:l,type:U,compare:G===void 0?null:G}},Cr.startTransition=function(U){var G=Z.transition;Z.transition={};try{U()}finally{Z.transition=G}},Cr.unstable_act=q,Cr.useCallback=function(U,G){return ne.current.useCallback(U,G)},Cr.useContext=function(U){return ne.current.useContext(U)},Cr.useDebugValue=function(){},Cr.useDeferredValue=function(U){return ne.current.useDeferredValue(U)},Cr.useEffect=function(U,G){return ne.current.useEffect(U,G)},Cr.useId=function(){return ne.current.useId()},Cr.useImperativeHandle=function(U,G,V){return ne.current.useImperativeHandle(U,G,V)},Cr.useInsertionEffect=function(U,G){return ne.current.useInsertionEffect(U,G)},Cr.useLayoutEffect=function(U,G){return ne.current.useLayoutEffect(U,G)},Cr.useMemo=function(U,G){return ne.current.useMemo(U,G)},Cr.useReducer=function(U,G,V){return ne.current.useReducer(U,G,V)},Cr.useRef=function(U){return ne.current.useRef(U)},Cr.useState=function(U){return ne.current.useState(U)},Cr.useSyncExternalStore=function(U,G,V){return ne.current.useSyncExternalStore(U,G,V)},Cr.useTransition=function(){return ne.current.useTransition()},Cr.version="18.3.1",Cr}var kue;function X8(){return kue||(kue=1,qU.exports=mUe()),qU.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rue;function gUe(){if(Rue)return Hk;Rue=1;var e=X8(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return Hk.Fragment=n,Hk.jsx=o,Hk.jsxs=o,Hk}var Due;function yUe(){return Due||(Due=1,HU.exports=gUe()),HU.exports}var S=yUe(),P=X8();const fi=vh(P),vUe=hUe({__proto__:null,default:fi},[P]);var M4={},WU={exports:{}},kc={},GU={exports:{}},YU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nue;function bUe(){return Nue||(Nue=1,function(e){function t(Z,ie){var q=Z.length;Z.push(ie);e:for(;0<q;){var U=q-1>>>1,G=Z[U];if(0<i(G,ie))Z[U]=ie,Z[q]=G,q=U;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ie=Z[0],q=Z.pop();if(q!==ie){Z[0]=q;e:for(var U=0,G=Z.length,V=G>>>1;U<V;){var Y=2*(U+1)-1,ee=Z[Y],ae=Y+1,_e=Z[ae];if(0>i(ee,q))ae<G&&0>i(_e,ee)?(Z[U]=_e,Z[ae]=q,U=ae):(Z[U]=ee,Z[Y]=q,U=Y);else if(ae<G&&0>i(_e,q))Z[U]=_e,Z[ae]=q,U=ae;else break e}}return ie}function i(Z,ie){var q=Z.sortIndex-ie.sortIndex;return q!==0?q:Z.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Z){for(var ie=n(l);ie!==null;){if(ie.callback===null)r(l);else if(ie.startTime<=Z)r(l),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(l)}}function E(Z){if(m=!1,w(Z),!p)if(n(u)!==null)p=!0,J(T);else{var ie=n(l);ie!==null&&ne(E,ie.startTime-Z)}}function T(Z,ie){p=!1,m&&(m=!1,v(R),R=-1),h=!0;var q=d;try{for(w(ie),f=n(u);f!==null&&(!(f.expirationTime>ie)||Z&&!L());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var G=U(f.expirationTime<=ie);ie=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(u)&&r(u),w(ie)}else r(u);f=n(u)}if(f!==null)var V=!0;else{var Y=n(l);Y!==null&&ne(E,Y.startTime-ie),V=!1}return V}finally{f=null,d=q,h=!1}}var C=!1,I=null,R=-1,N=5,O=-1;function L(){return!(e.unstable_now()-O<N)}function j(){if(I!==null){var Z=e.unstable_now();O=Z;var ie=!0;try{ie=I(!0,Z)}finally{ie?F():(C=!1,I=null)}}else C=!1}var F;if(typeof b=="function")F=function(){b(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=j,F=function(){Q.postMessage(null)}}else F=function(){g(j,0)};function J(Z){I=Z,C||(C=!0,F())}function ne(Z,ie){R=g(function(){Z(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,J(T))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Z){switch(d){case 1:case 2:case 3:var ie=3;break;default:ie=d}var q=d;d=ie;try{return Z()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,ie){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=d;d=Z;try{return ie()}finally{d=q}},e.unstable_scheduleCallback=function(Z,ie,q){var U=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?U+q:U):q=U,Z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,Z={id:c++,callback:ie,priorityLevel:Z,startTime:q,expirationTime:G,sortIndex:-1},q>U?(Z.sortIndex=q,t(l,Z),n(u)===null&&Z===n(l)&&(m?(v(R),R=-1):m=!0,ne(E,q-U))):(Z.sortIndex=G,t(u,Z),p||h||(p=!0,J(T))),Z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Z){var ie=d;return function(){var q=d;d=ie;try{return Z.apply(this,arguments)}finally{d=q}}}}(YU)),YU}var Pue;function xUe(){return Pue||(Pue=1,GU.exports=bUe()),GU.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oue;function _Ue(){if(Oue)return kc;Oue=1;var e=X8(),t=xUe();function n(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(y,x){o(y,x),o(y+"Capture",x)}function o(y,x){for(i[y]=x,y=0;y<x.length;y++)r.add(x[y])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(y){return u.call(f,y)?!0:u.call(c,y)?!1:l.test(y)?f[y]=!0:(c[y]=!0,!1)}function h(y,x,k,M){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return M?!1:k!==null?!k.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function p(y,x,k,M){if(x===null||typeof x>"u"||h(y,x,k,M))return!0;if(M)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function m(y,x,k,M,z,K,se){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=M,this.attributeNamespace=z,this.mustUseProperty=k,this.propertyName=y,this.type=x,this.sanitizeURL=K,this.removeEmptyString=se}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new m(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var x=y[0];g[x]=new m(x,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new m(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new m(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new m(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new m(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new m(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new m(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new m(y,5,!1,y.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!0,!0)});function w(y,x,k,M){var z=g.hasOwnProperty(x)?g[x]:null;(z!==null?z.type!==0:M||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,k,z,M)&&(k=null),M||z===null?d(x)&&(k===null?y.removeAttribute(x):y.setAttribute(x,""+k)):z.mustUseProperty?y[z.propertyName]=k===null?z.type===3?!1:"":k:(x=z.attributeName,M=z.attributeNamespace,k===null?y.removeAttribute(x):(z=z.type,k=z===3||z===4&&k===!0?"":""+k,M?y.setAttributeNS(M,x,k):y.setAttribute(x,k))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ie(y){return y===null||typeof y!="object"?null:(y=Z&&y[Z]||y["@@iterator"],typeof y=="function"?y:null)}var q=Object.assign,U;function G(y){if(U===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);U=x&&x[1]||""}return`
`+U+y}var V=!1;function Y(y,x){if(!y||V)return"";V=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Xe){var M=Xe}Reflect.construct(y,[],x)}else{try{x.call()}catch(Xe){M=Xe}y.call(x.prototype)}else{try{throw Error()}catch(Xe){M=Xe}y()}}catch(Xe){if(Xe&&M&&typeof Xe.stack=="string"){for(var z=Xe.stack.split(`
`),K=M.stack.split(`
`),se=z.length-1,be=K.length-1;1<=se&&0<=be&&z[se]!==K[be];)be--;for(;1<=se&&0<=be;se--,be--)if(z[se]!==K[be]){if(se!==1||be!==1)do if(se--,be--,0>be||z[se]!==K[be]){var Ce=`
`+z[se].replace(" at new "," at ");return y.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",y.displayName)),Ce}while(1<=se&&0<=be);break}}}finally{V=!1,Error.prepareStackTrace=k}return(y=y?y.displayName||y.name:"")?G(y):""}function ee(y){switch(y.tag){case 5:return G(y.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return y=Y(y.type,!1),y;case 11:return y=Y(y.type.render,!1),y;case 1:return y=Y(y.type,!0),y;default:return""}}function ae(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case I:return"Fragment";case C:return"Portal";case N:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case L:return(y.displayName||"Context")+".Consumer";case O:return(y._context.displayName||"Context")+".Provider";case j:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case Q:return x=y.displayName||null,x!==null?x:ae(y.type)||"Memo";case J:x=y._payload,y=y._init;try{return ae(y(x))}catch{}}return null}function _e(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(x);case 8:return x===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function pe(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function Se(y){var x=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Le(y){var x=Se(y)?"checked":"value",k=Object.getOwnPropertyDescriptor(y.constructor.prototype,x),M=""+y[x];if(!y.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var z=k.get,K=k.set;return Object.defineProperty(y,x,{configurable:!0,get:function(){return z.call(this)},set:function(se){M=""+se,K.call(this,se)}}),Object.defineProperty(y,x,{enumerable:k.enumerable}),{getValue:function(){return M},setValue:function(se){M=""+se},stopTracking:function(){y._valueTracker=null,delete y[x]}}}}function ye(y){y._valueTracker||(y._valueTracker=Le(y))}function he(y){if(!y)return!1;var x=y._valueTracker;if(!x)return!0;var k=x.getValue(),M="";return y&&(M=Se(y)?y.checked?"true":"false":y.value),y=M,y!==k?(x.setValue(y),!0):!1}function $e(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function De(y,x){var k=x.checked;return q({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??y._wrapperState.initialChecked})}function tt(y,x){var k=x.defaultValue==null?"":x.defaultValue,M=x.checked!=null?x.checked:x.defaultChecked;k=pe(x.value!=null?x.value:k),y._wrapperState={initialChecked:M,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function it(y,x){x=x.checked,x!=null&&w(y,"checked",x,!1)}function Me(y,x){it(y,x);var k=pe(x.value),M=x.type;if(k!=null)M==="number"?(k===0&&y.value===""||y.value!=k)&&(y.value=""+k):y.value!==""+k&&(y.value=""+k);else if(M==="submit"||M==="reset"){y.removeAttribute("value");return}x.hasOwnProperty("value")?at(y,x.type,k):x.hasOwnProperty("defaultValue")&&at(y,x.type,pe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(y.defaultChecked=!!x.defaultChecked)}function Ge(y,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var M=x.type;if(!(M!=="submit"&&M!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+y._wrapperState.initialValue,k||x===y.value||(y.value=x),y.defaultValue=x}k=y.name,k!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,k!==""&&(y.name=k)}function at(y,x,k){(x!=="number"||$e(y.ownerDocument)!==y)&&(k==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+k&&(y.defaultValue=""+k))}var yt=Array.isArray;function St(y,x,k,M){if(y=y.options,x){x={};for(var z=0;z<k.length;z++)x["$"+k[z]]=!0;for(k=0;k<y.length;k++)z=x.hasOwnProperty("$"+y[k].value),y[k].selected!==z&&(y[k].selected=z),z&&M&&(y[k].defaultSelected=!0)}else{for(k=""+pe(k),x=null,z=0;z<y.length;z++){if(y[z].value===k){y[z].selected=!0,M&&(y[z].defaultSelected=!0);return}x!==null||y[z].disabled||(x=y[z])}x!==null&&(x.selected=!0)}}function Ot(y,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},x,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function qe(y,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(n(92));if(yt(k)){if(1<k.length)throw Error(n(93));k=k[0]}x=k}x==null&&(x=""),k=x}y._wrapperState={initialValue:pe(k)}}function dt(y,x){var k=pe(x.value),M=pe(x.defaultValue);k!=null&&(k=""+k,k!==y.value&&(y.value=k),x.defaultValue==null&&y.defaultValue!==k&&(y.defaultValue=k)),M!=null&&(y.defaultValue=""+M)}function wt(y){var x=y.textContent;x===y._wrapperState.initialValue&&x!==""&&x!==null&&(y.value=x)}function ke(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oe(y,x){return y==null||y==="http://www.w3.org/1999/xhtml"?ke(x):y==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var ht,Lt=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,M,z){MSApp.execUnsafeLocalFunction(function(){return y(x,k,M,z)})}:y}(function(y,x){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=x;else{for(ht=ht||document.createElement("div"),ht.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ht.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;x.firstChild;)y.appendChild(x.firstChild)}});function Ft(y,x){if(x){var k=y.firstChild;if(k&&k===y.lastChild&&k.nodeType===3){k.nodeValue=x;return}}y.textContent=x}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(y){Nn.forEach(function(x){x=x+y.charAt(0).toUpperCase()+y.substring(1),dn[x]=dn[y]})});function Sr(y,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||dn.hasOwnProperty(y)&&dn[y]?(""+x).trim():x+"px"}function Ni(y,x){y=y.style;for(var k in x)if(x.hasOwnProperty(k)){var M=k.indexOf("--")===0,z=Sr(k,x[k],M);k==="float"&&(k="cssFloat"),M?y.setProperty(k,z):y[k]=z}}var Un=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(y,x){if(x){if(Un[y]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,y));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Ai(y,x){if(y.indexOf("-")===-1)return typeof x.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tr=null;function Lo(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Ji=null,Pi=null,Zi=null;function Qr(y){if(y=Ea(y)){if(typeof Ji!="function")throw Error(n(280));var x=y.stateNode;x&&(x=RS(x),Ji(y.stateNode,y.type,x))}}function $o(y){Pi?Zi?Zi.push(y):Zi=[y]:Pi=y}function oc(){if(Pi){var y=Pi,x=Zi;if(Zi=Pi=null,Qr(y),x)for(y=0;y<x.length;y++)Qr(x[y])}}function ba(y,x){return y(x)}function Ru(){}var Jr=!1;function ji(y,x,k){if(Jr)return y(x,k);Jr=!0;try{return ba(y,x,k)}finally{Jr=!1,(Pi!==null||Zi!==null)&&(Ru(),oc())}}function ai(y,x){var k=y.stateNode;if(k===null)return null;var M=RS(k);if(M===null)return null;k=M[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(y=y.type,M=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!M;break e;default:y=!1}if(y)return null;if(k&&typeof k!="function")throw Error(n(231,x,typeof k));return k}var Ws=!1;if(a)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Ws=!1}function es(y,x,k,M,z,K,se,be,Ce){var Xe=Array.prototype.slice.call(arguments,3);try{x.apply(k,Xe)}catch(Tt){this.onError(Tt)}}var Fo=!1,mo=null,Qo=!1,xl=null,Ph={onError:function(y){Fo=!0,mo=y}};function Pr(y,x,k,M,z,K,se,be,Ce){Fo=!1,mo=null,es.apply(Ph,arguments)}function ac(y,x,k,M,z,K,se,be,Ce){if(Pr.apply(this,arguments),Fo){if(Fo){var Xe=mo;Fo=!1,mo=null}else throw Error(n(198));Qo||(Qo=!0,xl=Xe)}}function ms(y){var x=y,k=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(k=x.return),y=x.return;while(y)}return x.tag===3?k:null}function Ka(y){if(y.tag===13){var x=y.memoizedState;if(x===null&&(y=y.alternate,y!==null&&(x=y.memoizedState)),x!==null)return x.dehydrated}return null}function Jo(y){if(ms(y)!==y)throw Error(n(188))}function mm(y){var x=y.alternate;if(!x){if(x=ms(y),x===null)throw Error(n(188));return x!==y?null:y}for(var k=y,M=x;;){var z=k.return;if(z===null)break;var K=z.alternate;if(K===null){if(M=z.return,M!==null){k=M;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===k)return Jo(z),y;if(K===M)return Jo(z),x;K=K.sibling}throw Error(n(188))}if(k.return!==M.return)k=z,M=K;else{for(var se=!1,be=z.child;be;){if(be===k){se=!0,k=z,M=K;break}if(be===M){se=!0,M=z,k=K;break}be=be.sibling}if(!se){for(be=K.child;be;){if(be===k){se=!0,k=K,M=z;break}if(be===M){se=!0,M=K,k=z;break}be=be.sibling}if(!se)throw Error(n(189))}}if(k.alternate!==M)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?y:x}function Oh(y){return y=mm(y),y!==null?_d(y):null}function _d(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=_d(y);if(x!==null)return x;y=y.sibling}return null}var wd=t.unstable_scheduleCallback,gf=t.unstable_cancelCallback,yf=t.unstable_shouldYield,vf=t.unstable_requestPaint,fr=t.unstable_now,Mh=t.unstable_getCurrentPriorityLevel,go=t.unstable_ImmediatePriority,_l=t.unstable_UserBlockingPriority,Gs=t.unstable_NormalPriority,uc=t.unstable_LowPriority,Lh=t.unstable_IdlePriority,lc=null,yo=null;function gm(y){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(lc,y,void 0,(y.current.flags&128)===128)}catch{}}var vo=Math.clz32?Math.clz32:ge,ue=Math.log,Te=Math.LN2;function ge(y){return y>>>=0,y===0?32:31-(ue(y)/Te|0)|0}var Ne=64,Be=4194304;function Re(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function rt(y,x){var k=y.pendingLanes;if(k===0)return 0;var M=0,z=y.suspendedLanes,K=y.pingedLanes,se=k&268435455;if(se!==0){var be=se&~z;be!==0?M=Re(be):(K&=se,K!==0&&(M=Re(K)))}else se=k&~z,se!==0?M=Re(se):K!==0&&(M=Re(K));if(M===0)return 0;if(x!==0&&x!==M&&!(x&z)&&(z=M&-M,K=x&-x,z>=K||z===16&&(K&4194240)!==0))return x;if(M&4&&(M|=k&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=M;0<x;)k=31-vo(x),z=1<<k,M|=y[k],x&=~z;return M}function bt(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(y,x){for(var k=y.suspendedLanes,M=y.pingedLanes,z=y.expirationTimes,K=y.pendingLanes;0<K;){var se=31-vo(K),be=1<<se,Ce=z[se];Ce===-1?(!(be&k)||be&M)&&(z[se]=bt(be,x)):Ce<=x&&(y.expiredLanes|=be),K&=~be}}function xt(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Dt(){var y=Ne;return Ne<<=1,!(Ne&4194240)&&(Ne=64),y}function qt(y){for(var x=[],k=0;31>k;k++)x.push(y);return x}function In(y,x,k){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-vo(x),y[x]=k}function un(y,x){var k=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var M=y.eventTimes;for(y=y.expirationTimes;0<k;){var z=31-vo(k),K=1<<z;x[z]=0,M[z]=-1,y[z]=-1,k&=~K}}function nr(y,x){var k=y.entangledLanes|=x;for(y=y.entanglements;k;){var M=31-vo(k),z=1<<M;z&x|y[M]&x&&(y[M]|=x),k&=~z}}var ln=0;function br(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Ys,Xa,cc,$h,bf,Fh=!1,Bo=[],gs=null,jo=null,Qa=null,xf=new Map,Ja=new Map,Du=[],V1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(y,x){switch(y){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":xf.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(x.pointerId)}}function Ss(y,x,k,M,z,K){return y===null||y.nativeEvent!==K?(y={blockedOn:x,domEventName:k,eventSystemFlags:M,nativeEvent:K,targetContainers:[z]},x!==null&&(x=Ea(x),x!==null&&Xa(x)),y):(y.eventSystemFlags|=M,x=y.targetContainers,z!==null&&x.indexOf(z)===-1&&x.push(z),y)}function Wx(y,x,k,M,z){switch(x){case"focusin":return gs=Ss(gs,y,x,k,M,z),!0;case"dragenter":return jo=Ss(jo,y,x,k,M,z),!0;case"mouseover":return Qa=Ss(Qa,y,x,k,M,z),!0;case"pointerover":var K=z.pointerId;return xf.set(K,Ss(xf.get(K)||null,y,x,k,M,z)),!0;case"gotpointercapture":return K=z.pointerId,Ja.set(K,Ss(Ja.get(K)||null,y,x,k,M,z)),!0}return!1}function Eg(y){var x=Id(y.target);if(x!==null){var k=ms(x);if(k!==null){if(x=k.tag,x===13){if(x=Ka(k),x!==null){y.blockedOn=x,bf(y.priority,function(){cc(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){y.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}y.blockedOn=null}function _f(y){if(y.blockedOn!==null)return!1;for(var x=y.targetContainers;0<x.length;){var k=kr(y.domEventName,y.eventSystemFlags,x[0],y.nativeEvent);if(k===null){k=y.nativeEvent;var M=new k.constructor(k.type,k);Tr=M,k.target.dispatchEvent(M),Tr=null}else return x=Ea(k),x!==null&&Xa(x),y.blockedOn=k,!1;x.shift()}return!0}function Ed(y,x,k){_f(y)&&k.delete(x)}function H1(){Fh=!1,gs!==null&&_f(gs)&&(gs=null),jo!==null&&_f(jo)&&(jo=null),Qa!==null&&_f(Qa)&&(Qa=null),xf.forEach(Ed),Ja.forEach(Ed)}function xr(y,x){y.blockedOn===x&&(y.blockedOn=null,Fh||(Fh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H1)))}function dr(y){function x(z){return xr(z,y)}if(0<Bo.length){xr(Bo[0],y);for(var k=1;k<Bo.length;k++){var M=Bo[k];M.blockedOn===y&&(M.blockedOn=null)}}for(gs!==null&&xr(gs,y),jo!==null&&xr(jo,y),Qa!==null&&xr(Qa,y),xf.forEach(x),Ja.forEach(x),k=0;k<Du.length;k++)M=Du[k],M.blockedOn===y&&(M.blockedOn=null);for(;0<Du.length&&(k=Du[0],k.blockedOn===null);)Eg(k),k.blockedOn===null&&Du.shift()}var wf=E.ReactCurrentBatchConfig,ve=!0;function Ae(y,x,k,M){var z=ln,K=wf.transition;wf.transition=null;try{ln=1,tn(y,x,k,M)}finally{ln=z,wf.transition=K}}function Qe(y,x,k,M){var z=ln,K=wf.transition;wf.transition=null;try{ln=4,tn(y,x,k,M)}finally{ln=z,wf.transition=K}}function tn(y,x,k,M){if(ve){var z=kr(y,x,k,M);if(z===null)GI(y,x,M,rr,k),fc(y,M);else if(Wx(z,y,x,k,M))M.stopPropagation();else if(fc(y,M),x&4&&-1<V1.indexOf(y)){for(;z!==null;){var K=Ea(z);if(K!==null&&Ys(K),K=kr(y,x,k,M),K===null&&GI(y,x,M,rr,k),K===z)break;z=K}z!==null&&M.stopPropagation()}else GI(y,x,M,null,k)}}var rr=null;function kr(y,x,k,M){if(rr=null,y=Lo(M),y=Id(y),y!==null)if(x=ms(y),x===null)y=null;else if(k=x.tag,k===13){if(y=Ka(x),y!==null)return y;y=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null);return rr=y,null}function di(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mh()){case go:return 1;case _l:return 4;case Gs:case uc:return 16;case Lh:return 536870912;default:return 16}default:return 16}}var cn=null,Br=null,Zr=null;function Ks(){if(Zr)return Zr;var y,x=Br,k=x.length,M,z="value"in cn?cn.value:cn.textContent,K=z.length;for(y=0;y<k&&x[y]===z[y];y++);var se=k-y;for(M=1;M<=se&&x[k-M]===z[K-M];M++);return Zr=z.slice(y,1<M?1-M:void 0)}function Nu(y){var x=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&x===13&&(y=13)):y=x,y===10&&(y=13),32<=y||y===13?y:0}function ts(){return!0}function Sd(){return!1}function Fs(y){function x(k,M,z,K,se){this._reactName=k,this._targetInst=z,this.type=M,this.nativeEvent=K,this.target=se,this.currentTarget=null;for(var be in y)y.hasOwnProperty(be)&&(k=y[be],this[be]=k?k(K):K[be]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?ts:Sd,this.isPropagationStopped=Sd,this}return q(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),x}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sg=Fs(dc),Ef=q({},dc,{view:0,detail:0}),pS=Fs(Ef),Uo,Bh,bo,Tg=q({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==bo&&(bo&&y.type==="mousemove"?(Uo=y.screenX-bo.screenX,Bh=y.screenY-bo.screenY):Bh=Uo=0,bo=y),Uo)},movementY:function(y){return"movementY"in y?y.movementY:Bh}}),Cg=Fs(Tg),hc=q({},Tg,{dataTransfer:0}),Ag=Fs(hc),ym=q({},Ef,{relatedTarget:0}),Ei=Fs(ym),Sf=q({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),Tf=Fs(Sf),mS=q({},dc,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),q1=Fs(mS),gS=q({},dc,{data:0}),Gx=Fs(gS),W1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jh(y){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(y):(y=Ig[y])?!!x[y]:!1}function Td(){return jh}var D=q({},Ef,{key:function(y){if(y.key){var x=W1[y.key]||y.key;if(x!=="Unidentified")return x}return y.type==="keypress"?(y=Nu(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?xa[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(y){return y.type==="keypress"?Nu(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?Nu(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),W=Fs(D),te=q({},Tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ce=Fs(te),ze=q({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),Ze=Fs(ze),Ut=q({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ui=Fs(Ut),xo=q({},Tg,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=Fs(xo),hi=[9,13,27,32],Ts=a&&"CompositionEvent"in window,_a=null;a&&"documentMode"in document&&(_a=document.documentMode);var Pu=a&&"TextEvent"in window&&!_a,vm=a&&(!Ts||_a&&8<_a&&11>=_a),G1=" ",PO=!1;function OO(y,x){switch(y){case"keyup":return hi.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MO(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var Y1=!1;function K1(y,x){switch(y){case"compositionend":return MO(x);case"keypress":return x.which!==32?null:(PO=!0,G1);case"textInput":return y=x.data,y===G1&&PO?null:y;default:return null}}function oU(y,x){if(Y1)return y==="compositionend"||!Ts&&OO(y,x)?(y=Ks(),Zr=Br=cn=null,Y1=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return vm&&x.locale!=="ko"?null:x.data;default:return null}}var aU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yS(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x==="input"?!!aU[y.type]:x==="textarea"}function VI(y,x,k,M){$o(M),x=CS(x,"onChange"),0<x.length&&(k=new Sg("onChange","change",null,k,M),y.push({event:k,listeners:x}))}var pc=null,bm=null;function uU(y){zO(y,0)}function vS(y){var x=ir(y);if(he(x))return y}function lU(y,x){if(y==="change")return x}var kg=!1;if(a){var wl;if(a){var bS="oninput"in document;if(!bS){var LO=document.createElement("div");LO.setAttribute("oninput","return;"),bS=typeof LO.oninput=="function"}wl=bS}else wl=!1;kg=wl&&(!document.documentMode||9<document.documentMode)}function $O(){pc&&(pc.detachEvent("onpropertychange",FO),bm=pc=null)}function FO(y){if(y.propertyName==="value"&&vS(bm)){var x=[];VI(x,bm,y,Lo(y)),ji(uU,x)}}function cU(y,x,k){y==="focusin"?($O(),pc=x,bm=k,pc.attachEvent("onpropertychange",FO)):y==="focusout"&&$O()}function fU(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return vS(bm)}function X1(y,x){if(y==="click")return vS(x)}function Fe(y,x){if(y==="input"||y==="change")return vS(x)}function st(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Ye=typeof Object.is=="function"?Object.is:st;function Kt(y,x){if(Ye(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var k=Object.keys(y),M=Object.keys(x);if(k.length!==M.length)return!1;for(M=0;M<k.length;M++){var z=k[M];if(!u.call(x,z)||!Ye(y[z],x[z]))return!1}return!0}function zn(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function ei(y,x){var k=zn(y);y=0;for(var M;k;){if(k.nodeType===3){if(M=y+k.textContent.length,y<=x&&M>=x)return{node:k,offset:x-y};y=M}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=zn(k)}}function Xs(y,x){return y&&x?y===x?!0:y&&y.nodeType===3?!1:x&&x.nodeType===3?Xs(y,x.parentNode):"contains"in y?y.contains(x):y.compareDocumentPosition?!!(y.compareDocumentPosition(x)&16):!1:!1}function Ii(){for(var y=window,x=$e();x instanceof y.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)y=x.contentWindow;else break;x=$e(y.document)}return x}function Yx(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x&&(x==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||x==="textarea"||y.contentEditable==="true")}function dU(y){var x=Ii(),k=y.focusedElem,M=y.selectionRange;if(x!==k&&k&&k.ownerDocument&&Xs(k.ownerDocument.documentElement,k)){if(M!==null&&Yx(k)){if(x=M.start,y=M.end,y===void 0&&(y=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(y,k.value.length);else if(y=(x=k.ownerDocument||document)&&x.defaultView||window,y.getSelection){y=y.getSelection();var z=k.textContent.length,K=Math.min(M.start,z);M=M.end===void 0?K:Math.min(M.end,z),!y.extend&&K>M&&(z=M,M=K,K=z),z=ei(k,K);var se=ei(k,M);z&&se&&(y.rangeCount!==1||y.anchorNode!==z.node||y.anchorOffset!==z.offset||y.focusNode!==se.node||y.focusOffset!==se.offset)&&(x=x.createRange(),x.setStart(z.node,z.offset),y.removeAllRanges(),K>M?(y.addRange(x),y.extend(se.node,se.offset)):(x.setEnd(se.node,se.offset),y.addRange(x)))}}for(x=[],y=k;y=y.parentNode;)y.nodeType===1&&x.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)y=x[k],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var mc=a&&"documentMode"in document&&11>=document.documentMode,Uh=null,HI=null,Cd=null,Q1=!1;function Kx(y,x,k){var M=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Q1||Uh==null||Uh!==$e(M)||(M=Uh,"selectionStart"in M&&Yx(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Cd&&Kt(Cd,M)||(Cd=M,M=CS(HI,"onSelect"),0<M.length&&(x=new Sg("onSelect","select",null,x,k),y.push({event:x,listeners:M}),x.target=Uh)))}function ti(y,x){var k={};return k[y.toLowerCase()]=x.toLowerCase(),k["Webkit"+y]="webkit"+x,k["Moz"+y]="moz"+x,k}var J1={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionend:ti("Transition","TransitionEnd")},xS={},Xx={};a&&(Xx=document.createElement("div").style,"AnimationEvent"in window||(delete J1.animationend.animation,delete J1.animationiteration.animation,delete J1.animationstart.animation),"TransitionEvent"in window||delete J1.transitionend.transition);function _S(y){if(xS[y])return xS[y];if(!J1[y])return y;var x=J1[y],k;for(k in x)if(x.hasOwnProperty(k)&&k in Xx)return xS[y]=x[k];return y}var BO=_S("animationend"),jO=_S("animationiteration"),Qx=_S("animationstart"),zh=_S("transitionend"),Jx=new Map,qI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cf(y,x){Jx.set(y,x),s(x,[y])}for(var wS=0;wS<qI.length;wS++){var ES=qI[wS],SS=ES.toLowerCase(),UO=ES[0].toUpperCase()+ES.slice(1);Cf(SS,"on"+UO)}Cf(BO,"onAnimationEnd"),Cf(jO,"onAnimationIteration"),Cf(Qx,"onAnimationStart"),Cf("dblclick","onDoubleClick"),Cf("focusin","onFocus"),Cf("focusout","onBlur"),Cf(zh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vh));function Zx(y,x,k){var M=y.type||"unknown-event";y.currentTarget=k,ac(M,x,void 0,y),y.currentTarget=null}function zO(y,x){x=(x&4)!==0;for(var k=0;k<y.length;k++){var M=y[k],z=M.event;M=M.listeners;e:{var K=void 0;if(x)for(var se=M.length-1;0<=se;se--){var be=M[se],Ce=be.instance,Xe=be.currentTarget;if(be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Zx(z,be,Xe),K=Ce}else for(se=0;se<M.length;se++){if(be=M[se],Ce=be.instance,Xe=be.currentTarget,be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Zx(z,be,Xe),K=Ce}}}if(Qo)throw y=xl,Qo=!1,xl=null,y}function ns(y,x){var k=x[kS];k===void 0&&(k=x[kS]=new Set);var M=y+"__bubble";k.has(M)||(TS(x,y,2,!1),k.add(M))}function WI(y,x,k){var M=0;x&&(M|=4),TS(k,y,M,x)}var Dg="_reactListening"+Math.random().toString(36).slice(2);function xm(y){if(!y[Dg]){y[Dg]=!0,r.forEach(function(k){k!=="selectionchange"&&(Rg.has(k)||WI(k,!1,y),WI(k,!0,y))});var x=y.nodeType===9?y:y.ownerDocument;x===null||x[Dg]||(x[Dg]=!0,WI("selectionchange",!1,x))}}function TS(y,x,k,M){switch(di(x)){case 1:var z=Ae;break;case 4:z=Qe;break;default:z=tn}k=z.bind(null,x,k,y),z=void 0,!Ws||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(z=!0),M?z!==void 0?y.addEventListener(x,k,{capture:!0,passive:z}):y.addEventListener(x,k,!0):z!==void 0?y.addEventListener(x,k,{passive:z}):y.addEventListener(x,k,!1)}function GI(y,x,k,M,z){var K=M;if(!(x&1)&&!(x&2)&&M!==null)e:for(;;){if(M===null)return;var se=M.tag;if(se===3||se===4){var be=M.stateNode.containerInfo;if(be===z||be.nodeType===8&&be.parentNode===z)break;if(se===4)for(se=M.return;se!==null;){var Ce=se.tag;if((Ce===3||Ce===4)&&(Ce=se.stateNode.containerInfo,Ce===z||Ce.nodeType===8&&Ce.parentNode===z))return;se=se.return}for(;be!==null;){if(se=Id(be),se===null)return;if(Ce=se.tag,Ce===5||Ce===6){M=K=se;continue e}be=be.parentNode}}M=M.return}ji(function(){var Xe=K,Tt=Lo(k),kt=[];e:{var _t=Jx.get(y);if(_t!==void 0){var Xt=Sg,rn=y;switch(y){case"keypress":if(Nu(k)===0)break e;case"keydown":case"keyup":Xt=W;break;case"focusin":rn="focus",Xt=Ei;break;case"focusout":rn="blur",Xt=Ei;break;case"beforeblur":case"afterblur":Xt=Ei;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Ze;break;case BO:case jO:case Qx:Xt=Tf;break;case zh:Xt=ui;break;case"scroll":Xt=pS;break;case"wheel":Xt=Rr;break;case"copy":case"cut":case"paste":Xt=q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=ce}var sn=(x&4)!==0,As=!sn&&y==="scroll",Ve=sn?_t!==null?_t+"Capture":null:_t;sn=[];for(var Pe=Xe,We;Pe!==null;){We=Pe;var Mt=We.stateNode;if(We.tag===5&&Mt!==null&&(We=Mt,Ve!==null&&(Mt=ai(Pe,Ve),Mt!=null&&sn.push(Z1(Pe,Mt,We)))),As)break;Pe=Pe.return}0<sn.length&&(_t=new Xt(_t,rn,null,k,Tt),kt.push({event:_t,listeners:sn}))}}if(!(x&7)){e:{if(_t=y==="mouseover"||y==="pointerover",Xt=y==="mouseout"||y==="pointerout",_t&&k!==Tr&&(rn=k.relatedTarget||k.fromElement)&&(Id(rn)||rn[El]))break e;if((Xt||_t)&&(_t=Tt.window===Tt?Tt:(_t=Tt.ownerDocument)?_t.defaultView||_t.parentWindow:window,Xt?(rn=k.relatedTarget||k.toElement,Xt=Xe,rn=rn?Id(rn):null,rn!==null&&(As=ms(rn),rn!==As||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Xt=null,rn=Xe),Xt!==rn)){if(sn=Cg,Mt="onMouseLeave",Ve="onMouseEnter",Pe="mouse",(y==="pointerout"||y==="pointerover")&&(sn=ce,Mt="onPointerLeave",Ve="onPointerEnter",Pe="pointer"),As=Xt==null?_t:ir(Xt),We=rn==null?_t:ir(rn),_t=new sn(Mt,Pe+"leave",Xt,k,Tt),_t.target=As,_t.relatedTarget=We,Mt=null,Id(Tt)===Xe&&(sn=new sn(Ve,Pe+"enter",rn,k,Tt),sn.target=We,sn.relatedTarget=As,Mt=sn),As=Mt,Xt&&rn)t:{for(sn=Xt,Ve=rn,Pe=0,We=sn;We;We=ev(We))Pe++;for(We=0,Mt=Ve;Mt;Mt=ev(Mt))We++;for(;0<Pe-We;)sn=ev(sn),Pe--;for(;0<We-Pe;)Ve=ev(Ve),We--;for(;Pe--;){if(sn===Ve||Ve!==null&&sn===Ve.alternate)break t;sn=ev(sn),Ve=ev(Ve)}sn=null}else sn=null;Xt!==null&&Qs(kt,_t,Xt,sn,!1),rn!==null&&As!==null&&Qs(kt,As,rn,sn,!0)}}e:{if(_t=Xe?ir(Xe):window,Xt=_t.nodeName&&_t.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&_t.type==="file")var on=lU;else if(yS(_t))if(kg)on=Fe;else{on=fU;var _n=cU}else(Xt=_t.nodeName)&&Xt.toLowerCase()==="input"&&(_t.type==="checkbox"||_t.type==="radio")&&(on=X1);if(on&&(on=on(y,Xe))){VI(kt,on,k,Tt);break e}_n&&_n(y,_t,Xe),y==="focusout"&&(_n=_t._wrapperState)&&_n.controlled&&_t.type==="number"&&at(_t,"number",_t.value)}switch(_n=Xe?ir(Xe):window,y){case"focusin":(yS(_n)||_n.contentEditable==="true")&&(Uh=_n,HI=Xe,Cd=null);break;case"focusout":Cd=HI=Uh=null;break;case"mousedown":Q1=!0;break;case"contextmenu":case"mouseup":case"dragend":Q1=!1,Kx(kt,k,Tt);break;case"selectionchange":if(mc)break;case"keydown":case"keyup":Kx(kt,k,Tt)}var wn;if(Ts)e:{switch(y){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Y1?OO(y,k)&&(kn="onCompositionEnd"):y==="keydown"&&k.keyCode===229&&(kn="onCompositionStart");kn&&(vm&&k.locale!=="ko"&&(Y1||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Y1&&(wn=Ks()):(cn=Tt,Br="value"in cn?cn.value:cn.textContent,Y1=!0)),_n=CS(Xe,kn),0<_n.length&&(kn=new Gx(kn,y,null,k,Tt),kt.push({event:kn,listeners:_n}),wn?kn.data=wn:(wn=MO(k),wn!==null&&(kn.data=wn)))),(wn=Pu?K1(y,k):oU(y,k))&&(Xe=CS(Xe,"onBeforeInput"),0<Xe.length&&(Tt=new Gx("onBeforeInput","beforeinput",null,k,Tt),kt.push({event:Tt,listeners:Xe}),Tt.data=wn))}zO(kt,x)})}function Z1(y,x,k){return{instance:y,listener:x,currentTarget:k}}function CS(y,x){for(var k=x+"Capture",M=[];y!==null;){var z=y,K=z.stateNode;z.tag===5&&K!==null&&(z=K,K=ai(y,k),K!=null&&M.unshift(Z1(y,K,z)),K=ai(y,x),K!=null&&M.push(Z1(y,K,z))),y=y.return}return M}function ev(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function Qs(y,x,k,M,z){for(var K=x._reactName,se=[];k!==null&&k!==M;){var be=k,Ce=be.alternate,Xe=be.stateNode;if(Ce!==null&&Ce===M)break;be.tag===5&&Xe!==null&&(be=Xe,z?(Ce=ai(k,K),Ce!=null&&se.unshift(Z1(k,Ce,be))):z||(Ce=ai(k,K),Ce!=null&&se.push(Z1(k,Ce,be)))),k=k.return}se.length!==0&&y.push({event:x,listeners:se})}var wa=/\r\n?/g,hU=/\u0000|\uFFFD/g;function VO(y){return(typeof y=="string"?y:""+y).replace(wa,`
`).replace(hU,"")}function e_(y,x,k){if(x=VO(x),VO(y)!==x&&k)throw Error(n(425))}function AS(){}var t_=null,Ng=null;function n_(y,x){return y==="textarea"||y==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,r_=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,IS=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(y){return tv.resolve(null).then(y).catch(nv)}:_m;function nv(y){setTimeout(function(){throw y})}function YI(y,x){var k=x,M=0;do{var z=k.nextSibling;if(y.removeChild(k),z&&z.nodeType===8)if(k=z.data,k==="/$"){if(M===0){y.removeChild(z),dr(x);return}M--}else k!=="$"&&k!=="$?"&&k!=="$!"||M++;k=z}while(k);dr(x)}function wm(y){for(;y!=null;y=y.nextSibling){var x=y.nodeType;if(x===1||x===3)break;if(x===8){if(x=y.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return y}function HO(y){y=y.previousSibling;for(var x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return y;x--}else k==="/$"&&x++}y=y.previousSibling}return null}var rv=Math.random().toString(36).slice(2),Ad="__reactFiber$"+rv,Em="__reactProps$"+rv,El="__reactContainer$"+rv,kS="__reactEvents$"+rv,oe="__reactListeners$"+rv,iv="__reactHandles$"+rv;function Id(y){var x=y[Ad];if(x)return x;for(var k=y.parentNode;k;){if(x=k[El]||k[Ad]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(y=HO(y);y!==null;){if(k=y[Ad])return k;y=HO(y)}return x}y=k,k=y.parentNode}return null}function Ea(y){return y=y[Ad]||y[El],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function ir(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(n(33))}function RS(y){return y[Em]||null}var KI=[],sv=-1;function Ou(y){return{current:y}}function rs(y){0>sv||(y.current=KI[sv],KI[sv]=null,sv--)}function Ui(y,x){sv++,KI[sv]=y.current,y.current=x}var Sm={},Sa=Ou(Sm),Mu=Ou(!1),Za=Sm;function ov(y,x){var k=y.type.contextTypes;if(!k)return Sm;var M=y.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===x)return M.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in k)z[K]=x[K];return M&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=z),z}function Lu(y){return y=y.childContextTypes,y!=null}function DS(){rs(Mu),rs(Sa)}function qO(y,x,k){if(Sa.current!==Sm)throw Error(n(168));Ui(Sa,x),Ui(Mu,k)}function WO(y,x,k){var M=y.stateNode;if(x=x.childContextTypes,typeof M.getChildContext!="function")return k;M=M.getChildContext();for(var z in M)if(!(z in x))throw Error(n(108,_e(y)||"Unknown",z));return q({},k,M)}function gc(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||Sm,Za=Sa.current,Ui(Sa,y),Ui(Mu,Mu.current),!0}function GO(y,x,k){var M=y.stateNode;if(!M)throw Error(n(169));k?(y=WO(y,x,Za),M.__reactInternalMemoizedMergedChildContext=y,rs(Mu),rs(Sa),Ui(Sa,y)):rs(Mu),Ui(Mu,k)}var Hh=null,NS=!1,XI=!1;function YO(y){Hh===null?Hh=[y]:Hh.push(y)}function Pg(y){NS=!0,YO(y)}function Tm(){if(!XI&&Hh!==null){XI=!0;var y=0,x=ln;try{var k=Hh;for(ln=1;y<k.length;y++){var M=k[y];do M=M(!0);while(M!==null)}Hh=null,NS=!1}catch(z){throw Hh!==null&&(Hh=Hh.slice(y+1)),wd(go,Tm),z}finally{ln=x,XI=!1}}return null}var av=[],Ta=0,PS=null,OS=0,yc=[],vc=0,Og=null,kd=1,Rd="";function Mg(y,x){av[Ta++]=OS,av[Ta++]=PS,PS=y,OS=x}function KO(y,x,k){yc[vc++]=kd,yc[vc++]=Rd,yc[vc++]=Og,Og=y;var M=kd;y=Rd;var z=32-vo(M)-1;M&=~(1<<z),k+=1;var K=32-vo(x)+z;if(30<K){var se=z-z%5;K=(M&(1<<se)-1).toString(32),M>>=se,z-=se,kd=1<<32-vo(x)+z|k<<z|M,Rd=K+y}else kd=1<<K|k<<z|M,Rd=y}function i_(y){y.return!==null&&(Mg(y,1),KO(y,1,0))}function Lg(y){for(;y===PS;)PS=av[--Ta],av[Ta]=null,OS=av[--Ta],av[Ta]=null;for(;y===Og;)Og=yc[--vc],yc[vc]=null,Rd=yc[--vc],yc[vc]=null,kd=yc[--vc],yc[vc]=null}var Ca=null,Sl=null,is=!1,Af=null;function Dd(y,x){var k=Tc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=y,x=y.deletions,x===null?(y.deletions=[k],y.flags|=16):x.push(k)}function MS(y,x){switch(y.tag){case 5:var k=y.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(y.stateNode=x,Ca=y,Sl=wm(x.firstChild),!0):!1;case 6:return x=y.pendingProps===""||x.nodeType!==3?null:x,x!==null?(y.stateNode=x,Ca=y,Sl=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Og!==null?{id:kd,overflow:Rd}:null,y.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Tc(18,null,null,0),k.stateNode=x,k.return=y,y.child=k,Ca=y,Sl=null,!0):!1;default:return!1}}function qh(y){return(y.mode&1)!==0&&(y.flags&128)===0}function $u(y){if(is){var x=Sl;if(x){var k=x;if(!MS(y,x)){if(qh(y))throw Error(n(418));x=wm(k.nextSibling);var M=Ca;x&&MS(y,x)?Dd(M,k):(y.flags=y.flags&-4097|2,is=!1,Ca=y)}}else{if(qh(y))throw Error(n(418));y.flags=y.flags&-4097|2,is=!1,Ca=y}}}function XO(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Ca=y}function s_(y){if(y!==Ca)return!1;if(!is)return XO(y),is=!0,!1;var x;if((x=y.tag!==3)&&!(x=y.tag!==5)&&(x=y.type,x=x!=="head"&&x!=="body"&&!n_(y.type,y.memoizedProps)),x&&(x=Sl)){if(qh(y))throw QI(),Error(n(418));for(;x;)Dd(y,x),x=wm(x.nextSibling)}if(XO(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));e:{for(y=y.nextSibling,x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="/$"){if(x===0){Sl=wm(y.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}y=y.nextSibling}Sl=null}}else Sl=Ca?wm(y.stateNode.nextSibling):null;return!0}function QI(){for(var y=Sl;y;)y=wm(y.nextSibling)}function Nd(){Sl=Ca=null,is=!1}function Pd(y){Af===null?Af=[y]:Af.push(y)}var QO=E.ReactCurrentBatchConfig;function o_(y,x,k){if(y=k.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(n(309));var M=k.stateNode}if(!M)throw Error(n(147,y));var z=M,K=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===K?x.ref:(x=function(se){var be=z.refs;se===null?delete be[K]:be[K]=se},x._stringRef=K,x)}if(typeof y!="string")throw Error(n(284));if(!k._owner)throw Error(n(290,y))}return y}function $g(y,x){throw y=Object.prototype.toString.call(x),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function JO(y){var x=y._init;return x(y._payload)}function JI(y){function x(Ve,Pe){if(y){var We=Ve.deletions;We===null?(Ve.deletions=[Pe],Ve.flags|=16):We.push(Pe)}}function k(Ve,Pe){if(!y)return null;for(;Pe!==null;)x(Ve,Pe),Pe=Pe.sibling;return null}function M(Ve,Pe){for(Ve=new Map;Pe!==null;)Pe.key!==null?Ve.set(Pe.key,Pe):Ve.set(Pe.index,Pe),Pe=Pe.sibling;return Ve}function z(Ve,Pe){return Ve=Of(Ve,Pe),Ve.index=0,Ve.sibling=null,Ve}function K(Ve,Pe,We){return Ve.index=We,y?(We=Ve.alternate,We!==null?(We=We.index,We<Pe?(Ve.flags|=2,Pe):We):(Ve.flags|=2,Pe)):(Ve.flags|=1048576,Pe)}function se(Ve){return y&&Ve.alternate===null&&(Ve.flags|=2),Ve}function be(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==6?(Pe=Fk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function Ce(Ve,Pe,We,Mt){var on=We.type;return on===I?Tt(Ve,Pe,We.props.children,Mt,We.key):Pe!==null&&(Pe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&JO(on)===Pe.type)?(Mt=z(Pe,We.props),Mt.ref=o_(Ve,Pe,We),Mt.return=Ve,Mt):(Mt=gT(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=o_(Ve,Pe,We),Mt.return=Ve,Mt)}function Xe(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==We.containerInfo||Pe.stateNode.implementation!==We.implementation?(Pe=Bk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We.children||[]),Pe.return=Ve,Pe)}function Tt(Ve,Pe,We,Mt,on){return Pe===null||Pe.tag!==7?(Pe=Yg(We,Ve.mode,Mt,on),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function kt(Ve,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=Fk(""+Pe,Ve.mode,We),Pe.return=Ve,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case T:return We=gT(Pe.type,Pe.key,Pe.props,null,Ve.mode,We),We.ref=o_(Ve,null,Pe),We.return=Ve,We;case C:return Pe=Bk(Pe,Ve.mode,We),Pe.return=Ve,Pe;case J:var Mt=Pe._init;return kt(Ve,Mt(Pe._payload),We)}if(yt(Pe)||ie(Pe))return Pe=Yg(Pe,Ve.mode,We,null),Pe.return=Ve,Pe;$g(Ve,Pe)}return null}function _t(Ve,Pe,We,Mt){var on=Pe!==null?Pe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return on!==null?null:be(Ve,Pe,""+We,Mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case T:return We.key===on?Ce(Ve,Pe,We,Mt):null;case C:return We.key===on?Xe(Ve,Pe,We,Mt):null;case J:return on=We._init,_t(Ve,Pe,on(We._payload),Mt)}if(yt(We)||ie(We))return on!==null?null:Tt(Ve,Pe,We,Mt,null);$g(Ve,We)}return null}function Xt(Ve,Pe,We,Mt,on){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Ve=Ve.get(We)||null,be(Pe,Ve,""+Mt,on);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case T:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Ce(Pe,Ve,Mt,on);case C:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Xe(Pe,Ve,Mt,on);case J:var _n=Mt._init;return Xt(Ve,Pe,We,_n(Mt._payload),on)}if(yt(Mt)||ie(Mt))return Ve=Ve.get(We)||null,Tt(Pe,Ve,Mt,on,null);$g(Pe,Mt)}return null}function rn(Ve,Pe,We,Mt){for(var on=null,_n=null,wn=Pe,kn=Pe=0,Eo=null;wn!==null&&kn<We.length;kn++){wn.index>kn?(Eo=wn,wn=null):Eo=wn.sibling;var ni=_t(Ve,wn,We[kn],Mt);if(ni===null){wn===null&&(wn=Eo);break}y&&wn&&ni.alternate===null&&x(Ve,wn),Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni,wn=Eo}if(kn===We.length)return k(Ve,wn),is&&Mg(Ve,kn),on;if(wn===null){for(;kn<We.length;kn++)wn=kt(Ve,We[kn],Mt),wn!==null&&(Pe=K(wn,Pe,kn),_n===null?on=wn:_n.sibling=wn,_n=wn);return is&&Mg(Ve,kn),on}for(wn=M(Ve,wn);kn<We.length;kn++)Eo=Xt(wn,Ve,kn,We[kn],Mt),Eo!==null&&(y&&Eo.alternate!==null&&wn.delete(Eo.key===null?kn:Eo.key),Pe=K(Eo,Pe,kn),_n===null?on=Eo:_n.sibling=Eo,_n=Eo);return y&&wn.forEach(function($m){return x(Ve,$m)}),is&&Mg(Ve,kn),on}function sn(Ve,Pe,We,Mt){var on=ie(We);if(typeof on!="function")throw Error(n(150));if(We=on.call(We),We==null)throw Error(n(151));for(var _n=on=null,wn=Pe,kn=Pe=0,Eo=null,ni=We.next();wn!==null&&!ni.done;kn++,ni=We.next()){wn.index>kn?(Eo=wn,wn=null):Eo=wn.sibling;var $m=_t(Ve,wn,ni.value,Mt);if($m===null){wn===null&&(wn=Eo);break}y&&wn&&$m.alternate===null&&x(Ve,wn),Pe=K($m,Pe,kn),_n===null?on=$m:_n.sibling=$m,_n=$m,wn=Eo}if(ni.done)return k(Ve,wn),is&&Mg(Ve,kn),on;if(wn===null){for(;!ni.done;kn++,ni=We.next())ni=kt(Ve,ni.value,Mt),ni!==null&&(Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni);return is&&Mg(Ve,kn),on}for(wn=M(Ve,wn);!ni.done;kn++,ni=We.next())ni=Xt(wn,Ve,kn,ni.value,Mt),ni!==null&&(y&&ni.alternate!==null&&wn.delete(ni.key===null?kn:ni.key),Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni);return y&&wn.forEach(function(NU){return x(Ve,NU)}),is&&Mg(Ve,kn),on}function As(Ve,Pe,We,Mt){if(typeof We=="object"&&We!==null&&We.type===I&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case T:e:{for(var on=We.key,_n=Pe;_n!==null;){if(_n.key===on){if(on=We.type,on===I){if(_n.tag===7){k(Ve,_n.sibling),Pe=z(_n,We.props.children),Pe.return=Ve,Ve=Pe;break e}}else if(_n.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&JO(on)===_n.type){k(Ve,_n.sibling),Pe=z(_n,We.props),Pe.ref=o_(Ve,_n,We),Pe.return=Ve,Ve=Pe;break e}k(Ve,_n);break}else x(Ve,_n);_n=_n.sibling}We.type===I?(Pe=Yg(We.props.children,Ve.mode,Mt,We.key),Pe.return=Ve,Ve=Pe):(Mt=gT(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=o_(Ve,Pe,We),Mt.return=Ve,Ve=Mt)}return se(Ve);case C:e:{for(_n=We.key;Pe!==null;){if(Pe.key===_n)if(Pe.tag===4&&Pe.stateNode.containerInfo===We.containerInfo&&Pe.stateNode.implementation===We.implementation){k(Ve,Pe.sibling),Pe=z(Pe,We.children||[]),Pe.return=Ve,Ve=Pe;break e}else{k(Ve,Pe);break}else x(Ve,Pe);Pe=Pe.sibling}Pe=Bk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe}return se(Ve);case J:return _n=We._init,As(Ve,Pe,_n(We._payload),Mt)}if(yt(We))return rn(Ve,Pe,We,Mt);if(ie(We))return sn(Ve,Pe,We,Mt);$g(Ve,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Pe!==null&&Pe.tag===6?(k(Ve,Pe.sibling),Pe=z(Pe,We),Pe.return=Ve,Ve=Pe):(k(Ve,Pe),Pe=Fk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe),se(Ve)):k(Ve,Pe)}return As}var Cs=JI(!0),LS=JI(!1),a_=Ou(null),Tl=null,Cm=null,uv=null;function Wh(){uv=Cm=Tl=null}function $S(y){var x=a_.current;rs(a_),y._currentValue=x}function Zo(y,x,k){for(;y!==null;){var M=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,M!==null&&(M.childLanes|=x)):M!==null&&(M.childLanes&x)!==x&&(M.childLanes|=x),y===k)break;y=y.return}}function Am(y,x){Tl=y,uv=Cm=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(tu=!0),y.firstContext=null)}function bc(y){var x=y._currentValue;if(uv!==y)if(y={context:y,memoizedValue:x,next:null},Cm===null){if(Tl===null)throw Error(n(308));Cm=y,Tl.dependencies={lanes:0,firstContext:y}}else Cm=Cm.next=y;return x}var Fg=null;function ZI(y){Fg===null?Fg=[y]:Fg.push(y)}function FS(y,x,k,M){var z=x.interleaved;return z===null?(k.next=k,ZI(x)):(k.next=z.next,z.next=k),x.interleaved=k,Gh(y,M)}function Gh(y,x){y.lanes|=x;var k=y.alternate;for(k!==null&&(k.lanes|=x),k=y,y=y.return;y!==null;)y.childLanes|=x,k=y.alternate,k!==null&&(k.childLanes|=x),k=y,y=y.return;return k.tag===3?k.stateNode:null}var xc=!1;function BS(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZO(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Yh(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function _c(y,x,k){var M=y.updateQueue;if(M===null)return null;if(M=M.shared,jr&2){var z=M.pending;return z===null?x.next=x:(x.next=z.next,z.next=x),M.pending=x,Gh(y,k)}return z=M.interleaved,z===null?(x.next=x,ZI(M)):(x.next=z.next,z.next=x),M.interleaved=x,Gh(y,k)}function jS(y,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var M=x.lanes;M&=y.pendingLanes,k|=M,x.lanes=k,nr(y,k)}}function e4(y,x){var k=y.updateQueue,M=y.alternate;if(M!==null&&(M=M.updateQueue,k===M)){var z=null,K=null;if(k=k.firstBaseUpdate,k!==null){do{var se={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};K===null?z=K=se:K=K.next=se,k=k.next}while(k!==null);K===null?z=K=x:K=K.next=x}else z=K=x;k={baseState:M.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:M.shared,effects:M.effects},y.updateQueue=k;return}y=k.lastBaseUpdate,y===null?k.firstBaseUpdate=x:y.next=x,k.lastBaseUpdate=x}function lv(y,x,k,M){var z=y.updateQueue;xc=!1;var K=z.firstBaseUpdate,se=z.lastBaseUpdate,be=z.shared.pending;if(be!==null){z.shared.pending=null;var Ce=be,Xe=Ce.next;Ce.next=null,se===null?K=Xe:se.next=Xe,se=Ce;var Tt=y.alternate;Tt!==null&&(Tt=Tt.updateQueue,be=Tt.lastBaseUpdate,be!==se&&(be===null?Tt.firstBaseUpdate=Xe:be.next=Xe,Tt.lastBaseUpdate=Ce))}if(K!==null){var kt=z.baseState;se=0,Tt=Xe=Ce=null,be=K;do{var _t=be.lane,Xt=be.eventTime;if((M&_t)===_t){Tt!==null&&(Tt=Tt.next={eventTime:Xt,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var rn=y,sn=be;switch(_t=x,Xt=k,sn.tag){case 1:if(rn=sn.payload,typeof rn=="function"){kt=rn.call(Xt,kt,_t);break e}kt=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=sn.payload,_t=typeof rn=="function"?rn.call(Xt,kt,_t):rn,_t==null)break e;kt=q({},kt,_t);break e;case 2:xc=!0}}be.callback!==null&&be.lane!==0&&(y.flags|=64,_t=z.effects,_t===null?z.effects=[be]:_t.push(be))}else Xt={eventTime:Xt,lane:_t,tag:be.tag,payload:be.payload,callback:be.callback,next:null},Tt===null?(Xe=Tt=Xt,Ce=kt):Tt=Tt.next=Xt,se|=_t;if(be=be.next,be===null){if(be=z.shared.pending,be===null)break;_t=be,be=_t.next,_t.next=null,z.lastBaseUpdate=_t,z.shared.pending=null}}while(!0);if(Tt===null&&(Ce=kt),z.baseState=Ce,z.firstBaseUpdate=Xe,z.lastBaseUpdate=Tt,x=z.shared.interleaved,x!==null){z=x;do se|=z.lane,z=z.next;while(z!==x)}else K===null&&(z.shared.lanes=0);Nm|=se,y.lanes=se,y.memoizedState=kt}}function ek(y,x,k){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var M=y[x],z=M.callback;if(z!==null){if(M.callback=null,M=k,typeof z!="function")throw Error(n(191,z));z.call(M)}}}var u_={},Od=Ou(u_),l_=Ou(u_),cv=Ou(u_);function Kh(y){if(y===u_)throw Error(n(174));return y}function tk(y,x){switch(Ui(cv,x),Ui(l_,y),Ui(Od,u_),y=x.nodeType,y){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Oe(null,"");break;default:y=y===8?x.parentNode:x,x=y.namespaceURI||null,y=y.tagName,x=Oe(x,y)}rs(Od),Ui(Od,x)}function Im(){rs(Od),rs(l_),rs(cv)}function nk(y){Kh(cv.current);var x=Kh(Od.current),k=Oe(x,y.type);x!==k&&(Ui(l_,y),Ui(Od,k))}function US(y){l_.current===y&&(rs(Od),rs(l_))}var us=Ou(0);function Bg(y){for(var x=y;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var rk=[];function zS(){for(var y=0;y<rk.length;y++)rk[y]._workInProgressVersionPrimary=null;rk.length=0}var c_=E.ReactCurrentDispatcher,ik=E.ReactCurrentBatchConfig,km=0,ys=null,Bs=null,_o=null,fv=!1,f_=!1,jg=0,hr=0;function Aa(){throw Error(n(321))}function sk(y,x){if(x===null)return!1;for(var k=0;k<x.length&&k<y.length;k++)if(!Ye(y[k],x[k]))return!1;return!0}function Ug(y,x,k,M,z,K){if(km=K,ys=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,c_.current=y===null||y.memoizedState===null?mU:KS,y=k(M,z),f_){K=0;do{if(f_=!1,jg=0,25<=K)throw Error(n(301));K+=1,_o=Bs=null,x.updateQueue=null,c_.current=mv,y=k(M,z)}while(f_)}if(c_.current=YS,x=Bs!==null&&Bs.next!==null,km=0,_o=Bs=ys=null,fv=!1,x)throw Error(n(300));return y}function VS(){var y=jg!==0;return jg=0,y}function Md(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _o===null?ys.memoizedState=_o=y:_o=_o.next=y,_o}function wc(){if(Bs===null){var y=ys.alternate;y=y!==null?y.memoizedState:null}else y=Bs.next;var x=_o===null?ys.memoizedState:_o.next;if(x!==null)_o=x,Bs=y;else{if(y===null)throw Error(n(310));Bs=y,y={memoizedState:Bs.memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},_o===null?ys.memoizedState=_o=y:_o=_o.next=y}return _o}function Ia(y,x){return typeof x=="function"?x(y):x}function ok(y){var x=wc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var M=Bs,z=M.baseQueue,K=k.pending;if(K!==null){if(z!==null){var se=z.next;z.next=K.next,K.next=se}M.baseQueue=z=K,k.pending=null}if(z!==null){K=z.next,M=M.baseState;var be=se=null,Ce=null,Xe=K;do{var Tt=Xe.lane;if((km&Tt)===Tt)Ce!==null&&(Ce=Ce.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),M=Xe.hasEagerState?Xe.eagerState:y(M,Xe.action);else{var kt={lane:Tt,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Ce===null?(be=Ce=kt,se=M):Ce=Ce.next=kt,ys.lanes|=Tt,Nm|=Tt}Xe=Xe.next}while(Xe!==null&&Xe!==K);Ce===null?se=M:Ce.next=be,Ye(M,x.memoizedState)||(tu=!0),x.memoizedState=M,x.baseState=se,x.baseQueue=Ce,k.lastRenderedState=M}if(y=k.interleaved,y!==null){z=y;do K=z.lane,ys.lanes|=K,Nm|=K,z=z.next;while(z!==y)}else z===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function dv(y){var x=wc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var M=k.dispatch,z=k.pending,K=x.memoizedState;if(z!==null){k.pending=null;var se=z=z.next;do K=y(K,se.action),se=se.next;while(se!==z);Ye(K,x.memoizedState)||(tu=!0),x.memoizedState=K,x.baseQueue===null&&(x.baseState=K),k.lastRenderedState=K}return[K,M]}function HS(){}function ak(y,x){var k=ys,M=wc(),z=x(),K=!Ye(M.memoizedState,z);if(K&&(M.memoizedState=z,tu=!0),M=M.queue,Ld(Xh.bind(null,k,M,y),[y]),M.getSnapshot!==x||K||_o!==null&&_o.memoizedState.tag&1){if(k.flags|=2048,hv(9,Fu.bind(null,k,M,z,x),void 0,null),Vo===null)throw Error(n(349));km&30||uk(k,x,z)}return z}function uk(y,x,k){y.flags|=16384,y={getSnapshot:x,value:k},x=ys.updateQueue,x===null?(x={lastEffect:null,stores:null},ys.updateQueue=x,x.stores=[y]):(k=x.stores,k===null?x.stores=[y]:k.push(y))}function Fu(y,x,k,M){x.value=k,x.getSnapshot=M,qS(x)&&lk(y)}function Xh(y,x,k){return k(function(){qS(x)&&lk(y)})}function qS(y){var x=y.getSnapshot;y=y.value;try{var k=x();return!Ye(y,k)}catch{return!0}}function lk(y){var x=Gh(y,1);x!==null&&Pf(x,y,1,-1)}function d_(y){var x=Md();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:y},x.queue=y,y=y.dispatch=o4.bind(null,ys,y),[x.memoizedState,y]}function hv(y,x,k,M){return y={tag:y,create:x,destroy:k,deps:M,next:null},x=ys.updateQueue,x===null?(x={lastEffect:null,stores:null},ys.updateQueue=x,x.lastEffect=y.next=y):(k=x.lastEffect,k===null?x.lastEffect=y.next=y:(M=k.next,k.next=y,y.next=M,x.lastEffect=y)),y}function WS(){return wc().memoizedState}function h_(y,x,k,M){var z=Md();ys.flags|=y,z.memoizedState=hv(1|x,k,void 0,M===void 0?null:M)}function pv(y,x,k,M){var z=wc();M=M===void 0?null:M;var K=void 0;if(Bs!==null){var se=Bs.memoizedState;if(K=se.destroy,M!==null&&sk(M,se.deps)){z.memoizedState=hv(x,k,K,M);return}}ys.flags|=y,z.memoizedState=hv(1|x,k,K,M)}function GS(y,x){return h_(8390656,8,y,x)}function Ld(y,x){return pv(2048,8,y,x)}function t4(y,x){return pv(4,2,y,x)}function Qh(y,x){return pv(4,4,y,x)}function ck(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function fk(y,x,k){return k=k!=null?k.concat([y]):null,pv(4,4,ck.bind(null,x,y),k)}function p_(){}function n4(y,x){var k=wc();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&sk(x,M[1])?M[0]:(k.memoizedState=[y,x],y)}function r4(y,x){var k=wc();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&sk(x,M[1])?M[0]:(y=y(),k.memoizedState=[y,x],y)}function i4(y,x,k){return km&21?(Ye(k,x)||(k=Dt(),ys.lanes|=k,Nm|=k,y.baseState=!0),x):(y.baseState&&(y.baseState=!1,tu=!0),y.memoizedState=k)}function s4(y,x){var k=ln;ln=k!==0&&4>k?k:4,y(!0);var M=ik.transition;ik.transition={};try{y(!1),x()}finally{ln=k,ik.transition=M}}function dk(){return wc().memoizedState}function pU(y,x,k){var M=Mm(y);if(k={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null},hk(y))eu(x,k);else if(k=FS(y,x,k,M),k!==null){var z=iu();Pf(k,y,M,z),If(k,x,M)}}function o4(y,x,k){var M=Mm(y),z={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null};if(hk(y))eu(x,z);else{var K=y.alternate;if(y.lanes===0&&(K===null||K.lanes===0)&&(K=x.lastRenderedReducer,K!==null))try{var se=x.lastRenderedState,be=K(se,k);if(z.hasEagerState=!0,z.eagerState=be,Ye(be,se)){var Ce=x.interleaved;Ce===null?(z.next=z,ZI(x)):(z.next=Ce.next,Ce.next=z),x.interleaved=z;return}}catch{}finally{}k=FS(y,x,z,M),k!==null&&(z=iu(),Pf(k,y,M,z),If(k,x,M))}}function hk(y){var x=y.alternate;return y===ys||x!==null&&x===ys}function eu(y,x){f_=fv=!0;var k=y.pending;k===null?x.next=x:(x.next=k.next,k.next=x),y.pending=x}function If(y,x,k){if(k&4194240){var M=x.lanes;M&=y.pendingLanes,k|=M,x.lanes=k,nr(y,k)}}var YS={readContext:bc,useCallback:Aa,useContext:Aa,useEffect:Aa,useImperativeHandle:Aa,useInsertionEffect:Aa,useLayoutEffect:Aa,useMemo:Aa,useReducer:Aa,useRef:Aa,useState:Aa,useDebugValue:Aa,useDeferredValue:Aa,useTransition:Aa,useMutableSource:Aa,useSyncExternalStore:Aa,useId:Aa,unstable_isNewReconciler:!1},mU={readContext:bc,useCallback:function(y,x){return Md().memoizedState=[y,x===void 0?null:x],y},useContext:bc,useEffect:GS,useImperativeHandle:function(y,x,k){return k=k!=null?k.concat([y]):null,h_(4194308,4,ck.bind(null,x,y),k)},useLayoutEffect:function(y,x){return h_(4194308,4,y,x)},useInsertionEffect:function(y,x){return h_(4,2,y,x)},useMemo:function(y,x){var k=Md();return x=x===void 0?null:x,y=y(),k.memoizedState=[y,x],y},useReducer:function(y,x,k){var M=Md();return x=k!==void 0?k(x):x,M.memoizedState=M.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},M.queue=y,y=y.dispatch=pU.bind(null,ys,y),[M.memoizedState,y]},useRef:function(y){var x=Md();return y={current:y},x.memoizedState=y},useState:d_,useDebugValue:p_,useDeferredValue:function(y){return Md().memoizedState=y},useTransition:function(){var y=d_(!1),x=y[0];return y=s4.bind(null,y[1]),Md().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,k){var M=ys,z=Md();if(is){if(k===void 0)throw Error(n(407));k=k()}else{if(k=x(),Vo===null)throw Error(n(349));km&30||uk(M,x,k)}z.memoizedState=k;var K={value:k,getSnapshot:x};return z.queue=K,GS(Xh.bind(null,M,K,y),[y]),M.flags|=2048,hv(9,Fu.bind(null,M,K,k,x),void 0,null),k},useId:function(){var y=Md(),x=Vo.identifierPrefix;if(is){var k=Rd,M=kd;k=(M&~(1<<32-vo(M)-1)).toString(32)+k,x=":"+x+"R"+k,k=jg++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=hr++,x=":"+x+"r"+k.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},KS={readContext:bc,useCallback:n4,useContext:bc,useEffect:Ld,useImperativeHandle:fk,useInsertionEffect:t4,useLayoutEffect:Qh,useMemo:r4,useReducer:ok,useRef:WS,useState:function(){return ok(Ia)},useDebugValue:p_,useDeferredValue:function(y){var x=wc();return i4(x,Bs.memoizedState,y)},useTransition:function(){var y=ok(Ia)[0],x=wc().memoizedState;return[y,x]},useMutableSource:HS,useSyncExternalStore:ak,useId:dk,unstable_isNewReconciler:!1},mv={readContext:bc,useCallback:n4,useContext:bc,useEffect:Ld,useImperativeHandle:fk,useInsertionEffect:t4,useLayoutEffect:Qh,useMemo:r4,useReducer:dv,useRef:WS,useState:function(){return dv(Ia)},useDebugValue:p_,useDeferredValue:function(y){var x=wc();return Bs===null?x.memoizedState=y:i4(x,Bs.memoizedState,y)},useTransition:function(){var y=dv(Ia)[0],x=wc().memoizedState;return[y,x]},useMutableSource:HS,useSyncExternalStore:ak,useId:dk,unstable_isNewReconciler:!1};function Ec(y,x){if(y&&y.defaultProps){x=q({},x),y=y.defaultProps;for(var k in y)x[k]===void 0&&(x[k]=y[k]);return x}return x}function XS(y,x,k,M){x=y.memoizedState,k=k(M,x),k=k==null?x:q({},x,k),y.memoizedState=k,y.lanes===0&&(y.updateQueue.baseState=k)}var QS={isMounted:function(y){return(y=y._reactInternals)?ms(y)===y:!1},enqueueSetState:function(y,x,k){y=y._reactInternals;var M=iu(),z=Mm(y),K=Yh(M,z);K.payload=x,k!=null&&(K.callback=k),x=_c(y,K,z),x!==null&&(Pf(x,y,z,M),jS(x,y,z))},enqueueReplaceState:function(y,x,k){y=y._reactInternals;var M=iu(),z=Mm(y),K=Yh(M,z);K.tag=1,K.payload=x,k!=null&&(K.callback=k),x=_c(y,K,z),x!==null&&(Pf(x,y,z,M),jS(x,y,z))},enqueueForceUpdate:function(y,x){y=y._reactInternals;var k=iu(),M=Mm(y),z=Yh(k,M);z.tag=2,x!=null&&(z.callback=x),x=_c(y,z,M),x!==null&&(Pf(x,y,M,k),jS(x,y,M))}};function pk(y,x,k,M,z,K,se){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(M,K,se):x.prototype&&x.prototype.isPureReactComponent?!Kt(k,M)||!Kt(z,K):!0}function zg(y,x,k){var M=!1,z=Sm,K=x.contextType;return typeof K=="object"&&K!==null?K=bc(K):(z=Lu(x)?Za:Sa.current,M=x.contextTypes,K=(M=M!=null)?ov(y,z):Sm),x=new x(k,K),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=QS,y.stateNode=x,x._reactInternals=y,M&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=z,y.__reactInternalMemoizedMaskedChildContext=K),x}function gv(y,x,k,M){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,M),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,M),x.state!==y&&QS.enqueueReplaceState(x,x.state,null)}function mk(y,x,k,M){var z=y.stateNode;z.props=k,z.state=y.memoizedState,z.refs={},BS(y);var K=x.contextType;typeof K=="object"&&K!==null?z.context=bc(K):(K=Lu(x)?Za:Sa.current,z.context=ov(y,K)),z.state=y.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(XS(y,x,K,k),z.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(x=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),x!==z.state&&QS.enqueueReplaceState(z,z.state,null),lv(y,k,z,M),z.state=y.memoizedState),typeof z.componentDidMount=="function"&&(y.flags|=4194308)}function Vg(y,x){try{var k="",M=x;do k+=ee(M),M=M.return;while(M);var z=k}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:y,source:x,stack:z,digest:null}}function JS(y,x,k){return{value:y,source:null,stack:k??null,digest:x??null}}function yv(y,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var a4=typeof WeakMap=="function"?WeakMap:Map;function m_(y,x,k){k=Yh(-1,k),k.tag=3,k.payload={element:null};var M=x.value;return k.callback=function(){lT||(lT=!0,Dk=M),yv(y,x)},k}function ZS(y,x,k){k=Yh(-1,k),k.tag=3;var M=y.type.getDerivedStateFromError;if(typeof M=="function"){var z=x.value;k.payload=function(){return M(z)},k.callback=function(){yv(y,x)}}var K=y.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(k.callback=function(){yv(y,x),typeof M!="function"&&(Pm===null?Pm=new Set([this]):Pm.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})}),k}function g_(y,x,k){var M=y.pingCache;if(M===null){M=y.pingCache=new a4;var z=new Set;M.set(x,z)}else z=M.get(x),z===void 0&&(z=new Set,M.set(x,z));z.has(k)||(z.add(k),y=EU.bind(null,y,x,k),x.then(y,y))}function u4(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function gk(y,x,k,M,z){return y.mode&1?(y.flags|=65536,y.lanes=z,y):(y===x?y.flags|=65536:(y.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Yh(-1,1),x.tag=2,_c(k,x,1))),k.lanes|=1),y)}var eT=E.ReactCurrentOwner,tu=!1;function ea(y,x,k,M){x.child=y===null?LS(x,null,k,M):Cs(x,y.child,k,M)}function l4(y,x,k,M,z){k=k.render;var K=x.ref;return Am(x,z),M=Ug(y,x,k,M,K,z),k=VS(),y!==null&&!tu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,kf(y,x,z)):(is&&k&&i_(x),x.flags|=1,ea(y,x,M,z),x.child)}function yk(y,x,k,M,z){if(y===null){var K=k.type;return typeof K=="function"&&!mT(K)&&K.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=K,$d(y,x,K,M,z)):(y=gT(k.type,null,M,x,x.mode,z),y.ref=x.ref,y.return=x,x.child=y)}if(K=y.child,!(y.lanes&z)){var se=K.memoizedProps;if(k=k.compare,k=k!==null?k:Kt,k(se,M)&&y.ref===x.ref)return kf(y,x,z)}return x.flags|=1,y=Of(K,M),y.ref=x.ref,y.return=x,x.child=y}function $d(y,x,k,M,z){if(y!==null){var K=y.memoizedProps;if(Kt(K,M)&&y.ref===x.ref)if(tu=!1,x.pendingProps=M=K,(y.lanes&z)!==0)y.flags&131072&&(tu=!0);else return x.lanes=y.lanes,kf(y,x,z)}return xk(y,x,k,M,z)}function vk(y,x,k){var M=x.pendingProps,z=M.children,K=y!==null?y.memoizedState:null;if(M.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ui(_v,Al),Al|=k;else{if(!(k&1073741824))return y=K!==null?K.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null,transitions:null},x.updateQueue=null,Ui(_v,Al),Al|=y,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=K!==null?K.baseLanes:k,Ui(_v,Al),Al|=M}else K!==null?(M=K.baseLanes|k,x.memoizedState=null):M=k,Ui(_v,Al),Al|=M;return ea(y,x,z,k),x.child}function bk(y,x){var k=x.ref;(y===null&&k!==null||y!==null&&y.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function xk(y,x,k,M,z){var K=Lu(k)?Za:Sa.current;return K=ov(x,K),Am(x,z),k=Ug(y,x,k,M,K,z),M=VS(),y!==null&&!tu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,kf(y,x,z)):(is&&M&&i_(x),x.flags|=1,ea(y,x,k,z),x.child)}function _k(y,x,k,M,z){if(Lu(k)){var K=!0;gc(x)}else K=!1;if(Am(x,z),x.stateNode===null)nT(y,x),zg(x,k,M),mk(x,k,M,z),M=!0;else if(y===null){var se=x.stateNode,be=x.memoizedProps;se.props=be;var Ce=se.context,Xe=k.contextType;typeof Xe=="object"&&Xe!==null?Xe=bc(Xe):(Xe=Lu(k)?Za:Sa.current,Xe=ov(x,Xe));var Tt=k.getDerivedStateFromProps,kt=typeof Tt=="function"||typeof se.getSnapshotBeforeUpdate=="function";kt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==M||Ce!==Xe)&&gv(x,se,M,Xe),xc=!1;var _t=x.memoizedState;se.state=_t,lv(x,M,se,z),Ce=x.memoizedState,be!==M||_t!==Ce||Mu.current||xc?(typeof Tt=="function"&&(XS(x,k,Tt,M),Ce=x.memoizedState),(be=xc||pk(x,k,be,M,_t,Ce,Xe))?(kt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(x.flags|=4194308)):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=M,x.memoizedState=Ce),se.props=M,se.state=Ce,se.context=Xe,M=be):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),M=!1)}else{se=x.stateNode,ZO(y,x),be=x.memoizedProps,Xe=x.type===x.elementType?be:Ec(x.type,be),se.props=Xe,kt=x.pendingProps,_t=se.context,Ce=k.contextType,typeof Ce=="object"&&Ce!==null?Ce=bc(Ce):(Ce=Lu(k)?Za:Sa.current,Ce=ov(x,Ce));var Xt=k.getDerivedStateFromProps;(Tt=typeof Xt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==kt||_t!==Ce)&&gv(x,se,M,Ce),xc=!1,_t=x.memoizedState,se.state=_t,lv(x,M,se,z);var rn=x.memoizedState;be!==kt||_t!==rn||Mu.current||xc?(typeof Xt=="function"&&(XS(x,k,Xt,M),rn=x.memoizedState),(Xe=xc||pk(x,k,Xe,M,_t,rn,Ce)||!1)?(Tt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,rn,Ce),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,rn,Ce)),typeof se.componentDidUpdate=="function"&&(x.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof se.componentDidUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=1024),x.memoizedProps=M,x.memoizedState=rn),se.props=M,se.state=rn,se.context=Ce,M=Xe):(typeof se.componentDidUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=1024),M=!1)}return wk(y,x,k,M,K,z)}function wk(y,x,k,M,z,K){bk(y,x);var se=(x.flags&128)!==0;if(!M&&!se)return z&&GO(x,k,!1),kf(y,x,K);M=x.stateNode,eT.current=x;var be=se&&typeof k.getDerivedStateFromError!="function"?null:M.render();return x.flags|=1,y!==null&&se?(x.child=Cs(x,y.child,null,K),x.child=Cs(x,null,be,K)):ea(y,x,be,K),x.memoizedState=M.state,z&&GO(x,k,!0),x.child}function c4(y){var x=y.stateNode;x.pendingContext?qO(y,x.pendingContext,x.pendingContext!==x.context):x.context&&qO(y,x.context,!1),tk(y,x.containerInfo)}function Fd(y,x,k,M,z){return Nd(),Pd(z),x.flags|=256,ea(y,x,k,M),x.child}var y_={dehydrated:null,treeContext:null,retryLane:0};function v_(y){return{baseLanes:y,cachePool:null,transitions:null}}function tT(y,x,k){var M=x.pendingProps,z=us.current,K=!1,se=(x.flags&128)!==0,be;if((be=se)||(be=y!==null&&y.memoizedState===null?!1:(z&2)!==0),be?(K=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(z|=1),Ui(us,z&1),y===null)return $u(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?y.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(se=M.children,y=M.fallback,K?(M=x.mode,K=x.child,se={mode:"hidden",children:se},!(M&1)&&K!==null?(K.childLanes=0,K.pendingProps=se):K=yT(se,M,0,null),y=Yg(y,M,k,null),K.return=x,y.return=x,K.sibling=y,x.child=K,x.child.memoizedState=v_(k),x.memoizedState=y_,y):vv(x,se));if(z=y.memoizedState,z!==null&&(be=z.dehydrated,be!==null))return Tn(y,x,se,M,be,z,k);if(K){K=M.fallback,se=x.mode,z=y.child,be=z.sibling;var Ce={mode:"hidden",children:M.children};return!(se&1)&&x.child!==z?(M=x.child,M.childLanes=0,M.pendingProps=Ce,x.deletions=null):(M=Of(z,Ce),M.subtreeFlags=z.subtreeFlags&14680064),be!==null?K=Of(be,K):(K=Yg(K,se,k,null),K.flags|=2),K.return=x,M.return=x,M.sibling=K,x.child=M,M=K,K=x.child,se=y.child.memoizedState,se=se===null?v_(k):{baseLanes:se.baseLanes|k,cachePool:null,transitions:se.transitions},K.memoizedState=se,K.childLanes=y.childLanes&~k,x.memoizedState=y_,M}return K=y.child,y=K.sibling,M=Of(K,{mode:"visible",children:M.children}),!(x.mode&1)&&(M.lanes=k),M.return=x,M.sibling=null,y!==null&&(k=x.deletions,k===null?(x.deletions=[y],x.flags|=16):k.push(y)),x.child=M,x.memoizedState=null,M}function vv(y,x){return x=yT({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function Jh(y,x,k,M){return M!==null&&Pd(M),Cs(x,y.child,null,k),y=vv(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function Tn(y,x,k,M,z,K,se){if(k)return x.flags&256?(x.flags&=-257,M=JS(Error(n(422))),Jh(y,x,se,M)):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(K=M.fallback,z=x.mode,M=yT({mode:"visible",children:M.children},z,0,null),K=Yg(K,z,se,null),K.flags|=2,M.return=x,K.return=x,M.sibling=K,x.child=M,x.mode&1&&Cs(x,y.child,null,se),x.child.memoizedState=v_(se),x.memoizedState=y_,K);if(!(x.mode&1))return Jh(y,x,se,null);if(z.data==="$!"){if(M=z.nextSibling&&z.nextSibling.dataset,M)var be=M.dgst;return M=be,K=Error(n(419)),M=JS(K,M,void 0),Jh(y,x,se,M)}if(be=(se&y.childLanes)!==0,tu||be){if(M=Vo,M!==null){switch(se&-se){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=z&(M.suspendedLanes|se)?0:z,z!==0&&z!==K.retryLane&&(K.retryLane=z,Gh(y,z),Pf(M,y,z,-1))}return $k(),M=JS(Error(n(421))),Jh(y,x,se,M)}return z.data==="$?"?(x.flags|=128,x.child=y.child,x=SU.bind(null,y),z._reactRetry=x,null):(y=K.treeContext,Sl=wm(z.nextSibling),Ca=x,is=!0,Af=null,y!==null&&(yc[vc++]=kd,yc[vc++]=Rd,yc[vc++]=Og,kd=y.id,Rd=y.overflow,Og=x),x=vv(x,M.children),x.flags|=4096,x)}function b_(y,x,k){y.lanes|=x;var M=y.alternate;M!==null&&(M.lanes|=x),Zo(y.return,x,k)}function x_(y,x,k,M,z){var K=y.memoizedState;K===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:M,tail:k,tailMode:z}:(K.isBackwards=x,K.rendering=null,K.renderingStartTime=0,K.last=M,K.tail=k,K.tailMode=z)}function Rm(y,x,k){var M=x.pendingProps,z=M.revealOrder,K=M.tail;if(ea(y,x,M.children,k),M=us.current,M&2)M=M&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&b_(y,k,x);else if(y.tag===19)b_(y,k,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}M&=1}if(Ui(us,M),!(x.mode&1))x.memoizedState=null;else switch(z){case"forwards":for(k=x.child,z=null;k!==null;)y=k.alternate,y!==null&&Bg(y)===null&&(z=k),k=k.sibling;k=z,k===null?(z=x.child,x.child=null):(z=k.sibling,k.sibling=null),x_(x,!1,z,k,K);break;case"backwards":for(k=null,z=x.child,x.child=null;z!==null;){if(y=z.alternate,y!==null&&Bg(y)===null){x.child=z;break}y=z.sibling,z.sibling=k,k=z,z=y}x_(x,!0,k,null,K);break;case"together":x_(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function nT(y,x){!(x.mode&1)&&y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2)}function kf(y,x,k){if(y!==null&&(x.dependencies=y.dependencies),Nm|=x.lanes,!(k&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(n(153));if(x.child!==null){for(y=x.child,k=Of(y,y.pendingProps),x.child=k,k.return=x;y.sibling!==null;)y=y.sibling,k=k.sibling=Of(y,y.pendingProps),k.return=x;k.sibling=null}return x.child}function f4(y,x,k){switch(x.tag){case 3:c4(x),Nd();break;case 5:nk(x);break;case 1:Lu(x.type)&&gc(x);break;case 4:tk(x,x.stateNode.containerInfo);break;case 10:var M=x.type._context,z=x.memoizedProps.value;Ui(a_,M._currentValue),M._currentValue=z;break;case 13:if(M=x.memoizedState,M!==null)return M.dehydrated!==null?(Ui(us,us.current&1),x.flags|=128,null):k&x.child.childLanes?tT(y,x,k):(Ui(us,us.current&1),y=kf(y,x,k),y!==null?y.sibling:null);Ui(us,us.current&1);break;case 19:if(M=(k&x.childLanes)!==0,y.flags&128){if(M)return Rm(y,x,k);x.flags|=128}if(z=x.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ui(us,us.current),M)break;return null;case 22:case 23:return x.lanes=0,vk(y,x,k)}return kf(y,x,k)}var ta,Ek,d4,Sk;ta=function(y,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)y.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Ek=function(){},d4=function(y,x,k,M){var z=y.memoizedProps;if(z!==M){y=x.stateNode,Kh(Od.current);var K=null;switch(k){case"input":z=De(y,z),M=De(y,M),K=[];break;case"select":z=q({},z,{value:void 0}),M=q({},M,{value:void 0}),K=[];break;case"textarea":z=Ot(y,z),M=Ot(y,M),K=[];break;default:typeof z.onClick!="function"&&typeof M.onClick=="function"&&(y.onclick=AS)}tr(k,M);var se;k=null;for(Xe in z)if(!M.hasOwnProperty(Xe)&&z.hasOwnProperty(Xe)&&z[Xe]!=null)if(Xe==="style"){var be=z[Xe];for(se in be)be.hasOwnProperty(se)&&(k||(k={}),k[se]="")}else Xe!=="dangerouslySetInnerHTML"&&Xe!=="children"&&Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&Xe!=="autoFocus"&&(i.hasOwnProperty(Xe)?K||(K=[]):(K=K||[]).push(Xe,null));for(Xe in M){var Ce=M[Xe];if(be=z!=null?z[Xe]:void 0,M.hasOwnProperty(Xe)&&Ce!==be&&(Ce!=null||be!=null))if(Xe==="style")if(be){for(se in be)!be.hasOwnProperty(se)||Ce&&Ce.hasOwnProperty(se)||(k||(k={}),k[se]="");for(se in Ce)Ce.hasOwnProperty(se)&&be[se]!==Ce[se]&&(k||(k={}),k[se]=Ce[se])}else k||(K||(K=[]),K.push(Xe,k)),k=Ce;else Xe==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,be=be?be.__html:void 0,Ce!=null&&be!==Ce&&(K=K||[]).push(Xe,Ce)):Xe==="children"?typeof Ce!="string"&&typeof Ce!="number"||(K=K||[]).push(Xe,""+Ce):Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Xe)?(Ce!=null&&Xe==="onScroll"&&ns("scroll",y),K||be===Ce||(K=[])):(K=K||[]).push(Xe,Ce))}k&&(K=K||[]).push("style",k);var Xe=K;(x.updateQueue=Xe)&&(x.flags|=4)}},Sk=function(y,x,k,M){k!==M&&(x.flags|=4)};function __(y,x){if(!is)switch(y.tailMode){case"hidden":x=y.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?y.tail=null:k.sibling=null;break;case"collapsed":k=y.tail;for(var M=null;k!==null;)k.alternate!==null&&(M=k),k=k.sibling;M===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:M.sibling=null}}function na(y){var x=y.alternate!==null&&y.alternate.child===y.child,k=0,M=0;if(x)for(var z=y.child;z!==null;)k|=z.lanes|z.childLanes,M|=z.subtreeFlags&14680064,M|=z.flags&14680064,z.return=y,z=z.sibling;else for(z=y.child;z!==null;)k|=z.lanes|z.childLanes,M|=z.subtreeFlags,M|=z.flags,z.return=y,z=z.sibling;return y.subtreeFlags|=M,y.childLanes=k,x}function gU(y,x,k){var M=x.pendingProps;switch(Lg(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(x),null;case 1:return Lu(x.type)&&DS(),na(x),null;case 3:return M=x.stateNode,Im(),rs(Mu),rs(Sa),zS(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(y===null||y.child===null)&&(s_(x)?x.flags|=4:y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Af!==null&&(Ok(Af),Af=null))),Ek(y,x),na(x),null;case 5:US(x);var z=Kh(cv.current);if(k=x.type,y!==null&&x.stateNode!=null)d4(y,x,k,M,z),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!M){if(x.stateNode===null)throw Error(n(166));return na(x),null}if(y=Kh(Od.current),s_(x)){M=x.stateNode,k=x.type;var K=x.memoizedProps;switch(M[Ad]=x,M[Em]=K,y=(x.mode&1)!==0,k){case"dialog":ns("cancel",M),ns("close",M);break;case"iframe":case"object":case"embed":ns("load",M);break;case"video":case"audio":for(z=0;z<Vh.length;z++)ns(Vh[z],M);break;case"source":ns("error",M);break;case"img":case"image":case"link":ns("error",M),ns("load",M);break;case"details":ns("toggle",M);break;case"input":tt(M,K),ns("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!K.multiple},ns("invalid",M);break;case"textarea":qe(M,K),ns("invalid",M)}tr(k,K),z=null;for(var se in K)if(K.hasOwnProperty(se)){var be=K[se];se==="children"?typeof be=="string"?M.textContent!==be&&(K.suppressHydrationWarning!==!0&&e_(M.textContent,be,y),z=["children",be]):typeof be=="number"&&M.textContent!==""+be&&(K.suppressHydrationWarning!==!0&&e_(M.textContent,be,y),z=["children",""+be]):i.hasOwnProperty(se)&&be!=null&&se==="onScroll"&&ns("scroll",M)}switch(k){case"input":ye(M),Ge(M,K,!0);break;case"textarea":ye(M),wt(M);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(M.onclick=AS)}M=z,x.updateQueue=M,M!==null&&(x.flags|=4)}else{se=z.nodeType===9?z:z.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=ke(k)),y==="http://www.w3.org/1999/xhtml"?k==="script"?(y=se.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof M.is=="string"?y=se.createElement(k,{is:M.is}):(y=se.createElement(k),k==="select"&&(se=y,M.multiple?se.multiple=!0:M.size&&(se.size=M.size))):y=se.createElementNS(y,k),y[Ad]=x,y[Em]=M,ta(y,x,!1,!1),x.stateNode=y;e:{switch(se=Ai(k,M),k){case"dialog":ns("cancel",y),ns("close",y),z=M;break;case"iframe":case"object":case"embed":ns("load",y),z=M;break;case"video":case"audio":for(z=0;z<Vh.length;z++)ns(Vh[z],y);z=M;break;case"source":ns("error",y),z=M;break;case"img":case"image":case"link":ns("error",y),ns("load",y),z=M;break;case"details":ns("toggle",y),z=M;break;case"input":tt(y,M),z=De(y,M),ns("invalid",y);break;case"option":z=M;break;case"select":y._wrapperState={wasMultiple:!!M.multiple},z=q({},M,{value:void 0}),ns("invalid",y);break;case"textarea":qe(y,M),z=Ot(y,M),ns("invalid",y);break;default:z=M}tr(k,z),be=z;for(K in be)if(be.hasOwnProperty(K)){var Ce=be[K];K==="style"?Ni(y,Ce):K==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,Ce!=null&&Lt(y,Ce)):K==="children"?typeof Ce=="string"?(k!=="textarea"||Ce!=="")&&Ft(y,Ce):typeof Ce=="number"&&Ft(y,""+Ce):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Ce!=null&&K==="onScroll"&&ns("scroll",y):Ce!=null&&w(y,K,Ce,se))}switch(k){case"input":ye(y),Ge(y,M,!1);break;case"textarea":ye(y),wt(y);break;case"option":M.value!=null&&y.setAttribute("value",""+pe(M.value));break;case"select":y.multiple=!!M.multiple,K=M.value,K!=null?St(y,!!M.multiple,K,!1):M.defaultValue!=null&&St(y,!!M.multiple,M.defaultValue,!0);break;default:typeof z.onClick=="function"&&(y.onclick=AS)}switch(k){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return na(x),null;case 6:if(y&&x.stateNode!=null)Sk(y,x,y.memoizedProps,M);else{if(typeof M!="string"&&x.stateNode===null)throw Error(n(166));if(k=Kh(cv.current),Kh(Od.current),s_(x)){if(M=x.stateNode,k=x.memoizedProps,M[Ad]=x,(K=M.nodeValue!==k)&&(y=Ca,y!==null))switch(y.tag){case 3:e_(M.nodeValue,k,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&e_(M.nodeValue,k,(y.mode&1)!==0)}K&&(x.flags|=4)}else M=(k.nodeType===9?k:k.ownerDocument).createTextNode(M),M[Ad]=x,x.stateNode=M}return na(x),null;case 13:if(rs(us),M=x.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(is&&Sl!==null&&x.mode&1&&!(x.flags&128))QI(),Nd(),x.flags|=98560,K=!1;else if(K=s_(x),M!==null&&M.dehydrated!==null){if(y===null){if(!K)throw Error(n(318));if(K=x.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(n(317));K[Ad]=x}else Nd(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;na(x),K=!1}else Af!==null&&(Ok(Af),Af=null),K=!0;if(!K)return x.flags&65536?x:null}return x.flags&128?(x.lanes=k,x):(M=M!==null,M!==(y!==null&&y.memoizedState!==null)&&M&&(x.child.flags|=8192,x.mode&1&&(y===null||us.current&1?wo===0&&(wo=3):$k())),x.updateQueue!==null&&(x.flags|=4),na(x),null);case 4:return Im(),Ek(y,x),y===null&&xm(x.stateNode.containerInfo),na(x),null;case 10:return $S(x.type._context),na(x),null;case 17:return Lu(x.type)&&DS(),na(x),null;case 19:if(rs(us),K=x.memoizedState,K===null)return na(x),null;if(M=(x.flags&128)!==0,se=K.rendering,se===null)if(M)__(K,!1);else{if(wo!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(se=Bg(y),se!==null){for(x.flags|=128,__(K,!1),M=se.updateQueue,M!==null&&(x.updateQueue=M,x.flags|=4),x.subtreeFlags=0,M=k,k=x.child;k!==null;)K=k,y=M,K.flags&=14680066,se=K.alternate,se===null?(K.childLanes=0,K.lanes=y,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=se.childLanes,K.lanes=se.lanes,K.child=se.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=se.memoizedProps,K.memoizedState=se.memoizedState,K.updateQueue=se.updateQueue,K.type=se.type,y=se.dependencies,K.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),k=k.sibling;return Ui(us,us.current&1|2),x.child}y=y.sibling}K.tail!==null&&fr()>Hg&&(x.flags|=128,M=!0,__(K,!1),x.lanes=4194304)}else{if(!M)if(y=Bg(se),y!==null){if(x.flags|=128,M=!0,k=y.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),__(K,!0),K.tail===null&&K.tailMode==="hidden"&&!se.alternate&&!is)return na(x),null}else 2*fr()-K.renderingStartTime>Hg&&k!==1073741824&&(x.flags|=128,M=!0,__(K,!1),x.lanes=4194304);K.isBackwards?(se.sibling=x.child,x.child=se):(k=K.last,k!==null?k.sibling=se:x.child=se,K.last=se)}return K.tail!==null?(x=K.tail,K.rendering=x,K.tail=x.sibling,K.renderingStartTime=fr(),x.sibling=null,k=us.current,Ui(us,M?k&1|2:k&1),x):(na(x),null);case 22:case 23:return Lk(),M=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==M&&(x.flags|=8192),M&&x.mode&1?Al&1073741824&&(na(x),x.subtreeFlags&6&&(x.flags|=8192)):na(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function yU(y,x){switch(Lg(x),x.tag){case 1:return Lu(x.type)&&DS(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return Im(),rs(Mu),rs(Sa),zS(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return US(x),null;case 13:if(rs(us),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Nd()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return rs(us),null;case 4:return Im(),null;case 10:return $S(x.type._context),null;case 22:case 23:return Lk(),null;case 24:return null;default:return null}}var rT=!1,ls=!1,nu=typeof WeakSet=="function"?WeakSet:Set,en=null;function bv(y,x){var k=y.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(M){vs(y,x,M)}else k.current=null}function w_(y,x,k){try{k()}catch(M){vs(y,x,M)}}var h4=!1;function vU(y,x){if(t_=ve,y=Ii(),Yx(y)){if("selectionStart"in y)var k={start:y.selectionStart,end:y.selectionEnd};else e:{k=(k=y.ownerDocument)&&k.defaultView||window;var M=k.getSelection&&k.getSelection();if(M&&M.rangeCount!==0){k=M.anchorNode;var z=M.anchorOffset,K=M.focusNode;M=M.focusOffset;try{k.nodeType,K.nodeType}catch{k=null;break e}var se=0,be=-1,Ce=-1,Xe=0,Tt=0,kt=y,_t=null;t:for(;;){for(var Xt;kt!==k||z!==0&&kt.nodeType!==3||(be=se+z),kt!==K||M!==0&&kt.nodeType!==3||(Ce=se+M),kt.nodeType===3&&(se+=kt.nodeValue.length),(Xt=kt.firstChild)!==null;)_t=kt,kt=Xt;for(;;){if(kt===y)break t;if(_t===k&&++Xe===z&&(be=se),_t===K&&++Tt===M&&(Ce=se),(Xt=kt.nextSibling)!==null)break;kt=_t,_t=kt.parentNode}kt=Xt}k=be===-1||Ce===-1?null:{start:be,end:Ce}}else k=null}k=k||{start:0,end:0}}else k=null;for(Ng={focusedElem:y,selectionRange:k},ve=!1,en=x;en!==null;)if(x=en,y=x.child,(x.subtreeFlags&1028)!==0&&y!==null)y.return=x,en=y;else for(;en!==null;){x=en;try{var rn=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var sn=rn.memoizedProps,As=rn.memoizedState,Ve=x.stateNode,Pe=Ve.getSnapshotBeforeUpdate(x.elementType===x.type?sn:Ec(x.type,sn),As);Ve.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:var We=x.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Mt){vs(x,x.return,Mt)}if(y=x.sibling,y!==null){y.return=x.return,en=y;break}en=x.return}return rn=h4,h4=!1,rn}function Zh(y,x,k){var M=x.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var z=M=M.next;do{if((z.tag&y)===y){var K=z.destroy;z.destroy=void 0,K!==void 0&&w_(x,k,K)}z=z.next}while(z!==M)}}function E_(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&y)===y){var M=k.create;k.destroy=M()}k=k.next}while(k!==x)}}function iT(y){var x=y.ref;if(x!==null){var k=y.stateNode;switch(y.tag){case 5:y=k;break;default:y=k}typeof x=="function"?x(y):x.current=y}}function p4(y){var x=y.alternate;x!==null&&(y.alternate=null,p4(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&(delete x[Ad],delete x[Em],delete x[kS],delete x[oe],delete x[iv])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function m4(y){return y.tag===5||y.tag===3||y.tag===4}function g4(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||m4(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function Tk(y,x,k){var M=y.tag;if(M===5||M===6)y=y.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(y,x):k.insertBefore(y,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(y,k)):(x=k,x.appendChild(y)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=AS));else if(M!==4&&(y=y.child,y!==null))for(Tk(y,x,k),y=y.sibling;y!==null;)Tk(y,x,k),y=y.sibling}function sT(y,x,k){var M=y.tag;if(M===5||M===6)y=y.stateNode,x?k.insertBefore(y,x):k.appendChild(y);else if(M!==4&&(y=y.child,y!==null))for(sT(y,x,k),y=y.sibling;y!==null;)sT(y,x,k),y=y.sibling}var zo=null,Rf=!1;function Bd(y,x,k){for(k=k.child;k!==null;)Ck(y,x,k),k=k.sibling}function Ck(y,x,k){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(lc,k)}catch{}switch(k.tag){case 5:ls||bv(k,x);case 6:var M=zo,z=Rf;zo=null,Bd(y,x,k),zo=M,Rf=z,zo!==null&&(Rf?(y=zo,k=k.stateNode,y.nodeType===8?y.parentNode.removeChild(k):y.removeChild(k)):zo.removeChild(k.stateNode));break;case 18:zo!==null&&(Rf?(y=zo,k=k.stateNode,y.nodeType===8?YI(y.parentNode,k):y.nodeType===1&&YI(y,k),dr(y)):YI(zo,k.stateNode));break;case 4:M=zo,z=Rf,zo=k.stateNode.containerInfo,Rf=!0,Bd(y,x,k),zo=M,Rf=z;break;case 0:case 11:case 14:case 15:if(!ls&&(M=k.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){z=M=M.next;do{var K=z,se=K.destroy;K=K.tag,se!==void 0&&(K&2||K&4)&&w_(k,x,se),z=z.next}while(z!==M)}Bd(y,x,k);break;case 1:if(!ls&&(bv(k,x),M=k.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=k.memoizedProps,M.state=k.memoizedState,M.componentWillUnmount()}catch(be){vs(k,x,be)}Bd(y,x,k);break;case 21:Bd(y,x,k);break;case 22:k.mode&1?(ls=(M=ls)||k.memoizedState!==null,Bd(y,x,k),ls=M):Bd(y,x,k);break;default:Bd(y,x,k)}}function xv(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var k=y.stateNode;k===null&&(k=y.stateNode=new nu),x.forEach(function(M){var z=TU.bind(null,y,M);k.has(M)||(k.add(M),M.then(z,z))})}}function Cl(y,x){var k=x.deletions;if(k!==null)for(var M=0;M<k.length;M++){var z=k[M];try{var K=y,se=x,be=se;e:for(;be!==null;){switch(be.tag){case 5:zo=be.stateNode,Rf=!1;break e;case 3:zo=be.stateNode.containerInfo,Rf=!0;break e;case 4:zo=be.stateNode.containerInfo,Rf=!0;break e}be=be.return}if(zo===null)throw Error(n(160));Ck(K,se,z),zo=null,Rf=!1;var Ce=z.alternate;Ce!==null&&(Ce.return=null),z.return=null}catch(Xe){vs(z,x,Xe)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)Ak(x,y),x=x.sibling}function Ak(y,x){var k=y.alternate,M=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(Cl(x,y),Df(y),M&4){try{Zh(3,y,y.return),E_(3,y)}catch(sn){vs(y,y.return,sn)}try{Zh(5,y,y.return)}catch(sn){vs(y,y.return,sn)}}break;case 1:Cl(x,y),Df(y),M&512&&k!==null&&bv(k,k.return);break;case 5:if(Cl(x,y),Df(y),M&512&&k!==null&&bv(k,k.return),y.flags&32){var z=y.stateNode;try{Ft(z,"")}catch(sn){vs(y,y.return,sn)}}if(M&4&&(z=y.stateNode,z!=null)){var K=y.memoizedProps,se=k!==null?k.memoizedProps:K,be=y.type,Ce=y.updateQueue;if(y.updateQueue=null,Ce!==null)try{be==="input"&&K.type==="radio"&&K.name!=null&&it(z,K),Ai(be,se);var Xe=Ai(be,K);for(se=0;se<Ce.length;se+=2){var Tt=Ce[se],kt=Ce[se+1];Tt==="style"?Ni(z,kt):Tt==="dangerouslySetInnerHTML"?Lt(z,kt):Tt==="children"?Ft(z,kt):w(z,Tt,kt,Xe)}switch(be){case"input":Me(z,K);break;case"textarea":dt(z,K);break;case"select":var _t=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!K.multiple;var Xt=K.value;Xt!=null?St(z,!!K.multiple,Xt,!1):_t!==!!K.multiple&&(K.defaultValue!=null?St(z,!!K.multiple,K.defaultValue,!0):St(z,!!K.multiple,K.multiple?[]:"",!1))}z[Em]=K}catch(sn){vs(y,y.return,sn)}}break;case 6:if(Cl(x,y),Df(y),M&4){if(y.stateNode===null)throw Error(n(162));z=y.stateNode,K=y.memoizedProps;try{z.nodeValue=K}catch(sn){vs(y,y.return,sn)}}break;case 3:if(Cl(x,y),Df(y),M&4&&k!==null&&k.memoizedState.isDehydrated)try{dr(x.containerInfo)}catch(sn){vs(y,y.return,sn)}break;case 4:Cl(x,y),Df(y);break;case 13:Cl(x,y),Df(y),z=y.child,z.flags&8192&&(K=z.memoizedState!==null,z.stateNode.isHidden=K,!K||z.alternate!==null&&z.alternate.memoizedState!==null||(Rk=fr())),M&4&&xv(y);break;case 22:if(Tt=k!==null&&k.memoizedState!==null,y.mode&1?(ls=(Xe=ls)||Tt,Cl(x,y),ls=Xe):Cl(x,y),Df(y),M&8192){if(Xe=y.memoizedState!==null,(y.stateNode.isHidden=Xe)&&!Tt&&y.mode&1)for(en=y,Tt=y.child;Tt!==null;){for(kt=en=Tt;en!==null;){switch(_t=en,Xt=_t.child,_t.tag){case 0:case 11:case 14:case 15:Zh(4,_t,_t.return);break;case 1:bv(_t,_t.return);var rn=_t.stateNode;if(typeof rn.componentWillUnmount=="function"){M=_t,k=_t.return;try{x=M,rn.props=x.memoizedProps,rn.state=x.memoizedState,rn.componentWillUnmount()}catch(sn){vs(M,k,sn)}}break;case 5:bv(_t,_t.return);break;case 22:if(_t.memoizedState!==null){Dm(kt);continue}}Xt!==null?(Xt.return=_t,en=Xt):Dm(kt)}Tt=Tt.sibling}e:for(Tt=null,kt=y;;){if(kt.tag===5){if(Tt===null){Tt=kt;try{z=kt.stateNode,Xe?(K=z.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(be=kt.stateNode,Ce=kt.memoizedProps.style,se=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null,be.style.display=Sr("display",se))}catch(sn){vs(y,y.return,sn)}}}else if(kt.tag===6){if(Tt===null)try{kt.stateNode.nodeValue=Xe?"":kt.memoizedProps}catch(sn){vs(y,y.return,sn)}}else if((kt.tag!==22&&kt.tag!==23||kt.memoizedState===null||kt===y)&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===y)break e;for(;kt.sibling===null;){if(kt.return===null||kt.return===y)break e;Tt===kt&&(Tt=null),kt=kt.return}Tt===kt&&(Tt=null),kt.sibling.return=kt.return,kt=kt.sibling}}break;case 19:Cl(x,y),Df(y),M&4&&xv(y);break;case 21:break;default:Cl(x,y),Df(y)}}function Df(y){var x=y.flags;if(x&2){try{e:{for(var k=y.return;k!==null;){if(m4(k)){var M=k;break e}k=k.return}throw Error(n(160))}switch(M.tag){case 5:var z=M.stateNode;M.flags&32&&(Ft(z,""),M.flags&=-33);var K=g4(y);sT(y,K,z);break;case 3:case 4:var se=M.stateNode.containerInfo,be=g4(y);Tk(y,be,se);break;default:throw Error(n(161))}}catch(Ce){vs(y,y.return,Ce)}y.flags&=-3}x&4096&&(y.flags&=-4097)}function oT(y,x,k){en=y,Ik(y)}function Ik(y,x,k){for(var M=(y.mode&1)!==0;en!==null;){var z=en,K=z.child;if(z.tag===22&&M){var se=z.memoizedState!==null||rT;if(!se){var be=z.alternate,Ce=be!==null&&be.memoizedState!==null||ls;be=rT;var Xe=ls;if(rT=se,(ls=Ce)&&!Xe)for(en=z;en!==null;)se=en,Ce=se.child,se.tag===22&&se.memoizedState!==null?y4(z):Ce!==null?(Ce.return=se,en=Ce):y4(z);for(;K!==null;)en=K,Ik(K),K=K.sibling;en=z,rT=be,ls=Xe}Nf(y)}else z.subtreeFlags&8772&&K!==null?(K.return=z,en=K):Nf(y)}}function Nf(y){for(;en!==null;){var x=en;if(x.flags&8772){var k=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:ls||E_(5,x);break;case 1:var M=x.stateNode;if(x.flags&4&&!ls)if(k===null)M.componentDidMount();else{var z=x.elementType===x.type?k.memoizedProps:Ec(x.type,k.memoizedProps);M.componentDidUpdate(z,k.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var K=x.updateQueue;K!==null&&ek(x,K,M);break;case 3:var se=x.updateQueue;if(se!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}ek(x,se,k)}break;case 5:var be=x.stateNode;if(k===null&&x.flags&4){k=be;var Ce=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Ce.autoFocus&&k.focus();break;case"img":Ce.src&&(k.src=Ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Xe=x.alternate;if(Xe!==null){var Tt=Xe.memoizedState;if(Tt!==null){var kt=Tt.dehydrated;kt!==null&&dr(kt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ls||x.flags&512&&iT(x)}catch(_t){vs(x,x.return,_t)}}if(x===y){en=null;break}if(k=x.sibling,k!==null){k.return=x.return,en=k;break}en=x.return}}function Dm(y){for(;en!==null;){var x=en;if(x===y){en=null;break}var k=x.sibling;if(k!==null){k.return=x.return,en=k;break}en=x.return}}function y4(y){for(;en!==null;){var x=en;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{E_(4,x)}catch(Ce){vs(x,k,Ce)}break;case 1:var M=x.stateNode;if(typeof M.componentDidMount=="function"){var z=x.return;try{M.componentDidMount()}catch(Ce){vs(x,z,Ce)}}var K=x.return;try{iT(x)}catch(Ce){vs(x,K,Ce)}break;case 5:var se=x.return;try{iT(x)}catch(Ce){vs(x,se,Ce)}}}catch(Ce){vs(x,x.return,Ce)}if(x===y){en=null;break}var be=x.sibling;if(be!==null){be.return=x.return,en=be;break}en=x.return}}var v4=Math.ceil,aT=E.ReactCurrentDispatcher,kk=E.ReactCurrentOwner,Sc=E.ReactCurrentBatchConfig,jr=0,Vo=null,Js=null,ra=0,Al=0,_v=Ou(0),wo=0,S_=null,Nm=0,T_=0,uT=0,C_=null,Bu=null,Rk=0,Hg=1/0,ep=null,lT=!1,Dk=null,Pm=null,cT=!1,Om=null,ru=0,A_=0,Nk=null,fT=-1,I_=0;function iu(){return jr&6?fr():fT!==-1?fT:fT=fr()}function Mm(y){return y.mode&1?jr&2&&ra!==0?ra&-ra:QO.transition!==null?(I_===0&&(I_=Dt()),I_):(y=ln,y!==0||(y=window.event,y=y===void 0?16:di(y.type)),y):1}function Pf(y,x,k,M){if(50<A_)throw A_=0,Nk=null,Error(n(185));In(y,k,M),(!(jr&2)||y!==Vo)&&(y===Vo&&(!(jr&2)&&(T_|=k),wo===4&&Lm(y,ra)),ju(y,M),k===1&&jr===0&&!(x.mode&1)&&(Hg=fr()+500,NS&&Tm()))}function ju(y,x){var k=y.callbackNode;Et(y,x);var M=rt(y,y===Vo?ra:0);if(M===0)k!==null&&gf(k),y.callbackNode=null,y.callbackPriority=0;else if(x=M&-M,y.callbackPriority!==x){if(k!=null&&gf(k),x===1)y.tag===0?Pg(b4.bind(null,y)):YO(b4.bind(null,y)),IS(function(){!(jr&6)&&Tm()}),k=null;else{switch(br(M)){case 1:k=go;break;case 4:k=_l;break;case 16:k=Gs;break;case 536870912:k=Lh;break;default:k=Gs}k=C4(k,dT.bind(null,y))}y.callbackPriority=x,y.callbackNode=k}}function dT(y,x){if(fT=-1,I_=0,jr&6)throw Error(n(327));var k=y.callbackNode;if(wv()&&y.callbackNode!==k)return null;var M=rt(y,y===Vo?ra:0);if(M===0)return null;if(M&30||M&y.expiredLanes||x)x=hT(y,M);else{x=M;var z=jr;jr|=2;var K=_4();(Vo!==y||ra!==x)&&(ep=null,Hg=fr()+500,Wg(y,x));do try{_U();break}catch(be){x4(y,be)}while(!0);Wh(),aT.current=K,jr=z,Js!==null?x=0:(Vo=null,ra=0,x=wo)}if(x!==0){if(x===2&&(z=xt(y),z!==0&&(M=z,x=Pk(y,z))),x===1)throw k=S_,Wg(y,0),Lm(y,M),ju(y,fr()),k;if(x===6)Lm(y,M);else{if(z=y.current.alternate,!(M&30)&&!bU(z)&&(x=hT(y,M),x===2&&(K=xt(y),K!==0&&(M=K,x=Pk(y,K))),x===1))throw k=S_,Wg(y,0),Lm(y,M),ju(y,fr()),k;switch(y.finishedWork=z,y.finishedLanes=M,x){case 0:case 1:throw Error(n(345));case 2:Gg(y,Bu,ep);break;case 3:if(Lm(y,M),(M&130023424)===M&&(x=Rk+500-fr(),10<x)){if(rt(y,0)!==0)break;if(z=y.suspendedLanes,(z&M)!==M){iu(),y.pingedLanes|=y.suspendedLanes&z;break}y.timeoutHandle=_m(Gg.bind(null,y,Bu,ep),x);break}Gg(y,Bu,ep);break;case 4:if(Lm(y,M),(M&4194240)===M)break;for(x=y.eventTimes,z=-1;0<M;){var se=31-vo(M);K=1<<se,se=x[se],se>z&&(z=se),M&=~K}if(M=z,M=fr()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*v4(M/1960))-M,10<M){y.timeoutHandle=_m(Gg.bind(null,y,Bu,ep),M);break}Gg(y,Bu,ep);break;case 5:Gg(y,Bu,ep);break;default:throw Error(n(329))}}}return ju(y,fr()),y.callbackNode===k?dT.bind(null,y):null}function Pk(y,x){var k=C_;return y.current.memoizedState.isDehydrated&&(Wg(y,x).flags|=256),y=hT(y,x),y!==2&&(x=Bu,Bu=k,x!==null&&Ok(x)),y}function Ok(y){Bu===null?Bu=y:Bu.push.apply(Bu,y)}function bU(y){for(var x=y;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var M=0;M<k.length;M++){var z=k[M],K=z.getSnapshot;z=z.value;try{if(!Ye(K(),z))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Lm(y,x){for(x&=~uT,x&=~T_,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var k=31-vo(x),M=1<<k;y[k]=-1,x&=~M}}function b4(y){if(jr&6)throw Error(n(327));wv();var x=rt(y,0);if(!(x&1))return ju(y,fr()),null;var k=hT(y,x);if(y.tag!==0&&k===2){var M=xt(y);M!==0&&(x=M,k=Pk(y,M))}if(k===1)throw k=S_,Wg(y,0),Lm(y,x),ju(y,fr()),k;if(k===6)throw Error(n(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,Gg(y,Bu,ep),ju(y,fr()),null}function Mk(y,x){var k=jr;jr|=1;try{return y(x)}finally{jr=k,jr===0&&(Hg=fr()+500,NS&&Tm())}}function qg(y){Om!==null&&Om.tag===0&&!(jr&6)&&wv();var x=jr;jr|=1;var k=Sc.transition,M=ln;try{if(Sc.transition=null,ln=1,y)return y()}finally{ln=M,Sc.transition=k,jr=x,!(jr&6)&&Tm()}}function Lk(){Al=_v.current,rs(_v)}function Wg(y,x){y.finishedWork=null,y.finishedLanes=0;var k=y.timeoutHandle;if(k!==-1&&(y.timeoutHandle=-1,r_(k)),Js!==null)for(k=Js.return;k!==null;){var M=k;switch(Lg(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&DS();break;case 3:Im(),rs(Mu),rs(Sa),zS();break;case 5:US(M);break;case 4:Im();break;case 13:rs(us);break;case 19:rs(us);break;case 10:$S(M.type._context);break;case 22:case 23:Lk()}k=k.return}if(Vo=y,Js=y=Of(y.current,null),ra=Al=x,wo=0,S_=null,uT=T_=Nm=0,Bu=C_=null,Fg!==null){for(x=0;x<Fg.length;x++)if(k=Fg[x],M=k.interleaved,M!==null){k.interleaved=null;var z=M.next,K=k.pending;if(K!==null){var se=K.next;K.next=z,M.next=se}k.pending=M}Fg=null}return y}function x4(y,x){do{var k=Js;try{if(Wh(),c_.current=YS,fv){for(var M=ys.memoizedState;M!==null;){var z=M.queue;z!==null&&(z.pending=null),M=M.next}fv=!1}if(km=0,_o=Bs=ys=null,f_=!1,jg=0,kk.current=null,k===null||k.return===null){wo=1,S_=x,Js=null;break}e:{var K=y,se=k.return,be=k,Ce=x;if(x=ra,be.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Xe=Ce,Tt=be,kt=Tt.tag;if(!(Tt.mode&1)&&(kt===0||kt===11||kt===15)){var _t=Tt.alternate;_t?(Tt.updateQueue=_t.updateQueue,Tt.memoizedState=_t.memoizedState,Tt.lanes=_t.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Xt=u4(se);if(Xt!==null){Xt.flags&=-257,gk(Xt,se,be,K,x),Xt.mode&1&&g_(K,Xe,x),x=Xt,Ce=Xe;var rn=x.updateQueue;if(rn===null){var sn=new Set;sn.add(Ce),x.updateQueue=sn}else rn.add(Ce);break e}else{if(!(x&1)){g_(K,Xe,x),$k();break e}Ce=Error(n(426))}}else if(is&&be.mode&1){var As=u4(se);if(As!==null){!(As.flags&65536)&&(As.flags|=256),gk(As,se,be,K,x),Pd(Vg(Ce,be));break e}}K=Ce=Vg(Ce,be),wo!==4&&(wo=2),C_===null?C_=[K]:C_.push(K),K=se;do{switch(K.tag){case 3:K.flags|=65536,x&=-x,K.lanes|=x;var Ve=m_(K,Ce,x);e4(K,Ve);break e;case 1:be=Ce;var Pe=K.type,We=K.stateNode;if(!(K.flags&128)&&(typeof Pe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Pm===null||!Pm.has(We)))){K.flags|=65536,x&=-x,K.lanes|=x;var Mt=ZS(K,be,x);e4(K,Mt);break e}}K=K.return}while(K!==null)}E4(k)}catch(on){x=on,Js===k&&k!==null&&(Js=k=k.return);continue}break}while(!0)}function _4(){var y=aT.current;return aT.current=YS,y===null?YS:y}function $k(){(wo===0||wo===3||wo===2)&&(wo=4),Vo===null||!(Nm&268435455)&&!(T_&268435455)||Lm(Vo,ra)}function hT(y,x){var k=jr;jr|=2;var M=_4();(Vo!==y||ra!==x)&&(ep=null,Wg(y,x));do try{xU();break}catch(z){x4(y,z)}while(!0);if(Wh(),jr=k,aT.current=M,Js!==null)throw Error(n(261));return Vo=null,ra=0,wo}function xU(){for(;Js!==null;)w4(Js)}function _U(){for(;Js!==null&&!yf();)w4(Js)}function w4(y){var x=T4(y.alternate,y,Al);y.memoizedProps=y.pendingProps,x===null?E4(y):Js=x,kk.current=null}function E4(y){var x=y;do{var k=x.alternate;if(y=x.return,x.flags&32768){if(k=yU(k,x),k!==null){k.flags&=32767,Js=k;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{wo=6,Js=null;return}}else if(k=gU(k,x,Al),k!==null){Js=k;return}if(x=x.sibling,x!==null){Js=x;return}Js=x=y}while(x!==null);wo===0&&(wo=5)}function Gg(y,x,k){var M=ln,z=Sc.transition;try{Sc.transition=null,ln=1,wU(y,x,k,M)}finally{Sc.transition=z,ln=M}return null}function wU(y,x,k,M){do wv();while(Om!==null);if(jr&6)throw Error(n(327));k=y.finishedWork;var z=y.finishedLanes;if(k===null)return null;if(y.finishedWork=null,y.finishedLanes=0,k===y.current)throw Error(n(177));y.callbackNode=null,y.callbackPriority=0;var K=k.lanes|k.childLanes;if(un(y,K),y===Vo&&(Js=Vo=null,ra=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||cT||(cT=!0,C4(Gs,function(){return wv(),null})),K=(k.flags&15990)!==0,k.subtreeFlags&15990||K){K=Sc.transition,Sc.transition=null;var se=ln;ln=1;var be=jr;jr|=4,kk.current=null,vU(y,k),Ak(k,y),dU(Ng),ve=!!t_,Ng=t_=null,y.current=k,oT(k),vf(),jr=be,ln=se,Sc.transition=K}else y.current=k;if(cT&&(cT=!1,Om=y,ru=z),K=y.pendingLanes,K===0&&(Pm=null),gm(k.stateNode),ju(y,fr()),x!==null)for(M=y.onRecoverableError,k=0;k<x.length;k++)z=x[k],M(z.value,{componentStack:z.stack,digest:z.digest});if(lT)throw lT=!1,y=Dk,Dk=null,y;return ru&1&&y.tag!==0&&wv(),K=y.pendingLanes,K&1?y===Nk?A_++:(A_=0,Nk=y):A_=0,Tm(),null}function wv(){if(Om!==null){var y=br(ru),x=Sc.transition,k=ln;try{if(Sc.transition=null,ln=16>y?16:y,Om===null)var M=!1;else{if(y=Om,Om=null,ru=0,jr&6)throw Error(n(331));var z=jr;for(jr|=4,en=y.current;en!==null;){var K=en,se=K.child;if(en.flags&16){var be=K.deletions;if(be!==null){for(var Ce=0;Ce<be.length;Ce++){var Xe=be[Ce];for(en=Xe;en!==null;){var Tt=en;switch(Tt.tag){case 0:case 11:case 15:Zh(8,Tt,K)}var kt=Tt.child;if(kt!==null)kt.return=Tt,en=kt;else for(;en!==null;){Tt=en;var _t=Tt.sibling,Xt=Tt.return;if(p4(Tt),Tt===Xe){en=null;break}if(_t!==null){_t.return=Xt,en=_t;break}en=Xt}}}var rn=K.alternate;if(rn!==null){var sn=rn.child;if(sn!==null){rn.child=null;do{var As=sn.sibling;sn.sibling=null,sn=As}while(sn!==null)}}en=K}}if(K.subtreeFlags&2064&&se!==null)se.return=K,en=se;else e:for(;en!==null;){if(K=en,K.flags&2048)switch(K.tag){case 0:case 11:case 15:Zh(9,K,K.return)}var Ve=K.sibling;if(Ve!==null){Ve.return=K.return,en=Ve;break e}en=K.return}}var Pe=y.current;for(en=Pe;en!==null;){se=en;var We=se.child;if(se.subtreeFlags&2064&&We!==null)We.return=se,en=We;else e:for(se=Pe;en!==null;){if(be=en,be.flags&2048)try{switch(be.tag){case 0:case 11:case 15:E_(9,be)}}catch(on){vs(be,be.return,on)}if(be===se){en=null;break e}var Mt=be.sibling;if(Mt!==null){Mt.return=be.return,en=Mt;break e}en=be.return}}if(jr=z,Tm(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(lc,y)}catch{}M=!0}return M}finally{ln=k,Sc.transition=x}}return!1}function pT(y,x,k){x=Vg(k,x),x=m_(y,x,1),y=_c(y,x,1),x=iu(),y!==null&&(In(y,1,x),ju(y,x))}function vs(y,x,k){if(y.tag===3)pT(y,y,k);else for(;x!==null;){if(x.tag===3){pT(x,y,k);break}else if(x.tag===1){var M=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Pm===null||!Pm.has(M))){y=Vg(k,y),y=ZS(x,y,1),x=_c(x,y,1),y=iu(),x!==null&&(In(x,1,y),ju(x,y));break}}x=x.return}}function EU(y,x,k){var M=y.pingCache;M!==null&&M.delete(x),x=iu(),y.pingedLanes|=y.suspendedLanes&k,Vo===y&&(ra&k)===k&&(wo===4||wo===3&&(ra&130023424)===ra&&500>fr()-Rk?Wg(y,0):uT|=k),ju(y,x)}function S4(y,x){x===0&&(y.mode&1?(x=Be,Be<<=1,!(Be&130023424)&&(Be=4194304)):x=1);var k=iu();y=Gh(y,x),y!==null&&(In(y,x,k),ju(y,k))}function SU(y){var x=y.memoizedState,k=0;x!==null&&(k=x.retryLane),S4(y,k)}function TU(y,x){var k=0;switch(y.tag){case 13:var M=y.stateNode,z=y.memoizedState;z!==null&&(k=z.retryLane);break;case 19:M=y.stateNode;break;default:throw Error(n(314))}M!==null&&M.delete(x),S4(y,k)}var T4;T4=function(y,x,k){if(y!==null)if(y.memoizedProps!==x.pendingProps||Mu.current)tu=!0;else{if(!(y.lanes&k)&&!(x.flags&128))return tu=!1,f4(y,x,k);tu=!!(y.flags&131072)}else tu=!1,is&&x.flags&1048576&&KO(x,OS,x.index);switch(x.lanes=0,x.tag){case 2:var M=x.type;nT(y,x),y=x.pendingProps;var z=ov(x,Sa.current);Am(x,k),z=Ug(null,x,M,y,z,k);var K=VS();return x.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Lu(M)?(K=!0,gc(x)):K=!1,x.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,BS(x),z.updater=QS,x.stateNode=z,z._reactInternals=x,mk(x,M,y,k),x=wk(null,x,M,!0,K,k)):(x.tag=0,is&&K&&i_(x),ea(null,x,z,k),x=x.child),x;case 16:M=x.elementType;e:{switch(nT(y,x),y=x.pendingProps,z=M._init,M=z(M._payload),x.type=M,z=x.tag=AU(M),y=Ec(M,y),z){case 0:x=xk(null,x,M,y,k);break e;case 1:x=_k(null,x,M,y,k);break e;case 11:x=l4(null,x,M,y,k);break e;case 14:x=yk(null,x,M,Ec(M.type,y),k);break e}throw Error(n(306,M,""))}return x;case 0:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),xk(y,x,M,z,k);case 1:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),_k(y,x,M,z,k);case 3:e:{if(c4(x),y===null)throw Error(n(387));M=x.pendingProps,K=x.memoizedState,z=K.element,ZO(y,x),lv(x,M,null,k);var se=x.memoizedState;if(M=se.element,K.isDehydrated)if(K={element:M,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},x.updateQueue.baseState=K,x.memoizedState=K,x.flags&256){z=Vg(Error(n(423)),x),x=Fd(y,x,M,k,z);break e}else if(M!==z){z=Vg(Error(n(424)),x),x=Fd(y,x,M,k,z);break e}else for(Sl=wm(x.stateNode.containerInfo.firstChild),Ca=x,is=!0,Af=null,k=LS(x,null,M,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Nd(),M===z){x=kf(y,x,k);break e}ea(y,x,M,k)}x=x.child}return x;case 5:return nk(x),y===null&&$u(x),M=x.type,z=x.pendingProps,K=y!==null?y.memoizedProps:null,se=z.children,n_(M,z)?se=null:K!==null&&n_(M,K)&&(x.flags|=32),bk(y,x),ea(y,x,se,k),x.child;case 6:return y===null&&$u(x),null;case 13:return tT(y,x,k);case 4:return tk(x,x.stateNode.containerInfo),M=x.pendingProps,y===null?x.child=Cs(x,null,M,k):ea(y,x,M,k),x.child;case 11:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),l4(y,x,M,z,k);case 7:return ea(y,x,x.pendingProps,k),x.child;case 8:return ea(y,x,x.pendingProps.children,k),x.child;case 12:return ea(y,x,x.pendingProps.children,k),x.child;case 10:e:{if(M=x.type._context,z=x.pendingProps,K=x.memoizedProps,se=z.value,Ui(a_,M._currentValue),M._currentValue=se,K!==null)if(Ye(K.value,se)){if(K.children===z.children&&!Mu.current){x=kf(y,x,k);break e}}else for(K=x.child,K!==null&&(K.return=x);K!==null;){var be=K.dependencies;if(be!==null){se=K.child;for(var Ce=be.firstContext;Ce!==null;){if(Ce.context===M){if(K.tag===1){Ce=Yh(-1,k&-k),Ce.tag=2;var Xe=K.updateQueue;if(Xe!==null){Xe=Xe.shared;var Tt=Xe.pending;Tt===null?Ce.next=Ce:(Ce.next=Tt.next,Tt.next=Ce),Xe.pending=Ce}}K.lanes|=k,Ce=K.alternate,Ce!==null&&(Ce.lanes|=k),Zo(K.return,k,x),be.lanes|=k;break}Ce=Ce.next}}else if(K.tag===10)se=K.type===x.type?null:K.child;else if(K.tag===18){if(se=K.return,se===null)throw Error(n(341));se.lanes|=k,be=se.alternate,be!==null&&(be.lanes|=k),Zo(se,k,x),se=K.sibling}else se=K.child;if(se!==null)se.return=K;else for(se=K;se!==null;){if(se===x){se=null;break}if(K=se.sibling,K!==null){K.return=se.return,se=K;break}se=se.return}K=se}ea(y,x,z.children,k),x=x.child}return x;case 9:return z=x.type,M=x.pendingProps.children,Am(x,k),z=bc(z),M=M(z),x.flags|=1,ea(y,x,M,k),x.child;case 14:return M=x.type,z=Ec(M,x.pendingProps),z=Ec(M.type,z),yk(y,x,M,z,k);case 15:return $d(y,x,x.type,x.pendingProps,k);case 17:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),nT(y,x),x.tag=1,Lu(M)?(y=!0,gc(x)):y=!1,Am(x,k),zg(x,M,z),mk(x,M,z,k),wk(null,x,M,!0,y,k);case 19:return Rm(y,x,k);case 22:return vk(y,x,k)}throw Error(n(156,x.tag))};function C4(y,x){return wd(y,x)}function CU(y,x,k,M){this.tag=y,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(y,x,k,M){return new CU(y,x,k,M)}function mT(y){return y=y.prototype,!(!y||!y.isReactComponent)}function AU(y){if(typeof y=="function")return mT(y)?1:0;if(y!=null){if(y=y.$$typeof,y===j)return 11;if(y===Q)return 14}return 2}function Of(y,x){var k=y.alternate;return k===null?(k=Tc(y.tag,x,y.key,y.mode),k.elementType=y.elementType,k.type=y.type,k.stateNode=y.stateNode,k.alternate=y,y.alternate=k):(k.pendingProps=x,k.type=y.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=y.flags&14680064,k.childLanes=y.childLanes,k.lanes=y.lanes,k.child=y.child,k.memoizedProps=y.memoizedProps,k.memoizedState=y.memoizedState,k.updateQueue=y.updateQueue,x=y.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=y.sibling,k.index=y.index,k.ref=y.ref,k}function gT(y,x,k,M,z,K){var se=2;if(M=y,typeof y=="function")mT(y)&&(se=1);else if(typeof y=="string")se=5;else e:switch(y){case I:return Yg(k.children,z,K,x);case R:se=8,z|=8;break;case N:return y=Tc(12,k,x,z|2),y.elementType=N,y.lanes=K,y;case F:return y=Tc(13,k,x,z),y.elementType=F,y.lanes=K,y;case H:return y=Tc(19,k,x,z),y.elementType=H,y.lanes=K,y;case ne:return yT(k,z,K,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case O:se=10;break e;case L:se=9;break e;case j:se=11;break e;case Q:se=14;break e;case J:se=16,M=null;break e}throw Error(n(130,y==null?y:typeof y,""))}return x=Tc(se,k,x,z),x.elementType=y,x.type=M,x.lanes=K,x}function Yg(y,x,k,M){return y=Tc(7,y,M,x),y.lanes=k,y}function yT(y,x,k,M){return y=Tc(22,y,M,x),y.elementType=ne,y.lanes=k,y.stateNode={isHidden:!1},y}function Fk(y,x,k){return y=Tc(6,y,null,x),y.lanes=k,y}function Bk(y,x,k){return x=Tc(4,y.children!==null?y.children:[],y.key,x),x.lanes=k,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function IU(y,x,k,M,z){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.identifierPrefix=M,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function jk(y,x,k,M,z,K,se,be,Ce){return y=new IU(y,x,k,be,Ce),x===1?(x=1,K===!0&&(x|=8)):x=0,K=Tc(3,null,null,x),y.current=K,K.stateNode=y,K.memoizedState={element:M,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},BS(K),y}function kU(y,x,k){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:M==null?null:""+M,children:y,containerInfo:x,implementation:k}}function A4(y){if(!y)return Sm;y=y._reactInternals;e:{if(ms(y)!==y||y.tag!==1)throw Error(n(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Lu(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(y.tag===1){var k=y.type;if(Lu(k))return WO(y,k,x)}return x}function I4(y,x,k,M,z,K,se,be,Ce){return y=jk(k,M,!0,y,z,K,se,be,Ce),y.context=A4(null),k=y.current,M=iu(),z=Mm(k),K=Yh(M,z),K.callback=x??null,_c(k,K,z),y.current.lanes=z,In(y,z,M),ju(y,M),y}function vT(y,x,k,M){var z=x.current,K=iu(),se=Mm(z);return k=A4(k),x.context===null?x.context=k:x.pendingContext=k,x=Yh(K,se),x.payload={element:y},M=M===void 0?null:M,M!==null&&(x.callback=M),y=_c(z,x,se),y!==null&&(Pf(y,z,se,K),jS(y,z,se)),se}function bT(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function k4(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var k=y.retryLane;y.retryLane=k!==0&&k<x?k:x}}function Uk(y,x){k4(y,x),(y=y.alternate)&&k4(y,x)}var R4=typeof reportError=="function"?reportError:function(y){console.error(y)};function zk(y){this._internalRoot=y}k_.prototype.render=zk.prototype.render=function(y){var x=this._internalRoot;if(x===null)throw Error(n(409));vT(y,x,null,null)},k_.prototype.unmount=zk.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var x=y.containerInfo;qg(function(){vT(null,y,null,null)}),x[El]=null}};function k_(y){this._internalRoot=y}k_.prototype.unstable_scheduleHydration=function(y){if(y){var x=$h();y={blockedOn:null,target:y,priority:x};for(var k=0;k<Du.length&&x!==0&&x<Du[k].priority;k++);Du.splice(k,0,y),k===0&&Eg(y)}};function xT(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function _T(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function D4(){}function RU(y,x,k,M,z){if(z){if(typeof M=="function"){var K=M;M=function(){var Xe=bT(se);K.call(Xe)}}var se=I4(x,M,y,0,null,!1,!1,"",D4);return y._reactRootContainer=se,y[El]=se.current,xm(y.nodeType===8?y.parentNode:y),qg(),se}for(;z=y.lastChild;)y.removeChild(z);if(typeof M=="function"){var be=M;M=function(){var Xe=bT(Ce);be.call(Xe)}}var Ce=jk(y,0,!1,null,null,!1,!1,"",D4);return y._reactRootContainer=Ce,y[El]=Ce.current,xm(y.nodeType===8?y.parentNode:y),qg(function(){vT(x,Ce,k,M)}),Ce}function wT(y,x,k,M,z){var K=k._reactRootContainer;if(K){var se=K;if(typeof z=="function"){var be=z;z=function(){var Ce=bT(se);be.call(Ce)}}vT(x,se,y,z)}else se=RU(k,x,y,z,M);return bT(se)}Ys=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var k=Re(x.pendingLanes);k!==0&&(nr(x,k|1),ju(x,fr()),!(jr&6)&&(Hg=fr()+500,Tm()))}break;case 13:qg(function(){var M=Gh(y,1);if(M!==null){var z=iu();Pf(M,y,1,z)}}),Uk(y,1)}},Xa=function(y){if(y.tag===13){var x=Gh(y,134217728);if(x!==null){var k=iu();Pf(x,y,134217728,k)}Uk(y,134217728)}},cc=function(y){if(y.tag===13){var x=Mm(y),k=Gh(y,x);if(k!==null){var M=iu();Pf(k,y,x,M)}Uk(y,x)}},$h=function(){return ln},bf=function(y,x){var k=ln;try{return ln=y,x()}finally{ln=k}},Ji=function(y,x,k){switch(x){case"input":if(Me(y,k),x=k.name,k.type==="radio"&&x!=null){for(k=y;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var M=k[x];if(M!==y&&M.form===y.form){var z=RS(M);if(!z)throw Error(n(90));he(M),Me(M,z)}}}break;case"textarea":dt(y,k);break;case"select":x=k.value,x!=null&&St(y,!!k.multiple,x,!1)}},ba=Mk,Ru=qg;var ET={usingClientEntryPoint:!1,Events:[Ea,ir,RS,$o,oc,Mk]},R_={findFiberByHostInstance:Id,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DU={bundleType:R_.bundleType,version:R_.version,rendererPackageName:R_.rendererPackageName,rendererConfig:R_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Oh(y),y===null?null:y.stateNode},findFiberByHostInstance:R_.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ST=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ST.isDisabled&&ST.supportsFiber)try{lc=ST.inject(DU),yo=ST}catch{}}return kc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ET,kc.createPortal=function(y,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xT(x))throw Error(n(200));return kU(y,x,null,k)},kc.createRoot=function(y,x){if(!xT(y))throw Error(n(299));var k=!1,M="",z=R4;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(z=x.onRecoverableError)),x=jk(y,1,!1,null,null,k,!1,M,z),y[El]=x.current,xm(y.nodeType===8?y.parentNode:y),new zk(x)},kc.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=Oh(x),y=y===null?null:y.stateNode,y},kc.flushSync=function(y){return qg(y)},kc.hydrate=function(y,x,k){if(!_T(x))throw Error(n(200));return wT(null,y,x,!0,k)},kc.hydrateRoot=function(y,x,k){if(!xT(y))throw Error(n(405));var M=k!=null&&k.hydratedSources||null,z=!1,K="",se=R4;if(k!=null&&(k.unstable_strictMode===!0&&(z=!0),k.identifierPrefix!==void 0&&(K=k.identifierPrefix),k.onRecoverableError!==void 0&&(se=k.onRecoverableError)),x=I4(x,null,y,1,k??null,z,!1,K,se),y[El]=x.current,xm(y),M)for(y=0;y<M.length;y++)k=M[y],z=k._getVersion,z=z(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,z]:x.mutableSourceEagerHydrationData.push(k,z);return new k_(x)},kc.render=function(y,x,k){if(!_T(x))throw Error(n(200));return wT(null,y,x,!1,k)},kc.unmountComponentAtNode=function(y){if(!_T(y))throw Error(n(40));return y._reactRootContainer?(qg(function(){wT(null,null,y,!1,function(){y._reactRootContainer=null,y[El]=null})}),!0):!1},kc.unstable_batchedUpdates=Mk,kc.unstable_renderSubtreeIntoContainer=function(y,x,k,M){if(!_T(k))throw Error(n(200));if(y==null||y._reactInternals===void 0)throw Error(n(38));return wT(y,x,k,!1,M)},kc.version="18.3.1-next-f1338f8080-20240426",kc}var Mue;function e_e(){if(Mue)return WU.exports;Mue=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),WU.exports=_Ue(),WU.exports}var Lue;function wUe(){if(Lue)return M4;Lue=1;var e=e_e();return M4.createRoot=e.createRoot,M4.hydrateRoot=e.hydrateRoot,M4}var EUe=wUe();const SUe=vh(EUe);var e0=function(){return e0=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},e0.apply(this,arguments)};function UP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function gy(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function $ue(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function TUe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Hr(e){return this instanceof Hr?(this.v=e,this):new Hr(e)}function mw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,v){s.push([h,m,g,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Hr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function KU(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Hr(e[i](o)),done:!1}:s?s(o):o}:s}}function ND(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $ue=="function"?$ue(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var XM="right-scroll-bar-position",QM="width-before-scroll-bar",CUe="with-scroll-bars-hidden",AUe="--removed-body-scroll-bar-size";function XU(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function IUe(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var kUe=typeof window<"u"?P.useLayoutEffect:P.useEffect,Fue=new WeakMap;function RUe(e,t){var n=IUe(null,function(r){return e.forEach(function(i){return XU(i,r)})});return kUe(function(){var r=Fue.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||XU(a,null)}),s.forEach(function(a){i.has(a)||XU(a,o)})}Fue.set(n,e)},[e]),n}function DUe(e){return e}function NUe(e,t){t===void 0&&(t=DUe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function PUe(e){e===void 0&&(e={});var t=NUe(null);return t.options=e0({async:!0,ssr:!1},e),t}var t_e=function(e){var t=e.sideCar,n=UP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,e0({},n))};t_e.isSideCarExport=!0;function OUe(e,t){return e.useMedium(t),t_e}var n_e=PUe(),QU=function(){},Q8=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:QU,onWheelCapture:QU,onTouchMoveCapture:QU}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,b=e.gapMode,w=UP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,T=RUe([n,t]),C=e0(e0({},w),i);return P.createElement(P.Fragment,null,c&&P.createElement(E,{sideCar:n_e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?P.cloneElement(P.Children.only(a),e0(e0({},C),{ref:T})):P.createElement(v,e0({},C,{className:u,ref:T}),a))});Q8.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q8.classNames={fullWidth:QM,zeroRight:XM};var r_e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=r_e();return t&&e.setAttribute("nonce",t),e}function LUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $Ue(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=MUe())&&(LUe(t,n),$Ue(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},BUe=function(){var e=FUe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jUe=function(){var e=BUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},UUe={left:0,top:0,right:0,gap:0},JU=function(e){return parseInt(e||"",10)||0},zUe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[JU(n),JU(r),JU(i)]},VUe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UUe;var t=zUe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},HUe=jUe(),P2="data-scroll-locked",qUe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(CUe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(P2,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(XM,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(QM,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(XM," .").concat(XM,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(QM," .").concat(QM,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(P2,`] {
    `).concat(AUe,": ").concat(a,`px;
  }
`)},Bue=function(){var e=parseInt(document.body.getAttribute(P2)||"0",10);return isFinite(e)?e:0},WUe=function(){P.useEffect(function(){return document.body.setAttribute(P2,(Bue()+1).toString()),function(){var e=Bue()-1;e<=0?document.body.removeAttribute(P2):document.body.setAttribute(P2,e.toString())}},[])},GUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;WUe();var s=P.useMemo(function(){return VUe(i)},[i]);return P.createElement(HUe,{styles:qUe(s,!t,i,n?"":"!important")})};function YUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=r_e();return t&&e.setAttribute("nonce",t),e}function KUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=YUe())&&(KUe(t,n),XUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JUe=function(){var e=QUe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ZUe=function(){var e=JUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Kq=!1;if(typeof window<"u")try{var L4=Object.defineProperty({},"passive",{get:function(){return Kq=!0,!0}});window.addEventListener("test",L4,L4),window.removeEventListener("test",L4,L4)}catch{Kq=!1}var AT=Kq?{passive:!1}:!1,eze=function(e){return e.tagName==="TEXTAREA"},i_e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!eze(e)&&n[t]==="visible")},tze=function(e){return i_e(e,"overflowY")},nze=function(e){return i_e(e,"overflowX")},jue=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=s_e(e,r);if(i){var s=o_e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rze=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},ize=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},s_e=function(e,t){return e==="v"?tze(t):nze(t)},o_e=function(e,t){return e==="v"?rze(t):ize(t)},sze=function(e,t){return e==="h"&&t==="rtl"?-1:1},oze=function(e,t,n,r,i){var s=sze(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=o_e(e,a),p=h[0],m=h[1],g=h[2],v=m-g-s*p;(p||v)&&s_e(e,a)&&(f+=v,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},$4=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Uue=function(e){return[e.deltaX,e.deltaY]},zue=function(e){return e&&"current"in e?e.current:e},aze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uze=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lze=0,IT=[];function cze(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState(lze++)[0],s=P.useState(ZUe)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=TUe([e.lockRef.current],(e.shards||[]).map(zue),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=$4(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-v[0],E="deltaY"in m?m.deltaY:b[1]-v[1],T,C=m.target,I=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in m&&I==="h"&&C.type==="range")return!1;var R=jue(I,C);if(!R)return!0;if(R?T=I:(T=I==="v"?"h":"v",R=jue(I,C)),!R)return!1;if(!r.current&&"changedTouches"in m&&(w||E)&&(r.current=T),!T)return!0;var N=r.current||T;return oze(N,g,m,N==="h"?w:E)},[]),u=P.useCallback(function(m){var g=m;if(!(!IT.length||IT[IT.length-1]!==s)){var v="deltaY"in g?Uue(g):$4(g),b=t.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&aze(T.delta,v)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(zue).filter(Boolean).filter(function(T){return T.contains(g.target)}),E=w.length>0?a(g,w[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=P.useCallback(function(m,g,v,b){var w={name:m,delta:g,target:v,should:b,shadowParent:fze(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=P.useCallback(function(m){n.current=$4(m),r.current=void 0},[]),f=P.useCallback(function(m){l(m.type,Uue(m),m.target,a(m,e.lockRef.current))},[]),d=P.useCallback(function(m){l(m.type,$4(m),m.target,a(m,e.lockRef.current))},[]);P.useEffect(function(){return IT.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,AT),document.addEventListener("touchmove",u,AT),document.addEventListener("touchstart",c,AT),function(){IT=IT.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,AT),document.removeEventListener("touchmove",u,AT),document.removeEventListener("touchstart",c,AT)}},[]);var h=e.removeScrollBar,p=e.inert;return P.createElement(P.Fragment,null,p?P.createElement(s,{styles:uze(i)}):null,h?P.createElement(GUe,{gapMode:e.gapMode}):null)}function fze(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dze=OUe(n_e,cze);var cC=P.forwardRef(function(e,t){return P.createElement(Q8,e0({},e,{ref:t,sideCar:dze}))});cC.classNames=Q8.classNames;function as(e){return Object.keys(e)}function ZU(e){return e&&typeof e=="object"&&!Array.isArray(e)}function VX(e,t){const n={...e},r=t;return ZU(e)&&ZU(t)&&Object.keys(t).forEach(i=>{ZU(r[i])&&i in e?n[i]=VX(n[i],r[i]):n[i]=r[i]}),n}function hze(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function pze(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function gN(e){const t=pze(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function ez(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function a_e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?ez(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?ez(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?ez(s):s}}return r}return n}const Ke=a_e("rem",{shouldScale:!0}),j$=a_e("em");function lx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function u_e(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function cx(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function Au(e){const t=P.createContext(null);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function fx(e=null){const t=P.createContext(e);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>P.useContext(t)]}function U$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function z$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function mze(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function gze(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function yze(e,t,n){return z$(e,n)===z$(t,n)}function HX({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=z$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>yze(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=gze(l,u,r),f=mze(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const vze={app:100,modal:200,popover:300,overlay:400,max:9999};function ff(e){return vze[e]}const Xq=()=>{};function bze(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Xq:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Kn(e,t="size",n=!0){if(e!==void 0)return u_e(e)?n?Ke(e):e:`var(--${t}-${e})`}function Go(e){return Kn(e,"mantine-spacing")}function Ci(e){return e===void 0?"var(--mantine-radius-default)":Kn(e,"mantine-radius")}function za(e){return Kn(e,"mantine-font-size")}function l_e(e){return Kn(e,"mantine-line-height",!1)}function qX(e){if(e)return Kn(e,"mantine-shadow",!1)}function h0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function WX(e,t){return e in t?gN(t[e]):gN(e)}function yN(e,t){const n=e.map(r=>({value:r,px:WX(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Sp(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function xze(e,t,n){var r;return n?Array.from(((r=z$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function _ze(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function t0(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function O2(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Hv(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const wze=()=>{};function J8(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Hv(e),s=P.useRef(0),o=Object.assign(P.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:wze});return P.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Vue=["mousedown","touchstart"];function Eze(e,t,n){const r=P.useRef(null);return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Vue).forEach(s=>document.addEventListener(s,i)),()=>{(t||Vue).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Sze(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Tze(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Cze(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:Tze(e)),s=P.useRef(null);return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Sze(s.current,o=>i(o.matches))},[e]),r}const IE=typeof document<"u"?P.useLayoutEffect:P.useEffect;function M0(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function c_e({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return M0(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const Aze=/input|select|textarea|button|object/,f_e="a, input, select, textarea, button, object, [tabindex]";function Ize(e){return e.style.display==="none"}function kze(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Ize(n))return!1;n=n.parentNode}return!0}function d_e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Qq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(d_e(e));return(Aze.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&kze(e)}function h_e(e){const t=d_e(e);return(Number.isNaN(t)||t>=0)&&Qq(e)}function Rze(e){return Array.from(e.querySelectorAll(f_e)).filter(h_e)}function Dze(e,t){const n=Rze(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Nze(e=!0){const t=P.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(f_e));s=o.find(h_e)||o.find(Qq)||null,!s&&Qq(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=P.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&Dze(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const Pze=e=>(e+1)%1e6;function Oze(){const[,e]=P.useReducer(Pze,0);return e}const Mze=fi.useId||(()=>{});function Lze(){const e=Mze();return e?`mantine-${e.replace(/:/g,"")}`:""}function gl(e){const t=Lze(),[n,r]=P.useState(t);return IE(()=>{r(O2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function p_e(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function V$(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function m_e(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=V$(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():V$(r,null)}),t.clear()}}}function Po(...e){return P.useCallback(m_e(...e),e)}function g_e(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{var b,w;const l=({x:E,y:T})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const I=t0((E-C.left)/C.width,0,1);e({x:n==="ltr"?I:1-I,y:t0((T-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),v(E)},v=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Yo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Z8(e,t){return Cze("(prefers-reduced-motion: reduce)",e,t)}const $ze={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function td(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState($ze),s=P.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Fze(e){const[t,{width:n,height:r}]=td(e);return{ref:t,width:n,height:r}}function Bze(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i==="[plus]"?"+":i}}function jze(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Uze(e){return t=>jze(Bze(e),t)}function zze(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Uze(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function GX(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=P.useState(e),o=P.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function Vze(e,t,n={autoInvoke:!1}){const r=P.useRef(null),i=P.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=P.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return P.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Hze(e){const t=P.useRef(void 0);return P.useEffect(()=>{t.current=e},[e]),t.current}function qze(e,t,n){const r=P.useRef(null),i=P.useRef(null);return P.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Wze(){const[e,t]=P.useState(!1);return P.useEffect(()=>t(!0),[]),e}function Gze(e,t){const n=Hv(e),r=P.useRef(null),i=P.useRef(null),s=P.useRef(!0),o=P.useRef(t),a=P.useRef(-1),u=()=>window.clearTimeout(a.current),l=P.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=P.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=P.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return P.useEffect(()=>{o.current=t},[t]),[f,u]}function Yze(e,t){const[n,r]=P.useState(e),[i,s]=Gze(r,t);return P.useEffect(()=>s,[]),[n,i]}function Kze(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Xze(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});IE(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Kze(`${e}:${String(r)}`,i[0])}return[t,n]}var Qze={};function y_e(){return typeof process<"u"&&Qze?"production":"development"}function Jq(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function eB(e){var n;const t=fi.version;return typeof fi.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function v_e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=v_e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function co(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=v_e(e))&&(r&&(r+=" "),r+=t);return r}const Jze={};function Zze(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=co(t[r],i):t[r]=i})}),t}function tB({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Jze);return Zze(s)}function H$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const b_e=P.createContext(null);function dx(){const e=P.useContext(b_e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function eVe(){return dx().cssVariablesResolver}function tVe(){return dx().classNamesPrefix}function YX(){return dx().getStyleNonce}function nVe(){return dx().withStaticClasses}function rVe(){return dx().headless}function iVe(){var e;return(e=dx().stylesTransform)==null?void 0:e.sx}function sVe(){var e;return(e=dx().stylesTransform)==null?void 0:e.styles}function oVe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function aVe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function uVe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function lVe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function KX(e){return oVe(e)?aVe(e):e.startsWith("rgb")?uVe(e):e.startsWith("hsl")?lVe(e):{r:0,g:0,b:0,a:1}}function F4(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=KX(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function vN(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function tz(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function cVe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function fVe(e){if(e.startsWith("oklch("))return(cVe(e)||0)/100;const{r:t,g:n,b:r}=KX(e),i=t/255,s=n/255,o=r/255,a=tz(i),u=tz(s),l=tz(o);return .2126*a+.7152*u+.0722*l}function qk(e,t=.179){return e.startsWith("var(")?!1:fVe(e)>t}function ig({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:qk(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:qk(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:qk(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][vN(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:qk(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:qk(e,t.luminanceThreshold),shade:s,variable:void 0}}function qi(e,t){const n=ig({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Zq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=qi(n.from,t),i=qi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Hm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=KX(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const kT=Hm,dVe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=ig({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ke(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ke(1)} solid transparent`}:{background:e,hover:F4(e,.1),color:a,border:`${Ke(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Hm(a,.1),hover:Hm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:Hm(e,.1),hover:Hm(e,.12),color:e,border:`${Ke(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ke(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Hm(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Hm(e,.05),color:e,border:`${Ke(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Hm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:"transparent",hover:Hm(e,.12),color:e,border:`${Ke(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ke(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:F4(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:F4(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:F4(t.white,.01),color:e,border:`${Ke(1)} solid transparent`}:n==="gradient"?{background:Zq(r,t),hover:Zq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ke(1)} solid var(--mantine-color-default-border)`}:{}},hVe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Hue="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",XX={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:hVe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:dVe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Hue,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Hue,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ke(34),lineHeight:"1.3"},h2:{fontSize:Ke(26),lineHeight:"1.35"},h3:{fontSize:Ke(22),lineHeight:"1.4"},h4:{fontSize:Ke(18),lineHeight:"1.45"},h5:{fontSize:Ke(16),lineHeight:"1.5"},h6:{fontSize:Ke(14),lineHeight:"1.5"}}},fontSizes:{xs:Ke(12),sm:Ke(14),md:Ke(16),lg:Ke(18),xl:Ke(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ke(2),sm:Ke(4),md:Ke(8),lg:Ke(16),xl:Ke(32)},spacing:{xs:Ke(10),sm:Ke(12),md:Ke(16),lg:Ke(20),xl:Ke(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), 0 ${Ke(1)} ${Ke(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(10)} ${Ke(15)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(7)} ${Ke(7)} ${Ke(-5)}`,md:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(20)} ${Ke(25)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(10)} ${Ke(10)} ${Ke(-5)}`,lg:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(28)} ${Ke(23)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(12)} ${Ke(12)} ${Ke(-7)}`,xl:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(36)} ${Ke(28)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(17)} ${Ke(17)} ${Ke(-7)}`},other:{},components:{}};function que(e){return e==="auto"||e==="dark"||e==="light"}function pVe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return que(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&que(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const mVe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Wue="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function nz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Gue(e){if(!(e.primaryColor in e.colors))throw new Error(mVe);if(typeof e.primaryShade=="object"&&(!nz(e.primaryShade.dark)||!nz(e.primaryShade.light)))throw new Error(Wue);if(typeof e.primaryShade=="number"&&!nz(e.primaryShade))throw new Error(Wue)}function gVe(e,t){var r;if(!t)return Gue(e),e;const n=VX(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Gue(n),n}const QX=P.createContext(null),yVe=()=>P.useContext(QX)||XX;function Oo(){const e=P.useContext(QX);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function x_e({theme:e,children:t,inherit:n=!0}){const r=yVe(),i=P.useMemo(()=>gVe(n?r:XX,e),[e,r,n]);return S.jsx(QX.Provider,{value:i,children:t})}x_e.displayName="@mantine/core/MantineThemeProvider";function vVe(){const e=Oo(),t=YX(),n=as(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=gN(e.breakpoints[i]),a=s?`${o-.1}px`:j$(o-.1),u=s?`${o}px`:j$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return S.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function rz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Wk(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function bVe(e,t){const n=rz(e.variables),r=n?Wk(t,n):"",i=rz(e.dark),s=rz(e.light),o=i?Wk(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?Wk(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function hx({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&ig({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Yue(e,t){return hx({color:e.colors[e.primaryColor][vN(e,t)],theme:e,autoContrast:null})}function B4({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=vN(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:kT(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:kT(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:kT(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=vN(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:kT(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:kT(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:kT(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function xVe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function RT(e,t,n){as(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const __e=e=>{const t=vN(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ke(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Yue(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Yue(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};RT(r.variables,e.breakpoints,"breakpoint"),RT(r.variables,e.spacing,"spacing"),RT(r.variables,e.fontSizes,"font-size"),RT(r.variables,e.lineHeights,"line-height"),RT(r.variables,e.shadows,"shadow"),RT(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),as(e.colors).forEach(s=>{const o=e.colors[s];if(xVe(o)){Object.assign(r.light,B4({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,B4({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,B4({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,B4({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return as(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function _Ve({theme:e,generator:t}){const n=__e(e),r=t==null?void 0:t(e);return r?VX(n,r):n}const iz=__e(XX);function wVe(e){const t={variables:{},light:{},dark:{}};return as(e.variables).forEach(n=>{iz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),as(e.light).forEach(n=>{iz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),as(e.dark).forEach(n=>{iz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function EVe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function w_e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Oo(),r=YX(),i=eVe(),s=_Ve({theme:n,generator:i}),o=e===":root"&&t,a=o?wVe(s):s,u=bVe(a,e);return u?S.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":EVe(e)}`}}):null}w_e.displayName="@mantine/CssVariables";function SVe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function DT(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function TVe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(null),[s,o]=P.useState(()=>e.get(t)),a=r||s,u=P.useCallback(c=>{r||(DT(c,n),o(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{o(t),DT(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),IE(()=>{DT(e.get(t),n)},[]),P.useEffect(()=>{var f;if(r)return DT(r,n),()=>{};r===void 0&&DT(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&DT(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function CVe({respectReducedMotion:e,getRootElement:t}){IE(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}SVe();function E_e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=pVe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:v}=TVe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return CVe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),S.jsx(b_e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:v,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:S.jsxs(x_e,{theme:e,children:[o&&S.jsx(w_e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&S.jsx(vVe,{}),t]})})}E_e.displayName="@mantine/core/MantineProvider";function kE({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Oo();return{resolvedClassNames:tB({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:H$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const AVe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function IVe({theme:e,options:t,unstyled:n}){return co((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||AVe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function kVe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return tB({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Kue({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return tB({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function RVe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function DVe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function NVe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function PVe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=tB({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function OVe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function MVe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return co(IVe({theme:e,options:t,unstyled:a||h}),PVe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),OVe({options:t,classes:o,selector:r,unstyled:a}),Kue({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Kue({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),kVe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),RVe({rootSelector:l,selector:r,className:u}),DVe({selector:r,classes:o,unstyled:a||h}),d&&!h&&NVe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function LVe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return H$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function eW({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...eW({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function $Ve(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...lx(n[r])}}),t),{})}function FVe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=$Ve([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function BVe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&LVe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&H$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&H$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...FVe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?eW({style:u,theme:e}):null,...eW({style:r==null?void 0:r.style,theme:e})}}function jVe({props:e,stylesCtx:t,themeName:n}){var o;const r=Oo(),i=(o=sVe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Zt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Oo(),h=tVe(),p=nVe(),m=rVe(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=jVe({props:n,stylesCtx:r,themeName:g});return(w,E)=>({className:MVe({theme:d,options:E,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([E==null?void 0:E.styles,l])}),style:BVe({theme:d,themeName:g,selector:w,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:v})})}function EA(e,t){return typeof e=="boolean"?e:t.autoContrast}function Je(e,t,n){var o;const r=Oo(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...lx(n)}}function sz(e){return as(e).reduce((t,n)=>e[n]!==void 0?`${t}${hze(n)}:${e[n]};`:t,"").trim()}function UVe({selector:e,styles:t,media:n,container:r}){const i=t?sz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${sz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${sz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function RE(e){const t=YX();return S.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:UVe(e)}})}function DE(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:I,fz:R,fw:N,lts:O,ta:L,lh:j,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Se,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:De,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge,...at}=e;return{styleProps:lx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:I,fz:R,fw:N,lts:O,ta:L,lh:j,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Se,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:De,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge}),rest:at}}const zVe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function JX(e,t){const n=ig({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function VVe(e,t){const n=ig({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:JX(e,t)}function HVe(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ke(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${JX(i.join(" "),t)}`),s.trim()}return e}const Xue={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function qVe(e){return typeof e=="string"&&e in Xue?Xue[e]:e}const WVe=["h1","h2","h3","h4","h5","h6"];function GVe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&WVe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ke(e):e}function YVe(e){return e}const KVe=["h1","h2","h3","h4","h5","h6"];function XVe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&KVe.includes(e)?`var(--mantine-${e}-line-height)`:e}function QVe(e){return typeof e=="number"?Ke(e):e}function JVe(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ke(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const oz={color:JX,textColor:VVe,fontSize:GVe,spacing:JVe,identity:YVe,size:QVe,lineHeight:XVe,fontFamily:qVe,border:HVe};function Que(e){return e.replace("(min-width: ","").replace("em)","")}function ZVe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Que(i))-Number(Que(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function eHe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function tHe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function nHe(e){return typeof e=="object"&&e!==null?as(e).filter(t=>t!=="base"):[]}function rHe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function S_e({styleProps:e,data:t,theme:n}){return ZVe(as(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=tHe(e[i]);if(!eHe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=oz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=nHe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=oz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:oz[s.type](rHe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function zP(){return`__m__-${P.useId().replace(/:/g,"")}`}function ZX(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...ZX(r,t)}),{}):typeof e=="function"?e(t):e??{}}function T_e(e){return e.startsWith("data-")?e:`data-${e}`}function iHe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[T_e(n)]=e[n]),t},{})}function C_e(e){return e?typeof e=="string"?{[T_e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...C_e(n)}),{}):iHe(e):null}function tW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...tW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function sHe({theme:e,style:t,vars:n,styleProps:r}){const i=tW(t,e),s=tW(n,e);return{...i,...s,...r}}const A_e=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var R;const m=Oo(),g=e||"div",{styleProps:v,rest:b}=DE(h),w=iVe(),E=(R=w==null?void 0:w())==null?void 0:R(v.sx),T=zP(),C=S_e({styleProps:v,theme:m,data:zVe}),I={ref:p,style:sHe({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:co(r,E,{[T]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":u_e(o)?void 0:o||void 0,size:d,...C_e(s),...b};return S.jsxs(S.Fragment,{children:[C.hasResponsiveStyles&&S.jsx(RE,{selector:`.${T}`,styles:C.styles,media:C.media}),typeof f=="function"?f(I):S.jsx(g,{...I})]})});A_e.displayName="@mantine/core/Box";const je=A_e;function I_e(e){return e}function oHe(e){const t=e;return n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function At(e){const t=P.forwardRef(e);return t.extend=I_e,t.withProps=n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Xo(e){const t=P.forwardRef(e);return t.withProps=n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=I_e,t}const aHe=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function x1(){return P.useContext(aHe)}var nB=e_e();const VR=vh(nB);function uHe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function az(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Gk=typeof window<"u"&&window.requestAnimationFrame;function lHe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:o),l=p=>{nB.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||uHe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}M0(()=>{typeof Gk=="function"&&Gk(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Gk(()=>{const p=az(i);c({...f(p),height:p})})}:()=>{const p=az(i);c({...f(p),willChange:"height",height:p}),Gk(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=az(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const v=g[m];return{"aria-hidden":!r,...g,[m]:m_e(i,v),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const cHe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},rB=At((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Je("Collapse",cHe,e),c=Oo(),f=Z8(),h=(c.respectReducedMotion?f:!1)?0:i,p=lHe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?S.jsx(je,{...l,children:n}):null:S.jsx(je,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...ZX(o,c)},ref:t,...l}),children:n})});rB.displayName="@mantine/core/Collapse";const[fHe,bh]=Au("ScrollArea.Root component was not found in tree");function fC(e,t){const n=Hv(t);IE(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const dHe=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=bh(),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return fC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),fC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?S.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),hHe=P.forwardRef((e,t)=>{const n=bh(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.jsx(dHe,{...e,ref:t}):null}),pHe={scrollHideDelay:1e3,type:"hover"},k_e=P.forwardRef((e,t)=>{const n=Je("ScrollAreaRoot",pHe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,p]=P.useState(null),[m,g]=P.useState(null),[v,b]=P.useState(0),[w,E]=P.useState(0),[T,C]=P.useState(!1),[I,R]=P.useState(!1),N=Po(t,O=>u(O));return S.jsx(fHe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:I,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:E},children:S.jsx(je,{...o,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${v}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});k_e.displayName="@mantine/core/ScrollAreaRoot";function R_e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function iB(e){const t=R_e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function D_e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function mHe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Jue(e,t,n="ltr"){const r=iB(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=mHe(e,u);return D_e([0,o],[0,a])(l)}function gHe(e,t,n,r="ltr"){const i=iB(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return D_e([u,l],f)(e)}function N_e(e,t){return e>0&&e<t}function Jv(e){return e?parseInt(e,10):0}function Mw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[yHe,P_e]=Au("ScrollAreaScrollbar was not found in tree"),O_e=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=bh(),[h,p]=P.useState(null),m=Po(t,R=>p(R)),g=P.useRef(null),v=P.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=Hv(l),T=Hv(a),C=J8(c,10),I=R=>{if(g.current){const N=R.clientX-g.current.left,O=R.clientY-g.current.top;u({x:N,y:O})}};return P.useEffect(()=>{const R=N=>{const O=N.target;(h==null?void 0:h.contains(O))&&E(N,w)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,h,w,E]),P.useEffect(T,[n,T]),fC(h,C),fC(d.content,C),S.jsx(yHe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Hv(i),onThumbPointerUp:Hv(s),onThumbPositionChange:T,onThumbPointerDown:Hv(o)},children:S.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Mw(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),g.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(R))}),onPointerMove:Mw(e.onPointerMove,I),onPointerUp:Mw(e.onPointerUp,R=>{R.preventDefault();const N=R.target;N.hasPointerCapture(R.pointerId)&&N.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,g.current=null})})})}),M_e=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=bh(),[a,u]=P.useState(),l=P.useRef(null),c=Po(t,l,o.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),S.jsx(O_e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${iB(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),N_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Jv(a.paddingLeft),paddingEnd:Jv(a.paddingRight)}})}})});M_e.displayName="@mantine/core/ScrollAreaScrollbarX";const L_e=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=bh(),[a,u]=P.useState(),l=P.useRef(null),c=Po(t,l,o.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),S.jsx(O_e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${iB(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),N_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Jv(a.paddingTop),paddingEnd:Jv(a.paddingBottom)}})}})});L_e.displayName="@mantine/core/ScrollAreaScrollbarY";const sB=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=x1(),s=bh(),o=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=R_e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>gHe(h,a.current,u,p);return n==="horizontal"?S.jsx(M_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Jue(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?S.jsx(L_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Jue(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});sB.displayName="@mantine/core/ScrollAreaScrollbarVisible";const eQ=P.forwardRef((e,t)=>{const n=bh(),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=J8(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return fC(n.viewport,u),fC(n.content,u),r||s?S.jsx(sB,{"data-state":s?"visible":"hidden",...i,ref:t}):null});eQ.displayName="@mantine/core/ScrollAreaScrollbarAuto";const $_e=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bh(),[s,o]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?S.jsx(eQ,{"data-state":s?"visible":"hidden",...r,ref:t}):null});$_e.displayName="@mantine/core/ScrollAreaScrollbarHover";const vHe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bh(),s=e.orientation==="horizontal",[o,a]=P.useState("hidden"),u=J8(()=>a("idle"),100);return P.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?S.jsx(sB,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Mw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Mw(e.onPointerLeave,()=>a("idle"))}):null}),nW=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=bh(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.jsx($_e,{...r,ref:t,forceMount:n}):i.type==="scroll"?S.jsx(vHe,{...r,ref:t,forceMount:n}):i.type==="auto"?S.jsx(eQ,{...r,ref:t,forceMount:n}):i.type==="always"?S.jsx(sB,{...r,ref:t}):null});nW.displayName="@mantine/core/ScrollAreaScrollbar";function bHe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const F_e=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=bh(),s=P_e(),{onThumbPositionChange:o}=s,a=Po(t,c=>s.onThumbChange(c)),u=P.useRef(void 0),l=J8(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=bHe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),S.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Mw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Mw(e.onPointerUp,s.onThumbPointerUp)})});F_e.displayName="@mantine/core/ScrollAreaThumb";const rW=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=P_e();return n||i.hasThumb?S.jsx(F_e,{ref:t,...r}):null});rW.displayName="@mantine/core/ScrollAreaThumb";const B_e=P.forwardRef(({children:e,style:t,...n},r)=>{const i=bh(),s=Po(r,i.onViewportChange);return S.jsx(je,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:S.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});B_e.displayName="@mantine/core/ScrollAreaViewport";var tQ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const j_e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},xHe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ke(t)}}),Ky=At((e,t)=>{const n=Je("ScrollArea",j_e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[T,C]=P.useState(!1),I=Zt({name:"ScrollArea",props:n,classes:tQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xHe});return S.jsxs(k_e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:v,...I("root"),...E,children:[S.jsx(B_e,{...d,...I("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":v||void 0,onScroll:R=>{var j;(j=d==null?void 0:d.onScroll)==null||j.call(d,R),p==null||p({x:R.currentTarget.scrollLeft,y:R.currentTarget.scrollTop});const{scrollTop:N,scrollHeight:O,clientHeight:L}=R.currentTarget;N-(O-L)>=0&&(b==null||b()),N===0&&(w==null||w())},children:m}),(v==="xy"||v==="x")&&S.jsx(nW,{...I("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:S.jsx(rW,{...I("thumb")})}),(v==="xy"||v==="y")&&S.jsx(nW,{...I("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:S.jsx(rW,{...I("thumb")})}),S.jsx(hHe,{...I("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});Ky.displayName="@mantine/core/ScrollArea";const nQ=At((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:v,onBottomReached:b,onTopReached:w,...E}=Je("ScrollAreaAutosize",j_e,e);return S.jsx(je,{...E,ref:t,style:[{display:"flex",overflow:"auto"},g],children:S.jsx(je,{style:{display:"flex",flexDirection:"column",flex:1},children:S.jsx(Ky,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:v,scrollbars:m,onBottomReached:b,onTopReached:w,children:n})})})});Ky.classes=tQ;nQ.displayName="@mantine/core/ScrollAreaAutosize";nQ.classes=tQ;Ky.Autosize=nQ;var U_e={root:"m_87cf2631"};const _He={__staticSelector:"UnstyledButton"},ud=Xo((e,t)=>{const n=Je("UnstyledButton",_He,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Zt({name:s,props:n,classes:U_e,className:r,style:l,classNames:a,styles:u,unstyled:o});return S.jsx(je,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ud.classes=U_e;ud.displayName="@mantine/core/UnstyledButton";var z_e={root:"m_515a97f8"};const wHe={},rQ=At((e,t)=>{const n=Je("VisuallyHidden",wHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Zt({name:"VisuallyHidden",classes:z_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return S.jsx(je,{component:"span",ref:t,...c("root"),...l})});rQ.classes=z_e;rQ.displayName="@mantine/core/VisuallyHidden";var V_e={root:"m_1b7284a3"};const EHe={},SHe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ci(t),"--paper-shadow":qX(n)}}),SA=Xo((e,t)=>{const n=Je("Paper",EHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Zt({name:"Paper",props:n,classes:V_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:SHe});return S.jsx(je,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});SA.classes=V_e;SA.displayName="@mantine/core/Paper";function oB(){return typeof window<"u"}function H_e(e){return q_e(e)?(e.nodeName||"").toLowerCase():"#document"}function TA(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function THe(e){var t;return(t=(q_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function q_e(e){return oB()?e instanceof Node||e instanceof TA(e).Node:!1}function jc(e){return oB()?e instanceof Element||e instanceof TA(e).Element:!1}function iQ(e){return oB()?e instanceof HTMLElement||e instanceof TA(e).HTMLElement:!1}function iW(e){return!oB()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof TA(e).ShadowRoot}function CHe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zue(e){return["html","body","#document"].includes(H_e(e))}function AHe(e){return TA(e).getComputedStyle(e)}function IHe(e){if(H_e(e)==="html")return e;const t=e.assignedSlot||e.parentNode||iW(e)&&e.host||THe(e);return iW(t)?t.host:t}function ele(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function bN(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&iW(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function W_e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function G_e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function kHe(e){return NHe()?!1:!tle()&&e.width===0&&e.height===0||tle()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function RHe(){return/apple/i.test(navigator.vendor)}function tle(){const e=/android/i;return e.test(W_e())||e.test(G_e())}function DHe(){return W_e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function NHe(){return G_e().includes("jsdom/")}function sW(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function PHe(e){return"nativeEvent"in e}function OHe(e){return e.matches("html,body")}function gw(e){return(e==null?void 0:e.ownerDocument)||document}function uz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function i2(e){return"composedPath"in e?e.composedPath()[0]:e.target}const MHe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function LHe(e){return iQ(e)&&e.matches(MHe)}const Kf=Math.min,Zu=Math.max,q$=Math.round,j4=Math.floor,Sb=e=>({x:e,y:e}),$He={left:"right",right:"left",bottom:"top",top:"bottom"},FHe={start:"end",end:"start"};function oW(e,t,n){return Zu(e,Kf(t,n))}function Xy(e,t){return typeof e=="function"?e(t):e}function Bp(e){return e.split("-")[0]}function CA(e){return e.split("-")[1]}function sQ(e){return e==="x"?"y":"x"}function oQ(e){return e==="y"?"height":"width"}function NE(e){return["top","bottom"].includes(Bp(e))?"y":"x"}function aQ(e){return sQ(NE(e))}function BHe(e,t,n){n===void 0&&(n=!1);const r=CA(e),i=aQ(e),s=oQ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=W$(o)),[o,W$(o)]}function jHe(e){const t=W$(e);return[aW(e),t,aW(t)]}function aW(e){return e.replace(/start|end/g,t=>FHe[t])}function UHe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function zHe(e,t,n,r){const i=CA(e);let s=UHe(Bp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(aW)))),s}function W$(e){return e.replace(/left|right|bottom|top/g,t=>$He[t])}function VHe(e){return{top:0,right:0,bottom:0,left:0,...e}}function uQ(e){return typeof e!="number"?VHe(e):{top:e,right:e,bottom:e,left:e}}function dC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function nle(e,t,n){let{reference:r,floating:i}=e;const s=NE(t),o=aQ(t),a=oQ(o),u=Bp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(CA(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const HHe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=nle(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:b,y:w,data:E,reset:T}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...E}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=nle(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function lQ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Xy(t,e),p=uQ(h),g=a[d?f==="floating"?"reference":"floating":f],v=dC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},T=dC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-T.top+p.top)/E.y,bottom:(T.bottom-v.bottom+p.bottom)/E.y,left:(v.left-T.left+p.left)/E.x,right:(T.right-v.right+p.right)/E.x}}const qHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Xy(e,t)||{};if(l==null)return{};const f=uQ(c),d={x:n,y:r},h=aQ(i),p=oQ(h),m=await o.getDimensions(l),g=h==="y",v=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],T=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let I=C?C[w]:0;(!I||!await(o.isElement==null?void 0:o.isElement(C)))&&(I=a.floating[w]||s.floating[p]);const R=E/2-T/2,N=I/2-m[p]/2-1,O=Kf(f[v],N),L=Kf(f[b],N),j=O,F=I-m[p]-L,H=I/2-m[p]/2+R,Q=oW(j,H,F),J=!u.arrow&&CA(i)!=null&&H!==Q&&s.reference[p]/2-(H<j?O:L)-m[p]/2<0,ne=J?H<j?H-j:H-F:0;return{[h]:d[h]+ne,data:{[h]:Q,centerOffset:H-Q-ne,...J&&{alignmentOffset:ne}},reset:J}}}),WHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Xy(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Bp(i),b=Bp(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[W$(a)]:jHe(a));!d&&p!=="none"&&E.push(...zHe(a,m,p,w));const T=[a,...E],C=await lQ(t,g),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(C[v]),f){const j=BHe(i,o,w);I.push(C[j[0]],C[j[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(j=>j<=0)){var N,O;const j=(((N=s.flip)==null?void 0:N.index)||0)+1,F=T[j];if(F)return{data:{index:j,overflows:R},reset:{placement:F}};let H=(O=R.filter(Q=>Q.overflows[0]<=0).sort((Q,J)=>Q.overflows[1]-J.overflows[1])[0])==null?void 0:O.placement;if(!H)switch(h){case"bestFit":{var L;const Q=(L=R.map(J=>[J.placement,J.overflows.filter(ne=>ne>0).reduce((ne,Z)=>ne+Z,0)]).sort((J,ne)=>J[1]-ne[1])[0])==null?void 0:L[0];Q&&(H=Q);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function Y_e(e){const t=Kf(...e.map(s=>s.left)),n=Kf(...e.map(s=>s.top)),r=Zu(...e.map(s=>s.right)),i=Zu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function GHe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>dC(Y_e(i)))}const YHe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Xy(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=GHe(c),d=dC(Y_e(c)),h=uQ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(NE(n)==="y"){const O=f[0],L=f[f.length-1],j=Bp(n)==="top",F=O.top,H=L.bottom,Q=j?O.left:L.left,J=j?O.right:L.right,ne=J-Q,Z=H-F;return{top:F,bottom:H,left:Q,right:J,width:ne,height:Z,x:Q,y:F}}const g=Bp(n)==="left",v=Zu(...f.map(O=>O.right)),b=Kf(...f.map(O=>O.left)),w=f.filter(O=>g?O.left===b:O.right===v),E=w[0].top,T=w[w.length-1].bottom,C=b,I=v,R=I-C,N=T-E;return{top:E,bottom:T,left:C,right:I,width:R,height:N,x:C,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function KHe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Bp(n),a=CA(n),u=NE(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Xy(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const XHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await KHe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},QHe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...u}=Xy(e,t),l={x:n,y:r},c=await lQ(t,u),f=NE(Bp(i)),d=sQ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=oW(b,h,w)}if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+c[g],w=p-c[v];p=oW(b,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},JHe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Xy(e,t),c={x:n,y:r},f=NE(i),d=sQ(f);let h=c[d],p=c[f];const m=Xy(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=d==="y"?"height":"width",E=s.reference[d]-s.floating[w]+g.mainAxis,T=s.reference[d]+s.reference[w]-g.mainAxis;h<E?h=E:h>T&&(h=T)}if(l){var v,b;const w=d==="y"?"width":"height",E=["top","left"].includes(Bp(i)),T=s.reference[f]-s.floating[w]+(E&&((v=o.offset)==null?void 0:v[f])||0)+(E?0:g.crossAxis),C=s.reference[f]+s.reference[w]+(E?0:((b=o.offset)==null?void 0:b[f])||0)-(E?g.crossAxis:0);p<T?p=T:p>C&&(p=C)}return{[d]:h,[f]:p}}}},ZHe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Xy(e,t),u=await lQ(t,a),l=Bp(n),c=CA(n),f=NE(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,v=d-u.left-u.right,b=Kf(h-u[p],g),w=Kf(d-u[m],v),E=!t.middlewareData.shift;let T=b,C=w;if(f?C=c||E?Kf(w,v):v:T=c||E?Kf(b,g):g,E&&!c){const R=Zu(u.left,0),N=Zu(u.right,0),O=Zu(u.top,0),L=Zu(u.bottom,0);f?C=d-2*(R!==0||N!==0?R+N:Zu(u.left,u.right)):T=h-2*(O!==0||L!==0?O+L:Zu(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:T});const I=await i.getDimensions(s.floating);return d!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function AA(e){return K_e(e)?(e.nodeName||"").toLowerCase():"#document"}function nd(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _1(e){var t;return(t=(K_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function K_e(e){return e instanceof Node||e instanceof nd(e).Node}function L0(e){return e instanceof Element||e instanceof nd(e).Element}function $0(e){return e instanceof HTMLElement||e instanceof nd(e).HTMLElement}function rle(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nd(e).ShadowRoot}function VP(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=jp(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function eqe(e){return["table","td","th"].includes(AA(e))}function cQ(e){const t=fQ(),n=jp(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tqe(e){let t=Tb(e);for(;$0(t)&&!hC(t);){if(cQ(t))return t;t=Tb(t)}return null}function fQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function hC(e){return["html","body","#document"].includes(AA(e))}function jp(e){return nd(e).getComputedStyle(e)}function aB(e){return L0(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Tb(e){if(AA(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rle(e)&&e.host||_1(e);return rle(t)?t.host:t}function X_e(e){const t=Tb(e);return hC(t)?e.ownerDocument?e.ownerDocument.body:e.body:$0(t)&&VP(t)?t:X_e(t)}function Oy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=X_e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=nd(i);return s?t.concat(o,o.visualViewport||[],VP(i)?i:[],o.frameElement&&n?Oy(o.frameElement):[]):t.concat(i,Oy(i,[],n))}function Q_e(e){const t=jp(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$0(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=q$(n)!==s||q$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function dQ(e){return L0(e)?e:e.contextElement}function M2(e){const t=dQ(e);if(!$0(t))return Sb(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Q_e(t);let o=(s?q$(n.width):n.width)/r,a=(s?q$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nqe=Sb(0);function J_e(e){const t=nd(e);return!fQ()||!t.visualViewport?nqe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rqe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nd(e)?!1:t}function Yw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=dQ(e);let o=Sb(1);t&&(r?L0(r)&&(o=M2(r)):o=M2(e));const a=rqe(s,n,r)?J_e(s):Sb(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=nd(s),h=r&&L0(r)?nd(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=M2(m),v=m.getBoundingClientRect(),b=jp(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,E=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=E,p=nd(m),m=p.frameElement}}return dC({width:c,height:f,x:u,y:l})}const iqe=[":popover-open",":modal"];function hQ(e){return iqe.some(t=>{try{return e.matches(t)}catch{return!1}})}function sqe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=_1(r),a=t?hQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Sb(1);const c=Sb(0),f=$0(r);if((f||!f&&!s)&&((AA(r)!=="body"||VP(o))&&(u=aB(r)),$0(r))){const d=Yw(r);l=M2(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function oqe(e){return Array.from(e.getClientRects())}function Z_e(e){return Yw(_1(e)).left+aB(e).scrollLeft}function aqe(e){const t=_1(e),n=aB(e),r=e.ownerDocument.body,i=Zu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Zu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Z_e(e);const a=-n.scrollTop;return jp(r).direction==="rtl"&&(o+=Zu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function uqe(e,t){const n=nd(e),r=_1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=fQ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function lqe(e,t){const n=Yw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=$0(e)?M2(e):Sb(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function ile(e,t,n){let r;if(t==="viewport")r=uqe(e,n);else if(t==="document")r=aqe(_1(e));else if(L0(t))r=lqe(t,n);else{const i=J_e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return dC(r)}function ewe(e,t){const n=Tb(e);return n===t||!L0(n)||hC(n)?!1:jp(n).position==="fixed"||ewe(n,t)}function cqe(e,t){const n=t.get(e);if(n)return n;let r=Oy(e,[],!1).filter(a=>L0(a)&&AA(a)!=="body"),i=null;const s=jp(e).position==="fixed";let o=s?Tb(e):e;for(;L0(o)&&!hC(o);){const a=jp(o),u=cQ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||VP(o)&&!u&&ewe(e,o))?r=r.filter(c=>c!==o):i=a,o=Tb(o)}return t.set(e,r),r}function fqe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?hQ(t)?[]:cqe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=ile(t,c,i);return l.top=Zu(f.top,l.top),l.right=Kf(f.right,l.right),l.bottom=Kf(f.bottom,l.bottom),l.left=Zu(f.left,l.left),l},ile(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function dqe(e){const{width:t,height:n}=Q_e(e);return{width:t,height:n}}function hqe(e,t,n){const r=$0(t),i=_1(t),s=n==="fixed",o=Yw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Sb(0);if(r||!r&&!s)if((AA(t)!=="body"||VP(i))&&(a=aB(t)),r){const f=Yw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Z_e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function lz(e){return jp(e).position==="static"}function sle(e,t){return!$0(e)||jp(e).position==="fixed"?null:t?t(e):e.offsetParent}function twe(e,t){const n=nd(e);if(hQ(e))return n;if(!$0(e)){let i=Tb(e);for(;i&&!hC(i);){if(L0(i)&&!lz(i))return i;i=Tb(i)}return n}let r=sle(e,t);for(;r&&eqe(r)&&lz(r);)r=sle(r,t);return r&&hC(r)&&lz(r)&&!cQ(r)?n:r||tqe(e)||n}const pqe=async function(e){const t=this.getOffsetParent||twe,n=this.getDimensions,r=await n(e.floating);return{reference:hqe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mqe(e){return jp(e).direction==="rtl"}const gqe={convertOffsetParentRelativeRectToViewportRelativeRect:sqe,getDocumentElement:_1,getClippingRect:fqe,getOffsetParent:twe,getElementRects:pqe,getClientRects:oqe,getDimensions:dqe,getScale:M2,isElement:L0,isRTL:mqe};function yqe(e,t){let n=null,r;const i=_1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=j4(c),p=j4(i.clientWidth-(l+f)),m=j4(i.clientHeight-(c+d)),g=j4(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Zu(0,Kf(1,u))||1};let w=!0;function E(T){const C=T[0].intersectionRatio;if(C!==u){if(!w)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function vqe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=dQ(e),c=i||s?[...l?Oy(l):[],...Oy(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=l&&a?yqe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Yw(e):null;u&&g();function g(){const v=Yw(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const bqe=XHe,xqe=QHe,_qe=WHe,wqe=ZHe,ole=qHe,Eqe=YHe,Sqe=JHe,Tqe=(e,t,n)=>{const r=new Map,i={platform:gqe,...n},s={...i.platform,_c:r};return HHe(e,t,{...i,platform:s})};var JM=typeof document<"u"?P.useLayoutEffect:P.useEffect;function G$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!G$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!G$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function nwe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ale(e,t){const n=nwe(e);return Math.round(t*n)/n}function cz(e){const t=P.useRef(e);return JM(()=>{t.current=e}),t}function Cqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=P.useState(r);G$(d,r)||h(r);const[p,m]=P.useState(null),[g,v]=P.useState(null),b=P.useCallback(Z=>{Z!==C.current&&(C.current=Z,m(Z))},[]),w=P.useCallback(Z=>{Z!==I.current&&(I.current=Z,v(Z))},[]),E=s||p,T=o||g,C=P.useRef(null),I=P.useRef(null),R=P.useRef(c),N=u!=null,O=cz(u),L=cz(i),j=cz(l),F=P.useCallback(()=>{if(!C.current||!I.current)return;const Z={placement:t,strategy:n,middleware:d};L.current&&(Z.platform=L.current),Tqe(C.current,I.current,Z).then(ie=>{const q={...ie,isPositioned:j.current!==!1};H.current&&!G$(R.current,q)&&(R.current=q,nB.flushSync(()=>{f(q)}))})},[d,t,n,L,j]);JM(()=>{l===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(Z=>({...Z,isPositioned:!1})))},[l]);const H=P.useRef(!1);JM(()=>(H.current=!0,()=>{H.current=!1}),[]),JM(()=>{if(E&&(C.current=E),T&&(I.current=T),E&&T){if(O.current)return O.current(E,T,F);F()}},[E,T,F,O,N]);const Q=P.useMemo(()=>({reference:C,floating:I,setReference:b,setFloating:w}),[b,w]),J=P.useMemo(()=>({reference:E,floating:T}),[E,T]),ne=P.useMemo(()=>{const Z={position:n,left:0,top:0};if(!J.floating)return Z;const ie=ale(J.floating,c.x),q=ale(J.floating,c.y);return a?{...Z,transform:"translate("+ie+"px, "+q+"px)",...nwe(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:q}},[n,a,J.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:F,refs:Q,elements:J,floatingStyles:ne}),[c,F,Q,J,ne])}const Aqe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ole({element:r.current,padding:i}).fn(n):{}:r?ole({element:r,padding:i}).fn(n):{}}}},rwe=(e,t)=>({...bqe(e),options:[e,t]}),pQ=(e,t)=>({...xqe(e),options:[e,t]}),ule=(e,t)=>({...Sqe(e),options:[e,t]}),Y$=(e,t)=>({..._qe(e),options:[e,t]}),Iqe=(e,t)=>({...wqe(e),options:[e,t]}),PD=(e,t)=>({...Eqe(e),options:[e,t]}),iwe=(e,t)=>({...Aqe(e),options:[e,t]}),swe={...vUe},kqe=swe.useInsertionEffect,Rqe=kqe||(e=>e());function yy(e){const t=P.useRef(()=>{});return Rqe(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var x0=typeof document<"u"?P.useLayoutEffect:P.useEffect;let lle=!1,Dqe=0;const cle=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Dqe++;function Nqe(){const[e,t]=P.useState(()=>lle?cle():void 0);return x0(()=>{e==null&&t(cle())},[]),P.useEffect(()=>{lle=!0},[]),e}const Pqe=swe.useId,owe=Pqe||Nqe;function Oqe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Mqe=P.createContext(null),Lqe=P.createContext(null),mQ=()=>{var e;return((e=P.useContext(Mqe))==null?void 0:e.id)||null},gQ=()=>P.useContext(Lqe);function yQ(e){return"data-floating-ui-"+e}function fz(e){const t=P.useRef(e);return x0(()=>{t.current=e}),t}const fle=yQ("safe-polygon");function ZM(e,t,n){return n&&!sW(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function $qe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=gQ(),p=mQ(),m=fz(l),g=fz(u),v=fz(n),b=P.useRef(),w=P.useRef(-1),E=P.useRef(),T=P.useRef(-1),C=P.useRef(!0),I=P.useRef(!1),R=P.useRef(()=>{}),N=P.useRef(!1),O=P.useCallback(()=>{var ne;const Z=(ne=i.current.openEvent)==null?void 0:ne.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[i]);P.useEffect(()=>{if(!a)return;function ne(Z){let{open:ie}=Z;ie||(clearTimeout(w.current),clearTimeout(T.current),C.current=!0,N.current=!1)}return s.on("openchange",ne),()=>{s.off("openchange",ne)}},[a,s]),P.useEffect(()=>{if(!a||!m.current||!n)return;function ne(ie){O()&&r(!1,ie,"hover")}const Z=gw(o.floating).documentElement;return Z.addEventListener("mouseleave",ne),()=>{Z.removeEventListener("mouseleave",ne)}},[o.floating,n,r,a,m,O]);const L=P.useCallback(function(ne,Z,ie){Z===void 0&&(Z=!0),ie===void 0&&(ie="hover");const q=ZM(g.current,"close",b.current);q&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,ne,ie),q)):Z&&(clearTimeout(w.current),r(!1,ne,ie))},[g,r]),j=yy(()=>{R.current(),E.current=void 0}),F=yy(()=>{if(I.current){const ne=gw(o.floating).body;ne.style.pointerEvents="",ne.removeAttribute(fle),I.current=!1}}),H=yy(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);P.useEffect(()=>{if(!a)return;function ne(U){if(clearTimeout(w.current),C.current=!1,c&&!sW(b.current)||f>0&&!ZM(g.current,"open"))return;const G=ZM(g.current,"open",b.current);G?w.current=window.setTimeout(()=>{v.current||r(!0,U,"hover")},G):n||r(!0,U,"hover")}function Z(U){if(H())return;R.current();const G=gw(o.floating);if(clearTimeout(T.current),N.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=m.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),j(),H()||L(U,!0,"safe-polygon")}});const Y=E.current;G.addEventListener("mousemove",Y),R.current=()=>{G.removeEventListener("mousemove",Y)};return}(b.current==="touch"?!bN(o.floating,U.relatedTarget):!0)&&L(U)}function ie(U){H()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),j(),H()||L(U)}})(U))}if(jc(o.domReference)){var q;const U=o.domReference;return n&&U.addEventListener("mouseleave",ie),(q=o.floating)==null||q.addEventListener("mouseleave",ie),d&&U.addEventListener("mousemove",ne,{once:!0}),U.addEventListener("mouseenter",ne),U.addEventListener("mouseleave",Z),()=>{var G;n&&U.removeEventListener("mouseleave",ie),(G=o.floating)==null||G.removeEventListener("mouseleave",ie),d&&U.removeEventListener("mousemove",ne),U.removeEventListener("mouseenter",ne),U.removeEventListener("mouseleave",Z)}}},[o,a,e,c,f,d,L,j,F,r,n,v,h,g,m,i,H]),x0(()=>{var ne;if(a&&n&&(ne=m.current)!=null&&ne.__options.blockPointerEvents&&O()){I.current=!0;const ie=o.floating;if(jc(o.domReference)&&ie){var Z;const q=gw(o.floating).body;q.setAttribute(fle,"");const U=o.domReference,G=h==null||(Z=h.nodesRef.current.find(V=>V.id===p))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return G&&(G.style.pointerEvents=""),q.style.pointerEvents="none",U.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{q.style.pointerEvents="",U.style.pointerEvents="",ie.style.pointerEvents=""}}}},[a,n,p,o,h,m,O]),x0(()=>{n||(b.current=void 0,N.current=!1,j(),F())},[n,j,F]),P.useEffect(()=>()=>{j(),clearTimeout(w.current),clearTimeout(T.current),F()},[a,o.domReference,j,F]);const Q=P.useMemo(()=>{function ne(Z){b.current=Z.pointerType}return{onPointerDown:ne,onPointerEnter:ne,onMouseMove(Z){const{nativeEvent:ie}=Z;function q(){!C.current&&!v.current&&r(!0,ie,"hover")}c&&!sW(b.current)||n||f===0||N.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(T.current),b.current==="touch"?q():(N.current=!0,T.current=window.setTimeout(q,f)))}}},[c,r,n,v,f]),J=P.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(ne){H()||L(ne.nativeEvent,!1)}}),[L,H]);return P.useMemo(()=>a?{reference:Q,floating:J}:{},[a,Q,J])}const uW=()=>{},awe=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:uW,setState:uW,isInstantPhase:!1}),uwe=()=>P.useContext(awe);function Fqe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=P.useRef(null),a=P.useCallback(u=>{s({currentId:u})},[]);return x0(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(awe.Provider,{value:P.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Bqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=uwe(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return x0(()=>{o&&l&&(d({delay:{open:1,close:ZM(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),x0(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),x0(()=>{o&&(c===uW||!n||c(a))},[o,n,c,a]),u}function dz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const jqe="data-floating-ui-focusable",Uqe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},zqe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},dle=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Vqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=gQ(),g=yy(typeof u=="function"?u:()=>!1),v=typeof u=="function"?g:u,b=P.useRef(!1),w=P.useRef(!1),{escapeKey:E,outsidePress:T}=dle(h),{escapeKey:C,outsidePress:I}=dle(p),R=P.useRef(!1),N=yy(Q=>{var J;if(!n||!o||!a||Q.key!=="Escape"||R.current)return;const ne=(J=s.current.floatingContext)==null?void 0:J.nodeId,Z=m?dz(m.nodesRef.current,ne):[];if(!E&&(Q.stopPropagation(),Z.length>0)){let ie=!0;if(Z.forEach(q=>{var U;if((U=q.context)!=null&&U.open&&!q.context.dataRef.current.__escapeKeyBubbles){ie=!1;return}}),!ie)return}r(!1,PHe(Q)?Q.nativeEvent:Q,"escape-key")}),O=yy(Q=>{var J;const ne=()=>{var Z;N(Q),(Z=i2(Q))==null||Z.removeEventListener("keydown",ne)};(J=i2(Q))==null||J.addEventListener("keydown",ne)}),L=yy(Q=>{var J;const ne=b.current;b.current=!1;const Z=w.current;if(w.current=!1,l==="click"&&Z||ne||typeof v=="function"&&!v(Q))return;const ie=i2(Q),q="["+yQ("inert")+"]",U=gw(i.floating).querySelectorAll(q);let G=jc(ie)?ie:null;for(;G&&!Zue(G);){const ae=IHe(G);if(Zue(ae)||!jc(ae))break;G=ae}if(U.length&&jc(ie)&&!OHe(ie)&&!bN(ie,i.floating)&&Array.from(U).every(ae=>!bN(G,ae)))return;if(iQ(ie)&&H){const ae=ie.clientWidth>0&&ie.scrollWidth>ie.clientWidth,_e=ie.clientHeight>0&&ie.scrollHeight>ie.clientHeight;let pe=_e&&Q.offsetX>ie.clientWidth;if(_e&&AHe(ie).direction==="rtl"&&(pe=Q.offsetX<=ie.offsetWidth-ie.clientWidth),pe||ae&&Q.offsetY>ie.clientHeight)return}const V=(J=s.current.floatingContext)==null?void 0:J.nodeId,Y=m&&dz(m.nodesRef.current,V).some(ae=>{var _e;return uz(Q,(_e=ae.context)==null?void 0:_e.elements.floating)});if(uz(Q,i.floating)||uz(Q,i.domReference)||Y)return;const ee=m?dz(m.nodesRef.current,V):[];if(ee.length>0){let ae=!0;if(ee.forEach(_e=>{var pe;if((pe=_e.context)!=null&&pe.open&&!_e.context.dataRef.current.__outsidePressBubbles){ae=!1;return}}),!ae)return}r(!1,Q,"outside-press")}),j=yy(Q=>{var J;const ne=()=>{var Z;L(Q),(Z=i2(Q))==null||Z.removeEventListener(l,ne)};(J=i2(Q))==null||J.addEventListener(l,ne)});P.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=T;let Q=-1;function J(U){r(!1,U,"ancestor-scroll")}function ne(){window.clearTimeout(Q),R.current=!0}function Z(){Q=window.setTimeout(()=>{R.current=!1},CHe()?5:0)}const ie=gw(i.floating);a&&(ie.addEventListener("keydown",C?O:N,C),ie.addEventListener("compositionstart",ne),ie.addEventListener("compositionend",Z)),v&&ie.addEventListener(l,I?j:L,I);let q=[];return d&&(jc(i.domReference)&&(q=Oy(i.domReference)),jc(i.floating)&&(q=q.concat(Oy(i.floating))),!jc(i.reference)&&i.reference&&i.reference.contextElement&&(q=q.concat(Oy(i.reference.contextElement)))),q=q.filter(U=>{var G;return U!==((G=ie.defaultView)==null?void 0:G.visualViewport)}),q.forEach(U=>{U.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(ie.removeEventListener("keydown",C?O:N,C),ie.removeEventListener("compositionstart",ne),ie.removeEventListener("compositionend",Z)),v&&ie.removeEventListener(l,I?j:L,I),q.forEach(U=>{U.removeEventListener("scroll",J)}),window.clearTimeout(Q)}},[s,i,a,v,l,n,r,d,o,E,T,N,C,O,L,I,j]),P.useEffect(()=>{b.current=!1},[v,l]);const F=P.useMemo(()=>({onKeyDown:N,[Uqe[f]]:Q=>{c&&r(!1,Q.nativeEvent,"reference-press")}}),[N,r,c,f]),H=P.useMemo(()=>({onKeyDown:N,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[zqe[l]]:()=>{b.current=!0}}),[N,l]);return P.useMemo(()=>o?{reference:F,floating:H}:{},[o,F,H])}function Hqe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=owe(),s=P.useRef({}),[o]=P.useState(()=>Oqe()),a=mQ()!=null,[u,l]=P.useState(r.reference),c=yy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=P.useMemo(()=>({setPositionReference:l}),[]),d=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function vQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hqe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.domReference)||s,f=P.useRef(null),d=gQ();x0(()=>{c&&(f.current=c)},[c]);const h=Cqe({...e,elements:{...i,...a&&{reference:a}}}),p=P.useCallback(w=>{const E=jc(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=P.useCallback(w=>{(jc(w)||w===null)&&(f.current=w,o(w)),(jc(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!jc(w))&&h.refs.setReference(w)},[h.refs]),g=P.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),v=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=P.useMemo(()=>({...h,...r,refs:g,elements:v,nodeId:t}),[h,g,v,t,r]);return x0(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),P.useMemo(()=>({...h,context:b,refs:g,elements:v}),[h,g,v,b])}function qqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),f=P.useRef(!0);P.useEffect(()=>{if(!a)return;const h=TA(o.domReference);function p(){!n&&iQ(o.domReference)&&o.domReference===ele(gw(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),P.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=P.useMemo(()=>({onPointerDown(h){kHe(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=i2(h.nativeEvent);if(u&&jc(p))try{if(RHe()&&DHe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!LHe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=jc(p)&&p.hasAttribute(yQ("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=ele(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||bN((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,b)||bN(o.domReference,b)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return P.useMemo(()=>a?{reference:d}:{},[a,d])}const hle="active",ple="selected";function hz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[hle]:o,[ple]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[jqe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[hle,ple].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Wqe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=P.useCallback(a=>hz(a,e,"reference"),t),s=P.useCallback(a=>hz(a,e,"floating"),n),o=P.useCallback(a=>hz(a,e,"item"),r);return P.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const Gqe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Yqe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Gqe.get(o))!=null?n:o,u=owe(),c=mQ()!=null,f=P.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=P.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=P.useCallback(p=>{let{active:m,selected:g}=p;const v={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":m&&g};case"combobox":return{...v,...m&&{"aria-selected":!0}}}return{}},[i,o]);return P.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function lwe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function mle(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function gle(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Kqe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Xqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[Kqe[u]]:r},f=-t/2;return u==="left"?{...c,...mle(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...mle(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...gle(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...gle(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const bQ=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=x1();return s?S.jsx("div",{...l,ref:c,style:{...u,...Xqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});bQ.displayName="@mantine/core/FloatingArrow";var cwe={root:"m_9814e45f"};const Qqe={zIndex:ff("modal")},Jqe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Hm(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ke(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ci(s),"--overlay-z-index":o==null?void 0:o.toString()}}),pC=Xo((e,t)=>{const n=Je("Overlay",Qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:v,mod:b,...w}=n,E=Zt({name:"Overlay",props:n,classes:cwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jqe});return S.jsx(je,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});pC.classes=cwe;pC.displayName="@mantine/core/Overlay";function Zqe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const eWe={},fwe=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=Je("Portal",eWe,e),[s,o]=P.useState(!1),a=P.useRef(null);return IE(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Zqe(i),V$(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:nB.createPortal(S.jsx(S.Fragment,{children:n}),a.current)});fwe.displayName="@mantine/core/Portal";function px({withinPortal:e=!0,children:t,...n}){return e?S.jsx(fwe,{...n,children:t}):S.jsx(S.Fragment,{children:t})}px.displayName="@mantine/core/OptionalPortal";const Yk=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),U4={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Yk("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Yk("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Yk("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Yk("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Yk("top"),common:{transformOrigin:"top right"}}},yle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function tWe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in U4?{transitionProperty:U4[e].transitionProperty,...i,...U4[e].common,...U4[e][yle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[yle[t]]}}function nWe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Oo(),f=Z8(),d=c.respectReducedMotion?f:!1,[h,p]=P.useState(d?0:e),[m,g]=P.useState(r?"entered":"exited"),v=P.useRef(-1),b=P.useRef(-1),w=P.useRef(-1),E=C=>{const I=C?i:s,R=C?o:a;window.clearTimeout(v.current);const N=d?0:C?e:t;p(N),N===0?(typeof I=="function"&&I(),typeof R=="function"&&R(),g(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{VR.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),g(C?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof R=="function"&&R(),g(C?"entered":"exited")},N)})})},T=C=>{if(window.clearTimeout(b.current),typeof(C?u:l)!="number"){E(C);return}b.current=window.setTimeout(()=>{E(C)},C?u:l)};return M0(()=>{T(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function sg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=nWe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?S.jsx(S.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:S.jsx(S.Fragment,{children:s(tWe({transition:t,duration:h,state:p,timingFunction:m}))})}sg.displayName="@mantine/core/Transition";const[rWe,dwe]=Au("Popover component was not found in the tree");function uB({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=Nze(t),s=Po(i,r);return cx(e)?P.cloneElement(e,{[n]:s}):e}function hwe(e){return S.jsx(rQ,{tabIndex:-1,"data-autofocus":!0,...e})}uB.displayName="@mantine/core/FocusTrap";hwe.displayName="@mantine/core/FocusTrapInitialFocus";uB.InitialFocus=hwe;var pwe={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const iWe={},xQ=At((e,t)=>{var g,v,b,w;const n=Je("PopoverDropdown",iWe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=dwe(),h=c_e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Po(t,d.floating);return d.disabled?null:S.jsx(px,{...d.portalProps,withinPortal:d.withinPortal,children:S.jsx(sg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((v=d.transitionProps)==null?void 0:v.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>S.jsx(uB,{active:d.trapFocus&&d.opened,innerRef:m,children:S.jsxs(je,{...p,...f,variant:u,onKeyDownCapture:bze(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ke(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,S.jsx(bQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});xQ.classes=pwe;xQ.displayName="@mantine/core/PopoverDropdown";const sWe={refProp:"ref",popupType:"dialog"},mwe=At((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Je("PopoverTarget",sWe,e);if(!cx(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=dwe(),u=Po(a.reference,eB(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...o,...l,...a.targetProps,className:co(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});mwe.displayName="@mantine/core/PopoverTarget";function gwe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return vqe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),M0(()=>{t.update()},r),M0(()=>{s(o=>o+1)},[e])}function oWe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function aWe(e,t){const n=oWe(e.middlewares),r=[rwe(e.offset)];return n.shift&&r.push(pQ(typeof n.shift=="boolean"?{limiter:ule(),padding:5}:{limiter:ule(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Y$():Y$(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?PD():PD(n.inline)),r.push(iwe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Iqe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function uWe(e){const[t,n]=Yo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=P.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=vQ({strategy:e.strategy,placement:e.position,middleware:aWe(e,()=>o)});return gwe({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),M0(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),M0(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const lWe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ff("popover"),__staticSelector:"Popover",width:"max-content"},cWe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ci(t),"--popover-shadow":qX(n)}});function xu(e){var dt,wt,ke,Oe,ht,Lt;const t=Je("Popover",lWe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:T,withinPortal:C,portalProps:I,closeOnEscape:R,clickOutsideEvents:N,trapFocus:O,onClose:L,onOpen:j,onChange:F,zIndex:H,radius:Q,shadow:J,id:ne,defaultOpened:Z,__staticSelector:ie,withRoles:q,disabled:U,returnFocus:G,variant:V,keepMounted:Y,vars:ee,floatingStrategy:ae,withOverlay:_e,overlayProps:pe,...Se}=t,Le=Zt({name:ie,props:t,classes:pwe,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:ee,varsResolver:cWe}),{resolvedStyles:ye}=kE({classNames:w,styles:E,props:t}),he=P.useRef(null),[$e,De]=P.useState(null),[tt,it]=P.useState(null),{dir:Me}=x1(),Ge=gl(ne),at=uWe({middlewares:d,width:f,position:lwe(Me,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:he,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:Z,onChange:F,onOpen:j,onClose:L,strategy:ae});Eze(()=>T&&at.onClose(),N,[$e,tt]);const yt=P.useCallback(Ft=>{De(Ft),at.floating.refs.setReference(Ft)},[at.floating.refs.setReference]),St=P.useCallback(Ft=>{it(Ft),at.floating.refs.setFloating(Ft)},[at.floating.refs.setFloating]),Ot=P.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onExited)==null||Ft.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),qe=P.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onEntered)==null||Ft.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return S.jsxs(rWe,{value:{returnFocus:G,disabled:U,controlled:at.controlled,reference:yt,floating:St,x:at.floating.x,y:at.floating.y,arrowX:(ke=(wt=(dt=at.floating)==null?void 0:dt.middlewareData)==null?void 0:wt.arrow)==null?void 0:ke.x,arrowY:(Lt=(ht=(Oe=at.floating)==null?void 0:Oe.middlewareData)==null?void 0:ht.arrow)==null?void 0:Lt.y,opened:at.opened,arrowRef:he,transitionProps:{...u,onExited:Ot,onEntered:qe},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:v,placement:at.floating.placement,trapFocus:O,withinPortal:C,portalProps:I,zIndex:H,radius:Q,shadow:J,closeOnEscape:R,onClose:at.onClose,onToggle:at.onToggle,getTargetId:()=>`${Ge}-target`,getDropdownId:()=>`${Ge}-dropdown`,withRoles:q,targetProps:Se,__staticSelector:ie,classNames:w,styles:E,unstyled:b,variant:V,keepMounted:Y,getStyles:Le,resolvedStyles:ye,floatingStrategy:ae},children:[n,_e&&S.jsx(sg,{transition:"fade",mounted:at.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Ft=>S.jsx(px,{withinPortal:C,children:S.jsx(pC,{...pe,...Le("overlay",{className:pe==null?void 0:pe.className,style:[Ft,pe==null?void 0:pe.style]})})})})]})}xu.Target=mwe;xu.Dropdown=xQ;xu.displayName="@mantine/core/Popover";xu.extend=e=>e;var Tp={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const ywe=P.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:co(Tp.barsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Tp.bar}),S.jsx("span",{className:Tp.bar}),S.jsx("span",{className:Tp.bar})]}));ywe.displayName="@mantine/core/Bars";const vwe=P.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:co(Tp.dotsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Tp.dot}),S.jsx("span",{className:Tp.dot}),S.jsx("span",{className:Tp.dot})]}));vwe.displayName="@mantine/core/Dots";const bwe=P.forwardRef(({className:e,...t},n)=>S.jsx(je,{component:"span",className:co(Tp.ovalLoader,e),...t,ref:n}));bwe.displayName="@mantine/core/Oval";const xwe={bars:ywe,oval:bwe,dots:vwe},fWe={loaders:xwe,type:"oval"},dWe=(e,{size:t,color:n})=>({root:{"--loader-size":Kn(t,"loader-size"),"--loader-color":n?qi(n,e):void 0}}),df=At((e,t)=>{const n=Je("Loader",fWe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Zt({name:"Loader",props:n,classes:Tp,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:dWe});return p?S.jsx(je,{...g("root"),ref:t,...m,children:p}):S.jsx(je,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});df.defaultLoaders=xwe;df.classes=Tp;df.displayName="@mantine/core/Loader";var IA={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const vle={orientation:"horizontal"},hWe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ke(t)}}),_Q=At((e,t)=>{const n=Je("ActionIconGroup",vle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ActionIconGroup",vle,e),p=Zt({name:"ActionIconGroup",props:n,classes:IA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:hWe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});_Q.classes=IA;_Q.displayName="@mantine/core/ActionIconGroup";const ble={},pWe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":za(o),"--section-radius":t===void 0?void 0:Ci(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},wQ=At((e,t)=>{const n=Je("ActionIconGroupSection",ble,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ActionIconGroupSection",ble,e),p=Zt({name:"ActionIconGroupSection",props:n,classes:IA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:pWe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});wQ.classes=IA;wQ.displayName="@mantine/core/ActionIconGroupSection";const mWe={},gWe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Kn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ci(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},mx=Xo((e,t)=>{const n=Je("ActionIcon",mWe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:T,...C}=n,I=Zt({name:["ActionIcon",p],props:n,className:r,style:u,classes:IA,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:gWe});return S.jsxs(ud,{...I("root",{active:!b&&!l&&!w}),...C,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},T],children:[S.jsx(sg,{mounted:!!l,transition:"slide-down",duration:150,children:R=>S.jsx(je,{component:"span",...I("loader",{style:R}),"aria-hidden":!0,children:S.jsx(df,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),S.jsx(je,{component:"span",mod:{loading:l},...I("icon"),children:v})]})});mx.classes=IA;mx.displayName="@mantine/core/ActionIcon";mx.Group=_Q;mx.GroupSection=wQ;const _we=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:S.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));_we.displayName="@mantine/core/CloseIcon";var wwe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const yWe={variant:"subtle"},vWe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Kn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ci(n),"--cb-icon-size":Ke(r)}}),gx=Xo((e,t)=>{const n=Je("CloseButton",yWe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,__staticSelector:v,...b}=n,w=Zt({name:v||"CloseButton",props:n,className:a,style:l,classes:wwe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:vWe});return S.jsxs(ud,{ref:t,...b,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...w("root",{variant:p,active:!h&&!d}),children:[m||S.jsx(_we,{}),i]})});gx.classes=wwe;gx.displayName="@mantine/core/CloseButton";function bWe(e){return P.Children.toArray(e).filter(Boolean)}var Ewe={root:"m_4081bf90"};const xWe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},_We=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Go(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Yr=At((e,t)=>{const n=Je("Group",xWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:v,mod:b,...w}=n,E=bWe(u),T=E.length,C=Go(l??"md"),R={childWidth:`calc(${100/T}% - (${C} - ${C} / ${T}))`},N=Zt({name:"Group",props:n,stylesCtx:R,className:i,style:s,classes:Ewe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:_We});return S.jsx(je,{...N("root"),ref:t,variant:g,mod:[{grow:h},b],size:v,...w,children:E})});Yr.classes=Ewe;Yr.displayName="@mantine/core/Group";const[wWe,w1]=Au("ModalBase component was not found in tree");function EWe({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(-1),o=Z8()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function SWe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=gl(e),[u,l]=P.useState(!1),[c,f]=P.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=EWe({opened:n,transitionDuration:d});return p_e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),c_e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Swe=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:g,padding:v,__vars:b,unstyled:w,removeScrollProps:E,...T},C)=>{const{_id:I,titleMounted:R,bodyMounted:N,shouldLockScroll:O,setTitleMounted:L,setBodyMounted:j}=SWe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:F,...H}=E||{};return S.jsx(px,{...d,withinPortal:f,children:S.jsx(wWe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${I}-title`,getBodyId:()=>`${I}-body`,titleMounted:R,bodyMounted:N,setTitleMounted:L,setBodyMounted:j,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:w},children:S.jsx(cC,{enabled:O&&h,...H,children:S.jsx(je,{ref:C,...T,__vars:{...b,"--mb-z-index":(m||ff("modal")).toString(),"--mb-shadow":qX(g),"--mb-padding":Go(v)},children:p})},F)})})});Swe.displayName="@mantine/core/ModalBase";function TWe(){const e=w1();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var mC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Twe=P.forwardRef(({className:e,...t},n)=>{const r=TWe(),i=w1();return S.jsx(je,{ref:n,...t,id:r,className:co({[mC.body]:!i.unstyled},e)})});Twe.displayName="@mantine/core/ModalBaseBody";const Cwe=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=w1();return S.jsx(gx,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:co({[mC.close]:!i.unstyled},e),unstyled:i.unstyled})});Cwe.displayName="@mantine/core/ModalBaseCloseButton";const Awe=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=w1();return S.jsx(sg,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>S.jsx("div",{...n,className:co({[mC.inner]:!a.unstyled},n.className),children:S.jsx(uB,{active:a.opened&&a.trapFocus,innerRef:o,children:S.jsx(SA,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:co({[mC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});Awe.displayName="@mantine/core/ModalBaseContent";const Iwe=P.forwardRef(({className:e,...t},n)=>{const r=w1();return S.jsx(je,{component:"header",ref:n,className:co({[mC.header]:!r.unstyled},e),...t})});Iwe.displayName="@mantine/core/ModalBaseHeader";const CWe={duration:200,timingFunction:"ease",transition:"fade"};function AWe(e){const t=w1();return{...CWe,...t.transitionProps,...e}}const kwe=P.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=w1(),a=AWe(t);return S.jsx(sg,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>S.jsx(pC,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});kwe.displayName="@mantine/core/ModalBaseOverlay";function IWe(){const e=w1();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Rwe=P.forwardRef(({className:e,...t},n)=>{const r=IWe(),i=w1();return S.jsx(je,{component:"h2",ref:n,className:co({[mC.title]:!i.unstyled},e),...t,id:r})});Rwe.displayName="@mantine/core/ModalBaseTitle";function kWe({children:e}){return S.jsx(S.Fragment,{children:e})}const[RWe,DWe]=fx({size:"sm"}),NWe={},Dwe=At((e,t)=>{const n=Je("InputClearButton",NWe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=DWe(),{resolvedClassNames:c,resolvedStyles:f}=kE({classNames:o,styles:a,props:n});return S.jsx(gx,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});Dwe.displayName="@mantine/core/InputClearButton";const[PWe,kA]=fx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var xh={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const xle={},OWe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${za(t)} - ${Ke(2)})`}}),lB=At((e,t)=>{const n=Je("InputDescription",xle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Je("InputDescription",xle,n),p=kA(),m=Zt({name:["InputWrapper",c],props:n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:OWe}),g=f&&(p==null?void 0:p.getStyles)||m;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});lB.classes=xh;lB.displayName="@mantine/core/InputDescription";const MWe={},LWe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${za(t)} - ${Ke(2)})`}}),cB=At((e,t)=>{const n=Je("InputError",MWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Zt({name:["InputWrapper",c],props:n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:LWe}),m=kA(),g=f&&(m==null?void 0:m.getStyles)||p;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});cB.classes=xh;cB.displayName="@mantine/core/InputError";const _le={labelElement:"label"},$We=(e,{size:t})=>({label:{"--input-label-size":za(t),"--input-asterisk-color":void 0}}),fB=At((e,t)=>{const n=Je("InputLabel",_le,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:v,...b}=Je("InputLabel",_le,n),w=Zt({name:["InputWrapper",m],props:n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:$We}),E=kA(),T=(E==null?void 0:E.getStyles)||w;return S.jsxs(je,{...T("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},v],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...b,children:[p,f&&S.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});fB.classes=xh;fB.displayName="@mantine/core/InputLabel";const wle={},EQ=At((e,t)=>{const n=Je("InputPlaceholder",wle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Je("InputPlaceholder",wle,n),p=Zt({name:["InputPlaceholder",l],props:n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return S.jsx(je,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});EQ.classes=xh;EQ.displayName="@mantine/core/InputPlaceholder";function FWe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const BWe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},jWe=(e,{size:t})=>({label:{"--input-label-size":za(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${za(t)} - ${Ke(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${za(t)} - ${Ke(2)})`}}),SQ=At((e,t)=>{const n=Je("InputWrapper",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:T,withAsterisk:C,id:I,required:R,__stylesApiProps:N,mod:O,...L}=n,j=Zt({name:["InputWrapper",f],props:N||n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jWe}),F={size:l,variant:c,__staticSelector:f},H=gl(I),Q=typeof C=="boolean"?C:R,J=(w==null?void 0:w.id)||`${H}-error`,ne=(b==null?void 0:b.id)||`${H}-description`,Z=H,ie=!!m&&typeof m!="boolean",q=!!g,U=`${ie?J:""} ${q?ne:""}`,G=U.trim().length>0?U.trim():void 0,V=(v==null?void 0:v.id)||`${H}-label`,Y=p&&S.jsx(fB,{labelElement:E,id:V,htmlFor:Z,required:Q,...F,...v,children:p},"label"),ee=q&&S.jsx(lB,{...b,...F,size:(b==null?void 0:b.size)||F.size,id:(b==null?void 0:b.id)||ne,children:g},"description"),ae=S.jsx(P.Fragment,{children:d(T)},"input"),_e=ie&&P.createElement(cB,{...w,...F,size:(w==null?void 0:w.size)||F.size,key:"error",id:(w==null?void 0:w.id)||J},m),pe=h.map(Se=>{switch(Se){case"label":return Y;case"input":return ae;case"description":return ee;case"error":return _e;default:return null}});return S.jsx(PWe,{value:{getStyles:j,describedBy:G,inputId:Z,labelId:V,...FWe(h,{hasDescription:q,hasError:ie})},children:S.jsx(je,{ref:t,variant:c,size:l,mod:[{error:!!m},O],...j("root"),...L,children:pe})})});SQ.classes=xh;SQ.displayName="@mantine/core/InputWrapper";const UWe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},zWe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Kn(t.size,"input-height"),"--input-fz":za(t.size),"--input-radius":t.radius===void 0?void 0:Ci(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ke(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ke(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Kn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ki=Xo((e,t)=>{const n=Je("Input",UWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:C,variant:I,vars:R,pointer:N,multiline:O,radius:L,id:j,withAria:F,withErrorStyles:H,mod:Q,inputSize:J,__clearSection:ne,__clearable:Z,__defaultRightSection:ie,...q}=n,{styleProps:U,rest:G}=DE(q),V=kA(),Y={offsetBottom:V==null?void 0:V.offsetBottom,offsetTop:V==null?void 0:V.offsetTop},ee=Zt({name:["Input",l],props:c||n,classes:xh,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:Y,rootSelector:"wrapper",vars:R,varsResolver:zWe}),ae=F?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":V==null?void 0:V.describedBy,id:(V==null?void 0:V.inputId)||j}:{},_e=b||Z&&ne||ie;return S.jsx(RWe,{value:{size:f||"sm"},children:S.jsxs(je,{...ee("wrapper"),...U,...d,mod:[{error:!!h&&H,pointer:N,disabled:p,multiline:O,"data-with-right-section":!!b,"data-with-left-section":!!m},Q],variant:I,size:f,children:[m&&S.jsx("div",{...g,"data-position":"left",...ee("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),S.jsx(je,{component:"input",...G,...ae,ref:t,required:u,mod:{disabled:p,error:!!h&&H},variant:I,__size:J,...ee("input")}),_e&&S.jsx("div",{...w,"data-position":"right",...ee("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:_e})]})})});Ki.classes=xh;Ki.Wrapper=SQ;Ki.Label=fB;Ki.Error=cB;Ki.Description=lB;Ki.Placeholder=EQ;Ki.ClearButton=Dwe;Ki.displayName="@mantine/core/Input";function VWe(e,t,n){const r=Je(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:v,id:b,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:I,variant:R,vars:N,mod:O,...L}=r,{styleProps:j,rest:F}=DE(L),H={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:I,variant:R,id:b,mod:O,...v};return{...F,classNames:u,styles:l,unstyled:f,wrapperProps:{...H,...j},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:R,id:b}}}const HWe={__staticSelector:"InputBase",withAria:!0},_h=Xo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=VWe("InputBase",HWe,e);return S.jsx(Ki.Wrapper,{...r,children:S.jsx(Ki,{...n,...i,ref:t})})});_h.classes={...Ki.classes,...Ki.Wrapper.classes};_h.displayName="@mantine/core/InputBase";const qWe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Nwe={root:"m_8bffd616"};const WWe={},an=Xo((e,t)=>{const n=Je("Flex",WWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,v=Zt({name:"Flex",classes:Nwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=Oo(),w=zP(),E=S_e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:qWe});return S.jsxs(S.Fragment,{children:[E.hasResponsiveStyles&&S.jsx(RE,{selector:`.${w}`,styles:E.styles,media:E.media}),S.jsx(je,{ref:t,...v("root",{className:w,style:lx(E.inlineStyles)}),...g})]})});an.classes=Nwe;an.displayName="@mantine/core/Flex";function GWe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function YWe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=P.useRef(-1),[s,o]=P.useState(!1),[a,u]=P.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t||!n.current)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m=window.getComputedStyle(e),g=window.getComputedStyle(t),v=Jv(m.borderTopWidth)+Jv(g.borderTopWidth),b=Jv(m.borderLeftWidth)+Jv(g.borderLeftWidth),w={top:h.top-p.top-v,left:h.left-p.left-b,width:h.width,height:h.height};n.current.style.transform=`translateY(${w.top}px) translateX(${w.left}px)`,n.current.style.width=`${w.width}px`,n.current.style.height=`${w.height}px`},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=P.useRef(null),d=P.useRef(null);return P.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),P.useEffect(()=>{if(t){const h=p=>{GWe(p.target,t)&&(c(),u(!1))};return t.addEventListener("transitionend",h),()=>{t.removeEventListener("transitionend",h)}}},[t]),Vze(()=>{y_e()!=="test"&&o(!0)},20,{autoInvoke:!0}),qze(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Pwe={root:"m_96b553a6"};const KWe={},XWe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),TQ=At((e,t)=>{const n=Je("FloatingIndicator",KWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Zt({name:"FloatingIndicator",classes:Pwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XWe}),g=P.useRef(null),{initialized:v,hidden:b}=YWe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),w=Po(t,g);return!l||!c?null:S.jsx(je,{ref:w,mod:[{initialized:v,hidden:b},d],...m("root"),...p})});TQ.displayName="@mantine/core/FloatingIndicator";TQ.classes=Pwe;const[QWe,CQ]=Au("Accordion component was not found in the tree");function dB({style:e,size:t=16,...n}){return S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ke(t),height:Ke(t),display:"block"},...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}dB.displayName="@mantine/core/AccordionChevron";const[JWe,Owe]=Au("Accordion.Item component was not found in the tree");var HP={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const ZWe={},AQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Je("AccordionControl",ZWe,e),{value:m}=Owe(),g=CQ(),v=g.isItemActive(m),b=typeof g.order=="number",w=`h${g.order}`,E=S.jsxs(ud,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:v,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),g.onChange(m)},type:"button",disabled:d,"aria-expanded":v,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:HX({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[S.jsx(je,{component:"span",mod:{rotate:!g.disableChevronRotation&&v,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),S.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&S.jsx(je,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?S.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});AQ.displayName="@mantine/core/AccordionControl";AQ.classes=HP;const eGe={},IQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Je("AccordionItem",eGe,e),c=CQ();return S.jsx(JWe,{value:{value:a},children:S.jsx(je,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});IQ.displayName="@mantine/core/AccordionItem";IQ.classes=HP;const tGe={},kQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Je("AccordionPanel",tGe,e),{value:l}=Owe(),c=CQ();return S.jsx(rB,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:S.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});kQ.displayName="@mantine/core/AccordionPanel";kQ.classes=HP;const nGe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:S.jsx(dB,{})},rGe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ke(n),"--accordion-radius":r===void 0?void 0:Ci(r)}});function Qu(e){const t=Je("Accordion",nGe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:T,radius:C,...I}=t,R=gl(h),[N,O]=Yo({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),L=H=>Array.isArray(N)?N.includes(H):H===N,j=H=>{const Q=Array.isArray(N)?N.includes(H)?N.filter(J=>J!==H):[...N,H]:H===N?null:H;O(Q)},F=Zt({name:"Accordion",classes:HP,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:rGe});return S.jsx(QWe,{value:{isItemActive:L,onChange:j,getControlId:U$(`${R}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:U$(`${R}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:v,order:w,chevron:E,loop:p,getStyles:F,variant:T,unstyled:o},children:S.jsx(je,{...F("root"),id:R,...I,variant:T,"data-accordion":!0,children:u})})}const iGe=e=>e;Qu.extend=iGe;Qu.withProps=oHe(Qu);Qu.classes=HP;Qu.displayName="@mantine/core/Accordion";Qu.Item=IQ;Qu.Panel=kQ;Qu.Control=AQ;Qu.Chevron=dB;var Mwe={root:"m_7f854edf"};const sGe={position:{bottom:0,right:0},zIndex:ff("modal"),withinPortal:!0},oGe=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":Ke(n==null?void 0:n.top),"--affix-left":Ke(n==null?void 0:n.left),"--affix-bottom":Ke(n==null?void 0:n.bottom),"--affix-right":Ke(n==null?void 0:n.right)}}),RQ=At((e,t)=>{const n=Je("Affix",sGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=Zt({name:"Affix",classes:Mwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oGe});return S.jsx(px,{...l,withinPortal:f,children:S.jsx(je,{ref:t,...p("root"),...h})})});RQ.classes=Mwe;RQ.displayName="@mantine/core/Affix";var Lwe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const aGe={},uGe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ci(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},My=At((e,t)=>{const n=Je("Alert",aGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,T=Zt({name:"Alert",classes:Lwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uGe}),C=gl(h),I=f&&`${C}-title`||void 0,R=`${C}-body`;return S.jsx(je,{id:C,...T("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":R,"aria-labelledby":I,children:S.jsxs("div",{...T("wrapper"),children:[p&&S.jsx("div",{...T("icon"),children:p}),S.jsxs("div",{...T("body"),children:[f&&S.jsx("div",{...T("title"),"data-with-close-button":m||void 0,children:S.jsx("span",{id:I,...T("label"),children:f})}),d&&S.jsx("div",{id:R,...T("message"),"data-variant":b,children:d})]}),m&&S.jsx(gx,{...T("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});My.classes=Lwe;My.displayName="@mantine/core/Alert";var $we={root:"m_b6d8b162"};function lGe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const cGe={inherit:!1},fGe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":za(i),"--text-lh":l_e(i),"--text-gradient":t==="gradient"?Zq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?qi(s,e):void 0}}),lt=Xo((e,t)=>{const n=Je("Text",cGe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:v,size:b,...w}=n,E=Zt({name:["Text",l],props:n,classes:$we,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:fGe});return S.jsx(je,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":lGe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},v],size:b,...w})});lt.classes=$we;lt.displayName="@mantine/core/Text";var Fwe={root:"m_849cf0da"};const dGe={underline:"hover"},PE=Xo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Je("Anchor",dGe,e);return S.jsx(lt,{component:"a",ref:t,className:co({[Fwe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});PE.classes=Fwe;PE.displayName="@mantine/core/Anchor";const[hGe,RA]=Au("AppShell was not found in tree");var yx={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const pGe={},DQ=At((e,t)=>{const n=Je("AppShellAside",pGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=RA();return h.disabled?null:S.jsx(je,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});DQ.classes=yx;DQ.displayName="@mantine/core/AppShellAside";const mGe={},NQ=At((e,t)=>{var p;const n=Je("AppShellFooter",mGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=RA();return h.disabled?null:S.jsx(je,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:co({[cC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});NQ.classes=yx;NQ.displayName="@mantine/core/AppShellFooter";const gGe={},PQ=At((e,t)=>{var p;const n=Je("AppShellHeader",gGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=RA();return h.disabled?null:S.jsx(je,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:co({[cC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});PQ.classes=yx;PQ.displayName="@mantine/core/AppShellHeader";const yGe={},OQ=At((e,t)=>{const n=Je("AppShellMain",yGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=RA();return S.jsx(je,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});OQ.classes=yx;OQ.displayName="@mantine/core/AppShellMain";function qP(e){return typeof e=="object"?e.base:e}function WP(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function GP(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function vGe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),WP(s)){const f=Ke(qP(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(GP(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ke(s.base),e["--app-shell-aside-offset"]=Ke(s.base)),as(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ke(s[f]),t[f]["--app-shell-aside-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=WX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function bGe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(WP(r)){const o=Ke(qP(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}GP(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ke(r.base),s&&(e["--app-shell-footer-offset"]=Ke(r.base))),as(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ke(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function xGe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(WP(r)){const o=Ke(qP(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}GP(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ke(r.base),s&&(e["--app-shell-header-offset"]=Ke(r.base))),as(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ke(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function _Ge({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),WP(s)){const f=Ke(qP(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(GP(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ke(s.base),e["--app-shell-navbar-offset"]=Ke(s.base)),as(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ke(s[f]),t[f]["--app-shell-navbar-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=WX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function pz(e){return Number(e)===0?"0px":Go(e)}function wGe({padding:e,baseStyles:t,minMediaStyles:n}){WP(e)&&(t["--app-shell-padding"]=pz(qP(e))),GP(e)&&(e.base&&(t["--app-shell-padding"]=pz(e.base)),as(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=pz(e[r]))}))}function EGe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};_Ge({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),vGe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),xGe({baseStyles:u,minMediaStyles:o,header:t}),bGe({baseStyles:u,minMediaStyles:o,footer:n}),wGe({baseStyles:u,minMediaStyles:o,padding:i});const l=yN(as(o),s.breakpoints).map(d=>({query:`(min-width: ${j$(d.px)})`,styles:o[d.value]})),c=yN(as(a),s.breakpoints).map(d=>({query:`(max-width: ${j$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function SGe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Oo(),o=dx(),{media:a,baseStyles:u}=EGe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return S.jsx(RE,{media:a,styles:u,selector:o.cssVariablesSelector})}const TGe={},MQ=At((e,t)=>{const n=Je("AppShellNavbar",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=RA();return h.disabled?null:S.jsx(je,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});MQ.classes=yx;MQ.displayName="@mantine/core/AppShellNavbar";const CGe={},LQ=Xo((e,t)=>{const n=Je("AppShellSection",CGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=RA();return S.jsx(je,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});LQ.classes=yx;LQ.displayName="@mantine/core/AppShellSection";function AGe({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(-1),s=P.useRef(-1);return p_e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),200)}),IE(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const IGe={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:ff("app")},kGe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Vi=At((e,t)=>{const n=Je("AppShell",IGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:v,aside:b,footer:w,offsetScrollbars:E=g!=="alt",mod:T,...C}=n,I=Zt({name:"AppShell",classes:yx,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kGe}),R=AGe({disabled:v,transitionDuration:d});return S.jsxs(hGe,{value:{getStyles:I,withBorder:c,zIndex:m,disabled:v,offsetScrollbars:E},children:[S.jsx(SGe,{navbar:l,header:p,aside:b,footer:w,padding:f}),S.jsx(je,{ref:t,...I("root"),mod:[{resizing:R,layout:g,disabled:v},T],...C})]})});Vi.classes=yx;Vi.displayName="@mantine/core/AppShell";Vi.Navbar=MQ;Vi.Header=PQ;Vi.Main=OQ;Vi.Aside=DQ;Vi.Footer=NQ;Vi.Section=LQ;function Bwe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Bwe(t))}:e}function jwe(e){return e?e.map(t=>Bwe(t)):[]}function $Q(e){return e.reduce((t,n)=>"group"in n?{...t,...$Q(n.items)}:(t[n.value]=n,t),{})}var Jc={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const RGe={error:null},DGe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Kn(t,"combobox-chevron-size")}}),FQ=At((e,t)=>{const n=Je("ComboboxChevron",RGe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Zt({name:"ComboboxChevron",classes:Jc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:DGe,rootSelector:"chevron"});return S.jsx(je,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:S.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});FQ.classes=Jc;FQ.displayName="@mantine/core/ComboboxChevron";const[NGe,wh]=Au("Combobox component was not found in tree"),Uwe=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>S.jsx(Ki.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Uwe.displayName="@mantine/core/ComboboxClearButton";const PGe={},BQ=At((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Je("ComboboxDropdown",PGe,e),u=wh();return S.jsx(xu.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});BQ.classes=Jc;BQ.displayName="@mantine/core/ComboboxDropdown";const OGe={refProp:"ref"},zwe=At((e,t)=>{const{children:n,refProp:r}=Je("ComboboxDropdownTarget",OGe,e);if(wh(),!cx(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return S.jsx(xu.Target,{ref:t,refProp:r,children:n})});zwe.displayName="@mantine/core/ComboboxDropdownTarget";const MGe={},jQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxEmpty",MGe,e),u=wh();return S.jsx(je,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});jQ.classes=Jc;jQ.displayName="@mantine/core/ComboboxEmpty";function UQ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=wh(),[a,u]=P.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const LGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Vwe=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxEventsTarget",LGe,e);if(!cx(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=wh(),f=UQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...f,...l,[r]:Po(t,c.store.targetRef,eB(n))})});Vwe.displayName="@mantine/core/ComboboxEventsTarget";const $Ge={},zQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxFooter",$Ge,e),u=wh();return S.jsx(je,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});zQ.classes=Jc;zQ.displayName="@mantine/core/ComboboxFooter";const FGe={},VQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Je("ComboboxGroup",FGe,e),c=wh();return S.jsxs(je,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&S.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});VQ.classes=Jc;VQ.displayName="@mantine/core/ComboboxGroup";const BGe={},HQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxHeader",BGe,e),u=wh();return S.jsx(je,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});HQ.classes=Jc;HQ.displayName="@mantine/core/ComboboxHeader";function Hwe({value:e,valuesDivider:t=",",...n}){return S.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Hwe.displayName="@mantine/core/ComboboxHiddenInput";const jGe={},qQ=At((e,t)=>{const n=Je("ComboboxOption",jGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,v=wh(),b=P.useId(),w=l||b;return S.jsx(je,{...v.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var T;h?E.preventDefault():((T=v.onOptionSubmit)==null||T.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),d==null||d(E)}})});qQ.classes=Jc;qQ.displayName="@mantine/core/ComboboxOption";const UGe={},WQ=At((e,t)=>{const n=Je("ComboboxOptions",UGe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=wh(),d=gl(a);return P.useEffect(()=>{f.store.setListId(d)},[d]),S.jsx(je,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});WQ.classes=Jc;WQ.displayName="@mantine/core/ComboboxOptions";const zGe={withAriaAttributes:!0,withKeyboardNavigation:!0},GQ=At((e,t)=>{const n=Je("ComboboxSearch",zGe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=wh(),h=d.getStyles("search"),p=UQ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return S.jsx(Ki,{ref:Po(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});GQ.classes=Jc;GQ.displayName="@mantine/core/ComboboxSearch";const VGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},qwe=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxTarget",VGe,e);if(!cx(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=wh(),f=UQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=P.cloneElement(n,{...f,...l});return S.jsx(xu.Target,{ref:Po(t,c.store.targetRef),children:d})});qwe.displayName="@mantine/core/ComboboxTarget";function HGe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qGe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function WGe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function YQ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Yo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),f=P.useRef(null),d=P.useRef(null),h=P.useRef(-1),p=P.useRef(-1),m=P.useRef(-1),g=P.useCallback((J="unknown")=>{a||(u(!0),i==null||i(J))},[u,i,a]),v=P.useCallback((J="unknown")=>{a&&(u(!1),r==null||r(J))},[u,r,a]),b=P.useCallback((J="unknown")=>{a?v(J):g(J)},[v,g,a]),w=P.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-selected]`);J==null||J.removeAttribute("data-combobox-selected"),J==null||J.removeAttribute("aria-selected")},[]),E=P.useCallback(J=>{const ne=document.getElementById(l.current),Z=ne==null?void 0:ne.querySelectorAll("[data-combobox-option]");if(!Z)return null;const ie=J>=Z.length?0:J<0?Z.length-1:J;return c.current=ie,Z!=null&&Z[ie]&&!Z[ie].hasAttribute("data-combobox-disabled")?(w(),Z[ie].setAttribute("data-combobox-selected","true"),Z[ie].setAttribute("aria-selected","true"),Z[ie].scrollIntoView({block:"nearest",behavior:o}),Z[ie].id):null},[o,w]),T=P.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-active]`);if(J){const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(ne).findIndex(ie=>ie===J);return E(Z)}return E(0)},[E]),C=P.useCallback(()=>E(qGe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),I=P.useCallback(()=>E(HGe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),R=P.useCallback(()=>E(WGe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),N=P.useCallback((J="selected",ne)=>{m.current=window.setTimeout(()=>{var q;const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ie=Array.from(Z).findIndex(U=>U.hasAttribute(`data-combobox-${J}`));c.current=ie,ne!=null&&ne.scrollIntoView&&((q=Z[ie])==null||q.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),O=P.useCallback(()=>{c.current=-1,w()},[w]),L=P.useCallback(()=>{const J=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=J==null?void 0:J[c.current];ne==null||ne.click()},[]),j=P.useCallback(J=>{l.current=J},[]),F=P.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),H=P.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),Q=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:Q,selectOption:E,selectFirstOption:R,selectActiveOption:T,selectNextOption:C,selectPreviousOption:I,resetSelectedOption:O,updateSelectedOptionIndex:N,listId:l.current,setListId:j,clickSelectedOption:L,searchRef:f,focusSearchInput:F,targetRef:d,focusTarget:H}}const GGe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},YGe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":za(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ke(n),"--combobox-option-fz":za(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")}});function Wr(e){const t=Je("Combobox",GGe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=YQ(),v=o||g,b=Zt({name:h||"Combobox",classes:Jc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:YGe}),w=()=>{l==null||l(),v.closeDropdown()};return S.jsx(NGe,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:S.jsx(xu,{opened:v.dropdownOpened,...m,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:s})})}const KGe=e=>e;Wr.extend=KGe;Wr.classes=Jc;Wr.displayName="@mantine/core/Combobox";Wr.Target=qwe;Wr.Dropdown=BQ;Wr.Options=WQ;Wr.Option=qQ;Wr.Search=GQ;Wr.Empty=jQ;Wr.Chevron=FQ;Wr.Footer=zQ;Wr.Header=HQ;Wr.EventsTarget=Vwe;Wr.DropdownTarget=zwe;Wr.Group=VQ;Wr.ClearButton=Uwe;Wr.HiddenInput=Hwe;var Wwe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Gwe=Wwe,hB=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:v,vars:b,mod:w,...E},T)=>{const C=Zt({name:e,props:t,className:n,style:v,classes:Wwe,classNames:r,styles:i,unstyled:s});return S.jsx(je,{...C("root"),ref:T,__vars:{"--label-fz":za(d),"--label-lh":Kn(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...E,children:S.jsxs(je,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,S.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&S.jsx(je,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&S.jsx(Ki.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&S.jsx(Ki.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});hB.displayName="@mantine/core/InlineInput";const Ywe=P.createContext(null),XGe=Ywe.Provider,Kwe=()=>P.useContext(Ywe),[QGe,JGe]=fx();var Xwe={card:"m_26775b0a"};const ZGe={withBorder:!0},eYe=(e,{radius:t})=>({card:{"--card-radius":Ci(t)}}),KQ=At((e,t)=>{const n=Je("CheckboxCard",ZGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...g}=n,v=Zt({name:"CheckboxCard",classes:Xwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eYe,rootSelector:"card"}),b=Kwe(),w=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,T]=Yo({value:w,defaultValue:p,finalValue:!1,onChange:m});return S.jsx(QGe,{value:{checked:E},children:S.jsx(ud,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"checkbox","aria-checked":E,onClick:C=>{h==null||h(C),b==null||b.onChange(d||""),T(!E)}})})});KQ.displayName="@mantine/core/CheckboxCard";KQ.classes=Xwe;function XQ({children:e,role:t}){const n=kA();return n?S.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):S.jsx(S.Fragment,{children:e})}const tYe={},QQ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("CheckboxGroup",tYe,e),[c,f]=Yo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(XGe,{value:{value:c,onChange:d,size:s},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:S.jsx(XQ,{role:"group",children:a})})})});QQ.classes=Ki.Wrapper.classes;QQ.displayName="@mantine/core/CheckboxGroup";function Qwe({size:e,style:t,...n}){const r=e!==void 0?{width:Ke(e),height:Ke(e),...t}:t;return S.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:S.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jwe({indeterminate:e,...t}){return e?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:S.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):S.jsx(Qwe,{...t})}var Zwe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const nYe={icon:Jwe},rYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ig({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ci(t),"--checkbox-color":s==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):EA(o,e)?hx({color:n,theme:e,autoContrast:o}):void 0}}},JQ=At((e,t)=>{const n=Je("CheckboxIndicator",nYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:v,disabled:b,...w}=n,E=l,T=Zt({name:"CheckboxIndicator",classes:Zwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rYe,rootSelector:"indicator"}),C=JGe(),I=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return S.jsx(je,{ref:t,...T("indicator",{variant:v}),variant:v,mod:[{checked:I,disabled:b},g],...w,children:S.jsx(E,{indeterminate:c,...T("icon")})})});JQ.displayName="@mantine/core/CheckboxIndicator";JQ.classes=Zwe;var eEe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const iYe={labelPosition:"right",icon:Jwe},sYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ig({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ci(t),"--checkbox-color":s==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):EA(o,e)?hx({color:n,theme:e,autoContrast:o}):void 0}}},il=At((e,t)=>{const n=Je("Checkbox",iYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:C,rootRef:I,iconColor:R,onChange:N,autoContrast:O,mod:L,...j}=n,F=Kwe(),H=d||(F==null?void 0:F.size),Q=C,J=Zt({name:"Checkbox",props:n,classes:eEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sYe}),{styleProps:ne,rest:Z}=DE(j),ie=gl(f),q=F?{checked:F.value.includes(Z.value),onChange:U=>{F.onChange(U),N==null||N(U)}}:{};return S.jsx(hB,{...J("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ie,size:H,labelPosition:g,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":q.checked||m||void 0,variant:E,ref:I,mod:L,...ne,...p,children:S.jsxs(je,{...J("inner"),mod:{"data-label-position":g},children:[S.jsx(je,{component:"input",id:ie,ref:t,checked:m,disabled:w,mod:{error:!!b,indeterminate:T},...J("input",{focusable:!0,variant:E}),onChange:N,...Z,...q,type:"checkbox"}),S.jsx(Q,{indeterminate:T,...J("icon")})]})})});il.classes={...eEe,...Gwe};il.displayName="@mantine/core/Checkbox";il.Group=QQ;il.Indicator=JQ;il.Card=KQ;function gC(e){return"group"in e}function tEe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;gC(o)&&i.push({group:o.group,items:tEe({options:o.items,search:t,limit:n-i.length})}),gC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function oYe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function nEe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(gC(n))nEe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function aYe(e,t){return Array.isArray(e)?e.includes(t):e===t}function rEe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!gC(e)){const a=aYe(n,e.value),u=t&&a&&S.jsx(Qwe,{className:Jc.optionsDropdownCheckIcon}),l=S.jsxs(S.Fragment,{children:[r==="left"&&u,S.jsx("span",{children:e.label}),r==="right"&&u]});return S.jsx(Wr.Option,{value:e.value,disabled:e.disabled,className:co({[Jc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>S.jsx(rEe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return S.jsx(Wr.Group,{label:e.group,children:o})}function iEe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":v}){nEe(e);const w=typeof i=="string"?(r||tEe)({options:e,search:u?i:"",limit:s??1/0}):e,E=oYe(w),T=w.map(C=>S.jsx(rEe,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},gC(C)?C.group:C.value));return S.jsx(Wr.Dropdown,{hidden:t||n&&E,children:S.jsxs(Wr.Options,{labelledBy:p,"aria-label":v,children:[a?S.jsx(Ky.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:T}):T,E&&d&&S.jsx(Wr.Empty,{children:d})]})})}var sEe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const uYe={},lYe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Kn(s,"badge-height"),"--badge-padding-x":Kn(s,"badge-padding-x"),"--badge-fz":Kn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ci(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?qi(n,e):void 0}}},Dp=Xo((e,t)=>{const n=Je("Badge",uYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:v,circle:b,mod:w,...E}=n,T=Zt({name:"Badge",props:n,classes:sEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lYe});return S.jsxs(je,{variant:m,mod:[{block:g,circle:b,"with-right-section":!!h,"with-left-section":!!d},w],...T("root",{variant:m}),ref:t,...E,children:[d&&S.jsx("span",{...T("section"),"data-position":"left",children:d}),S.jsx("span",{...T("label"),children:p}),h&&S.jsx("span",{...T("section"),"data-position":"right",children:h})]})});Dp.classes=sEe;Dp.displayName="@mantine/core/Badge";var DA={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Ele={orientation:"horizontal"},cYe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ke(t)}}),ZQ=At((e,t)=>{const n=Je("ButtonGroup",Ele,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ButtonGroup",Ele,e),p=Zt({name:"ButtonGroup",props:n,classes:DA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:cYe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});ZQ.classes=DA;ZQ.displayName="@mantine/core/ButtonGroup";const Sle={},fYe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?za(o.replace("compact-","")):za(o),"--section-radius":t===void 0?void 0:Ci(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},eJ=At((e,t)=>{const n=Je("ButtonGroupSection",Sle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ButtonGroupSection",Sle,e),p=Zt({name:"ButtonGroupSection",props:n,classes:DA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:fYe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});eJ.classes=DA;eJ.displayName="@mantine/core/ButtonGroupSection";const dYe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ke(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},hYe={},pYe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Kn(s,"button-height"),"--button-padding-x":Kn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?za(s.replace("compact-","")):za(s),"--button-radius":t===void 0?void 0:Ci(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},gn=Xo((e,t)=>{const n=Je("Button",hYe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:T,mod:C,...I}=n,R=Zt({name:"Button",props:n,classes:DA,className:s,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:pYe}),N=!!l,O=!!c;return S.jsxs(ud,{ref:t,...R("root",{active:!a&&!p&&!E}),unstyled:w,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":N,"with-right-section":O},C],...I,children:[S.jsx(sg,{mounted:!!p,transition:dYe,duration:150,children:L=>S.jsx(je,{component:"span",...R("loader",{style:L}),"aria-hidden":!0,children:S.jsx(df,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),S.jsxs("span",{...R("inner"),children:[l&&S.jsx(je,{component:"span",...R("section"),mod:{position:"left"},children:l}),S.jsx(je,{component:"span",mod:{loading:p},...R("label"),children:u}),c&&S.jsx(je,{component:"span",...R("section"),mod:{position:"right"},children:c})]})]})});gn.classes=DA;gn.displayName="@mantine/core/Button";gn.Group=ZQ;gn.GroupSection=eJ;const[mYe,gYe]=Au("Card component was not found in tree");var tJ={root:"m_e615b15f",section:"m_599a2148"};const yYe={},pB=Xo((e,t)=>{const n=Je("CardSection",yYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=gYe();return S.jsx(je,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});pB.classes=tJ;pB.displayName="@mantine/core/CardSection";const vYe={},bYe=(e,{padding:t})=>({root:{"--card-padding":Go(t)}}),NA=Xo((e,t)=>{const n=Je("Card",vYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Zt({name:"Card",props:n,classes:tJ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bYe}),h=P.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===pB?P.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return S.jsx(mYe,{value:{getStyles:d},children:S.jsx(SA,{ref:t,unstyled:a,...d("root"),...f,children:p})})});NA.classes=tJ;NA.displayName="@mantine/core/Card";NA.Section=pB;var oEe={root:"m_4451eb3a"};const xYe={},ma=Xo((e,t)=>{const n=Je("Center",xYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Zt({name:"Center",props:n,classes:oEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return S.jsx(je,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ma.classes=oEe;ma.displayName="@mantine/core/Center";var aEe={root:"m_b183c0a2"};const _Ye={},wYe=(e,{color:t})=>({root:{"--code-bg":t?qi(t,e):void 0}}),OD=At((e,t)=>{const n=Je("Code",_Ye,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Zt({name:"Code",props:n,classes:aEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wYe});return S.jsx(je,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});OD.classes=aEe;OD.displayName="@mantine/core/Code";var uEe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Tle={withShadow:!0},EYe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Ci(t),"--cs-size":Ke(n)}}),nJ=Xo((e,t)=>{const n=Je("ColorSwatch",Tle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=Je("ColorSwatch",Tle,n),g=Zt({name:"ColorSwatch",props:n,classes:uEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe});return S.jsxs(je,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[S.jsx("span",{...g("alphaOverlay")}),d&&S.jsx("span",{...g("shadowOverlay")}),S.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),S.jsx("span",{...g("childrenOverlay"),children:h})]})});nJ.classes=uEe;nJ.displayName="@mantine/core/ColorSwatch";var lEe={root:"m_7485cace"};const SYe={},TYe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Kn(t,"container-size")}}),Qy=At((e,t)=>{const n=Je("Container",SYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Zt({name:"Container",classes:lEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TYe});return S.jsx(je,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Qy.classes=lEe;Qy.displayName="@mantine/core/Container";var cEe={root:"m_3eebeb36",label:"m_9e365f20"};const CYe={orientation:"horizontal"},AYe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?qi(t,e):void 0,"--divider-border-style":n,"--divider-size":Kn(r,"divider-size")}}),OE=At((e,t)=>{const n=Je("Divider",CYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Zt({name:"Divider",classes:cEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AYe});return S.jsx(je,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&S.jsx(je,{component:"span",mod:{position:d},...m("label"),children:f})})});OE.classes=cEe;OE.displayName="@mantine/core/Divider";function IYe({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Cle,fEe]=Au("Grid component was not found in tree"),lW=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Ale=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":lW(e,t),Ile=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},kle=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function kYe({span:e,order:t,offset:n,selector:r}){var h;const i=Oo(),s=fEe(),o=s.breakpoints||i.breakpoints,u=Sp(e)===void 0?12:Sp(e),l=lx({"--col-order":(h=Sp(t))==null?void 0:h.toString(),"--col-flex-grow":Ile(u,s.grow),"--col-flex-basis":lW(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":Ale(u,s.columns,s.grow),"--col-offset":kle(Sp(n),s.columns)}),c=as(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=Ile(e[m],s.grow),p[m]["--col-flex-basis"]=lW(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=Ale(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=kle(n[m],s.columns)),p},{}),d=yN(as(c),o).filter(p=>as(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return S.jsx(RE,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var rJ={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const RYe={span:12},iJ=At((e,t)=>{const n=Je("GridCol",RYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=fEe(),h=zP();return S.jsxs(S.Fragment,{children:[S.jsx(kYe,{selector:`.${h}`,span:u,order:l,offset:c}),S.jsx(je,{ref:t,...d.getStyles("col",{className:co(i,h),style:s,classNames:r,styles:o}),...f})]})});iJ.classes=rJ;iJ.displayName="@mantine/core/GridCol";function Rle({gutter:e,selector:t,breakpoints:n,type:r}){const i=Oo(),s=n||i.breakpoints,o=lx({"--grid-gutter":Go(Sp(e))}),a=as(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Go(e[f])),c),{}),l=yN(as(a),s).filter(c=>as(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return S.jsx(RE,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const DYe={gutter:"md",grow:!1,columns:12},NYe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Xf=At((e,t)=>{const n=Je("Grid",DYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:g,...v}=n,b=Zt({name:"Grid",classes:rJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NYe}),w=zP();return g==="container"&&m?S.jsxs(Cle,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:g},children:[S.jsx(Rle,{selector:`.${w}`,...n}),S.jsx("div",{...b("container"),children:S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})})]}):S.jsxs(Cle,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:g},children:[S.jsx(Rle,{selector:`.${w}`,...n}),S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})]})});Xf.classes=rJ;Xf.displayName="@mantine/core/Grid";Xf.Col=iJ;var dEe={root:"m_9e117634"};const PYe={},OYe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ci(t),"--image-object-fit":n}}),vx=Xo((e,t)=>{const n=Je("Image",PYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,v]=P.useState(!c);P.useEffect(()=>v(!c),[c]);const b=Zt({name:"Image",classes:dEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OYe});return g&&h?S.jsx(je,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):S.jsx(je,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:p,...m})});vx.classes=dEe;vx.displayName="@mantine/core/Image";function cW(){return cW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cW.apply(null,arguments)}function MYe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var LYe=P.useLayoutEffect,$Ye=function(t){var n=P.useRef(t);return LYe(function(){n.current=t}),n},Dle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},FYe=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&Dle(r.current,null),r.current=n,n&&Dle(n,i)},[n])},Nle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},BYe=function(t){Object.keys(Nle).forEach(function(n){t.style.setProperty(n,Nle[n],"important")})},Ple=BYe,Rl=null,Ole=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function jYe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Rl||(Rl=document.createElement("textarea"),Rl.setAttribute("tabindex","-1"),Rl.setAttribute("aria-hidden","true"),Ple(Rl)),Rl.parentNode===null&&document.body.appendChild(Rl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Rl.style[h]=o[h]}),Ple(Rl),Rl.value=t;var u=Ole(Rl,e);Rl.value=t,u=Ole(Rl,e),Rl.value="x";var l=Rl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Mle=function(){},UYe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},zYe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],VYe=!!document.documentElement.currentStyle,HYe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=UYe(zYe,n),i=r.boxSizing;if(i==="")return null;VYe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},qYe=HYe;function hEe(e,t,n){var r=$Ye(n);P.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var WYe=function(t){hEe(window,"resize",t)},GYe=function(t){hEe(document.fonts,"loadingdone",t)},YYe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],KYe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Mle:o,u=t.onHeightChange,l=u===void 0?Mle:u,c=MYe(t,YYe),f=c.value!==void 0,d=P.useRef(null),h=FYe(d,n),p=P.useRef(0),m=P.useRef(),g=function(){var w=d.current,E=r&&m.current?m.current:qYe(w);if(E){m.current=E;var T=jYe(E,w.value||w.placeholder||"x",s,i),C=T[0],I=T[1];p.current!==C&&(p.current=C,w.style.setProperty("height",C+"px","important"),l(C,{rowHeight:I}))}},v=function(w){f||g(),a(w)};return P.useLayoutEffect(g),WYe(g),GYe(g),P.createElement("textarea",cW({},c,{onChange:v,ref:h}))},XYe=P.forwardRef(KYe);const QYe={},sJ=At((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Je("Textarea",QYe,e),u=n&&y_e()!=="test",l=u?{maxRows:r,minRows:i}:{};return S.jsx(_h,{component:u?XYe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});sJ.classes=_h.classes;sJ.displayName="@mantine/core/Textarea";const[JYe,ZYe]=Au("List component was not found in tree");var oJ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const eKe={},aJ=At((e,t)=>{const n=Je("ListItem",eKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=ZYe(),h=u||d.icon,p={classNames:r,styles:o};return S.jsx(je,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:S.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&S.jsx("span",{...d.getStyles("itemIcon",p),children:h}),S.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});aJ.classes=oJ;aJ.displayName="@mantine/core/ListItem";const tKe={type:"unordered"},nKe=(e,{size:t,spacing:n})=>({root:{"--list-fz":za(t),"--list-lh":l_e(t),"--list-spacing":Go(n)}}),Np=At((e,t)=>{const n=Je("List",tKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...v}=n,b=Zt({name:"List",classes:oJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nKe});return S.jsx(JYe,{value:{center:p,icon:d,getStyles:b},children:S.jsx(je,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...v,children:l})})});Np.classes=oJ;Np.displayName="@mantine/core/List";Np.Item=aJ;var pEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Lle={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ff("overlay")},rKe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),ld=At((e,t)=>{const n=Je("LoadingOverlay",Lle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Oo(),g=Zt({name:"LoadingOverlay",classes:pEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rKe}),v={...Lle.overlayProps,...f};return S.jsx(sg,{transition:"fade",...l,mounted:!!d,children:b=>S.jsxs(je,{...g("root",{style:b}),ref:t,...p,children:[S.jsx(df,{...g("loader"),unstyled:a,...c}),S.jsx(pC,{...v,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),S.jsx(pC,{...v,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});ld.classes=pEe;ld.displayName="@mantine/core/LoadingOverlay";const[iKe,YP]=Au("Menu component was not found in the tree");var PA={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const sKe={},uJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuDivider",sKe,e),u=YP();return S.jsx(je,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});uJ.classes=PA;uJ.displayName="@mantine/core/MenuDivider";const oKe={},lJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=Je("MenuDropdown",oKe,e),d=P.useRef(null),h=YP(),p=h0(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),m=h0(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=h0(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return S.jsxs(xu.Dropdown,{...f,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:Po(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[S.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});lJ.classes=PA;lJ.displayName="@mantine/core/MenuDropdown";const aKe={},cJ=Xo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Je("MenuItem",aKe,e),p=YP(),m=Oo(),{dir:g}=x1(),v=P.useRef(null),b=p.getItemIndex(v.current),w=h,E=h0(w.onMouseLeave,()=>p.setHovered(-1)),T=h0(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),C=h0(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),I=h0(w.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),R=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,N=a?ig({color:a,theme:m}):null;return S.jsxs(ud,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:I,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Po(v,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:E,onClick:C,onKeyDown:HX({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":N!=null&&N.isThemeColor&&(N==null?void 0:N.shade)===void 0?`var(--mantine-color-${N.color}-6)`:R==null?void 0:R.color,"--menu-item-hover":R==null?void 0:R.hover},children:[l&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&S.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});cJ.classes=PA;cJ.displayName="@mantine/core/MenuItem";const uKe={},fJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuLabel",uKe,e),u=YP();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});fJ.classes=PA;fJ.displayName="@mantine/core/MenuLabel";const lKe={refProp:"ref"},mEe=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Je("MenuTarget",lKe,e);if(!cx(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=YP(),o=n.props,a=h0(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=h0(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=h0(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return S.jsx(xu.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});mEe.displayName="@mantine/core/MenuTarget";const cKe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ll(e){const t=Je("Menu",cKe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:T,...C}=t,I=Zt({name:"Menu",classes:PA,props:t,classNames:m,styles:g,unstyled:v}),[R,{setHovered:N,resetHovered:O}]=_ze(),[L,j]=Yo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[F,H]=P.useState(!1),Q=()=>{j(!1),H(!1),L&&(i==null||i())},J=()=>{j(!0),!L&&(r==null||r())},ne=()=>{L?Q():J()},{openDropdown:Z,closeDropdown:ie}=IYe({open:J,close:Q,closeDelay:p,openDelay:h}),q=V=>xze("[data-menu-item]","[data-menu-dropdown]",V),{resolvedClassNames:U,resolvedStyles:G}=kE({classNames:m,styles:g,props:t});return M0(()=>{O()},[L]),S.jsx(iKe,{value:{getStyles:I,opened:L,toggleDropdown:ne,getItemIndex:q,hovered:R,setHovered:N,openedViaClick:F,setOpenedViaClick:H,closeOnItemClick:l,closeDropdown:d==="click"?Q:ie,openDropdown:d==="click"?J:Z,closeDropdownImmediately:Q,loop:c,trigger:d,unstyled:v,menuItemTabIndex:E},children:S.jsx(xu,{...C,opened:L,onChange:ne,defaultOpened:o,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:G,unstyled:v,variant:b,keepMounted:T,children:n})})}Ll.extend=e=>e;Ll.classes=PA;Ll.displayName="@mantine/core/Menu";Ll.Item=cJ;Ll.Label=fJ;Ll.Dropdown=lJ;Ll.Target=mEe;Ll.Divider=uJ;const[fKe,OA]=Au("Modal component was not found in tree");var E1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const dKe={},mB=At((e,t)=>{const n=Je("ModalBody",dKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=OA();return S.jsx(Twe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});mB.classes=E1;mB.displayName="@mantine/core/ModalBody";const hKe={},gB=At((e,t)=>{const n=Je("ModalCloseButton",hKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=OA();return S.jsx(Cwe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});gB.classes=E1;gB.displayName="@mantine/core/ModalCloseButton";const pKe={},yB=At((e,t)=>{const n=Je("ModalContent",pKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=OA(),d=f.scrollAreaComponent||kWe;return S.jsx(Awe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:S.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${Ke(f.yOffset)} * 2))`},children:u})})});yB.classes=E1;yB.displayName="@mantine/core/ModalContent";const mKe={},vB=At((e,t)=>{const n=Je("ModalHeader",mKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=OA();return S.jsx(Iwe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});vB.classes=E1;vB.displayName="@mantine/core/ModalHeader";const gKe={},bB=At((e,t)=>{const n=Je("ModalOverlay",gKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=OA();return S.jsx(kwe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});bB.classes=E1;bB.displayName="@mantine/core/ModalOverlay";const yKe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ff("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},vKe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ci(t),"--modal-size":Kn(n,"modal-size"),"--modal-y-offset":Ke(r),"--modal-x-offset":Ke(i)}}),xB=At((e,t)=>{const n=Je("ModalRoot",yKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,v=Zt({name:m,classes:E1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vKe});return S.jsx(fKe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:d},children:S.jsx(Swe,{ref:t,...v("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});xB.classes=E1;xB.displayName="@mantine/core/ModalRoot";const[bKe,xKe]=fx();function gEe({children:e}){const[t,n]=P.useState([]),[r,i]=P.useState(ff("modal"));return S.jsx(bKe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}gEe.displayName="@mantine/core/ModalStack";const _Ke={},_B=At((e,t)=>{const n=Je("ModalTitle",_Ke,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=OA();return S.jsx(Rwe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});_B.classes=E1;_B.displayName="@mantine/core/ModalTitle";const wKe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ff("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Vs=At((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=Je("Modal",wKe,e),h=xKe(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return P.useEffect(()=>{h&&c&&(l?h.addModal(c,f||ff("modal")):h.removeModal(c))},[l,c,f]),S.jsxs(xB,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&S.jsx(bB,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),S.jsxs(yB,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&S.jsxs(vB,{children:[n&&S.jsx(_B,{children:n}),s&&S.jsx(gB,{...o})]}),S.jsx(mB,{children:a})]})]})});Vs.classes=E1;Vs.displayName="@mantine/core/Modal";Vs.Root=xB;Vs.Overlay=bB;Vs.Content=yB;Vs.Body=mB;Vs.Header=vB;Vs.Title=_B;Vs.CloseButton=gB;Vs.Stack=gEe;const[EKe,dJ]=fx(),[SKe,TKe]=fx();var wB={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const CKe={},AKe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Kn(t):Kn(n,"pg-gap")}}),hJ=At((e,t)=>{const n=Je("PillGroup",CKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=dJ(),h=(d==null?void 0:d.size)||l||void 0,p=Zt({name:"PillGroup",classes:wB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AKe,stylesCtx:{size:h},rootSelector:"group"});return S.jsx(SKe,{value:{size:h,disabled:c},children:S.jsx(je,{ref:t,size:h,...p("group"),...f})})});hJ.classes=wB;hJ.displayName="@mantine/core/PillGroup";const IKe={variant:"default"},kKe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Kn(n,"pill-fz"),"--pill-height":Kn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ci(t)}}),xN=At((e,t)=>{const n=Je("Pill",IKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:v,...b}=n,w=TKe(),E=dJ(),T=m||(w==null?void 0:w.size)||void 0,C=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",I=Zt({name:"Pill",classes:wB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kKe,stylesCtx:{size:T}});return S.jsxs(je,{component:"span",ref:t,variant:C,size:T,...I("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},v],...b,children:[S.jsx("span",{...I("label"),children:c}),f&&S.jsx(gx,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...I("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:R=>{var N;R.preventDefault(),R.stopPropagation(),(N=h==null?void 0:h.onMouseDown)==null||N.call(h,R)},onClick:R=>{var N;R.stopPropagation(),d==null||d(),(N=h==null?void 0:h.onClick)==null||N.call(h,R)}})]})});xN.classes=wB;xN.displayName="@mantine/core/Pill";xN.Group=hJ;var yEe={field:"m_45c4369d"};const RKe={type:"visible"},pJ=At((e,t)=>{const n=Je("PillsInputField",RKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=dJ(),g=kA(),v=Zt({name:"PillsInputField",classes:yEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return S.jsx(je,{component:"input",ref:Po(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...v("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});pJ.classes=yEe;pJ.displayName="@mantine/core/PillsInputField";const DKe={},K$=At((e,t)=>{const n=Je("PillsInput",DKe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=P.useRef(null);return S.jsx(EKe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:S.jsx(_h,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});K$.displayName="@mantine/core/PillsInput";K$.Field=pJ;function NKe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(gC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const PKe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},mJ=At((e,t)=>{const n=Je("MultiSelect",PKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:T,comboboxProps:C,filter:I,limit:R,withScrollArea:N,maxDropdownHeight:O,searchValue:L,defaultSearchValue:j,onSearchChange:F,readOnly:H,disabled:Q,onFocus:J,onBlur:ne,onPaste:Z,radius:ie,rightSection:q,rightSectionWidth:U,rightSectionPointerEvents:G,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Se,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:De,description:tt,label:it,error:Me,maxValues:Ge,searchable:at,nothingFoundMessage:yt,withCheckIcon:St,checkIconPosition:Ot,hidePickedOptions:qe,withErrorStyles:dt,name:wt,form:ke,id:Oe,clearable:ht,clearButtonProps:Lt,hiddenInputProps:Ft,placeholder:dn,hiddenInputValuesDivider:Nn,required:Sr,mod:Ni,renderOption:Un,onRemove:tr,onClear:Ai,scrollAreaProps:Tr,...Lo}=n,Ji=gl(Oe),Pi=jwe(m),Zi=$Q(Pi),Qr=YQ({opened:g,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),Qr.resetSelectedOption()}}),{styleProps:$o,rest:{type:oc,autoComplete:ba,...Ru}}=DE(Lo),[Jr,ji]=Yo({value:c,defaultValue:f,finalValue:[],onChange:d}),[ai,Ws]=Yo({value:L,defaultValue:j,finalValue:"",onChange:F}),Fr=Zt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:es,resolvedStyles:Fo}=kE({props:n,styles:o,classNames:r}),mo=Pr=>{h==null||h(Pr),Pr.key===" "&&!at&&(Pr.preventDefault(),Qr.toggleDropdown()),Pr.key==="Backspace"&&ai.length===0&&Jr.length>0&&(tr==null||tr(Jr[Jr.length-1]),ji(Jr.slice(0,Jr.length-1)))},Qo=Jr.map((Pr,ac)=>{var ms,Ka;return S.jsx(xN,{withRemoveButton:!H&&!((ms=Zi[Pr])!=null&&ms.disabled),onRemove:()=>{ji(Jr.filter(Jo=>Pr!==Jo)),tr==null||tr(Pr)},unstyled:a,disabled:Q,...Fr("pill"),children:((Ka=Zi[Pr])==null?void 0:Ka.label)||Pr},`${Pr}-${ac}`)});P.useEffect(()=>{E&&Qr.selectFirstOption()},[E,Jr]);const xl=S.jsx(Wr.ClearButton,{...Lt,onClear:()=>{Ai==null||Ai(),ji([]),Ws("")}}),Ph=NKe({data:Pi,value:Jr});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Qr,classNames:es,styles:Fo,unstyled:a,size:l,readOnly:H,__staticSelector:"MultiSelect",onOptionSubmit:Pr=>{T==null||T(Pr),Ws(""),Qr.updateSelectedOptionIndex("selected"),Jr.includes(Zi[Pr].value)?(ji(Jr.filter(ac=>ac!==Zi[Pr].value)),tr==null||tr(Zi[Pr].value)):Jr.length<Ge&&ji([...Jr,Zi[Pr].value])},...C,children:[S.jsx(Wr.DropdownTarget,{children:S.jsx(K$,{...$o,__staticSelector:"MultiSelect",classNames:es,styles:Fo,unstyled:a,size:l,className:i,style:s,variant:p,disabled:Q,radius:ie,__defaultRightSection:S.jsx(Wr.Chevron,{size:l,error:Me,unstyled:a}),__clearSection:xl,__clearable:ht&&Jr.length>0&&!Q&&!H,rightSection:q,rightSectionPointerEvents:G||(xl?"all":"none"),rightSectionWidth:U,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Se,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:De,description:tt,label:it,error:Me,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:G||(xl?"all":"none"),multiline:!0},pointer:!at,onClick:()=>at?Qr.openDropdown():Qr.toggleDropdown(),"data-expanded":Qr.dropdownOpened||void 0,id:Ji,required:Sr,mod:Ni,children:S.jsxs(xN.Group,{disabled:Q,unstyled:a,...Fr("pillsList"),children:[Qo,S.jsx(Wr.EventsTarget,{autoComplete:ba,children:S.jsx(K$.Field,{...Ru,ref:t,id:Ji,placeholder:dn,type:!at&&!dn?"hidden":"visible",...Fr("inputField"),unstyled:a,onFocus:Pr=>{J==null||J(Pr),at&&Qr.openDropdown()},onBlur:Pr=>{ne==null||ne(Pr),Qr.closeDropdown(),Ws("")},onKeyDown:mo,value:ai,onChange:Pr=>{Ws(Pr.currentTarget.value),at&&Qr.openDropdown(),E&&Qr.selectFirstOption()},disabled:Q,readOnly:H||!at,pointer:!at})})]})})}),S.jsx(iEe,{data:qe?Ph:Pi,hidden:H||Q,filter:I,search:ai,limit:R,hiddenWhenEmpty:!yt,withScrollArea:N,maxDropdownHeight:O,filterOptions:at,value:Jr,checkIconPosition:Ot,withCheckIcon:St,nothingFoundMessage:yt,unstyled:a,labelId:it?`${Ji}-label`:void 0,"aria-label":it?void 0:Lo["aria-label"],renderOption:Un,scrollAreaProps:Tr})]}),S.jsx(Wr.HiddenInput,{name:wt,valuesDivider:Nn,value:Jr,form:ke,disabled:Q,...Ft})]})});mJ.classes={..._h.classes,...Wr.classes};mJ.displayName="@mantine/core/MultiSelect";var vEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const OKe={},MKe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Go(r)}}},EB=Xo((e,t)=>{const n=Je("NavLink",OKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:T,childrenOffset:C,onKeyDown:I,autoContrast:R,mod:N,...O}=n,L=Zt({name:"NavLink",props:n,classes:vEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MKe}),[j,F]=Yo({value:l,defaultValue:c,finalValue:!1,onChange:f}),H=!!d,Q=J=>{h==null||h(J),H&&(J.preventDefault(),F(!j))};return S.jsxs(S.Fragment,{children:[S.jsxs(ud,{...L("root"),component:"a",ref:t,onClick:Q,onKeyDown:J=>{I==null||I(J),J.nativeEvent.code==="Space"&&H&&(J.preventDefault(),F(!j))},unstyled:a,mod:[{disabled:m,active:p,expanded:j},N],...O,children:[g&&S.jsx(je,{component:"span",...L("section"),mod:{position:"left"},children:g}),S.jsxs(je,{...L("body"),mod:{"no-wrap":T},children:[S.jsx(je,{component:"span",...L("label"),children:b}),S.jsx(je,{component:"span",mod:{active:p},...L("description"),children:w})]}),(H||v)&&S.jsx(je,{...L("section"),component:"span",mod:{rotate:j&&!E,position:"right"},children:H?v||S.jsx(dB,{...L("chevron")}):v})]}),H&&S.jsx(rB,{in:j,...L("collapse"),children:S.jsx("div",{...L("children"),children:d})})]})});EB.classes=vEe;EB.displayName="@mantine/core/NavLink";var bEe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const LKe={withCloseButton:!0},$Ke=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ci(t),"--notification-color":n?qi(n,e):void 0}}),gJ=At((e,t)=>{const n=Je("Notification",LKe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:v,variant:b,vars:w,mod:E,...T}=n,C=Zt({name:"Notification",classes:bEe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:v,vars:w,varsResolver:$Ke});return S.jsxs(je,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,...T,role:"alert",children:[c&&!o&&S.jsx("div",{...C("icon"),children:c}),o&&S.jsx(df,{size:28,color:i,...C("loader")}),S.jsxs("div",{...C("body"),children:[l&&S.jsx("div",{...C("title"),children:l}),S.jsx(je,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&S.jsx(gx,{iconSize:16,color:"gray",...h,unstyled:v,onClick:d,...C("closeButton")})]})});gJ.classes=bEe;gJ.displayName="@mantine/core/Notification";function xEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var _N;(function(e){e.event="event",e.props="prop"})(_N||(_N={}));function qv(){}function FKe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function wN(e){return!!(e||"").match(/\d/)}function L2(e){return e==null}function BKe(e){return typeof e=="number"&&isNaN(e)}function _Ee(e){return L2(e)||BKe(e)||typeof e=="number"&&!isFinite(e)}function wEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function jKe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function UKe(e,t,n){var r=jKe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function zKe(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function yJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function VKe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function EEe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function $le(e,t){return Array(t+1).join(e)}function SEe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+$le("0",Math.abs(o))+i:o>=a?i=i+$le("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Fle(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=yJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,v){return m.length>v?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=EEe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function ow(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var TEe=FKe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),HKe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function qKe(e,t,n){return Math.min(Math.max(e,t),n)}function mz(e){return Math.max(e.selectionStart,e.selectionEnd)}function WKe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function GKe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function YKe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function KKe(e,t,n,r,i,s,o){o===void 0&&(o=YKe);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var v=r;v<l&&(d[v]===-1||!s(n[v]));)v++;var b=v===l||d[v]===-1?c:d[v];for(v=r-1;v>0&&d[v]===-1;)v--;var w=v===-1||d[v]===-1?0:d[v]+1;return w>b?b:r-w<b-r?w:b}function Ble(e,t,n,r){var i=e.length;if(t=qKe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function XKe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(wN(e[n])||wN(e[n-1]));return t}function CEe(e,t,n,r,i,s){s===void 0&&(s=qv);var o=zKe(function(p,m){var g,v;return _Ee(p)?(v="",g=""):typeof p=="number"||m?(v=typeof p=="number"?SEe(p):p,g=r(v)):(v=i(p,void 0),g=r(v)),{formattedValue:g,numAsString:v}}),a=P.useState(function(){return o(L2(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;L2(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function QKe(e){return e.replace(/[^0-9]/g,"")}function JKe(e){return e}function ZKe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=JKe);var a=e.removeFormatting;a===void 0&&(a=QKe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=qv);var h=e.onKeyDown;h===void 0&&(h=qv);var p=e.onMouseUp;p===void 0&&(p=qv);var m=e.onFocus;m===void 0&&(m=qv);var g=e.onBlur;g===void 0&&(g=qv);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=XKe);var w=e.isValidInputCharacter;w===void 0&&(w=wN);var E=e.isCharacterSame,T=xEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=CEe(v,u,!!l,o,a,c),I=C[0],R=I.formattedValue,N=I.numAsString,O=C[1],L=P.useRef(),j=P.useRef({formattedValue:R,numAsString:N}),F=function(Me,Ge){j.current={formattedValue:Me.formattedValue,numAsString:Me.value},O(Me,Ge)},H=P.useState(!1),Q=H[0],J=H[1],ne=P.useRef(null),Z=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return J(!0),function(){clearTimeout(Z.current.setCaretTimeout),clearTimeout(Z.current.focusTimeout)}},[]);var ie=o,q=function(Me,Ge){var at=parseFloat(Ge);return{formattedValue:Me,value:Ge,floatValue:isNaN(at)?void 0:at}},U=function(Me,Ge,at){Me.selectionStart===0&&Me.selectionEnd===Me.value.length||(ow(Me,Ge),Z.current.setCaretTimeout=setTimeout(function(){Me.value===at&&Me.selectionStart!==Ge&&ow(Me,Ge)},0))},G=function(Me,Ge,at){return Ble(Me,Ge,b(Me),at)},V=function(Me,Ge,at){var yt=b(Ge),St=KKe(Ge,R,Me,at,yt,w,E);return St=Ble(Ge,St,yt),St},Y=function(Me){var Ge=Me.formattedValue;Ge===void 0&&(Ge="");var at=Me.input,yt=Me.source,St=Me.event,Ot=Me.numAsString,qe;if(at){var dt=Me.inputValue||at.value,wt=mz(at);at.value=Ge,qe=V(dt,Ge,wt),qe!==void 0&&U(at,qe,Ge)}Ge!==R&&F(q(Ge,Ot),{event:St,source:yt})};P.useEffect(function(){var Me=j.current,Ge=Me.formattedValue,at=Me.numAsString;(R!==Ge||N!==at)&&F(q(R,N),{event:void 0,source:_N.props})},[R,N]);var ee=ne.current?mz(ne.current):void 0,ae=typeof window<"u"?P.useLayoutEffect:P.useEffect;ae(function(){var Me=ne.current;if(R!==j.current.formattedValue&&Me){var Ge=V(j.current.formattedValue,R,ee);Me.value=R,U(Me,Ge,R)}},[R]);var _e=function(Me,Ge,at){var yt=Ge.target,St=L.current?HKe(L.current,yt.selectionEnd):TEe(R,Me),Ot=Object.assign(Object.assign({},St),{lastValue:R}),qe=a(Me,Ot),dt=ie(qe);if(qe=a(dt,void 0),f&&!f(q(dt,qe))){var wt=Ge.target,ke=mz(wt),Oe=V(Me,R,ke);return wt.value=R,U(wt,Oe,R),!1}return Y({formattedValue:dt,numAsString:qe,inputValue:Me,event:Ge,source:at,input:Ge.target}),!0},pe=function(Me,Ge){Ge===void 0&&(Ge=0);var at=Me.selectionStart,yt=Me.selectionEnd;L.current={selectionStart:at,selectionEnd:yt+Ge}},Se=function(Me){var Ge=Me.target,at=Ge.value,yt=_e(at,Me,_N.event);yt&&d(Me),L.current=void 0},Le=function(Me){var Ge=Me.target,at=Me.key,yt=Ge.selectionStart,St=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe;at==="ArrowLeft"||at==="Backspace"?qe=Math.max(yt-1,0):at==="ArrowRight"?qe=Math.min(yt+1,Ot.length):at==="Delete"&&(qe=yt);var dt=0;at==="Delete"&&yt===St&&(dt=1);var wt=at==="ArrowLeft"||at==="ArrowRight";if(qe===void 0||yt!==St&&!wt){h(Me),pe(Ge,dt);return}var ke=qe;if(wt){var Oe=at==="ArrowLeft"?"left":"right";ke=G(Ot,qe,Oe),ke!==qe&&Me.preventDefault()}else at==="Delete"&&!w(Ot[qe])?ke=G(Ot,qe,"right"):at==="Backspace"&&!w(Ot[qe])&&(ke=G(Ot,qe,"left"));ke!==qe&&U(Ge,ke,Ot),h(Me),pe(Ge,dt)},ye=function(Me){var Ge=Me.target,at=function(){var yt=Ge.selectionStart,St=Ge.selectionEnd,Ot=Ge.value;if(Ot===void 0&&(Ot=""),yt===St){var qe=G(Ot,yt);qe!==yt&&U(Ge,qe,Ot)}};at(),requestAnimationFrame(function(){at()}),p(Me),pe(Ge)},he=function(Me){Me.persist&&Me.persist();var Ge=Me.target,at=Me.currentTarget;ne.current=Ge,Z.current.focusTimeout=setTimeout(function(){var yt=Ge.selectionStart,St=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe=G(Ot,yt);qe!==yt&&!(yt===0&&St===Ot.length)&&U(Ge,qe,Ot),m(Object.assign(Object.assign({},Me),{currentTarget:at}))},0)},$e=function(Me){ne.current=null,clearTimeout(Z.current.focusTimeout),clearTimeout(Z.current.setCaretTimeout),g(Me)},De=Q&&WKe()?"numeric":void 0,tt=Object.assign({inputMode:De},T,{type:t,value:R,onChange:Se,onKeyDown:Le,onMouseUp:ye,onFocus:he,onBlur:$e});if(n==="text")return i?fi.createElement(fi.Fragment,null,i(R,T)||null):fi.createElement("span",Object.assign({},T,{ref:s}),R);if(r){var it=r;return fi.createElement(it,Object.assign({},tt,{ref:s}))}return fi.createElement("input",Object.assign({},tt,{ref:s}))}function jle(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=SB(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=yJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=EEe(p,n,!!r)),l&&(h=UKe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function SB(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function eXe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function tXe(e,t){return new RegExp("(^-)|[0-9]|"+wEe(e),"g")}function nXe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function rXe(e,t,n){var r;t===void 0&&(t=GKe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=SB(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(wN(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var v=function(ne,Z,ie){var q=!1,U=!1;s.startsWith("-")?q=!1:ne.startsWith("--")?(q=!1,U=!0):o.startsWith("-")&&ne.length===o.length?q=!1:ne[0]==="-"&&(q=!0);var G=q?1:0;return U&&(G=2),G&&(ne=ne.substring(G),Z-=G,ie-=G),{value:ne,start:Z,end:ie,hasNegation:q}},b=v(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=v(t.lastValue,u.start,u.end),T=E.start,C=E.end,I=E.value,R=e.substring(c,f);e.length&&I.length&&(T>I.length-o.length||C<s.length)&&!(R&&o.startsWith(R))&&(e=I);var N=0;e.startsWith(s)?N+=s.length:c<s.length&&(N=c),e=e.substring(N),f-=N;var O=e.length,L=e.length-o.length;e.endsWith(o)?O=L:(f>L||f>e.length-o.length)&&(O=f),e=e.substring(0,O),e=eXe(w?"-"+e:e,i),e=(e.match(tXe(p))||[]).join("");var j=e.indexOf(p);e=e.replace(new RegExp(wEe(p),"g"),function(ne,Z){return Z===j?".":""});var F=yJ(e,i),H=F.beforeDecimal,Q=F.afterDecimal,J=F.addNegation;return l.end-l.start<u.end-u.start&&H===""&&m&&!parseFloat(Q)&&(e=J?"-":""),e}function iXe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function sXe(e){var t=SB(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function oXe(e){e=sXe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=qv);var s=e.onBlur;s===void 0&&(s=qv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=xEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=SB(e),g=m.decimalSeparator,v=m.allowedDecimalSeparators,b=function(J){return jle(J,e)},w=function(J,ne){return rXe(J,ne,e)},E=L2(f)?c:f,T=d??nXe(E,l,t);L2(f)?L2(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var C=function(J){return _Ee(J)?J:(typeof J=="number"&&(J=SEe(J)),T&&typeof a=="number"?Fle(J,a,!!u):J)},I=CEe(C(f),C(c),!!T,b,w,h),R=I[0],N=R.numAsString,O=R.formattedValue,L=I[1],j=function(J){var ne=J.target,Z=J.key,ie=ne.selectionStart,q=ne.selectionEnd,U=ne.value;if(U===void 0&&(U=""),(Z==="Backspace"||Z==="Delete")&&q<l.length){J.preventDefault();return}if(ie!==q){i(J);return}Z==="Backspace"&&U[0]==="-"&&ie===l.length+1&&n&&ow(ne,1),a&&u&&(Z==="Backspace"&&U[ie-1]===g?(ow(ne,ie-1),J.preventDefault()):Z==="Delete"&&U[ie]===g&&J.preventDefault()),v!=null&&v.includes(Z)&&U[ie]===g&&ow(ne,ie+1);var G=o===!0?",":o;Z==="Backspace"&&U[ie-1]===G&&ow(ne,ie-1),Z==="Delete"&&U[ie]===G&&ow(ne,ie+1),i(J)},F=function(J){var ne=N;if(ne.match(/\d/g)||(ne=""),r||(ne=VKe(ne)),u&&a&&(ne=Fle(ne,a,u)),ne!==N){var Z=jle(ne,e);L({formattedValue:Z,value:ne,floatValue:parseFloat(ne)},{event:J,source:_N.event})}s(J)},H=function(J){return J===g?!0:wN(J)},Q=function(J){var ne=J.currentValue,Z=J.lastValue,ie=J.formattedValue,q=J.currentValueIndex,U=J.formattedValueIndex,G=ne[q],V=ie[U],Y=TEe(Z,ne),ee=Y.to,ae=function(_e){return w(_e).indexOf(".")+l.length};return f===0&&u&&a&&ne[ee.start]===g&&ae(ne)<q&&ae(ie)>U?!1:q>=ee.start&&q<ee.end&&v&&v.includes(G)&&V===g?!0:G===V};return Object.assign(Object.assign({},p),{value:O,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:Q,onValueChange:L,format:b,removeFormatting:w,getCaretBoundary:function(J){return iXe(J,e)},onKeyDown:j,onBlur:F})}function aXe(e){var t=oXe(e);return fi.createElement(ZKe,Object.assign({},t))}function Ule({direction:e,style:t,...n}){return S.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var fW={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const uXe=/^(0\.0*|-0(\.0*)?)$/,lXe=/^-?0\d+(\.\d+)?\.?$/;function dW(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function gz(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||dW(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function cXe(e){return e.toString().replace(".","").length}function fXe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&cXe(t)<14&&t!==""}function zle(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const dXe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},hXe=(e,{size:t})=>({controls:{"--ni-chevron-size":Kn(t,"ni-chevron-size")}}),vJ=At((e,t)=>{const n=Je("NumberInput",dXe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:T,onKeyDown:C,onKeyDownCapture:I,handlersRef:R,startValue:N,disabled:O,rightSectionPointerEvents:L,allowNegative:j,readOnly:F,size:H,rightSectionWidth:Q,stepHoldInterval:J,stepHoldDelay:ne,allowLeadingZeros:Z,withKeyboardEvents:ie,trimLeadingZeroesOnBlur:q,...U}=n,G=Zt({name:"NumberInput",classes:fW,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:hXe}),{resolvedClassNames:V,resolvedStyles:Y}=kE({classNames:i,styles:s,props:n}),[ee,ae]=Yo({value:c,defaultValue:f,finalValue:"",onChange:u}),_e=ne!==void 0&&J!==void 0,pe=P.useRef(null),Se=P.useRef(null),Le=P.useRef(0),ye=(qe,dt)=>{dt.source==="event"&&ae(fXe(qe.floatValue,qe.value)&&!uXe.test(qe.value)&&!(Z&&lXe.test(qe.value))?qe.floatValue:qe.value),l==null||l(qe,dt)},he=qe=>{const dt=String(qe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},$e=qe=>{pe.current&&typeof qe<"u"&&pe.current.setSelectionRange(qe,qe)},De=P.useRef(Xq);De.current=()=>{if(!gz(ee))return;let qe;const dt=he(ee),wt=he(p),ke=Math.max(dt,wt),Oe=10**ke;if(!dW(ee)&&(typeof ee!="number"||Number.isNaN(ee)))qe=t0(N,h,d);else if(d!==void 0){const Lt=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;qe=Lt<=d?Lt:d}else qe=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;const ht=qe.toFixed(ke);ae(parseFloat(ht)),l==null||l({floatValue:parseFloat(ht),formattedValue:ht,value:ht},{source:"increment"}),setTimeout(()=>{var Lt;return $e((Lt=pe.current)==null?void 0:Lt.value.length)},0)};const tt=P.useRef(Xq);tt.current=()=>{if(!gz(ee))return;let qe;const dt=h!==void 0?h:j?Number.MIN_SAFE_INTEGER:0,wt=he(ee),ke=he(p),Oe=Math.max(wt,ke),ht=10**Oe;if(!dW(ee)&&typeof ee!="number"||Number.isNaN(ee))qe=t0(N,dt,d);else{const Ft=(Math.round(Number(ee)*ht)-Math.round(p*ht))/ht;qe=dt!==void 0&&Ft<dt?dt:Ft}const Lt=qe.toFixed(Oe);ae(parseFloat(Lt)),l==null||l({floatValue:parseFloat(Lt),formattedValue:Lt,value:Lt},{source:"decrement"}),setTimeout(()=>{var Ft;return $e((Ft=pe.current)==null?void 0:Ft.value.length)},0)};const it=qe=>{C==null||C(qe),!(F||!ie)&&(qe.key==="ArrowUp"&&(qe.preventDefault(),De.current()),qe.key==="ArrowDown"&&(qe.preventDefault(),tt.current()))},Me=qe=>{if(I==null||I(qe),qe.key==="Backspace"){const dt=pe.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(qe.preventDefault(),window.setTimeout(()=>$e(0),0))}};V$(R,{increment:De.current,decrement:tt.current});const Ge=qe=>{qe?De.current():tt.current(),Le.current+=1},at=qe=>{if(Ge(qe),_e){const dt=typeof J=="number"?J:J(Le.current);Se.current=window.setTimeout(()=>at(qe),dt)}},yt=(qe,dt)=>{var wt;qe.preventDefault(),(wt=pe.current)==null||wt.focus(),Ge(dt),_e&&(Se.current=window.setTimeout(()=>at(dt),ne))},St=()=>{Se.current&&window.clearTimeout(Se.current),Se.current=null,Le.current=0},Ot=S.jsxs("div",{...G("controls"),children:[S.jsx(ud,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof ee=="number"&&d!==void 0&&ee>=d,mod:{direction:"up"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!0)},onPointerUp:St,onPointerLeave:St,children:S.jsx(Ule,{direction:"up"})}),S.jsx(ud,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof ee=="number"&&h!==void 0&&ee<=h,mod:{direction:"down"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!1)},onPointerUp:St,onPointerLeave:St,children:S.jsx(Ule,{direction:"down"})})]});return S.jsx(_h,{component:aXe,allowNegative:j,className:co(fW.root,r),size:H,...U,readOnly:F,disabled:O,value:ee,getInputRef:Po(t,pe),onValueChange:ye,rightSection:m||F||!gz(ee)?g:g||Ot,classNames:V,styles:Y,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:it,onKeyDownCapture:Me,rightSectionPointerEvents:L??(O?"none":void 0),rightSectionWidth:Q??`var(--ni-right-section-width-${H||"sm"})`,allowLeadingZeros:Z,onBlur:qe=>{if(w==null||w(qe),b==="blur"&&typeof ee=="number"&&t0(ee,h,d)!==ee&&ae(t0(ee,h,d)),q&&typeof ee=="string"&&he(ee)<15){const dt=ee.replace(/^0+/,""),wt=parseFloat(dt);ae(Number.isNaN(wt)||wt>Number.MAX_SAFE_INTEGER?dt:t0(wt,h,d))}},isAllowed:qe=>b==="strict"?v?v(qe)&&zle(qe.floatValue,h,d):zle(qe.floatValue,h,d):v?v(qe):!0})});vJ.classes={..._h.classes,...fW};vJ.displayName="@mantine/core/NumberInput";const[pXe,AEe]=Au("Progress.Root component was not found in tree");var KP={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const mXe={},bJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ProgressLabel",mXe,e),u=AEe();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});bJ.classes=KP;bJ.displayName="@mantine/core/ProgressLabel";const gXe={},yXe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Kn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ci(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),TB=At((e,t)=>{const n=Je("ProgressRoot",gXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Zt({name:"Progress",classes:KP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yXe});return S.jsx(pXe,{value:{getStyles:d,autoContrast:l},children:S.jsx(je,{ref:t,...d("root"),...f})})});TB.classes=KP;TB.displayName="@mantine/core/ProgressRoot";const vXe={withAria:!0},CB=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Je("ProgressSection",vXe,e),p=AEe(),m=Oo(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return S.jsx(je,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":qi(l,m),"--progress-label-color":EA(p.autoContrast,m)?hx({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});CB.classes=KP;CB.displayName="@mantine/core/ProgressSection";const bXe={},MA=At((e,t)=>{const n=Je("Progress",bXe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=kE({classNames:i,styles:s,props:n});return S.jsx(TB,{ref:t,classNames:d,styles:h,vars:o,...f,children:S.jsx(CB,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});MA.classes=KP;MA.displayName="@mantine/core/Progress";MA.Section=CB;MA.Root=TB;MA.Label=bJ;const[xXe,IEe]=fx(),[_Xe,wXe]=fx();var kEe={card:"m_9dc8ae12"};const EXe={withBorder:!0},SXe=(e,{radius:t})=>({card:{"--card-radius":Ci(t)}}),xJ=At((e,t)=>{const n=Je("RadioCard",EXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,v=Zt({name:"RadioCard",classes:kEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SXe,rootSelector:"card"}),{dir:b}=x1(),w=IEe(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,T=p||(w==null?void 0:w.name),C=I=>{if(m==null||m(I),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(I.nativeEvent.code)){I.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),N=R.findIndex(j=>j===I.target),O=N+1>=R.length?0:N+1,L=N-1<0?R.length-1:N-1;I.nativeEvent.code==="ArrowDown"&&(R[O].focus(),R[O].click()),I.nativeEvent.code==="ArrowUp"&&(R[L].focus(),R[L].click()),I.nativeEvent.code==="ArrowLeft"&&(R[b==="ltr"?L:O].focus(),R[b==="ltr"?L:O].click()),I.nativeEvent.code==="ArrowRight"&&(R[b==="ltr"?O:L].focus(),R[b==="ltr"?O:L].click())}};return S.jsx(_Xe,{value:{checked:E},children:S.jsx(ud,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"radio","aria-checked":E,name:T,onClick:I=>{h==null||h(I),w==null||w.onChange(d||"")},onKeyDown:C})})});xJ.displayName="@mantine/core/RadioCard";xJ.classes=kEe;const TXe={},_J=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Je("RadioGroup",TXe,e),f=gl(u),[d,h]=Yo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return S.jsx(xXe,{value:{value:d,onChange:p,size:s,name:f},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:S.jsx(XQ,{role:"radiogroup",children:a})})})});_J.classes=Ki.Wrapper.classes;_J.displayName="@mantine/core/RadioGroup";function REe({size:e,style:t,...n}){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ke(e),height:Ke(e),...t},"aria-hidden":!0,...n,children:S.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var DEe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const CXe={icon:REe},AXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ig({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Kn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ci(t),"--radio-color":s==="outline"?u:qi(n,e),"--radio-icon-size":Kn(r,"radio-icon-size"),"--radio-icon-color":i?qi(i,e):EA(o,e)?hx({color:n,theme:e,autoContrast:o}):void 0}}},wJ=At((e,t)=>{const n=Je("RadioIndicator",CXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:v,...b}=n,w=l,E=Zt({name:"RadioIndicator",classes:DEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AXe,rootSelector:"indicator"}),T=wXe(),C=typeof p=="boolean"?p:(T==null?void 0:T.checked)||!1;return S.jsx(je,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:v},m],...b,children:S.jsx(w,{...E("icon")})})});wJ.displayName="@mantine/core/RadioIndicator";wJ.classes=DEe;var NEe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const IXe={labelPosition:"right"},kXe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ig({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Kn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ci(n),"--radio-color":s==="outline"?u:qi(r,e),"--radio-icon-color":i?qi(i,e):EA(o,e)?hx({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Kn(t,"radio-icon-size")}}},_0=At((e,t)=>{const n=Je("Radio",IXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:v,disabled:b,wrapperProps:w,icon:E=REe,rootRef:T,iconColor:C,onChange:I,mod:R,...N}=n,O=Zt({name:"Radio",classes:NEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kXe}),L=IEe(),j=(L==null?void 0:L.size)??c,F=n.size?c:j,{styleProps:H,rest:Q}=DE(N),J=gl(l),ne=L?{checked:L.value===Q.value,name:Q.name??L.name,onChange:Z=>{L.onChange(Z),I==null||I(Z)}}:{};return S.jsx(hB,{...O("root"),__staticSelector:"Radio",__stylesApiProps:n,id:J,size:F,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":ne.checked||void 0,variant:v,ref:T,mod:R,...H,...w,children:S.jsxs(je,{...O("inner"),mod:{"label-position":d},children:[S.jsx(je,{...O("radio",{focusable:!0,variant:v}),onChange:I,...Q,...ne,component:"input",mod:{error:!!p},ref:t,id:J,disabled:b,type:"radio"}),S.jsx(E,{...O("icon"),"aria-hidden":!0})]})})});_0.classes=NEe;_0.displayName="@mantine/core/Radio";_0.Group=_J;_0.Card=xJ;_0.Indicator=wJ;const RXe={duration:100,transition:"fade"};function DXe(e,t){return{...RXe,...t,...e}}function NXe({offset:e,position:t,defaultOpened:n}){const[r,i]=P.useState(n),s=P.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=vQ({placement:t,middleware:[pQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=P.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return P.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Oy(l.floating.current);return g.forEach(v=>{v.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var AB={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const PXe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:ff("popover")},OXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ci(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),EJ=At((e,t)=>{const n=Je("TooltipFloating",PXe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:T,portalProps:C,...I}=n,R=Oo(),N=Zt({name:"TooltipFloating",props:n,classes:AB,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:OXe}),{handleMouseMove:O,x:L,y:j,opened:F,boundaryRef:H,floating:Q,setOpened:J}=NXe({offset:p,position:m,defaultOpened:w});if(!cx(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ne=Po(H,eB(r),t),Z=r.props,ie=U=>{var G;(G=Z.onMouseEnter)==null||G.call(Z,U),O(U),J(!0)},q=U=>{var G;(G=Z.onMouseLeave)==null||G.call(Z,U),J(!1)};return S.jsxs(S.Fragment,{children:[S.jsx(px,{...C,withinPortal:s,children:S.jsx(je,{...I,...N("tooltip",{style:{...ZX(o,R),zIndex:v,display:!b&&F?"block":"none",top:(j&&Math.round(j))??"",left:(L&&Math.round(L))??""}}),variant:E,ref:Q,mod:{multiline:g},children:h})}),P.cloneElement(r,{...Z,[i]:ne,onMouseEnter:ie,onMouseLeave:q})]})});EJ.classes=AB;EJ.displayName="@mantine/core/TooltipFloating";const PEe=P.createContext(!1),MXe=PEe.Provider,LXe=()=>P.useContext(PEe),$Xe={openDelay:0,closeDelay:0};function SJ(e){const{openDelay:t,closeDelay:n,children:r}=Je("TooltipGroup",$Xe,e);return S.jsx(MXe,{value:!0,children:S.jsx(Fqe,{delay:{open:t,close:n},children:r})})}SJ.displayName="@mantine/core/TooltipGroup";SJ.extend=e=>e;function FXe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function BXe(e){const t=FXe(e.middlewares),n=[rwe(e.offset)];return t.shift&&n.push(pQ(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?Y$():Y$(t.flip)),n.push(iwe({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?PD():PD(t.inline)):e.inline&&n.push(PD()),n}function jXe(e){var C,I,R;const[t,n]=P.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=LXe(),o=gl(),{delay:a,currentId:u,setCurrentId:l}=uwe(),c=P.useCallback(N=>{n(N),N&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:v,y:b}={}}}=vQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:BXe(e)});Bqe(h,{id:o});const{getReferenceProps:w,getFloatingProps:E}=Wqe([$qe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((I=e.events)!=null&&I.touch)}),qqe(h,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),Yqe(h,{role:"tooltip"}),Vqe(h,{enabled:typeof e.opened>"u"})]);gwe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),M0(()=>{var N;(N=e.onPositionChange)==null||N.call(e,g)},[g]);const T=i&&u&&u!==o;return{x:f,y:d,arrowX:v,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:T,opened:i,placement:g}}const Vle={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:ff("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},UXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ci(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ss=At((e,t)=>{const n=Je("Tooltip",Vle,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:v,style:b,className:w,withArrow:E,arrowSize:T,arrowOffset:C,arrowRadius:I,arrowPosition:R,offset:N,transitionProps:O,multiline:L,events:j,zIndex:F,disabled:H,positionDependencies:Q,onClick:J,onMouseEnter:ne,onMouseLeave:Z,inline:ie,variant:q,keepMounted:U,vars:G,portalProps:V,mod:Y,floatingStrategy:ee,middlewares:ae,..._e}=Je("Tooltip",Vle,n),{dir:pe}=x1(),Se=P.useRef(null),Le=jXe({position:lwe(pe,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:j,arrowRef:Se,arrowOffset:C,offset:typeof N=="number"?N+(E?T/2:0):N,positionDependencies:[...Q,r],inline:ie,strategy:ee,middlewares:ae}),ye=Zt({name:"Tooltip",props:n,classes:AB,className:w,style:b,classNames:m,styles:g,unstyled:v,rootSelector:"tooltip",vars:G,varsResolver:UXe});if(!cx(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const he=Po(Le.reference,eB(r),t),$e=DXe(O,{duration:100,transition:"fade"}),De=r.props;return S.jsxs(S.Fragment,{children:[S.jsx(px,{...V,withinPortal:d,children:S.jsx(sg,{...$e,keepMounted:U,mounted:!H&&!!Le.opened,duration:Le.isGroupPhase?10:$e.duration,children:tt=>S.jsxs(je,{..._e,"data-fixed":ee==="fixed"||void 0,variant:q,mod:[{multiline:L},Y],...Le.getFloatingProps({ref:Le.floating,className:ye("tooltip").className,style:{...ye("tooltip").style,...tt,zIndex:F,top:Le.y??0,left:Le.x??0}}),children:[o,S.jsx(bQ,{ref:Se,arrowX:Le.arrowX,arrowY:Le.arrowY,visible:E,position:Le.placement,arrowSize:T,arrowOffset:C,arrowRadius:I,arrowPosition:R,...ye("arrow")})]})})}),P.cloneElement(r,Le.getReferenceProps({onClick:J,onMouseEnter:ne,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:he,className:co(w,De.className),...De}))]})});ss.classes=AB;ss.displayName="@mantine/core/Tooltip";ss.Floating=EJ;ss.Group=SJ;var OEe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const zXe={withItemsBorders:!0},VXe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ci(t),"--sc-color":n?qi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Kn(i,"sc-padding"),"--sc-font-size":za(i)}}),IB=At((e,t)=>{var ae,_e;const n=Je("SegmentedControl",zXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:v,orientation:b,radius:w,color:E,transitionDuration:T,transitionTimingFunction:C,variant:I,autoContrast:R,withItemsBorders:N,mod:O,...L}=n,j=Zt({name:"SegmentedControl",props:n,classes:OEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VXe}),F=Oo(),H=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),Q=Wze(),[J,ne]=P.useState(null),[Z,ie]=P.useState({}),q=(pe,Se)=>{Z[Se]=pe,ie(Z)},[U,G]=Yo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ae=H.find(pe=>!pe.disabled))==null?void 0:ae.value)??((_e=l[0])==null?void 0:_e.value)??null:null,onChange:d}),V=gl(p),Y=H.map(pe=>P.createElement(je,{...j("control"),mod:{active:U===pe.value,orientation:b},key:pe.value},P.createElement("input",{...j("input"),disabled:m||pe.disabled,type:"radio",name:V,value:pe.value,id:`${V}-${pe.value}`,checked:U===pe.value,onChange:()=>!g&&G(pe.value),"data-focus-ring":F.focusRing,key:`${pe.value}-input`}),P.createElement(je,{component:"label",...j("label"),mod:{active:U===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${V}-${pe.value}`,ref:Se=>q(Se,pe.value),__vars:{"--sc-label-color":E!==void 0?hx({color:E,theme:F,autoContrast:R}):void 0},key:`${pe.value}-label`},S.jsx("span",{...j("innerLabel"),children:pe.label})))),ee=Po(t,pe=>ne(pe));return l.length===0?null:S.jsxs(je,{...j("root"),variant:I,size:h,ref:ee,mod:[{"full-width":v,orientation:b,initialized:Q,"with-items-borders":N},O],...L,role:"radiogroup","data-disabled":m,children:[typeof U=="string"&&S.jsx(TQ,{target:Z[U],parent:J,component:"span",transitionDuration:"var(--sc-transition-duration)",...j("indicator")}),Y]})});IB.classes=OEe;IB.displayName="@mantine/core/SegmentedControl";const HXe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ME=At((e,t)=>{const n=Je("Select",HXe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:T,disabled:C,filter:I,limit:R,withScrollArea:N,maxDropdownHeight:O,size:L,searchable:j,rightSection:F,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,name:ne,form:Z,searchValue:ie,defaultSearchValue:q,onSearchChange:U,allowDeselect:G,error:V,rightSectionPointerEvents:Y,id:ee,clearable:ae,clearButtonProps:_e,hiddenInputProps:pe,renderOption:Se,onClear:Le,autoComplete:ye,scrollAreaProps:he,__defaultRightSection:$e,__clearSection:De,__clearable:tt,...it}=n,Me=P.useMemo(()=>jwe(m),[m]),Ge=P.useMemo(()=>$Q(Me),[Me]),at=gl(ee),[yt,St,Ot]=Yo({value:g,defaultValue:v,finalValue:null,onChange:p}),qe=typeof yt=="string"?Ge[yt]:void 0,dt=Hze(qe),[wt,ke]=Yo({value:ie,defaultValue:q,finalValue:qe?qe.label:"",onChange:U}),Oe=YQ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Oe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Oe.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:Lt}=kE({props:n,styles:i,classNames:r});P.useEffect(()=>{b&&Oe.selectFirstOption()},[b,yt]),P.useEffect(()=>{g===null&&ke(""),typeof g=="string"&&qe&&((dt==null?void 0:dt.value)!==qe.value||(dt==null?void 0:dt.label)!==qe.label)&&ke(qe.label)},[g,qe]);const Ft=S.jsx(Wr.ClearButton,{..._e,onClear:()=>{St(null,null),ke(""),Le==null||Le()}});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Oe,__staticSelector:"Select",classNames:ht,styles:Lt,unstyled:s,readOnly:T,onOptionSubmit:dn=>{w==null||w(dn);const Nn=G&&Ge[dn].value===yt?null:Ge[dn],Sr=Nn?Nn.value:null;Sr!==yt&&St(Sr,Nn),!Ot&&ke(typeof Sr=="string"&&(Nn==null?void 0:Nn.label)||""),Oe.closeDropdown()},size:L,...E,children:[S.jsx(Wr.Target,{targetType:j?"input":"button",autoComplete:ye,children:S.jsx(_h,{id:at,ref:t,__defaultRightSection:S.jsx(Wr.Chevron,{size:L,error:V,unstyled:s}),__clearSection:Ft,__clearable:ae&&!!yt&&!C&&!T,rightSection:F,rightSectionPointerEvents:Y||(Ft?"all":"none"),...it,size:L,__staticSelector:"Select",disabled:C,readOnly:T||!j,value:wt,onChange:dn=>{ke(dn.currentTarget.value),Oe.openDropdown(),b&&Oe.selectFirstOption()},onFocus:dn=>{j&&Oe.openDropdown(),f==null||f(dn)},onBlur:dn=>{var Nn;j&&Oe.closeDropdown(),ke(yt!=null&&((Nn=Ge[yt])==null?void 0:Nn.label)||""),d==null||d(dn)},onClick:dn=>{j?Oe.openDropdown():Oe.toggleDropdown(),h==null||h(dn)},classNames:ht,styles:Lt,unstyled:s,pointer:!j,error:V})}),S.jsx(iEe,{data:Me,hidden:T||C,filter:I,search:wt,limit:R,hiddenWhenEmpty:!J,withScrollArea:N,maxDropdownHeight:O,filterOptions:j&&(qe==null?void 0:qe.label)!==wt,value:yt,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,unstyled:s,labelId:it.label?`${at}-label`:void 0,"aria-label":it.label?void 0:it["aria-label"],renderOption:Se,scrollAreaProps:he})]}),S.jsx(Wr.HiddenInput,{value:yt,name:ne,form:Z,disabled:C,...pe})]})});ME.classes={..._h.classes,...Wr.classes};ME.displayName="@mantine/core/Select";function qXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Oo(),s=t===void 0?e:t,o=lx({"--sg-spacing-x":Go(Sp(e)),"--sg-spacing-y":Go(Sp(s)),"--sg-cols":(c=Sp(n))==null?void 0:c.toString()}),a=as(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Go(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Go(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=yN(as(a),i.breakpoints).filter(f=>as(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return S.jsx(RE,{styles:o,media:l,selector:r})}function yz(e){return typeof e=="object"&&e!==null?as(e):[]}function WXe(e){return e.sort((t,n)=>gN(t)-gN(n))}function GXe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...yz(e),...yz(t),...yz(n)]));return WXe(r)}function YXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=lx({"--sg-spacing-x":Go(Sp(e)),"--sg-spacing-y":Go(Sp(i)),"--sg-cols":(l=Sp(n))==null?void 0:l.toString()}),o=GXe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Go(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Go(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return S.jsx(RE,{styles:s,container:u,selector:r})}var MEe={container:"m_925c2d2c",root:"m_2415a157"};const KXe={cols:1,spacing:"md",type:"media"},TJ=At((e,t)=>{const n=Je("SimpleGrid",KXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Zt({name:"SimpleGrid",classes:MEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=zP();return d==="container"?S.jsxs(S.Fragment,{children:[S.jsx(YXe,{...n,selector:`.${m}`}),S.jsx("div",{...p("container"),children:S.jsx(je,{ref:t,...p("root",{className:m}),...h})})]}):S.jsxs(S.Fragment,{children:[S.jsx(qXe,{...n,selector:`.${m}`}),S.jsx(je,{ref:t,...p("root",{className:m}),...h})]})});TJ.classes=MEe;TJ.displayName="@mantine/core/SimpleGrid";const[LEe,kB]=Au("SliderProvider was not found in tree"),CJ=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=kB();return S.jsx(je,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});CJ.displayName="@mantine/core/SliderRoot";const X$=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},v)=>{const{getStyles:b}=kB(),[w,E]=P.useState(!1),T=l||s||w||h&&p;return S.jsxs(je,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:C=>{E(!0),typeof f=="function"&&f(C)},onBlur:C=>{E(!1),typeof d=="function"&&d(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,S.jsx(sg,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:C=>S.jsx("div",{...b("label",{style:C}),children:i})})]})});X$.displayName="@mantine/core/SliderThumb";function Q$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function XXe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function $Ee({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=kB();if(!e)return null;const u=e.map((l,c)=>P.createElement(je,{...a("markWrapper"),__vars:{"--mark-offset":`${Q$({value:l.value,min:t,max:n})}%`},key:c},S.jsx(je,{...a("mark"),mod:{filled:XXe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&S.jsx("div",{...a("markLabel"),children:l.label})));return S.jsx("div",{children:u})}$Ee.displayName="@mantine/core/SliderMarks";function AJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=kB();return S.jsx(je,{...u("trackContainer"),mod:{disabled:r},...o,children:S.jsxs(je,{...u("track"),mod:{inverted:s,disabled:r},children:[S.jsx(je,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,S.jsx($Ee,{...a,offset:i,disabled:r,inverted:s})]})})}AJ.displayName="@mantine/core/SliderTrack";function hW({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Kd(e,t){return parseFloat(e.toFixed(t))}function FEe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function yw(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function vw(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function pW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function mW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var RB={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const QXe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},JXe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?qi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ci(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),DB=At((e,t)=>{const n=Je("Slider",QXe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:T,disabled:C,unstyled:I,scale:R,inverted:N,className:O,style:L,vars:j,hiddenInputProps:F,restrictToMarks:H,thumbProps:Q,...J}=n,ne=Zt({name:"Slider",props:n,classes:RB,classNames:r,className:O,styles:i,style:L,vars:j,varsResolver:JXe,unstyled:I}),{dir:Z}=x1(),[ie,q]=P.useState(!1),[U,G]=Yo({value:typeof s=="number"?t0(s,l,c):s,defaultValue:typeof h=="number"?t0(h,l,c):h,finalValue:t0(0,l,c),onChange:o}),V=P.useRef(U),Y=P.useRef(null),ee=P.useRef(null),ae=Q$({value:U,min:l,max:c}),_e=R(U),pe=typeof g=="function"?g(_e):g,Se=d??FEe(f),Le=P.useCallback(({x:De})=>{if(!C){const tt=hW({value:De,min:l,max:c,step:f,precision:Se});G(H&&(m!=null&&m.length)?Jq(tt,m.map(it=>it.value)):tt),V.current=tt}},[C,l,c,f,Se,G,m,H]),{ref:ye,active:he}=g_e(Le,{onScrubEnd:()=>a==null?void 0:a(H&&(m!=null&&m.length)?Jq(V.current,m.map(De=>De.value)):V.current)},Z),$e=De=>{var tt,it,Me,Ge,at,yt;if(!C)switch(De.key){case"ArrowUp":{if(De.preventDefault(),(tt=ee.current)==null||tt.focus(),H&&m){const Ot=yw(U,m);G(Ot),a==null||a(Ot);break}const St=Kd(Math.min(Math.max(U+f,l),c),Se);G(St),a==null||a(St);break}case"ArrowRight":{if(De.preventDefault(),(it=ee.current)==null||it.focus(),H&&m){const Ot=Z==="rtl"?vw(U,m):yw(U,m);G(Ot),a==null||a(Ot);break}const St=Kd(Math.min(Math.max(Z==="rtl"?U-f:U+f,l),c),Se);G(St),a==null||a(St);break}case"ArrowDown":{if(De.preventDefault(),(Me=ee.current)==null||Me.focus(),H&&m){const Ot=vw(U,m);G(Ot),a==null||a(Ot);break}const St=Kd(Math.min(Math.max(U-f,l),c),Se);G(St),a==null||a(St);break}case"ArrowLeft":{if(De.preventDefault(),(Ge=ee.current)==null||Ge.focus(),H&&m){const Ot=Z==="rtl"?yw(U,m):vw(U,m);G(Ot),a==null||a(Ot);break}const St=Kd(Math.min(Math.max(Z==="rtl"?U+f:U-f,l),c),Se);G(St),a==null||a(St);break}case"Home":{if(De.preventDefault(),(at=ee.current)==null||at.focus(),H&&m){G(pW(m)),a==null||a(pW(m));break}G(l),a==null||a(l);break}case"End":{if(De.preventDefault(),(yt=ee.current)==null||yt.focus(),H&&m){G(mW(m)),a==null||a(mW(m));break}G(c),a==null||a(c);break}}};return S.jsx(LEe,{value:{getStyles:ne},children:S.jsxs(CJ,{...J,ref:Po(t,Y),onKeyDownCapture:$e,onMouseDownCapture:()=>{var De;return(De=Y.current)==null?void 0:De.focus()},size:u,disabled:C,children:[S.jsx(AJ,{inverted:N,offset:0,filled:ae,marks:m,min:l,max:c,value:_e,disabled:C,containerProps:{ref:ye,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:S.jsx(X$,{max:c,min:l,value:_e,position:ae,dragging:he,label:pe,ref:ee,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:ie,disabled:C,...Q,children:T})}),S.jsx("input",{type:"hidden",name:p,value:_e,...F})]})})});DB.classes=RB;DB.displayName="@mantine/core/Slider";function ZXe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const eQe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?qi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ci(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),tQe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},yC=At((e,t)=>{const n=Je("RangeSlider",tQe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:v,label:b,labelTransitionProps:w,labelAlwaysOn:E,thumbFromLabel:T,thumbToLabel:C,showLabelOnHover:I,thumbChildren:R,disabled:N,unstyled:O,scale:L,inverted:j,className:F,style:H,vars:Q,hiddenInputProps:J,restrictToMarks:ne,thumbProps:Z,...ie}=n,q=Zt({name:"Slider",props:n,classes:RB,classNames:r,className:F,styles:i,style:H,vars:Q,varsResolver:eQe,unstyled:O}),{dir:U}=x1(),[G,V]=P.useState(-1),[Y,ee]=P.useState(!1),[ae,_e]=Yo({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),pe=P.useRef(ae),Se=P.useRef([]),Le=P.useRef(void 0),ye=[Q$({value:ae[0],min:l,max:c}),Q$({value:ae[1],min:l,max:c})],he=p??FEe(h),$e=dt=>{_e(dt),pe.current=dt};P.useEffect(()=>{Array.isArray(s)&&(pe.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const De=(dt,wt,ke)=>{if(wt===-1)return;const Oe=[...pe.current];if(ne&&v){const ht=Jq(dt,v.map(Sr=>Sr.value)),Lt=Oe[wt];Oe[wt]=ht;const Ft=wt===0?1:0,dn=mW(v),Nn=pW(v);ht===dn&&Oe[Ft]===dn||ht===Nn&&Oe[Ft]===Nn?Oe[wt]=Lt:ht===Oe[Ft]&&(Lt>Oe[Ft]?Oe[Ft]=vw(ht,v):Oe[Ft]=yw(ht,v))}else Oe[wt]=dt,wt===0&&(dt>Oe[1]-(f-1e-9)&&(Oe[1]=Math.min(dt+f,c)),dt>(c-(f-1e-9)||l)&&(Oe[wt]=pe.current[wt]),Oe[1]-dt>d&&(Oe[1]=dt+d)),wt===1&&(dt<Oe[0]+f&&(Oe[0]=Math.max(dt-f,l)),dt<Oe[0]+f&&(Oe[wt]=pe.current[wt]),dt-Oe[0]>d&&(Oe[0]=dt-d));if(Oe[0]=Kd(Oe[0],he),Oe[1]=Kd(Oe[1],he),Oe[0]>Oe[1]){const ht=Oe[0];Oe[0]=Oe[1],Oe[1]=ht}$e(Oe),ke&&(a==null||a(pe.current))},tt=dt=>{if(!N){const wt=hW({value:dt,min:l,max:c,step:h,precision:he});De(wt,Le.current,!1)}},{ref:it,active:Me}=g_e(({x:dt})=>tt(dt),{onScrubEnd:()=>a==null?void 0:a(pe.current)},U);function Ge(dt){Le.current=dt}const at=dt=>{it.current.focus();const wt=it.current.getBoundingClientRect(),ke=ZXe(dt.nativeEvent),Oe=hW({value:ke-wt.left,max:c,min:l,step:h,containerWidth:wt.width}),ht=Math.abs(ae[0]-Oe)>Math.abs(ae[1]-Oe)?1:0,Lt=U==="ltr"?ht:ht===1?0:1;Le.current=Lt},yt=()=>G!==1&&G!==0?(V(0),0):G,St=dt=>{if(!N)switch(dt.key){case"ArrowUp":{dt.preventDefault();const wt=yt();Se.current[wt].focus();const ke=ne&&v?yw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]+h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowRight":{dt.preventDefault();const wt=yt();Se.current[wt].focus();const ke=ne&&v?(U==="rtl"?vw:yw)(pe.current[wt],v):Math.min(Math.max(U==="rtl"?pe.current[wt]-h:pe.current[wt]+h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowDown":{dt.preventDefault();const wt=yt();Se.current[wt].focus();const ke=ne&&v?vw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]-h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowLeft":{dt.preventDefault();const wt=yt();Se.current[wt].focus();const ke=ne&&v?(U==="rtl"?yw:vw)(pe.current[wt],v):Math.min(Math.max(U==="rtl"?pe.current[wt]+h:pe.current[wt]-h,l),c);De(Kd(ke,he),wt,!0);break}}},Ot={max:c,min:l,size:u,labelTransitionProps:w,labelAlwaysOn:E,onBlur:()=>V(-1)},qe=Array.isArray(R);return S.jsx(LEe,{value:{getStyles:q},children:S.jsxs(CJ,{...ie,size:u,ref:t,disabled:N,children:[S.jsxs(AJ,{offset:ye[0],marksOffset:ae[0],filled:ye[1]-ye[0],marks:v,inverted:j,min:l,max:c,value:ae[1],disabled:N,containerProps:{ref:it,onMouseEnter:I?()=>ee(!0):void 0,onMouseLeave:I?()=>ee(!1):void 0,onTouchStartCapture:at,onTouchEndCapture:()=>{Le.current=-1},onMouseDownCapture:at,onMouseUpCapture:()=>{Le.current=-1},onKeyDownCapture:St},children:[S.jsx(X$,{...Ot,value:L(ae[0]),position:ye[0],dragging:Me,label:typeof b=="function"?b(Kd(L(ae[0]),he)):b,ref:dt=>{Se.current[0]=dt},thumbLabel:T,onMouseDown:()=>Ge(0),onFocus:()=>V(0),showLabelOnHover:I,isHovered:Y,disabled:N,...Z==null?void 0:Z(0),children:qe?R[0]:R}),S.jsx(X$,{...Ot,thumbLabel:C,value:L(ae[1]),position:ye[1],dragging:Me,label:typeof b=="function"?b(Kd(L(ae[1]),he)):b,ref:dt=>{Se.current[1]=dt},onMouseDown:()=>Ge(1),onFocus:()=>V(1),showLabelOnHover:I,isHovered:Y,disabled:N,...Z==null?void 0:Z(1),children:qe?R[1]:R})]}),S.jsx("input",{type:"hidden",name:`${g}_from`,value:ae[0],...J}),S.jsx("input",{type:"hidden",name:`${g}_to`,value:ae[1],...J})]})})});yC.classes=RB;yC.displayName="@mantine/core/RangeSlider";const nQe={},rd=At((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Je("Space",nQe,e);return S.jsx(je,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});rd.displayName="@mantine/core/Space";var BEe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const rQe={maxHeight:100,initialState:!1},iQe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),IJ=At((e,t)=>{const n=Je("Spoiler",rQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:v,onExpandedChange:b,...w}=n,E=Zt({name:"Spoiler",classes:BEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iQe}),T=gl(g),C=`${T}-region`,[I,R]=Yo({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:N,height:O}=Fze(),L=I?f:d,j=L!==null&&c<O;return S.jsxs(je,{...E("root"),id:T,ref:t,"data-has-spoiler":j||void 0,...w,children:[j&&S.jsx(PE,{component:"button",type:"button",ref:p,onClick:()=>R(!I),"aria-expanded":I,"aria-controls":C,...E("control"),children:L}),S.jsx("div",{...E("content",{style:{maxHeight:I?O?Ke(O):void 0:Ke(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:S.jsx("div",{ref:N,children:h})})]})});IJ.classes=BEe;IJ.displayName="@mantine/core/Spoiler";var jEe={root:"m_6d731127"};const sQe={gap:"md",align:"stretch",justify:"flex-start"},oQe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Go(t),"--stack-align":n,"--stack-justify":r}}),uo=At((e,t)=>{const n=Je("Stack",sQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Zt({name:"Stack",props:n,classes:jEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oQe});return S.jsx(je,{ref:t,...p("root"),variant:d,...h})});uo.classes=jEe;uo.displayName="@mantine/core/Stack";const UEe=P.createContext(null),aQe=UEe.Provider,uQe=()=>P.useContext(UEe),lQe={},kJ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("SwitchGroup",lQe,e),[c,f]=Yo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(aQe,{value:{value:c,onChange:d,size:s},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:S.jsx(XQ,{role:"group",children:a})})})});kJ.classes=Ki.Wrapper.classes;kJ.displayName="@mantine/core/SwitchGroup";var zEe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const cQe={labelPosition:"right"},fQe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ci(t),"--switch-height":Kn(r,"switch-height"),"--switch-width":Kn(r,"switch-width"),"--switch-thumb-size":Kn(r,"switch-thumb-size"),"--switch-label-font-size":Kn(r,"switch-label-font-size"),"--switch-track-label-padding":Kn(r,"switch-track-label-padding"),"--switch-color":n?qi(n,e):void 0}}),Lw=At((e,t)=>{const n=Je("Switch",cQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:C,error:I,disabled:R,variant:N,rootRef:O,mod:L,...j}=n,F=uQe(),H=p||(F==null?void 0:F.size),Q=Zt({name:"Switch",props:n,classes:zEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fQe}),{styleProps:J,rest:ne}=DE(j),Z=gl(h),ie=F?{checked:F.value.includes(ne.value),onChange:F.onChange}:{},[q,U]=Yo({value:ie.checked??b,defaultValue:w,finalValue:!1});return S.jsxs(hB,{...Q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Z,size:H,labelPosition:T,label:c,description:C,error:I,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ie.checked||b||void 0,variant:N,ref:O,mod:L,...J,...g,children:[S.jsx("input",{...ne,disabled:R,checked:q,"data-checked":ie.checked||b||void 0,onChange:G=>{var V;F?(V=ie.onChange)==null||V.call(ie,G):E==null||E(G),U(G.currentTarget.checked)},id:Z,ref:t,type:"checkbox",role:"switch",...Q("input")}),S.jsxs(je,{"aria-hidden":"true",mod:{error:I,"label-position":T,"without-labels":!d&&!f},...Q("track"),children:[S.jsx(je,{component:"span",mod:"reduce-motion",...Q("thumb"),children:v}),S.jsx("span",{...Q("trackLabel"),children:q?d:f})]})]})});Lw.classes={...zEe,...Gwe};Lw.displayName="@mantine/core/Switch";Lw.Group=kJ;const[dQe,hQe]=Au("Table component was not found in the tree");var XP={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function pQe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function LE(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=At((i,s)=>{const o=Je(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=hQe();return S.jsx(je,{component:e,ref:s,...pQe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=XP,r}const gW=LE("th",{columnBorder:!0}),VEe=LE("td",{columnBorder:!0}),eL=LE("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),HEe=LE("thead",{stickyHeader:!0}),qEe=LE("tbody"),WEe=LE("tfoot"),GEe=LE("caption",{captionSide:!0});function RJ({data:e}){return S.jsxs(S.Fragment,{children:[e.caption&&S.jsx(GEe,{children:e.caption}),e.head&&S.jsx(HEe,{children:S.jsx(eL,{children:e.head.map((t,n)=>S.jsx(gW,{children:t},n))})}),e.body&&S.jsx(qEe,{children:e.body.map((t,n)=>S.jsx(eL,{children:t.map((r,i)=>S.jsx(VEe,{children:r},i))},n))}),e.foot&&S.jsx(WEe,{children:S.jsx(eL,{children:e.foot.map((t,n)=>S.jsx(gW,{children:t},n))})})]})}RJ.displayName="@mantine/core/TableDataRenderer";const mQe={type:"scrollarea"},gQe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ke(t),"--table-overflow":n==="native"?"auto":void 0}}),DJ=At((e,t)=>{const n=Je("TableScrollContainer",mQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Zt({name:"TableScrollContainer",classes:XP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gQe,rootSelector:"scrollContainer"});return S.jsx(je,{component:f==="scrollarea"?Ky:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:S.jsx("div",{...h("scrollContainerInner"),children:l})})});DJ.classes=XP;DJ.displayName="@mantine/core/TableScrollContainer";const yQe={withRowBorders:!0,verticalSpacing:7},vQe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Go(r),"--table-vertical-spacing":Go(i),"--table-border-color":s?qi(s,e):void 0,"--table-striped-color":u&&o?qi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?qi(a,e):void 0,"--table-sticky-header-offset":f?Ke(c):void 0}}),En=At((e,t)=>{const n=Je("Table",yQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:T,data:C,children:I,stickyHeader:R,stickyHeaderOffset:N,mod:O,tabularNums:L,...j}=n,F=Zt({name:"Table",props:n,className:i,style:s,classes:XP,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:vQe});return S.jsx(dQe,{value:{getStyles:F,stickyHeader:R,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:v,captionSide:f||"bottom"},children:S.jsx(je,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":L},O],...F("table"),...j,children:I||!!C&&S.jsx(RJ,{data:C})})})});En.classes=XP;En.displayName="@mantine/core/Table";En.Td=VEe;En.Th=gW;En.Tr=eL;En.Thead=HEe;En.Tbody=qEe;En.Tfoot=WEe;En.Caption=GEe;En.ScrollContainer=DJ;En.DataRenderer=RJ;const[bQe,NJ]=Au("Tabs component was not found in the tree");var QP={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const xQe={},PJ=At((e,t)=>{const n=Je("TabsList",xQe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=NJ();return S.jsx(je,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});PJ.classes=QP;PJ.displayName="@mantine/core/TabsList";const _Qe={},OJ=At((e,t)=>{const n=Je("TabsPanel",_Qe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=NJ(),h=d.value===s,p=d.keepMounted||c||h?r:null;return S.jsx(je,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});OJ.classes=QP;OJ.displayName="@mantine/core/TabsPanel";const wQe={},MJ=At((e,t)=>{const n=Je("TabsTab",wQe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,tabIndex:v,...b}=n,w=Oo(),{dir:E}=x1(),T=NJ(),C=a===T.value,I=N=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(N)},R={classNames:h,styles:p,props:n};return S.jsxs(ud,{...b,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...R}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:C,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},g],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":C,tabIndex:v||C||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:I,__vars:{"--tabs-color":f?qi(f,w):void 0},onKeyDown:HX({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"left",children:o}),i&&S.jsx("span",{...T.getStyles("tabLabel",R),children:i}),s&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"right",children:s})]})});MJ.classes=QP;MJ.displayName="@mantine/core/TabsTab";const Hle="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",EQe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},SQe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ci(t),"--tabs-color":qi(n,e),"--tabs-text-color":EA(r,e)?hx({color:n,theme:e,autoContrast:r}):void 0}}),Vr=At((e,t)=>{const n=Je("Tabs",EQe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:v,classNames:b,styles:w,unstyled:E,className:T,style:C,vars:I,autoContrast:R,mod:N,...O}=n,L=gl(l),[j,F]=Yo({value:i,defaultValue:r,finalValue:null,onChange:s}),H=Zt({name:"Tabs",props:n,classes:QP,className:T,style:C,classNames:b,styles:w,unstyled:E,vars:I,varsResolver:SQe});return S.jsx(bQe,{value:{placement:g,value:j,orientation:o,id:L,loop:u,activateTabWithKeyboard:c,getTabId:U$(`${L}-tab`,Hle),getPanelId:U$(`${L}-panel`,Hle),onChange:F,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:v,unstyled:E,getStyles:H},children:S.jsx(je,{ref:t,id:L,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},N],...H("root"),...O,children:a})})});Vr.classes=QP;Vr.displayName="@mantine/core/Tabs";Vr.Tab=MJ;Vr.Panel=OJ;Vr.List=PJ;const TQe={},Sy=At((e,t)=>{const n=Je("TextInput",TQe,e);return S.jsx(_h,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Sy.classes=_h.classes;Sy.displayName="@mantine/core/TextInput";const CQe=["h1","h2","h3","h4","h5","h6"],AQe=["xs","sm","md","lg","xl"];function IQe(e,t){const n=t!==void 0?t:`h${e}`;return CQe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:AQe.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Ke(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var YEe={root:"m_8a5d1357"};const kQe={order:1},RQe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=IQe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},oo=At((e,t)=>{const n=Je("Title",kQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Zt({name:"Title",props:n,classes:YEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RQe});return[1,2,3,4,5,6].includes(u)?S.jsx(je,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});oo.classes=YEe;oo.displayName="@mantine/core/Title";function DQe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function NQe(e){return P.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function PQe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const OQe=()=>DQe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),$E=OQe(),MQe=(e=$E)=>NQe(e);function LA(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=PQe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function LQe(e,t=$E){const n=e.id||O2();return LA(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function KEe(e,t=$E){return LA(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function $Qe(e,t=$E){return LA(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function FQe(e=$E){LA(e,()=>[])}function BQe(e=$E){LA(e,t=>t.slice(0,e.getState().limit))}const FE={show:LQe,hide:KEe,update:$Qe,clean:FQe,cleanQueue:BQe,updateState:LA};function yW(){return yW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yW.apply(null,arguments)}function XEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function vW(e,t){return vW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},vW(e,t)}function QEe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,vW(e,t)}var vz={exports:{}},bz,qle;function jQe(){if(qle)return bz;qle=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bz=e,bz}var xz,Wle;function UQe(){if(Wle)return xz;Wle=1;var e=jQe();function t(){}function n(){}return n.resetWarningCache=t,xz=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},xz}var Gle;function zQe(){return Gle||(Gle=1,vz.exports=UQe()()),vz.exports}var VQe=zQe();const Yle=vh(VQe),Kle={disabled:!1},J$=fi.createContext(null);var HQe=function(t){return t.scrollTop},HR="unmounted",W_="exited",G_="entering",s2="entered",bW="exiting",S1=function(e){QEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=W_,s.appearStatus=G_):u=s2:r.unmountOnExit||r.mountOnEnter?u=HR:u=W_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===HR?{status:W_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==G_&&o!==s2&&(s=G_):(o===G_||o===s2)&&(s=bW)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===G_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:VR.findDOMNode(this);o&&HQe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===W_&&this.setState({status:HR})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[VR.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Kle.disabled){this.safeSetState({status:s2},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:G_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:s2},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:VR.findDOMNode(this);if(!s||Kle.disabled){this.safeSetState({status:W_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:bW},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:W_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:VR.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===HR)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=XEe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return fi.createElement(J$.Provider,{value:null},typeof o=="function"?o(i,a):fi.cloneElement(fi.Children.only(o),a))},t}(fi.Component);S1.contextType=J$;S1.propTypes={};function NT(){}S1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:NT,onEntering:NT,onEntered:NT,onExit:NT,onExiting:NT,onExited:NT};S1.UNMOUNTED=HR;S1.EXITED=W_;S1.ENTERING=G_;S1.ENTERED=s2;S1.EXITING=bW;function qQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LJ(e,t){var n=function(s){return t&&P.isValidElement(s)?t(s):s},r=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function WQe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function bw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function GQe(e,t){return LJ(e.children,function(n){return P.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:bw(n,"appear",e),enter:bw(n,"enter",e),exit:bw(n,"exit",e)})})}function YQe(e,t,n){var r=LJ(e.children),i=WQe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=P.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:bw(o,"exit",e),enter:bw(o,"enter",e)}):!u&&a&&!c?i[s]=P.cloneElement(o,{in:!1}):u&&a&&P.isValidElement(l)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:bw(o,"exit",e),enter:bw(o,"enter",e)}))}}),i}var KQe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},XQe={component:"div",childFactory:function(t){return t}},Lv=function(e){QEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(qQe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?GQe(i,a):YQe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=LJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=yW({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=XEe(i,["component","childFactory"]),u=this.state.contextValue,l=KQe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?fi.createElement(J$.Provider,{value:u},l):fi.createElement(J$.Provider,{value:u},fi.createElement(s,a,l))},t}(fi.Component);Lv.propTypes={};Lv.defaultProps=XQe;const JEe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function QQe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),JEe.reduce((n,r)=>(n[r]=[],n),{}))}const Xle={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},JQe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function ZQe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Xle[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:JQe[o]},l={opacity:0,maxHeight:0,transform:Xle[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function eJe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const ZEe=P.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=eJe(n,e.autoClose),l=P.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return P.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),P.useEffect(()=>(d(),c),[u]),S.jsx(gJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});ZEe.displayName="@mantine/notifications/NotificationContainer";var eSe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const tJe=S1,nJe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:ff("overlay"),store:$E,withinPortal:!0},rJe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ke(n)}}),T1=At((e,t)=>{const n=Je("Notifications",nJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:v,withinPortal:b,...w}=n,E=Oo(),T=MQe(g),C=Oze(),I=Z8(),R=P.useRef({}),N=P.useRef(0),L=(E.respectReducedMotion?I:!1)?1:f,j=Zt({name:"Notifications",classes:eSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rJe});P.useEffect(()=>{g==null||g.updateState(Q=>({...Q,limit:p||5,defaultPosition:l}))},[p,l]),M0(()=>{T.notifications.length>N.current&&setTimeout(()=>C(),0),N.current=T.notifications.length},[T.notifications]);const F=QQe(T.notifications,l),H=JEe.reduce((Q,J)=>(Q[J]=F[J].map(({style:ne,...Z})=>S.jsx(tJe,{timeout:L,onEnter:()=>R.current[Z.id].offsetHeight,nodeRef:{current:R.current[Z.id]},children:ie=>S.jsx(ZEe,{ref:q=>{R.current[Z.id]=q},data:Z,onHide:q=>KEe(q,g),autoClose:c,...j("notification",{style:{...ZQe({state:ie,position:J,transitionDuration:L,maxHeight:h}),...ne}})})},Z.id)),Q),{});return S.jsxs(px,{withinPortal:b,...v,children:[S.jsx(je,{...j("root"),"data-position":"top-center",ref:t,...w,children:S.jsx(Lv,{children:H["top-center"]})}),S.jsx(je,{...j("root"),"data-position":"top-left",...w,children:S.jsx(Lv,{children:H["top-left"]})}),S.jsx(je,{...j("root",{className:cC.classNames.fullWidth}),"data-position":"top-right",...w,children:S.jsx(Lv,{children:H["top-right"]})}),S.jsx(je,{...j("root",{className:cC.classNames.fullWidth}),"data-position":"bottom-right",...w,children:S.jsx(Lv,{children:H["bottom-right"]})}),S.jsx(je,{...j("root"),"data-position":"bottom-left",...w,children:S.jsx(Lv,{children:H["bottom-left"]})}),S.jsx(je,{...j("root"),"data-position":"bottom-center",...w,children:S.jsx(Lv,{children:H["bottom-center"]})})]})});T1.classes=eSe;T1.displayName="@mantine/notifications/Notifications";T1.show=FE.show;T1.hide=FE.hide;T1.update=FE.update;T1.clean=FE.clean;T1.cleanQueue=FE.cleanQueue;T1.updateState=FE.updateState;const tSe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ho=()=>P.useContext(tSe);function iJe({children:e}){const[t,n]=P.useState(void 0),r=P.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return S.jsx(tSe.Provider,{value:r,children:e})}var Kk={},Qle;function sJe(){if(Qle)return Kk;Qle=1,Object.defineProperty(Kk,"__esModule",{value:!0}),Kk.parse=o,Kk.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let v=0;do{const b=d.indexOf("=",v);if(b===-1)break;const w=d.indexOf(";",v),E=w===-1?m:w;if(b>E){v=d.lastIndexOf(";",b-1)+1;continue}const T=a(d,v,b),C=u(d,b,T),I=d.slice(T,C);if(p[I]===void 0){let R=a(d,b+1,E),N=u(d,E,R);const O=g(d.slice(R,N));p[I]=O}v=E+1}while(v<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let v=d+"="+g;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return Kk}sJe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jle="popstate";function oJe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return xW("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:EN(i)}return uJe(t,n,null,e)}function Ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aJe(){return Math.random().toString(36).substring(2,10)}function Zle(e,t){return{usr:e.state,key:e.key,idx:t}}function xW(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$A(t):t,state:n,key:t&&t.key||r||aJe()}}function EN({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function $A(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function uJe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let g=c(),v=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:v})}function d(g,v){a="PUSH";let b=xW(m.location,g,v);l=c()+1;let w=Zle(b,l),E=m.createHref(b);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,v){a="REPLACE";let b=xW(m.location,g,v);l=c();let w=Zle(b,l),E=m.createHref(b);o.replaceState(w,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:EN(g);return b=b.replace(/ $/,"%20"),Ls(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Jle,f),u=g,()=>{i.removeEventListener(Jle,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}function nSe(e,t,n="/"){return lJe(e,t,n,!1)}function lJe(e,t,n,r){let i=typeof t=="string"?$A(t):t,s=Cb(i.pathname||"/",n);if(s==null)return null;let o=rSe(e);cJe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=_Je(s);a=bJe(o[u],l,r)}return a}function rSe(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ls(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=Ly([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Ls(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),rSe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:yJe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of iSe(s.path))i(s,o,u)}),t}function iSe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iSe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function cJe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vJe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var fJe=/^:[\w-]+$/,dJe=3,hJe=2,pJe=1,mJe=10,gJe=-2,ece=e=>e==="*";function yJe(e,t){let n=e.split("/"),r=n.length;return n.some(ece)&&(r+=gJe),t&&(r+=hJe),n.filter(i=>!ece(i)).reduce((i,s)=>i+(fJe.test(s)?dJe:s===""?pJe:mJe),r)}function vJe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function bJe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=Z$({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=Z$({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ly([s,f.pathname]),pathnameBase:TJe(Ly([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Ly([s,f.pathnameBase]))}return o}function Z$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xJe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function xJe(e,t=!1,n=!0){lh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function _Je(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lh(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Cb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function wJe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$A(e):e;return{pathname:n?n.startsWith("/")?n:EJe(n,t):t,search:CJe(r),hash:AJe(i)}}function EJe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _z(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SJe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $J(e){let t=SJe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function FJ(e,t,n,r=!1){let i;typeof e=="string"?i=$A(e):(i={...e},Ls(!i.pathname||!i.pathname.includes("?"),_z("?","pathname","search",i)),Ls(!i.pathname||!i.pathname.includes("#"),_z("#","pathname","hash",i)),Ls(!i.search||!i.search.includes("#"),_z("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=wJe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var Ly=e=>e.join("/").replace(/\/\/+/g,"/"),TJe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CJe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AJe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function IJe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var sSe=["POST","PUT","PATCH","DELETE"];new Set(sSe);var kJe=["GET",...sSe];new Set(kJe);var FA=P.createContext(null);FA.displayName="DataRouter";var NB=P.createContext(null);NB.displayName="DataRouterState";var oSe=P.createContext({isTransitioning:!1});oSe.displayName="ViewTransition";var RJe=P.createContext(new Map);RJe.displayName="Fetchers";var DJe=P.createContext(null);DJe.displayName="Await";var Zp=P.createContext(null);Zp.displayName="Navigation";var JP=P.createContext(null);JP.displayName="Location";var Eh=P.createContext({outlet:null,matches:[],isDataRoute:!1});Eh.displayName="Route";var BJ=P.createContext(null);BJ.displayName="RouteError";function jJ(e,{relative:t}={}){Ls(BA(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Zp),{hash:i,pathname:s,search:o}=ZP(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Ly([n,s])),r.createHref({pathname:a,search:o,hash:i})}function BA(){return P.useContext(JP)!=null}function Sh(){return Ls(BA(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(JP).location}var aSe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uSe(e){P.useContext(Zp).static||P.useLayoutEffect(e)}function em(){let{isDataRoute:e}=P.useContext(Eh);return e?qJe():NJe()}function NJe(){Ls(BA(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext(FA),{basename:t,navigator:n}=P.useContext(Zp),{matches:r}=P.useContext(Eh),{pathname:i}=Sh(),s=JSON.stringify($J(r)),o=P.useRef(!1);return uSe(()=>{o.current=!0}),P.useCallback((u,l={})=>{if(lh(o.current,aSe),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=FJ(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Ly([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var PJe=P.createContext(null);function OJe(e){let t=P.useContext(Eh).outlet;return t&&P.createElement(PJe.Provider,{value:e},t)}function F0(){let{matches:e}=P.useContext(Eh),t=e[e.length-1];return t?t.params:{}}function ZP(e,{relative:t}={}){let{matches:n}=P.useContext(Eh),{pathname:r}=Sh(),i=JSON.stringify($J(n));return P.useMemo(()=>FJ(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function lSe(e,t){return cSe(e,t)}function cSe(e,t,n,r){var v;Ls(BA(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(Zp),{matches:s}=P.useContext(Eh),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let b=c&&c.path||"";fSe(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Sh(),d;if(t){let b=typeof t=="string"?$A(t):t;Ls(l==="/"||((v=b.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),d=b}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=nSe(e,{pathname:p});lh(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),lh(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=BJe(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Ly([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Ly([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&g?P.createElement(JP.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function MJe(){let e=HJe(),t=IJe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,o)}var LJe=P.createElement(MJe,null),$Je=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(Eh.Provider,{value:this.props.routeContext},P.createElement(BJ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FJe({routeContext:e,match:t,children:n}){let r=P.useContext(FA);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Eh.Provider,{value:e},n)}function BJe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Ls(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||LJe,o&&(a<0&&c===0?(fSe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let v;return f?v=h:d?v=p:l.route.Component?v=P.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,P.createElement(FJe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?P.createElement($Je,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function UJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jJe(e){let t=P.useContext(FA);return Ls(t,UJ(e)),t}function UJe(e){let t=P.useContext(NB);return Ls(t,UJ(e)),t}function zJe(e){let t=P.useContext(Eh);return Ls(t,UJ(e)),t}function zJ(e){let t=zJe(e),n=t.matches[t.matches.length-1];return Ls(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function VJe(){return zJ("useRouteId")}function HJe(){var r;let e=P.useContext(BJ),t=UJe("useRouteError"),n=zJ("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function qJe(){let{router:e}=jJe("useNavigate"),t=zJ("useNavigate"),n=P.useRef(!1);return uSe(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{lh(n.current,aSe),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var tce={};function fSe(e,t,n){!t&&!tce[e]&&(tce[e]=!0,lh(!1,n))}P.memo(WJe);function WJe({routes:e,future:t,state:n}){return cSe(e,void 0,n,t)}function VJ({to:e,replace:t,state:n,relative:r}){Ls(BA(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Zp);lh(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Eh),{pathname:o}=Sh(),a=em(),u=FJ(e,$J(s),o,r==="path"),l=JSON.stringify(u);return P.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function GJe(e){return OJe(e.context)}function Y_(e){Ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YJe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ls(!BA(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=$A(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=P.useMemo(()=>{let p=Cb(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return lh(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:P.createElement(Zp.Provider,{value:a},P.createElement(JP.Provider,{children:t,value:h}))}function KJe({children:e,location:t}){return lSe(_W(e),t)}function _W(e,t=[]){let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,_W(r.props.children,s));return}Ls(r.type===Y_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ls(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_W(r.props.children,s)),n.push(o)}),n}var tL="get",nL="application/x-www-form-urlencoded";function PB(e){return e!=null&&typeof e.tagName=="string"}function XJe(e){return PB(e)&&e.tagName.toLowerCase()==="button"}function QJe(e){return PB(e)&&e.tagName.toLowerCase()==="form"}function JJe(e){return PB(e)&&e.tagName.toLowerCase()==="input"}function ZJe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eZe(e,t){return e.button===0&&(!t||t==="_self")&&!ZJe(e)}function wW(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function tZe(e,t){let n=wW(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var z4=null;function nZe(){if(z4===null)try{new FormData(document.createElement("form"),0),z4=!1}catch{z4=!0}return z4}var rZe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wz(e){return e!=null&&!rZe.has(e)?(lh(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nL}"`),null):e}function iZe(e,t){let n,r,i,s,o;if(QJe(e)){let a=e.getAttribute("action");r=a?Cb(a,t):null,n=e.getAttribute("method")||tL,i=wz(e.getAttribute("enctype"))||nL,s=new FormData(e)}else if(XJe(e)||JJe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?Cb(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||tL,i=wz(e.getAttribute("formenctype"))||wz(a.getAttribute("enctype"))||nL,s=new FormData(a,e),!nZe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(PB(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tL,r=null,i=nL,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function HJ(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function sZe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oZe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function aZe(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await sZe(s,n);return o.links?o.links():[]}return[]}));return fZe(r.flat(1).filter(oZe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function nce(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function uZe(e,t){return lZe(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function lZe(e){return[...new Set(e)]}function cZe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function fZe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(cZe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function dZe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hZe(){let e=P.useContext(FA);return HJ(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pZe(){let e=P.useContext(NB);return HJ(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qJ=P.createContext(void 0);qJ.displayName="FrameworkContext";function dSe(){let e=P.useContext(qJ);return HJ(e,"You must render this element inside a <HydratedRouter> element"),e}function mZe(e,t){let n=P.useContext(qJ),[r,i]=P.useState(!1),[s,o]=P.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=P.useRef(null);P.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=v=>{v.forEach(b=>{o(b.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),P.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:Xk(a,h),onBlur:Xk(u,p),onMouseEnter:Xk(l,h),onMouseLeave:Xk(c,p),onTouchStart:Xk(f,h)}]:[!1,d,{}]}function Xk(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function gZe({page:e,...t}){let{router:n}=hZe(),r=P.useMemo(()=>nSe(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?P.createElement(vZe,{page:e,matches:r,...t}):null}function yZe(e){let{manifest:t,routeModules:n}=dSe(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return aZe(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function vZe({page:e,matches:t,...n}){let r=Sh(),{manifest:i,routeModules:s}=dSe(),{loaderData:o,matches:a}=pZe(),u=P.useMemo(()=>nce(e,t,a,i,r,"data"),[e,t,a,i,r]),l=P.useMemo(()=>nce(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=P.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var b;let v=i.routes[g.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===g.route.id)&&g.route.id in o&&((b=s[g.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=dZe(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=P.useMemo(()=>uZe(l,i),[l,i]),d=yZe(l);return P.createElement(P.Fragment,null,c.map(h=>P.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>P.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>P.createElement("link",{key:h,...p})))}function bZe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var hSe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hSe&&(window.__reactRouterVersion="7.1.3")}catch{}function xZe({basename:e,children:t,window:n}){let r=P.useRef();r.current==null&&(r.current=oJe({window:n,v5Compat:!0}));let i=r.current,[s,o]=P.useState({action:i.action,location:i.location}),a=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(a),[i,a]),P.createElement(YJe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var pSe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mSe=P.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=P.useContext(Zp),m=typeof l=="string"&&pSe.test(l),g,v=!1;if(typeof l=="string"&&m&&(g=l,hSe))try{let N=new URL(window.location.href),O=l.startsWith("//")?new URL(N.protocol+l):new URL(l),L=Cb(O.pathname,p);O.origin===N.origin&&L!=null?l=L+O.search+O.hash:v=!0}catch{lh(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=jJ(l,{relative:i}),[w,E,T]=mZe(r,d),C=SZe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function I(N){t&&t(N),N.defaultPrevented||C(N)}let R=P.createElement("a",{...d,...T,href:g||b,onClick:v||s?t:I,ref:bZe(h,E),target:u,"data-discover":!m&&n==="render"?"true":void 0});return w&&!m?P.createElement(P.Fragment,null,R,P.createElement(gZe,{page:b})):R});mSe.displayName="Link";var _Ze=P.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=ZP(o,{relative:l.relative}),d=Sh(),h=P.useContext(NB),{navigator:p,basename:m}=P.useContext(Zp),g=h!=null&&kZe(f)&&a===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,b=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&m&&(w=Cb(w,m)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",C=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),I={isActive:T,isPending:C,isTransitioning:g},R=T?t:void 0,N;typeof r=="function"?N=r(I):N=[r,T?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(I):s;return P.createElement(mSe,{...l,"aria-current":R,className:N,ref:c,style:O,to:o,viewTransition:a},typeof u=="function"?u(I):u)});_Ze.displayName="NavLink";var wZe=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=tL,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=AZe(),m=IZe(a,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&pSe.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||w.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return P.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:b,...d,"data-discover":!v&&e==="render"?"true":void 0})});wZe.displayName="Form";function EZe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gSe(e){let t=P.useContext(FA);return Ls(t,EZe(e)),t}function SZe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=em(),u=Sh(),l=ZP(e,{relative:s});return P.useCallback(c=>{if(eZe(c,t)){c.preventDefault();let f=n!==void 0?n:EN(u)===EN(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function C1(e){lh(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=P.useRef(wW(e)),n=P.useRef(!1),r=Sh(),i=P.useMemo(()=>tZe(r.search,n.current?null:t.current),[r.search]),s=em(),o=P.useCallback((a,u)=>{const l=wW(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var TZe=0,CZe=()=>`__${String(++TZe)}__`;function AZe(){let{router:e}=gSe("useSubmit"),{basename:t}=P.useContext(Zp),n=VJe();return P.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=iZe(r,t);if(i.navigate===!1){let c=i.fetcherKey||CZe();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function IZe(e,{relative:t}={}){let{basename:n}=P.useContext(Zp),r=P.useContext(Eh);Ls(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ZP(e||".",{relative:t})},o=Sh();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ly([n,s.pathname])),EN(s)}function kZe(e,t={}){let n=P.useContext(oSe);Ls(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gSe("useViewTransitionState"),i=ZP(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Cb(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Cb(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Z$(i.pathname,o)!=null||Z$(i.pathname,s)!=null}new TextEncoder;const WJ=P.createContext(null);WJ.displayName="@mantine/modals/ModalsContext";function RZe(){const e=P.useContext(WJ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function DZe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=RZe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return S.jsxs(S.Fragment,{children:[l&&S.jsx(je,{mb:"md",children:l}),S.jsxs(Yr,{mt:l?0:"md",justify:"flex-end",...o,children:[S.jsx(gn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),S.jsx(gn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[NZe,GJ]=Xze("mantine-modals"),rce=e=>{const t=e.modalId||O2();return GJ("openConfirmModal")({...e,modalId:t}),t};GJ("closeModal");GJ("closeAllModals");function ice(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function PZe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;ice(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{ice(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function OZe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function MZe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(PZe,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(b=>{s({type:"CLOSE_ALL",canceled:b})},[o,s]),u=P.useCallback(({modalId:b,...w})=>{const E=b||O2();return s({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[s]),l=P.useCallback(({modalId:b,...w})=>{const E=b||O2();return s({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[s]),c=P.useCallback((b,{modalId:w,...E})=>{const T=w||O2();return s({type:"OPEN",modal:{id:T,type:"context",props:E,ctx:b}}),T},[s]),f=P.useCallback((b,w)=>{s({type:"CLOSE",modalId:b,canceled:w})},[o,s]),d=P.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]),h=P.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]);NZe({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const b=o.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,T=r[b.ctx];return{modalProps:E,content:S.jsx(T,{innerProps:w,context:p,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=OZe(b.props);return{modalProps:w,content:S.jsx(DZe,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:g,content:v}=m();return S.jsxs(WJ.Provider,{value:p,children:[S.jsx(Vs,{zIndex:ff("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LZe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=(e,t,n,r)=>{const i=P.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>P.createElement("svg",{ref:d,...LZe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&P.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>P.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ze=Wn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FZe=Wn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MD=Wn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sce=Wn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oce=Wn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BZe=Wn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jZe=Wn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UZe=Wn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zZe=Wn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VZe=Wn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HZe=Wn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ySe=Wn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OB=Wn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qZe=Wn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ace=Wn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WZe=Wn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GZe=Wn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZe=Wn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KZe=Wn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vSe=Wn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XZe=Wn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QZe=Wn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YJ=Wn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JZe=Wn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bSe=Wn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZZe=Wn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eet=Wn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tet=Wn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var net=Wn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ret=Wn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xSe=Wn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iet=Wn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var set=Wn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oet=Wn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aet=Wn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uet=Wn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Se=Wn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cet=Wn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wSe=Wn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fet=Wn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ESe=Wn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KJ=Wn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uce=Wn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e3=Wn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var det=Wn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var het=Wn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pet=Wn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function SSe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ha="/replication-studies/";function lce(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function TSe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const met=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,get=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yet={};function cce(e,t){return(yet.jsx?get:met).test(e)}const vet=/[ \t\n\f\r]/g;function bet(e){return typeof e=="object"?e.type==="text"?fce(e.value):!1:fce(e)}function fce(e){return e.replace(vet,"")===""}let t3=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};t3.prototype.property={};t3.prototype.normal={};t3.prototype.space=null;function CSe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new t3(n,r,t)}function SN(e){return e.toLowerCase()}let Th=class{constructor(t,n){this.property=t,this.attribute=n}};Th.prototype.space=null;Th.prototype.boolean=!1;Th.prototype.booleanish=!1;Th.prototype.overloadedBoolean=!1;Th.prototype.number=!1;Th.prototype.commaSeparated=!1;Th.prototype.spaceSeparated=!1;Th.prototype.commaOrSpaceSeparated=!1;Th.prototype.mustUseProperty=!1;Th.prototype.defined=!1;let xet=0;const ar=BE(),qo=BE(),ASe=BE(),Bt=BE(),fs=BE(),$2=BE(),jf=BE();function BE(){return 2**++xet}const EW=Object.freeze(Object.defineProperty({__proto__:null,boolean:ar,booleanish:qo,commaOrSpaceSeparated:jf,commaSeparated:$2,number:Bt,overloadedBoolean:ASe,spaceSeparated:fs},Symbol.toStringTag,{value:"Module"})),Ez=Object.keys(EW);class XJ extends Th{constructor(t,n,r,i){let s=-1;if(super(t,n),dce(this,"space",i),typeof r=="number")for(;++s<Ez.length;){const o=Ez[s];dce(this,Ez[s],(r&EW[o])===EW[o])}}}XJ.prototype.defined=!0;function dce(e,t,n){n&&(e[t]=n)}const _et={}.hasOwnProperty;function jA(e){const t={},n={};let r;for(r in e.properties)if(_et.call(e.properties,r)){const i=e.properties[r],s=new XJ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[SN(r)]=r,n[SN(s.attribute)]=r}return new t3(t,n,e.space)}const ISe=jA({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),kSe=jA({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function RSe(e,t){return t in e?e[t]:t}function DSe(e,t){return RSe(e,t.toLowerCase())}const NSe=jA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:DSe,properties:{xmlns:null,xmlnsXLink:null}}),PSe=jA({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:qo,ariaAutoComplete:null,ariaBusy:qo,ariaChecked:qo,ariaColCount:Bt,ariaColIndex:Bt,ariaColSpan:Bt,ariaControls:fs,ariaCurrent:null,ariaDescribedBy:fs,ariaDetails:null,ariaDisabled:qo,ariaDropEffect:fs,ariaErrorMessage:null,ariaExpanded:qo,ariaFlowTo:fs,ariaGrabbed:qo,ariaHasPopup:null,ariaHidden:qo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fs,ariaLevel:Bt,ariaLive:null,ariaModal:qo,ariaMultiLine:qo,ariaMultiSelectable:qo,ariaOrientation:null,ariaOwns:fs,ariaPlaceholder:null,ariaPosInSet:Bt,ariaPressed:qo,ariaReadOnly:qo,ariaRelevant:null,ariaRequired:qo,ariaRoleDescription:fs,ariaRowCount:Bt,ariaRowIndex:Bt,ariaRowSpan:Bt,ariaSelected:qo,ariaSetSize:Bt,ariaSort:null,ariaValueMax:Bt,ariaValueMin:Bt,ariaValueNow:Bt,ariaValueText:null,role:null}}),wet=jA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:DSe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$2,acceptCharset:fs,accessKey:fs,action:null,allow:null,allowFullScreen:ar,allowPaymentRequest:ar,allowUserMedia:ar,alt:null,as:null,async:ar,autoCapitalize:null,autoComplete:fs,autoFocus:ar,autoPlay:ar,blocking:fs,capture:null,charSet:null,checked:ar,cite:null,className:fs,cols:Bt,colSpan:null,content:null,contentEditable:qo,controls:ar,controlsList:fs,coords:Bt|$2,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ar,defer:ar,dir:null,dirName:null,disabled:ar,download:ASe,draggable:qo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ar,formTarget:null,headers:fs,height:Bt,hidden:ar,high:Bt,href:null,hrefLang:null,htmlFor:fs,httpEquiv:fs,id:null,imageSizes:null,imageSrcSet:null,inert:ar,inputMode:null,integrity:null,is:null,isMap:ar,itemId:null,itemProp:fs,itemRef:fs,itemScope:ar,itemType:fs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ar,low:Bt,manifest:null,max:null,maxLength:Bt,media:null,method:null,min:null,minLength:Bt,multiple:ar,muted:ar,name:null,nonce:null,noModule:ar,noValidate:ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ar,optimum:Bt,pattern:null,ping:fs,placeholder:null,playsInline:ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ar,referrerPolicy:null,rel:fs,required:ar,reversed:ar,rows:Bt,rowSpan:Bt,sandbox:fs,scope:null,scoped:ar,seamless:ar,selected:ar,shadowRootClonable:ar,shadowRootDelegatesFocus:ar,shadowRootMode:null,shape:null,size:Bt,sizes:null,slot:null,span:Bt,spellCheck:qo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Bt,step:null,style:null,tabIndex:Bt,target:null,title:null,translate:null,type:null,typeMustMatch:ar,useMap:null,value:qo,width:Bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fs,axis:null,background:null,bgColor:null,border:Bt,borderColor:null,bottomMargin:Bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ar,declare:ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Bt,leftMargin:Bt,link:null,longDesc:null,lowSrc:null,marginHeight:Bt,marginWidth:Bt,noResize:ar,noHref:ar,noShade:ar,noWrap:ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Bt,rules:null,scheme:null,scrolling:qo,standby:null,summary:null,text:null,topMargin:Bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ar,disableRemotePlayback:ar,prefix:null,property:null,results:Bt,security:null,unselectable:null}}),Eet=jA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:RSe,properties:{about:jf,accentHeight:Bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Bt,amplitude:Bt,arabicForm:null,ascent:Bt,attributeName:null,attributeType:null,azimuth:Bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Bt,by:null,calcMode:null,capHeight:Bt,className:fs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Bt,diffuseConstant:Bt,direction:null,display:null,dur:null,divisor:Bt,dominantBaseline:null,download:ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Bt,enableBackground:null,end:null,event:null,exponent:Bt,externalResourcesRequired:null,fill:null,fillOpacity:Bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$2,g2:$2,glyphName:$2,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Bt,horizOriginX:Bt,horizOriginY:Bt,id:null,ideographic:Bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Bt,k:Bt,k1:Bt,k2:Bt,k3:Bt,k4:Bt,kernelMatrix:jf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Bt,overlineThickness:Bt,paintOrder:null,panose1:null,path:null,pathLength:Bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Bt,pointsAtY:Bt,pointsAtZ:Bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:jf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:jf,rev:jf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:jf,requiredFeatures:jf,requiredFonts:jf,requiredFormats:jf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Bt,specularExponent:Bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Bt,strikethroughThickness:Bt,string:null,stroke:null,strokeDashArray:jf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Bt,strokeOpacity:Bt,strokeWidth:null,style:null,surfaceScale:Bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:jf,tabIndex:Bt,tableValues:null,target:null,targetX:Bt,targetY:Bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:jf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Bt,underlineThickness:Bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Bt,values:null,vAlphabetic:Bt,vMathematical:Bt,vectorEffect:null,vHanging:Bt,vIdeographic:Bt,version:null,vertAdvY:Bt,vertOriginX:Bt,vertOriginY:Bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Tet=/^data[-\w.:]+$/i,hce=/-[a-z]/g,Cet=/[A-Z]/g;function MB(e,t){const n=SN(t);let r=t,i=Th;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Tet.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(hce,Iet);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!hce.test(s)){let o=s.replace(Cet,Aet);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=XJ}return new i(r,t)}function Aet(e){return"-"+e.toLowerCase()}function Iet(e){return e.charAt(1).toUpperCase()}const ket={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},n3=CSe([kSe,ISe,NSe,PSe,wet],"html"),bx=CSe([kSe,ISe,NSe,PSe,Eet],"svg");function pce(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function OSe(e){return e.join(" ").trim()}var Qk={},Sz,mce;function Ret(){if(mce)return Sz;mce=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";Sz=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var v=1,b=1;function w(F){var H=F.match(t);H&&(v+=H.length);var Q=F.lastIndexOf(u);b=~Q?F.length-Q:b+F.length}function E(){var F={line:v,column:b};return function(H){return H.position=new T(F),R(),H}}function T(F){this.start=F,this.end={line:v,column:b},this.source=g.source}T.prototype.content=m;function C(F){var H=new Error(g.source+":"+v+":"+b+": "+F);if(H.reason=F,H.filename=g.source,H.line=v,H.column=b,H.source=m,!g.silent)throw H}function I(F){var H=F.exec(m);if(H){var Q=H[0];return w(Q),m=m.slice(Q.length),H}}function R(){I(n)}function N(F){var H;for(F=F||[];H=O();)H!==!1&&F.push(H);return F}function O(){var F=E();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var H=2;f!=m.charAt(H)&&(c!=m.charAt(H)||l!=m.charAt(H+1));)++H;if(H+=2,f===m.charAt(H-1))return C("End of comment missing");var Q=m.slice(2,H-2);return b+=2,w(Q),m=m.slice(H),b+=2,F({type:d,comment:Q})}}function L(){var F=E(),H=I(r);if(H){if(O(),!I(i))return C("property missing ':'");var Q=I(s),J=F({type:h,property:p(H[0].replace(e,f)),value:Q?p(Q[0].replace(e,f)):f});return I(o),J}}function j(){var F=[];N(F);for(var H;H=L();)H!==!1&&(F.push(H),N(F));return F}return R(),j()};function p(m){return m?m.replace(a,f):f}return Sz}var gce;function Det(){if(gce)return Qk;gce=1;var e=Qk.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qk,"__esModule",{value:!0});var t=e(Ret());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return Qk.default=n,Qk}var Net=Det();const yce=vh(Net),Pet=yce.default||yce,LB=MSe("end"),og=MSe("start");function MSe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Oet(e){const t=og(e),n=LB(e);if(t&&n)return{start:t,end:n}}function LD(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?vce(e.position):"start"in e||"end"in e?vce(e):"line"in e||"column"in e?SW(e):""}function SW(e){return bce(e&&e.line)+":"+bce(e&&e.column)}function vce(e){return SW(e&&e.start)+"-"+SW(e&&e.end)}function bce(e){return e&&typeof e=="number"?e:1}class yl extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=LD(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}yl.prototype.file="";yl.prototype.name="";yl.prototype.reason="";yl.prototype.message="";yl.prototype.stack="";yl.prototype.column=void 0;yl.prototype.line=void 0;yl.prototype.ancestors=void 0;yl.prototype.cause=void 0;yl.prototype.fatal=void 0;yl.prototype.place=void 0;yl.prototype.ruleId=void 0;yl.prototype.source=void 0;const QJ={}.hasOwnProperty,Met=new Map,Let=/[A-Z]/g,$et=/-([a-z])/g,Fet=new Set(["table","tbody","thead","tfoot","tr"]),Bet=new Set(["td","th"]),LSe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function jet(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Yet(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Get(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?bx:n3,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=$Se(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function $Se(e,t,n){if(t.type==="element")return Uet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return zet(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Het(e,t,n);if(t.type==="mdxjsEsm")return Vet(e,t);if(t.type==="root")return qet(e,t,n);if(t.type==="text")return Wet(e,t)}function Uet(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=bx,e.schema=i),e.ancestors.push(t);const s=BSe(e,t.tagName,!1),o=Ket(e,t);let a=ZJ(e,t);return Fet.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!bet(u):!0})),FSe(e,o,s,t),JJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function zet(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}TN(e,t.position)}function Vet(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);TN(e,t.position)}function Het(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=bx,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:BSe(e,t.name,!0),o=Xet(e,t),a=ZJ(e,t);return FSe(e,o,s,t),JJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function qet(e,t,n){const r={};return JJ(r,ZJ(e,t)),e.create(t,e.Fragment,r,n)}function Wet(e,t){return t.value}function FSe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function JJ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Get(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Yet(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=og(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Ket(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&QJ.call(t.properties,i)){const s=Qet(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Bet.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Xet(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else TN(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else TN(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function ZJ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Met;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=$Se(e,s,o);a!==void 0&&n.push(a)}return n}function Qet(e,t,n){const r=MB(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?TSe(n):OSe(n)),r.property==="style"){let i=typeof n=="object"?n:Jet(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Zet(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ket[r.property]||r.property:r.attribute,n]}}function Jet(e,t){const n={};try{Pet(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new yl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=LSe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace($et,ttt)),n[o]=s}}function BSe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=cce(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=cce(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return QJ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);TN(e)}function TN(e,t){const n=new yl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=LSe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Zet(e){const t={};let n;for(n in e)QJ.call(e,n)&&(t[ett(n)]=e[n]);return t}function ett(e){let t=e.replace(Let,ntt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ttt(e,t){return t.toUpperCase()}function ntt(e){return"-"+e.toLowerCase()}const Tz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},rtt={};function itt(e,t){const n=rtt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jSe(e,r,i)}function jSe(e,t,n){if(stt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return xce(e.children,t,n)}return Array.isArray(e)?xce(e,t,n):""}function xce(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=jSe(e[i],t,n);return r.join("")}function stt(e){return!!(e&&typeof e=="object")}const _ce=document.createElement("i");function eZ(e){const t="&"+e+";";_ce.innerHTML=t;const n=_ce.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Jy(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Xd(e,t){return e.length>0?(Jy(e,e.length,0,t),e):t}const wce={}.hasOwnProperty;function ott(e){const t={};let n=-1;for(;++n<e.length;)att(t,e[n]);return t}function att(e,t){let n;for(n in t){const i=(wce.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){wce.call(i,o)||(i[o]=[]);const a=s[o];utt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function utt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Jy(e,0,0,r)}function USe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function F2(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const n0=xx(/[A-Za-z]/),Qf=xx(/[\dA-Za-z]/),ltt=xx(/[#-'*+\--9=?A-Z^-~]/);function TW(e){return e!==null&&(e<32||e===127)}const CW=xx(/\d/),ctt=xx(/[\dA-Fa-f]/),ftt=xx(/[!-/:-@[-`{-~]/);function Vn(e){return e!==null&&e<-2}function Kc(e){return e!==null&&(e<0||e===32)}function Si(e){return e===-2||e===-1||e===32}const dtt=xx(new RegExp("\\p{P}|\\p{S}","u")),htt=xx(/\s/);function xx(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function UA(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Qf(e.charCodeAt(n+1))&&Qf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ds(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Si(u)?(e.enter(n),a(u)):t(u)}function a(u){return Si(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const ptt={tokenize:mtt};function mtt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ds(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Vn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const gtt={tokenize:ytt},Ece={tokenize:vtt};function ytt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let T=E,C;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){C=t.events[T][1].end;break}v(r);let I=E;for(;I<t.events.length;)t.events[I][1].end=Object.assign({},C),I++;return Jy(t.events,T+1,0,t.events.slice(E)),t.events.length=I,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ece,c,f)(w)}function c(w){return i&&b(),v(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function d(w){return t.containerState={},e.attempt(Ece,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function p(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){g(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return Vn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function g(w,E){const T=t.sliceStream(w);if(E&&T.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(T),t.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const I=t.events.length;let R=I,N,O;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(N){O=t.events[R][1].end;break}N=!0}for(v(r),C=I;C<t.events.length;)t.events[C][1].end=Object.assign({},O),C++;Jy(t.events,R+1,0,t.events.slice(I)),t.events.length=C}}function v(w){let E=n.length;for(;E-- >w;){const T=n[E];t.containerState=T[1],T[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function vtt(e,t,n){return ds(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Sce(e){if(e===null||Kc(e)||htt(e))return 1;if(dtt(e))return 2}function tZ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const AW={name:"attention",tokenize:xtt,resolveAll:btt};function btt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Tce(f,-u),Tce(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Xd(l,tZ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Xd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Jy(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function xtt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Sce(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Sce(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Tce(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _tt={name:"autolink",tokenize:wtt};function wtt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return n0(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Qf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Qf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||TW(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):ltt(h)?(e.consume(h),l):n(h)}function c(h){return Qf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Qf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const $B={tokenize:Ett,partial:!0};function Ett(e,t,n){return r;function r(s){return Si(s)?ds(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Vn(s)?t(s):n(s)}}const zSe={name:"blockQuote",tokenize:Stt,continuation:{tokenize:Ttt},exit:Ctt};function Stt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Si(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Ttt(e,t,n){const r=this;return i;function i(o){return Si(o)?ds(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(zSe,t,n)(o)}}function Ctt(e){e.exit("blockQuote")}const VSe={name:"characterEscape",tokenize:Att};function Att(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return ftt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const HSe={name:"characterReference",tokenize:Itt};function Itt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Qf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=ctt,c):(e.enter("characterReferenceValue"),s=7,o=CW,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Qf&&!eZ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Cce={tokenize:Rtt,partial:!0},Ace={name:"codeFenced",tokenize:ktt,concrete:!0};function ktt(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),Si(C)?ds(e,f,"whitespace")(C):f(C))}function f(C){return C===null||Vn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(Cce,m,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||Vn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):Si(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ds(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||Vn(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||Vn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,E,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v}function v(C){return s>0&&Si(C)?ds(e,b,"linePrefix",s+1)(C):b(C)}function b(C){return C===null||Vn(C)?e.check(Cce,m,E)(C):(e.enter("codeFlowValue"),w(C))}function w(C){return C===null||Vn(C)?(e.exit("codeFlowValue"),b(C)):(e.consume(C),w)}function E(C){return e.exit("codeFenced"),t(C)}function T(C,I,R){let N=0;return O;function O(Q){return C.enter("lineEnding"),C.consume(Q),C.exit("lineEnding"),L}function L(Q){return C.enter("codeFencedFence"),Si(Q)?ds(C,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):j(Q)}function j(Q){return Q===a?(C.enter("codeFencedFenceSequence"),F(Q)):R(Q)}function F(Q){return Q===a?(N++,C.consume(Q),F):N>=o?(C.exit("codeFencedFenceSequence"),Si(Q)?ds(C,H,"whitespace")(Q):H(Q)):R(Q)}function H(Q){return Q===null||Vn(Q)?(C.exit("codeFencedFence"),I(Q)):R(Q)}}}function Rtt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Cz={name:"codeIndented",tokenize:Ntt},Dtt={tokenize:Ptt,partial:!0};function Ntt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ds(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Vn(l)?e.attempt(Dtt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Vn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Ptt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ds(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Vn(o)?i(o):n(o)}}const Ott={name:"codeText",tokenize:$tt,resolve:Mtt,previous:Ltt};function Mtt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Ltt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function $tt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Vn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Vn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class Ftt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Jk(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Jk(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Jk(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Jk(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Jk(this.left,n.reverse())}}}function Jk(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function qSe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new Ftt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Btt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Jy(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Btt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const v=a.slice(g[d],g[d+1]),b=s.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const jtt={tokenize:Vtt,resolve:ztt},Utt={tokenize:Htt,partial:!0};function ztt(e){return qSe(e),e}function Vtt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Vn(a)?e.check(Utt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Htt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ds(e,s,"linePrefix")}function s(o){if(o===null||Vn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function WSe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),d):v===null||v===32||v===41||TW(v)?n(v):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(v))}function d(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),d(v)):v===null||v===60||Vn(v)?n(v):(e.consume(v),v===92?p:h)}function p(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function m(v){return!c&&(v===null||v===41||Kc(v))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,m):v===41?(e.consume(v),c--,m):v===null||v===32||v===40||TW(v)?n(v):(e.consume(v),v===92?g:m)}function g(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function GSe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Vn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Vn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Si(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function YSe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Vn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ds(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Vn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function $D(e,t){let n;return r;function r(i){return Vn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Si(i)?ds(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const qtt={name:"definition",tokenize:Gtt},Wtt={tokenize:Ytt,partial:!0};function Gtt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return GSe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=F2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Kc(h)?$D(e,l)(h):l(h)}function l(h){return WSe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Wtt,f,f)(h)}function f(h){return Si(h)?ds(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Vn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Ytt(e,t,n){return r;function r(a){return Kc(a)?$D(e,i)(a):n(a)}function i(a){return YSe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Si(a)?ds(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Vn(a)?t(a):n(a)}}const Ktt={name:"hardBreakEscape",tokenize:Xtt};function Xtt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Vn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Qtt={name:"headingAtx",tokenize:Ztt,resolve:Jtt};function Jtt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Jy(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Ztt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Kc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Vn(c)?(e.exit("atxHeading"),t(c)):Si(c)?ds(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Kc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const ent=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ice=["pre","script","style","textarea"],tnt={name:"htmlFlow",tokenize:snt,resolveTo:int,concrete:!0},nnt={tokenize:ant,partial:!0},rnt={tokenize:ont,partial:!0};function int(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function snt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),f}function f(V){return V===33?(e.consume(V),d):V===47?(e.consume(V),s=!0,m):V===63?(e.consume(V),i=3,r.interrupt?t:q):n0(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function d(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):n0(V)?(e.consume(V),i=4,r.interrupt?t:q):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:q):n(V)}function p(V){const Y="CDATA[";return V===Y.charCodeAt(a++)?(e.consume(V),a===Y.length?r.interrupt?t:j:p):n(V)}function m(V){return n0(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function g(V){if(V===null||V===47||V===62||Kc(V)){const Y=V===47,ee=o.toLowerCase();return!Y&&!s&&Ice.includes(ee)?(i=1,r.interrupt?t(V):j(V)):ent.includes(o.toLowerCase())?(i=6,Y?(e.consume(V),v):r.interrupt?t(V):j(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?b(V):w(V))}return V===45||Qf(V)?(e.consume(V),o+=String.fromCharCode(V),g):n(V)}function v(V){return V===62?(e.consume(V),r.interrupt?t:j):n(V)}function b(V){return Si(V)?(e.consume(V),b):O(V)}function w(V){return V===47?(e.consume(V),O):V===58||V===95||n0(V)?(e.consume(V),E):Si(V)?(e.consume(V),w):O(V)}function E(V){return V===45||V===46||V===58||V===95||Qf(V)?(e.consume(V),E):T(V)}function T(V){return V===61?(e.consume(V),C):Si(V)?(e.consume(V),T):w(V)}function C(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,I):Si(V)?(e.consume(V),C):R(V)}function I(V){return V===u?(e.consume(V),u=null,N):V===null||Vn(V)?n(V):(e.consume(V),I)}function R(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Kc(V)?T(V):(e.consume(V),R)}function N(V){return V===47||V===62||Si(V)?w(V):n(V)}function O(V){return V===62?(e.consume(V),L):n(V)}function L(V){return V===null||Vn(V)?j(V):Si(V)?(e.consume(V),L):n(V)}function j(V){return V===45&&i===2?(e.consume(V),J):V===60&&i===1?(e.consume(V),ne):V===62&&i===4?(e.consume(V),U):V===63&&i===3?(e.consume(V),q):V===93&&i===5?(e.consume(V),ie):Vn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(nnt,G,F)(V)):V===null||Vn(V)?(e.exit("htmlFlowData"),F(V)):(e.consume(V),j)}function F(V){return e.check(rnt,H,G)(V)}function H(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),Q}function Q(V){return V===null||Vn(V)?F(V):(e.enter("htmlFlowData"),j(V))}function J(V){return V===45?(e.consume(V),q):j(V)}function ne(V){return V===47?(e.consume(V),o="",Z):j(V)}function Z(V){if(V===62){const Y=o.toLowerCase();return Ice.includes(Y)?(e.consume(V),U):j(V)}return n0(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),Z):j(V)}function ie(V){return V===93?(e.consume(V),q):j(V)}function q(V){return V===62?(e.consume(V),U):V===45&&i===2?(e.consume(V),q):j(V)}function U(V){return V===null||Vn(V)?(e.exit("htmlFlowData"),G(V)):(e.consume(V),U)}function G(V){return e.exit("htmlFlow"),t(V)}}function ont(e,t,n){const r=this;return i;function i(o){return Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function ant(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt($B,t,n)}}const unt={name:"htmlText",tokenize:lnt};function lnt(e,t,n){const r=this;let i,s,o;return a;function a(q){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(q),u}function u(q){return q===33?(e.consume(q),l):q===47?(e.consume(q),T):q===63?(e.consume(q),w):n0(q)?(e.consume(q),R):n(q)}function l(q){return q===45?(e.consume(q),c):q===91?(e.consume(q),s=0,p):n0(q)?(e.consume(q),b):n(q)}function c(q){return q===45?(e.consume(q),h):n(q)}function f(q){return q===null?n(q):q===45?(e.consume(q),d):Vn(q)?(o=f,ne(q)):(e.consume(q),f)}function d(q){return q===45?(e.consume(q),h):f(q)}function h(q){return q===62?J(q):q===45?d(q):f(q)}function p(q){const U="CDATA[";return q===U.charCodeAt(s++)?(e.consume(q),s===U.length?m:p):n(q)}function m(q){return q===null?n(q):q===93?(e.consume(q),g):Vn(q)?(o=m,ne(q)):(e.consume(q),m)}function g(q){return q===93?(e.consume(q),v):m(q)}function v(q){return q===62?J(q):q===93?(e.consume(q),v):m(q)}function b(q){return q===null||q===62?J(q):Vn(q)?(o=b,ne(q)):(e.consume(q),b)}function w(q){return q===null?n(q):q===63?(e.consume(q),E):Vn(q)?(o=w,ne(q)):(e.consume(q),w)}function E(q){return q===62?J(q):w(q)}function T(q){return n0(q)?(e.consume(q),C):n(q)}function C(q){return q===45||Qf(q)?(e.consume(q),C):I(q)}function I(q){return Vn(q)?(o=I,ne(q)):Si(q)?(e.consume(q),I):J(q)}function R(q){return q===45||Qf(q)?(e.consume(q),R):q===47||q===62||Kc(q)?N(q):n(q)}function N(q){return q===47?(e.consume(q),J):q===58||q===95||n0(q)?(e.consume(q),O):Vn(q)?(o=N,ne(q)):Si(q)?(e.consume(q),N):J(q)}function O(q){return q===45||q===46||q===58||q===95||Qf(q)?(e.consume(q),O):L(q)}function L(q){return q===61?(e.consume(q),j):Vn(q)?(o=L,ne(q)):Si(q)?(e.consume(q),L):N(q)}function j(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),i=q,F):Vn(q)?(o=j,ne(q)):Si(q)?(e.consume(q),j):(e.consume(q),H)}function F(q){return q===i?(e.consume(q),i=void 0,Q):q===null?n(q):Vn(q)?(o=F,ne(q)):(e.consume(q),F)}function H(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||Kc(q)?N(q):(e.consume(q),H)}function Q(q){return q===47||q===62||Kc(q)?N(q):n(q)}function J(q){return q===62?(e.consume(q),e.exit("htmlTextData"),e.exit("htmlText"),t):n(q)}function ne(q){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),Z}function Z(q){return Si(q)?ds(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):ie(q)}function ie(q){return e.enter("htmlTextData"),o(q)}}const nZ={name:"labelEnd",tokenize:mnt,resolveTo:pnt,resolveAll:hnt},cnt={tokenize:gnt},fnt={tokenize:ynt},dnt={tokenize:vnt};function hnt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function pnt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Xd(a,e.slice(s+1,s+r+3)),a=Xd(a,[["enter",c,t]]),a=Xd(a,tZ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Xd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Xd(a,e.slice(o+1)),a=Xd(a,[["exit",u,t]]),Jy(e,s,e.length,a),e}function mnt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(F2(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(cnt,c,o?c:f)(d):d===91?e.attempt(fnt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(dnt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function gnt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Kc(f)?$D(e,s)(f):s(f)}function s(f){return f===41?c(f):WSe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Kc(f)?$D(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?YSe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Kc(f)?$D(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function ynt(e,t,n){const r=this;return i;function i(a){return GSe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(F2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function vnt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const bnt={name:"labelStartImage",tokenize:xnt,resolveAll:nZ.resolveAll};function xnt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const _nt={name:"labelStartLink",tokenize:wnt,resolveAll:nZ.resolveAll};function wnt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Az={name:"lineEnding",tokenize:Ent};function Ent(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ds(e,t,"linePrefix")}}const rL={name:"thematicBreak",tokenize:Snt};function Snt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Vn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Si(l)?ds(e,a,"whitespace")(l):a(l))}}const Pc={name:"list",tokenize:Ant,continuation:{tokenize:Int},exit:Rnt},Tnt={tokenize:Dnt,partial:!0},Cnt={tokenize:knt,partial:!0};function Ant(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:CW(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(rL,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return CW(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check($B,r.interrupt?n:c,e.attempt(Tnt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Si(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Int(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check($B,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ds(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Si(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Cnt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ds(e,e.attempt(Pc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function knt(e,t,n){const r=this;return ds(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Rnt(e){e.exit(this.containerState.type)}function Dnt(e,t,n){const r=this;return ds(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Si(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const kce={name:"setextUnderline",tokenize:Pnt,resolveTo:Nnt};function Nnt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Pnt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Si(l)?ds(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Vn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Ont={tokenize:Mnt};function Mnt(e){const t=this,n=e.attempt($B,r,e.attempt(this.parser.constructs.flowInitial,i,ds(e,e.attempt(this.parser.constructs.flow,i,e.attempt(jtt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Lnt={resolveAll:XSe()},$nt=KSe("string"),Fnt=KSe("text");function KSe(e){return{tokenize:t,resolveAll:XSe(e==="text"?Bnt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function XSe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Bnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function jnt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:E,attempt:I(T),check:I(C),interrupt:I(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(L){return o=Xd(o,L),g(),o[o.length-1]!==null?[]:(R(t,0),l.events=tZ(s,l.events,l),l.events)}function d(L,j){return znt(h(L),j)}function h(L){return Unt(o,L)}function p(){const{line:L,column:j,offset:F,_index:H,_bufferIndex:Q}=r;return{line:L,column:j,offset:F,_index:H,_bufferIndex:Q}}function m(L){i[L.line]=L.column,O()}function g(){let L;for(;r._index<o.length;){const j=o[r._index];if(typeof j=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<j.length;)v(j.charCodeAt(r._bufferIndex));else v(j)}}function v(L){c=c(L)}function b(L){Vn(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,O()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=L}function w(L,j){const F=j||{};return F.type=L,F.start=p(),l.events.push(["enter",F,l]),a.push(F),F}function E(L){const j=a.pop();return j.end=p(),l.events.push(["exit",j,l]),j}function T(L,j){R(L,j.from)}function C(L,j){j.restore()}function I(L,j){return F;function F(H,Q,J){let ne,Z,ie,q;return Array.isArray(H)?G(H):"tokenize"in H?G([H]):U(H);function U(ae){return _e;function _e(pe){const Se=pe!==null&&ae[pe],Le=pe!==null&&ae.null,ye=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Le)?Le:Le?[Le]:[]];return G(ye)(pe)}}function G(ae){return ne=ae,Z=0,ae.length===0?J:V(ae[Z])}function V(ae){return _e;function _e(pe){return q=N(),ie=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?ee():ae.tokenize.call(j?Object.assign(Object.create(l),j):l,u,Y,ee)(pe)}}function Y(ae){return L(ie,q),Q}function ee(ae){return q.restore(),++Z<ne.length?V(ne[Z]):J}}}function R(L,j){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Jy(l.events,j,l.events.length-j,L.resolve(l.events.slice(j),l)),L.resolveTo&&(l.events=L.resolveTo(l.events,l))}function N(){const L=p(),j=l.previous,F=l.currentConstruct,H=l.events.length,Q=Array.from(a);return{restore:J,from:H};function J(){r=L,l.previous=j,l.currentConstruct=F,l.events.length=H,a=Q,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Unt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function znt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Vnt={42:Pc,43:Pc,45:Pc,48:Pc,49:Pc,50:Pc,51:Pc,52:Pc,53:Pc,54:Pc,55:Pc,56:Pc,57:Pc,62:zSe},Hnt={91:qtt},qnt={[-2]:Cz,[-1]:Cz,32:Cz},Wnt={35:Qtt,42:rL,45:[kce,rL],60:tnt,61:kce,95:rL,96:Ace,126:Ace},Gnt={38:HSe,92:VSe},Ynt={[-5]:Az,[-4]:Az,[-3]:Az,33:bnt,38:HSe,42:AW,60:[_tt,unt],91:_nt,92:[Ktt,VSe],93:nZ,95:AW,96:Ott},Knt={null:[AW,Lnt]},Xnt={null:[42,95]},Qnt={null:[]},Jnt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Xnt,contentInitial:Hnt,disable:Qnt,document:Vnt,flow:Wnt,flowInitial:qnt,insideSpan:Knt,string:Gnt,text:Ynt},Symbol.toStringTag,{value:"Module"}));function Znt(e){const n=ott([Jnt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(ptt),document:i(gtt),flow:i(Ont),string:i($nt),text:i(Fnt)};return r;function i(s){return o;function o(a){return jnt(r,s,a)}}}function ert(e){for(;!qSe(e););return e}const Rce=/[\0\t\n\r]/g;function trt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Rce.lastIndex=f,l=Rce.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const nrt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rrt(e){return e.replace(nrt,irt)}function irt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return USe(n.slice(s?2:1),s?16:10)}return eZ(n)||e}const QSe={}.hasOwnProperty;function srt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),ort(n)(ert(Znt(n).document().write(trt()(e,t,!0))))}function ort(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(at),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(tt),blockQuote:s(Le),characterEscape:N,characterReference:N,codeFenced:s(ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ye,o),codeText:s(he,o),codeTextData:N,data:N,codeFlowValue:N,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(De),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(Me,o),htmlFlowData:N,htmlText:s(Me,o),htmlTextData:N,image:s(Ge),label:o,link:s(at),listItem:s(St),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Ot),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(tt),strong:s(qe),thematicBreak:s(wt)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:Se,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ae,characterReference:_e,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:O,codeIndented:u(v),codeText:u(Q),codeTextData:O,data:O,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(j),hardBreakTrailing:u(j),htmlFlow:u(F),htmlFlowData:O,htmlText:u(H),htmlTextData:O,image:u(ne),label:ie,labelText:Z,lineEnding:L,link:u(J),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Y,resourceDestinationString:q,resourceTitleString:U,resource:G,setextHeading:u(R),setextHeadingLineSequence:I,setextHeadingText:C,strong:u(),thematicBreak:u()}};JSe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ke){let Oe={type:"root",children:[]};const ht={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Lt=[];let Ft=-1;for(;++Ft<ke.length;)if(ke[Ft][1].type==="listOrdered"||ke[Ft][1].type==="listUnordered")if(ke[Ft][0]==="enter")Lt.push(Ft);else{const dn=Lt.pop();Ft=i(ke,dn,Ft)}for(Ft=-1;++Ft<ke.length;){const dn=t[ke[Ft][0]];QSe.call(dn,ke[Ft][1].type)&&dn[ke[Ft][1].type].call(Object.assign({sliceSerialize:ke[Ft][2].sliceSerialize},ht),ke[Ft][1])}if(ht.tokenStack.length>0){const dn=ht.tokenStack[ht.tokenStack.length-1];(dn[1]||Dce).call(ht,void 0,dn[0])}for(Oe.position={start:Sv(ke.length>0?ke[0][1].start:{line:1,column:1,offset:0}),end:Sv(ke.length>0?ke[ke.length-2][1].end:{line:1,column:1,offset:0})},Ft=-1;++Ft<t.transforms.length;)Oe=t.transforms[Ft](Oe)||Oe;return Oe}function i(ke,Oe,ht){let Lt=Oe-1,Ft=-1,dn=!1,Nn,Sr,Ni,Un;for(;++Lt<=ht;){const tr=ke[Lt];switch(tr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tr[0]==="enter"?Ft++:Ft--,Un=void 0;break}case"lineEndingBlank":{tr[0]==="enter"&&(Nn&&!Un&&!Ft&&!Ni&&(Ni=Lt),Un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Un=void 0}if(!Ft&&tr[0]==="enter"&&tr[1].type==="listItemPrefix"||Ft===-1&&tr[0]==="exit"&&(tr[1].type==="listUnordered"||tr[1].type==="listOrdered")){if(Nn){let Ai=Lt;for(Sr=void 0;Ai--;){const Tr=ke[Ai];if(Tr[1].type==="lineEnding"||Tr[1].type==="lineEndingBlank"){if(Tr[0]==="exit")continue;Sr&&(ke[Sr][1].type="lineEndingBlank",dn=!0),Tr[1].type="lineEnding",Sr=Ai}else if(!(Tr[1].type==="linePrefix"||Tr[1].type==="blockQuotePrefix"||Tr[1].type==="blockQuotePrefixWhitespace"||Tr[1].type==="blockQuoteMarker"||Tr[1].type==="listItemIndent"))break}Ni&&(!Sr||Ni<Sr)&&(Nn._spread=!0),Nn.end=Object.assign({},Sr?ke[Sr][1].start:tr[1].end),ke.splice(Sr||Lt,0,["exit",Nn,tr[2]]),Lt++,ht++}if(tr[1].type==="listItemPrefix"){const Ai={type:"listItem",_spread:!1,start:Object.assign({},tr[1].start),end:void 0};Nn=Ai,ke.splice(Lt,0,["enter",Ai,tr[2]]),Lt++,ht++,Ni=void 0,Un=!0}}}return ke[Oe][1]._spread=dn,ht}function s(ke,Oe){return ht;function ht(Lt){a.call(this,ke(Lt),Lt),Oe&&Oe.call(this,Lt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ke,Oe,ht){this.stack[this.stack.length-1].children.push(ke),this.stack.push(ke),this.tokenStack.push([Oe,ht]),ke.position={start:Sv(Oe.start),end:void 0}}function u(ke){return Oe;function Oe(ht){ke&&ke.call(this,ht),l.call(this,ht)}}function l(ke,Oe){const ht=this.stack.pop(),Lt=this.tokenStack.pop();if(Lt)Lt[0].type!==ke.type&&(Oe?Oe.call(this,ke,Lt[0]):(Lt[1]||Dce).call(this,ke,Lt[0]));else throw new Error("Cannot close `"+ke.type+"` ("+LD({start:ke.start,end:ke.end})+"): its not open");ht.position.end=Sv(ke.end)}function c(){return itt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ke){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(ke),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=ke}function p(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=ke}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/(\r?\n|\r)$/g,"")}function b(ke){const Oe=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Oe,ht.identifier=F2(this.sliceSerialize(ke)).toLowerCase()}function w(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function E(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function T(ke){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const ht=this.sliceSerialize(ke).length;Oe.depth=ht}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function I(ke){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(ke).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function N(ke){const ht=this.stack[this.stack.length-1].children;let Lt=ht[ht.length-1];(!Lt||Lt.type!=="text")&&(Lt=dt(),Lt.position={start:Sv(ke.start),end:void 0},ht.push(Lt)),this.stack.push(Lt)}function O(ke){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(ke),Oe.position.end=Sv(ke.end)}function L(ke){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ht=Oe.children[Oe.children.length-1];ht.position.end=Sv(ke.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(N.call(this,ke),O.call(this,ke))}function j(){this.data.atHardBreak=!0}function F(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function H(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function Q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function J(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function ne(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function Z(ke){const Oe=this.sliceSerialize(ke),ht=this.stack[this.stack.length-2];ht.label=rrt(Oe),ht.identifier=F2(Oe).toLowerCase()}function ie(){const ke=this.stack[this.stack.length-1],Oe=this.resume(),ht=this.stack[this.stack.length-1];if(this.data.inReference=!0,ht.type==="link"){const Lt=ke.children;ht.children=Lt}else ht.alt=Oe}function q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function U(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function G(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function Y(ke){const Oe=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Oe,ht.identifier=F2(this.sliceSerialize(ke)).toLowerCase(),this.data.referenceType="full"}function ee(ke){this.data.characterReferenceType=ke.type}function ae(ke){const Oe=this.sliceSerialize(ke),ht=this.data.characterReferenceType;let Lt;ht?(Lt=USe(Oe,ht==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Lt=eZ(Oe);const Ft=this.stack[this.stack.length-1];Ft.value+=Lt}function _e(ke){const Oe=this.stack.pop();Oe.position.end=Sv(ke.end)}function pe(ke){O.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(ke)}function Se(ke){O.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(ke)}function Le(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Me(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function at(){return{type:"link",title:null,url:"",children:[]}}function yt(ke){return{type:"list",ordered:ke.type==="listOrdered",start:null,spread:ke._spread,children:[]}}function St(ke){return{type:"listItem",spread:ke._spread,checked:null,children:[]}}function Ot(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function wt(){return{type:"thematicBreak"}}}function Sv(e){return{line:e.line,column:e.column,offset:e.offset}}function JSe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?JSe(e,r):art(e,r)}}function art(e,t){let n;for(n in t)if(QSe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Dce(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+LD({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+LD({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+LD({start:t.start,end:t.end})+") is still open")}function urt(e){const t=this;t.parser=n;function n(r){return srt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function lrt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function crt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function frt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function drt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hrt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function prt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=UA(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function mrt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function grt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ZSe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function yrt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ZSe(e,t);const i={src:UA(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function vrt(e,t){const n={src:UA(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function brt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function xrt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ZSe(e,t);const i={href:UA(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function _rt(e,t){const n={href:UA(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function wrt(e,t,n){const r=e.all(t),i=n?Ert(n):eTe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Ert(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=eTe(n[r])}return t}function eTe(e){const t=e.spread;return t??e.children.length>1}function Srt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Trt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Crt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Art(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Irt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=og(t.children[1]),u=LB(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function krt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Rrt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Nce=9,Pce=32;function Drt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Oce(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Oce(t.slice(i),i>0,!1)),s.join("")}function Oce(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Nce||s===Pce;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Nce||s===Pce;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Nrt(e,t){const n={type:"text",value:Drt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Prt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Ort={blockquote:lrt,break:crt,code:frt,delete:drt,emphasis:hrt,footnoteReference:prt,heading:mrt,html:grt,imageReference:yrt,image:vrt,inlineCode:brt,linkReference:xrt,link:_rt,listItem:wrt,list:Srt,paragraph:Trt,root:Crt,strong:Art,table:Irt,tableCell:Rrt,tableRow:krt,text:Nrt,thematicBreak:Prt,toml:V4,yaml:V4,definition:V4,footnoteDefinition:V4};function V4(){}const tTe=-1,FB=0,eF=1,tF=2,rZ=3,iZ=4,sZ=5,oZ=6,nTe=7,rTe=8,Mce=typeof self=="object"?self:globalThis,Mrt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case FB:case tTe:return n(o,i);case eF:{const a=n([],i);for(const u of o)a.push(r(u));return a}case tF:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case rZ:return n(new Date(o),i);case iZ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case sZ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case oZ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case nTe:{const{name:a,message:u}=o;return n(new Mce[a](u),i)}case rTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Mce[s](o),i)};return r},Lce=e=>Mrt(new Map,e)(0),PT="",{toString:Lrt}={},{keys:$rt}=Object,Zk=e=>{const t=typeof e;if(t!=="object"||!e)return[FB,t];const n=Lrt.call(e).slice(8,-1);switch(n){case"Array":return[eF,PT];case"Object":return[tF,PT];case"Date":return[rZ,PT];case"RegExp":return[iZ,PT];case"Map":return[sZ,PT];case"Set":return[oZ,PT]}return n.includes("Array")?[eF,n]:n.includes("Error")?[nTe,n]:[tF,n]},H4=([e,t])=>e===FB&&(t==="function"||t==="symbol"),Frt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Zk(o);switch(a){case FB:{let c=o;switch(u){case"bigint":a=rTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([tTe],o)}return i([a,c],o)}case eF:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case tF:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of $rt(o))(e||!H4(Zk(o[d])))&&c.push([s(d),s(o[d])]);return f}case rZ:return i([a,o.toISOString()],o);case iZ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case sZ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(H4(Zk(d))||H4(Zk(h))))&&c.push([s(d),s(h)]);return f}case oZ:{const c=[],f=i([a,c],o);for(const d of o)(e||!H4(Zk(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},$ce=(e,{json:t,lossy:n}={})=>{const r=[];return Frt(!(t||n),!!t,new Map,r)(e),r},vC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Lce($ce(e,t)):structuredClone(e):(e,t)=>Lce($ce(e,t));function Brt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function jrt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Urt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Brt,r=e.options.footnoteBackLabel||jrt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=UA(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...vC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const iTe=function(e){if(e==null)return qrt;if(typeof e=="function")return BB(e);if(typeof e=="object")return Array.isArray(e)?zrt(e):Vrt(e);if(typeof e=="string")return Hrt(e);throw new Error("Expected function, string, or object as test")};function zrt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=iTe(e[n]);return BB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Vrt(e){const t=e;return BB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Hrt(e){return BB(t);function t(n){return n&&n.type===e}}function BB(e){return t;function t(n,r,i){return!!(Wrt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function qrt(){return!0}function Wrt(e){return e!==null&&typeof e=="object"&&"type"in e}const sTe=[],Grt=!0,Fce=!1,Yrt="skip";function Krt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=iTe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=sTe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Xrt(n(u,c)),h[0]===Fce))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==Yrt)for(m=(r?v.children.length:-1)+o,g=c.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=a(b,m,g)(),p[0]===Fce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Xrt(e){return Array.isArray(e)?e:typeof e=="number"?[Grt,e]:e==null?sTe:[e]}function aZ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Krt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const IW={}.hasOwnProperty,Qrt={};function Jrt(e,t){const n=t||Qrt,r=new Map,i=new Map,s=new Map,o={...Ort,...n.handlers},a={all:l,applyData:eit,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Zrt,wrap:nit};return aZ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(IW.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,v=vC(g);return v.children=a.all(c),v}return vC(c)}return(a.options.unknownHandler||tit)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Bce(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Bce(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Zrt(e,t){e.position&&(t.position=Oet(e))}function eit(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,vC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function tit(e,t){const n=t.data||{},r="value"in t&&!(IW.call(n,"hProperties")||IW.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function nit(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Bce(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function jce(e,t){const n=Jrt(e,t),r=n.one(e,void 0),i=Urt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function rit(e,t){return e&&"run"in e?async function(n,r){const i=jce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return jce(n,{file:r,...t||e})}}function Uce(e){if(e)throw e}var Iz,zce;function iit(){if(zce)return Iz;zce=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return Iz=function u(){var l,c,f,d,h,p,m=arguments[0],g=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<v;++g)if(l=arguments[g],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(b&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(b,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},Iz}var sit=iit();const kz=vh(sit);function kW(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oit(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?ait(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function ait(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const qm={basename:uit,dirname:lit,extname:cit,join:fit,sep:"/"};function uit(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');r3(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function lit(e){if(r3(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function cit(e){r3(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function fit(...e){let t=-1,n;for(;++t<e.length;)r3(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":dit(n)}function dit(e){r3(e);const t=e.codePointAt(0)===47;let n=hit(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function hit(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function r3(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const pit={cwd:mit};function mit(){return"/"}function RW(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function git(e){if(typeof e=="string")e=new URL(e);else if(!RW(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return yit(e)}function yit(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Rz=["history","path","basename","stem","extname","dirname"];class oTe{constructor(t){let n;t?RW(t)?n={path:t}:typeof t=="string"||vit(t)?n={value:t}:n=t:n={},this.cwd=pit.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Rz.length;){const s=Rz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Rz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qm.basename(this.path):void 0}set basename(t){Nz(t,"basename"),Dz(t,"basename"),this.path=qm.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?qm.dirname(this.path):void 0}set dirname(t){Vce(this.basename,"dirname"),this.path=qm.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?qm.extname(this.path):void 0}set extname(t){if(Dz(t,"extname"),Vce(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qm.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){RW(t)&&(t=git(t)),Nz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?qm.basename(this.path,this.extname):void 0}set stem(t){Nz(t,"stem"),Dz(t,"stem"),this.path=qm.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new yl(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Dz(e,t){if(e&&e.includes(qm.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qm.sep+"`")}function Nz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Vce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function vit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bit=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},xit={}.hasOwnProperty;class uZ extends bit{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=oit()}copy(){const t=new uZ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(kz(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Mz("data",this.frozen),this.namespace[t]=n,this):xit.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Mz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=q4(t),r=this.parser||this.Parser;return Pz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Pz("process",this.parser||this.Parser),Oz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=q4(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Eit(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Pz("processSync",this.parser||this.Parser),Oz("processSync",this.compiler||this.Compiler),this.process(t,i),qce("processSync","process",n),r;function i(s,o){n=!0,Uce(s),r=o}}run(t,n,r){Hce(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=q4(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),qce("runSync","run",r),i;function s(o,a){Uce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=q4(n),i=this.compiler||this.Compiler;return Oz("stringify",i),Hce(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Mz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=kz(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];kW(m)&&kW(h)&&(h=kz(!0,m,h)),r[d]=[l,h,...p]}}}}const _it=new uZ().freeze();function Pz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Oz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Mz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Hce(e){if(!kW(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function qce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function q4(e){return wit(e)?e:new oTe(e)}function wit(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Eit(e){return typeof e=="string"||Sit(e)}function Sit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Tit="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Wce=[],Gce={allowDangerousHtml:!0},Cit=/^(https?|ircs?|mailto|xmpp)$/i,Ait=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Iit(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Wce,u=e.remarkPlugins||Wce,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Gce}:Gce,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||kit,h=_it().use(urt).use(u).use(rit,l).use(a),p=new oTe;typeof r=="string"&&(p.value=r);for(const b of Ait)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+Tit+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),aZ(g,v),jet(g,{Fragment:S.Fragment,components:s,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let T;for(T in Tz)if(Object.hasOwn(Tz,T)&&Object.hasOwn(b.properties,T)){const C=b.properties[T],I=Tz[T];(I===null||I.includes(b.tagName))&&(b.properties[T]=d(String(C||""),T,b))}}if(b.type==="element"){let T=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!T&&n&&typeof w=="number"&&(T=!n(b,w,E)),T&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function kit(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Cit.test(e.slice(0,t))?e:""}const Yce=/[#.]/g;function Rit(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Yce.lastIndex=i;const a=Yce.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Dit=new Set(["button","menu","reset","submit"]),DW={}.hasOwnProperty;function aTe(e,t,n){const r=n&&Mit(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Rit(s,t),l.tagName=l.tagName.toLowerCase(),r&&DW.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Nit(o,l.tagName)){let c;for(c in o)DW.call(o,c)&&Pit(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)NW(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Nit(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Dit.has(e.type.toLowerCase()):!("value"in e)}function Pit(e,t,n,r){const i=MB(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=pce(r):i.commaSeparated?o=lce(r):i.commaOrSpaceSeparated?o=pce(lce(r).join(" ")):o=Kce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Oit(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Kce(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function NW(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)NW(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?NW(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Kce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||SN(n)===SN(t)))return!0}return n}function Oit(e){const t=[];let n;for(n in e)DW.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Mit(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Lit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],$it=aTe(n3,"div"),Fit=aTe(bx,"g",Lit),Lz=/\r?\n|\r/g;function Bit(e){const t=String(e),n=[];for(Lz.lastIndex=0;Lz.test(t);)n.push(Lz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const xw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},uTe={}.hasOwnProperty,jit=Object.prototype;function Uit(e,t){const n=t;return lZ({file:n.file||void 0,location:!1,schema:n.space==="svg"?bx:n3,verbose:n.verbose||!1},e)}function lZ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},iL(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:lTe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Bit(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},iL(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},iL(e,r,n),n}default:return n=zit(e,t),n}}function lTe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=lZ(e,t[n]);r.push(i)}return r}function zit(e,t){const n=e.schema;e.schema=t.namespaceURI===xw.svg?bx:n3;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;uTe.call(jit,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Fit:$it)(t.tagName,i,lTe(e,t.childNodes));if(iL(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&b2(u.startTag),c=u&&u.endTag&&b2(u.endTag),f=lZ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function iL(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Vit(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Vit(e,t,n){const r=b2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)uTe.call(n.attrs,o)&&(s[MB(e.schema,o).property]=b2(n.attrs[o]));n.startTag;const a=b2(n.startTag),u=n.endTag?b2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function b2(e){const t=Xce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Xce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Xce(e){return e.line&&e.column?e:void 0}const Qce={}.hasOwnProperty;function cTe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Qce.call(i,e)){const u=String(i[e]);o=Qce.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Hit={}.hasOwnProperty,fTe=cTe("type",{handlers:{root:Wit,element:Qit,text:Kit,comment:Xit,doctype:Yit}});function qit(e,t){const r=t.space;return fTe(e,r==="svg"?bx:n3)}function Wit(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=cZ(e.children,n,t),zA(e,n),n}function Git(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=cZ(e.children,n,t),zA(e,n),n}function Yit(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return zA(e,t),t}function Kit(e){const t={nodeName:"#text",value:e.value,parentNode:null};return zA(e,t),t}function Xit(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return zA(e,t),t}function Qit(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=bx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Hit.call(e.properties,s)){const u=Jit(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:xw[o],childNodes:[],parentNode:null};return a.childNodes=cZ(e.children,a,r),zA(e,a),e.tagName==="template"&&e.content&&(a.content=Git(e.content,r)),a}function Jit(e,t,n){const r=MB(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?TSe(n):OSe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=xw[r.space]}return i}function cZ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=fTe(e[r],n);s.parentNode=t,i.push(s)}return i}function zA(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Zit=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],est=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Rs="";var de;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(de=de||(de={}));const Rc={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function dTe(e){return e>=55296&&e<=57343}function tst(e){return e>=56320&&e<=57343}function nst(e,t){return(e-55296)*1024+9216+t}function hTe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function pTe(e){return e>=64976&&e<=65007||est.has(e)}var et;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(et=et||(et={}));const rst=65536;class ist{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=rst,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(tst(n))return this.pos++,this._addGap(),nst(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,de.EOF;return this._err(et.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;const r=this.html.charCodeAt(n);return r===de.CARRIAGE_RETURN?de.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;let t=this.html.charCodeAt(this.pos);return t===de.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,de.LINE_FEED):t===de.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,dTe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===de.LINE_FEED||t===de.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){hTe(t)?this._err(et.controlCharacterInInputStream):pTe(t)&&this._err(et.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(wr=wr||(wr={}));function mTe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Rv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),sst=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var $z;const ost=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ast=($z=String.fromCodePoint)!==null&&$z!==void 0?$z:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function ust(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ost.get(e))!==null&&t!==void 0?t:e}var La;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(La||(La={}));const lst=32;var p0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(p0||(p0={}));function PW(e){return e>=La.ZERO&&e<=La.NINE}function cst(e){return e>=La.UPPER_A&&e<=La.UPPER_F||e>=La.LOWER_A&&e<=La.LOWER_F}function fst(e){return e>=La.UPPER_A&&e<=La.UPPER_Z||e>=La.LOWER_A&&e<=La.LOWER_Z||PW(e)}function dst(e){return e===La.EQUALS||fst(e)}var Ra;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ra||(Ra={}));var aw;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(aw||(aw={}));class hst{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ra.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=aw.Strict}startEntity(t){this.decodeMode=t,this.state=Ra.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ra.EntityStart:return t.charCodeAt(n)===La.NUM?(this.state=Ra.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ra.NamedEntity,this.stateNamedEntity(t,n));case Ra.NumericStart:return this.stateNumericStart(t,n);case Ra.NumericDecimal:return this.stateNumericDecimal(t,n);case Ra.NumericHex:return this.stateNumericHex(t,n);case Ra.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|lst)===La.LOWER_X?(this.state=Ra.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ra.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PW(i)||cst(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PW(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===La.SEMI)this.consumed+=1;else if(this.decodeMode===aw.Strict)return 0;return this.emitCodePoint(ust(this.result),this.consumed),this.errors&&(t!==La.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&p0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=yTe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===aw.Attribute&&(s===0||dst(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&p0.VALUE_LENGTH)>>14,s!==0){if(o===La.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==aw.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&p0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~p0.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ra.NamedEntity:return this.result!==0&&(this.decodeMode!==aw.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ra.NumericDecimal:return this.emitNumericEntity(0,2);case Ra.NumericHex:return this.emitNumericEntity(0,3);case Ra.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ra.EntityStart:return 0}}}function gTe(e){let t="";const n=new hst(e,r=>t+=ast(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function yTe(e,t,n,r){const i=(t&p0.BRANCH_LENGTH)>>7,s=t&p0.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}gTe(Rv);gTe(sst);var ct;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ct=ct||(ct={}));var cb;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(cb=cb||(cb={}));var Hf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Hf=Hf||(Hf={}));var He;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(He=He||(He={}));var B;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(B=B||(B={}));const pst=new Map([[He.A,B.A],[He.ADDRESS,B.ADDRESS],[He.ANNOTATION_XML,B.ANNOTATION_XML],[He.APPLET,B.APPLET],[He.AREA,B.AREA],[He.ARTICLE,B.ARTICLE],[He.ASIDE,B.ASIDE],[He.B,B.B],[He.BASE,B.BASE],[He.BASEFONT,B.BASEFONT],[He.BGSOUND,B.BGSOUND],[He.BIG,B.BIG],[He.BLOCKQUOTE,B.BLOCKQUOTE],[He.BODY,B.BODY],[He.BR,B.BR],[He.BUTTON,B.BUTTON],[He.CAPTION,B.CAPTION],[He.CENTER,B.CENTER],[He.CODE,B.CODE],[He.COL,B.COL],[He.COLGROUP,B.COLGROUP],[He.DD,B.DD],[He.DESC,B.DESC],[He.DETAILS,B.DETAILS],[He.DIALOG,B.DIALOG],[He.DIR,B.DIR],[He.DIV,B.DIV],[He.DL,B.DL],[He.DT,B.DT],[He.EM,B.EM],[He.EMBED,B.EMBED],[He.FIELDSET,B.FIELDSET],[He.FIGCAPTION,B.FIGCAPTION],[He.FIGURE,B.FIGURE],[He.FONT,B.FONT],[He.FOOTER,B.FOOTER],[He.FOREIGN_OBJECT,B.FOREIGN_OBJECT],[He.FORM,B.FORM],[He.FRAME,B.FRAME],[He.FRAMESET,B.FRAMESET],[He.H1,B.H1],[He.H2,B.H2],[He.H3,B.H3],[He.H4,B.H4],[He.H5,B.H5],[He.H6,B.H6],[He.HEAD,B.HEAD],[He.HEADER,B.HEADER],[He.HGROUP,B.HGROUP],[He.HR,B.HR],[He.HTML,B.HTML],[He.I,B.I],[He.IMG,B.IMG],[He.IMAGE,B.IMAGE],[He.INPUT,B.INPUT],[He.IFRAME,B.IFRAME],[He.KEYGEN,B.KEYGEN],[He.LABEL,B.LABEL],[He.LI,B.LI],[He.LINK,B.LINK],[He.LISTING,B.LISTING],[He.MAIN,B.MAIN],[He.MALIGNMARK,B.MALIGNMARK],[He.MARQUEE,B.MARQUEE],[He.MATH,B.MATH],[He.MENU,B.MENU],[He.META,B.META],[He.MGLYPH,B.MGLYPH],[He.MI,B.MI],[He.MO,B.MO],[He.MN,B.MN],[He.MS,B.MS],[He.MTEXT,B.MTEXT],[He.NAV,B.NAV],[He.NOBR,B.NOBR],[He.NOFRAMES,B.NOFRAMES],[He.NOEMBED,B.NOEMBED],[He.NOSCRIPT,B.NOSCRIPT],[He.OBJECT,B.OBJECT],[He.OL,B.OL],[He.OPTGROUP,B.OPTGROUP],[He.OPTION,B.OPTION],[He.P,B.P],[He.PARAM,B.PARAM],[He.PLAINTEXT,B.PLAINTEXT],[He.PRE,B.PRE],[He.RB,B.RB],[He.RP,B.RP],[He.RT,B.RT],[He.RTC,B.RTC],[He.RUBY,B.RUBY],[He.S,B.S],[He.SCRIPT,B.SCRIPT],[He.SECTION,B.SECTION],[He.SELECT,B.SELECT],[He.SOURCE,B.SOURCE],[He.SMALL,B.SMALL],[He.SPAN,B.SPAN],[He.STRIKE,B.STRIKE],[He.STRONG,B.STRONG],[He.STYLE,B.STYLE],[He.SUB,B.SUB],[He.SUMMARY,B.SUMMARY],[He.SUP,B.SUP],[He.TABLE,B.TABLE],[He.TBODY,B.TBODY],[He.TEMPLATE,B.TEMPLATE],[He.TEXTAREA,B.TEXTAREA],[He.TFOOT,B.TFOOT],[He.TD,B.TD],[He.TH,B.TH],[He.THEAD,B.THEAD],[He.TITLE,B.TITLE],[He.TR,B.TR],[He.TRACK,B.TRACK],[He.TT,B.TT],[He.U,B.U],[He.UL,B.UL],[He.SVG,B.SVG],[He.VAR,B.VAR],[He.WBR,B.WBR],[He.XMP,B.XMP]]);function VA(e){var t;return(t=pst.get(e))!==null&&t!==void 0?t:B.UNKNOWN}const Nt=B,mst={[ct.HTML]:new Set([Nt.ADDRESS,Nt.APPLET,Nt.AREA,Nt.ARTICLE,Nt.ASIDE,Nt.BASE,Nt.BASEFONT,Nt.BGSOUND,Nt.BLOCKQUOTE,Nt.BODY,Nt.BR,Nt.BUTTON,Nt.CAPTION,Nt.CENTER,Nt.COL,Nt.COLGROUP,Nt.DD,Nt.DETAILS,Nt.DIR,Nt.DIV,Nt.DL,Nt.DT,Nt.EMBED,Nt.FIELDSET,Nt.FIGCAPTION,Nt.FIGURE,Nt.FOOTER,Nt.FORM,Nt.FRAME,Nt.FRAMESET,Nt.H1,Nt.H2,Nt.H3,Nt.H4,Nt.H5,Nt.H6,Nt.HEAD,Nt.HEADER,Nt.HGROUP,Nt.HR,Nt.HTML,Nt.IFRAME,Nt.IMG,Nt.INPUT,Nt.LI,Nt.LINK,Nt.LISTING,Nt.MAIN,Nt.MARQUEE,Nt.MENU,Nt.META,Nt.NAV,Nt.NOEMBED,Nt.NOFRAMES,Nt.NOSCRIPT,Nt.OBJECT,Nt.OL,Nt.P,Nt.PARAM,Nt.PLAINTEXT,Nt.PRE,Nt.SCRIPT,Nt.SECTION,Nt.SELECT,Nt.SOURCE,Nt.STYLE,Nt.SUMMARY,Nt.TABLE,Nt.TBODY,Nt.TD,Nt.TEMPLATE,Nt.TEXTAREA,Nt.TFOOT,Nt.TH,Nt.THEAD,Nt.TITLE,Nt.TR,Nt.TRACK,Nt.UL,Nt.WBR,Nt.XMP]),[ct.MATHML]:new Set([Nt.MI,Nt.MO,Nt.MN,Nt.MS,Nt.MTEXT,Nt.ANNOTATION_XML]),[ct.SVG]:new Set([Nt.TITLE,Nt.FOREIGN_OBJECT,Nt.DESC]),[ct.XLINK]:new Set,[ct.XML]:new Set,[ct.XMLNS]:new Set};function vTe(e){return e===Nt.H1||e===Nt.H2||e===Nt.H3||e===Nt.H4||e===Nt.H5||e===Nt.H6}He.STYLE,He.SCRIPT,He.XMP,He.IFRAME,He.NOEMBED,He.NOFRAMES,He.PLAINTEXT;const gst=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var me;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(me||(me={}));const ko={DATA:me.DATA,RCDATA:me.RCDATA,RAWTEXT:me.RAWTEXT,SCRIPT_DATA:me.SCRIPT_DATA,PLAINTEXT:me.PLAINTEXT,CDATA_SECTION:me.CDATA_SECTION};function FD(e){return e>=de.DIGIT_0&&e<=de.DIGIT_9}function qR(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_Z}function yst(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_Z}function Dv(e){return yst(e)||qR(e)}function OW(e){return Dv(e)||FD(e)}function bTe(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_F}function xTe(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_F}function vst(e){return FD(e)||bTe(e)||xTe(e)}function W4(e){return e+32}function _Te(e){return e===de.SPACE||e===de.LINE_FEED||e===de.TABULATION||e===de.FORM_FEED}function bst(e){return e===de.EQUALS_SIGN||OW(e)}function Jce(e){return _Te(e)||e===de.SOLIDUS||e===de.GREATER_THAN_SIGN}class xst{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=me.DATA,this.returnState=me.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new ist(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wr.START_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wr.END_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:wr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:wr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(mTe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(et.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=VA(t.tagName),t.type===wr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(et.endTagWithAttributes),t.selfClosing&&this._err(et.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case wr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:wr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=_Te(t)?wr.WHITESPACE_CHARACTER:t===de.NULL?wr.NULL_CHARACTER:wr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(wr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Rv[0];s>=0&&(s=yTe(Rv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Rv[s];const a=o&p0.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==de.SEMICOLON&&this._isCharacterReferenceInAttribute()&&bst(this.preprocessor.peek(1))?(n=[de.AMPERSAND],s+=u):(n=u===0?[Rv[s]&~p0.VALUE_LENGTH]:u===1?[Rv[++s]]:[Rv[++s],Rv[++s]],r=0,i=t!==de.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(et.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===me.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case me.DATA:{this._stateData(t);break}case me.RCDATA:{this._stateRcdata(t);break}case me.RAWTEXT:{this._stateRawtext(t);break}case me.SCRIPT_DATA:{this._stateScriptData(t);break}case me.PLAINTEXT:{this._statePlaintext(t);break}case me.TAG_OPEN:{this._stateTagOpen(t);break}case me.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case me.TAG_NAME:{this._stateTagName(t);break}case me.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case me.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case me.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case me.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case me.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case me.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case me.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case me.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case me.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case me.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case me.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case me.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case me.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case me.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case me.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case me.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case me.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case me.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case me.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case me.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case me.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case me.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case me.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case me.BOGUS_COMMENT:{this._stateBogusComment(t);break}case me.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case me.COMMENT_START:{this._stateCommentStart(t);break}case me.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case me.COMMENT:{this._stateComment(t);break}case me.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case me.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case me.COMMENT_END:{this._stateCommentEnd(t);break}case me.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case me.DOCTYPE:{this._stateDoctype(t);break}case me.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case me.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case me.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case me.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case me.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case me.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case me.CDATA_SECTION:{this._stateCdataSection(t);break}case me.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case me.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case me.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case me.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case me.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case me.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case me.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case me.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.TAG_OPEN;break}case de.AMPERSAND:{this.returnState=me.DATA,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitCodePoint(t);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case de.AMPERSAND:{this.returnState=me.RCDATA,this.state=me.CHARACTER_REFERENCE;break}case de.LESS_THAN_SIGN:{this.state=me.RCDATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.RAWTEXT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Dv(t))this._createStartTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.EXCLAMATION_MARK:{this.state=me.MARKUP_DECLARATION_OPEN;break}case de.SOLIDUS:{this.state=me.END_TAG_OPEN;break}case de.QUESTION_MARK:{this._err(et.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t);break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=me.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Dv(t))this._createEndTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.GREATER_THAN_SIGN:{this._err(et.missingEndTagName),this.state=me.DATA;break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.tagName+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(qR(t)?W4(t):t)}}_stateRcdataLessThanSign(t){t===de.SOLIDUS?this.state=me.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Dv(t)?(this.state=me.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=me.BEFORE_ATTRIBUTE_NAME,!1;case de.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=me.SELF_CLOSING_START_TAG,!1;case de.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=me.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===de.SOLIDUS?this.state=me.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Dv(t)?(this.state=me.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case de.SOLIDUS:{this.state=me.SCRIPT_DATA_END_TAG_OPEN;break}case de.EXCLAMATION_MARK:{this.state=me.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=me.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Dv(t)?(this.state=me.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===de.SOLIDUS?this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Dv(t)?(this._emitChars("<"),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Dv(t)?(this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Rc.SCRIPT,!1)&&Jce(this.preprocessor.peek(Rc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Rc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===de.SOLIDUS?(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Rc.SCRIPT,!1)&&Jce(this.preprocessor.peek(Rc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Rc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._err(et.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=me.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this._leaveAttrName(),this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._leaveAttrName(),this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:{this._err(et.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.name+=Rs;break}default:this.currentAttr.name+=String.fromCodePoint(qR(t)?W4(t):t)}}_stateAfterAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.EQUALS_SIGN:{this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{this.state=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this.state=me.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingAttributeValue),this.state=me.DATA,this.emitCurrentTagToken();break}default:this.state=me.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case de.APOSTROPHE:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_UNQUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:case de.EQUALS_SIGN:case de.GRAVE_ACCENT:{this._err(et.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this._leaveAttrValue(),this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBetweenAttributes),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case de.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.unexpectedSolidusInTag),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Rs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Rc.DASH_DASH,!0)?(this._createCommentToken(Rc.DASH_DASH.length+1),this.state=me.COMMENT_START):this._consumeSequenceIfMatch(Rc.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Rc.DOCTYPE.length+1),this.state=me.DOCTYPE):this._consumeSequenceIfMatch(Rc.CDATA_START,!0)?this.inForeignNode?this.state=me.CDATA_SECTION:(this._err(et.cdataInHtmlContent),this._createCommentToken(Rc.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=me.BOGUS_COMMENT):this._ensureHibernation()||(this._err(et.incorrectlyOpenedComment),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_START_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END_DASH;break}case de.LESS_THAN_SIGN:{n.data+="<",this.state=me.COMMENT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Rs;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case de.EXCLAMATION_MARK:{n.data+="!",this.state=me.COMMENT_LESS_THAN_SIGN_BANG;break}case de.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=me.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=me.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==de.GREATER_THAN_SIGN&&t!==de.EOF&&this._err(et.nestedComment),this.state=me.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EXCLAMATION_MARK:{this.state=me.COMMENT_END_BANG;break}case de.HYPHEN_MINUS:{n.data+="-";break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{n.data+="--!",this.state=me.COMMENT_END_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.incorrectlyClosedComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=me.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBeforeDoctypeName),this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(qR(t))this._createDoctypeToken(String.fromCharCode(W4(t))),this.state=me.DOCTYPE_NAME;else switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.NULL:{this._err(et.unexpectedNullCharacter),this._createDoctypeToken(Rs),this.state=me.DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=me.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.AFTER_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.name+=Rs;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(qR(t)?W4(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Rc.PUBLIC,!1)?this.state=me.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Rc.SYSTEM,!1)?this.state=me.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(et.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.NULL:{this._err(et.unexpectedNullCharacter);break}case de.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case de.RIGHT_SQUARE_BRACKET:{this.state=me.CDATA_SECTION_BRACKET;break}case de.EOF:{this._err(et.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===de.RIGHT_SQUARE_BRACKET?this.state=me.CDATA_SECTION_END:(this._emitChars("]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA;break}case de.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===de.NUMBER_SIGN?this.state=me.NUMERIC_CHARACTER_REFERENCE:OW(t)?(this.state=me.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this.state=me.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){OW(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===de.SEMICOLON&&this._err(et.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===de.LATIN_SMALL_X||t===de.LATIN_CAPITAL_X?this.state=me.HEXADEMICAL_CHARACTER_REFERENCE_START:FD(t)?(this.state=me.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){vst(t)?(this.state=me.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){bTe(t)?this.charRefCode=this.charRefCode*16+t-55:xTe(t)?this.charRefCode=this.charRefCode*16+t-87:FD(t)?this.charRefCode=this.charRefCode*16+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){FD(t)?this.charRefCode=this.charRefCode*10+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===de.NULL)this._err(et.nullCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(et.characterReferenceOutsideUnicodeRange),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(dTe(this.charRefCode))this._err(et.surrogateCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(pTe(this.charRefCode))this._err(et.noncharacterCharacterReference);else if(hTe(this.charRefCode)||this.charRefCode===de.CARRIAGE_RETURN){this._err(et.controlCharacterReference);const n=gst.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const wTe=new Set([B.DD,B.DT,B.LI,B.OPTGROUP,B.OPTION,B.P,B.RB,B.RP,B.RT,B.RTC]),Zce=new Set([...wTe,B.CAPTION,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]),G4=new Map([[B.APPLET,ct.HTML],[B.CAPTION,ct.HTML],[B.HTML,ct.HTML],[B.MARQUEE,ct.HTML],[B.OBJECT,ct.HTML],[B.TABLE,ct.HTML],[B.TD,ct.HTML],[B.TEMPLATE,ct.HTML],[B.TH,ct.HTML],[B.ANNOTATION_XML,ct.MATHML],[B.MI,ct.MATHML],[B.MN,ct.MATHML],[B.MO,ct.MATHML],[B.MS,ct.MATHML],[B.MTEXT,ct.MATHML],[B.DESC,ct.SVG],[B.FOREIGN_OBJECT,ct.SVG],[B.TITLE,ct.SVG]]),_st=[B.H1,B.H2,B.H3,B.H4,B.H5,B.H6],wst=[B.TR,B.TEMPLATE,B.HTML],Est=[B.TBODY,B.TFOOT,B.THEAD,B.TEMPLATE,B.HTML],Sst=[B.TABLE,B.TEMPLATE,B.HTML],Tst=[B.TD,B.TH];class Cst{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=B.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===B.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ct.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ct.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(_st,ct.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Tst,ct.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Sst,ct.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Est,ct.HTML)}clearBackToTableRowContext(){this.clearBackTo(wst,ct.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===B.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===B.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if(G4.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(vTe(n)&&r===ct.HTML)return!0;if(G4.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if((r===B.UL||r===B.OL)&&i===ct.HTML||G4.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if(r===B.BUTTON&&i===ct.HTML||G4.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ct.HTML){if(r===t)return!0;if(r===B.TABLE||r===B.TEMPLATE||r===B.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ct.HTML){if(n===B.TBODY||n===B.THEAD||n===B.TFOOT)return!0;if(n===B.TABLE||n===B.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ct.HTML){if(r===t)return!0;if(r!==B.OPTION&&r!==B.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;wTe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Zce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Zce.has(this.currentTagId);)this.pop()}}const Fz=3;var mp;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(mp=mp||(mp={}));const efe={type:mp.Marker};class Ast{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===mp.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Fz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Fz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Fz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(efe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:mp.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:mp.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(efe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===mp.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===mp.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===mp.Element&&n.element===t)}}function tfe(e){return{nodeName:"#text",value:e,parentNode:null}}const o2={createDocument(){return{nodeName:"#document",mode:Hf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};o2.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(o2.isTextNode(n)){n.value+=t;return}}o2.appendChild(e,tfe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&o2.isTextNode(r)?r.value+=t:o2.insertBefore(e,tfe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},ETe="html",Ist="about:legacy-compat",kst="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",STe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Rst=[...STe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Dst=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),TTe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Nst=[...TTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function nfe(e,t){return t.some(n=>e.startsWith(n))}function Pst(e){return e.name===ETe&&e.publicId===null&&(e.systemId===null||e.systemId===Ist)}function Ost(e){if(e.name!==ETe)return Hf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===kst)return Hf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Dst.has(n))return Hf.QUIRKS;let r=t===null?Rst:STe;if(nfe(n,r))return Hf.QUIRKS;if(r=t===null?TTe:Nst,nfe(n,r))return Hf.LIMITED_QUIRKS}return Hf.NO_QUIRKS}const rfe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Mst="definitionurl",Lst="definitionURL",$st=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Fst=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ct.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ct.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ct.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ct.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ct.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ct.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ct.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ct.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ct.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ct.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ct.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ct.XMLNS}]]),Bst=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),jst=new Set([B.B,B.BIG,B.BLOCKQUOTE,B.BODY,B.BR,B.CENTER,B.CODE,B.DD,B.DIV,B.DL,B.DT,B.EM,B.EMBED,B.H1,B.H2,B.H3,B.H4,B.H5,B.H6,B.HEAD,B.HR,B.I,B.IMG,B.LI,B.LISTING,B.MENU,B.META,B.NOBR,B.OL,B.P,B.PRE,B.RUBY,B.S,B.SMALL,B.SPAN,B.STRONG,B.STRIKE,B.SUB,B.SUP,B.TABLE,B.TT,B.U,B.UL,B.VAR]);function Ust(e){const t=e.tagID;return t===B.FONT&&e.attrs.some(({name:r})=>r===cb.COLOR||r===cb.SIZE||r===cb.FACE)||jst.has(t)}function CTe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Mst){e.attrs[t].name=Lst;break}}function ATe(e){for(let t=0;t<e.attrs.length;t++){const n=$st.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function fZ(e){for(let t=0;t<e.attrs.length;t++){const n=Fst.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function zst(e){const t=Bst.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=VA(e.tagName))}function Vst(e,t){return t===ct.MATHML&&(e===B.MI||e===B.MO||e===B.MN||e===B.MS||e===B.MTEXT)}function Hst(e,t,n){if(t===ct.MATHML&&e===B.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===cb.ENCODING){const i=n[r].value.toLowerCase();return i===rfe.TEXT_HTML||i===rfe.APPLICATION_XML}}return t===ct.SVG&&(e===B.FOREIGN_OBJECT||e===B.DESC||e===B.TITLE)}function qst(e,t,n,r){return(!r||r===ct.HTML)&&Hst(e,t,n)||(!r||r===ct.MATHML)&&Vst(e,t)}const Wst="hidden",Gst=8,Yst=3;var Ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Ee||(Ee={}));const Kst={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},ITe=new Set([B.TABLE,B.TBODY,B.TFOOT,B.THEAD,B.TR]),ife={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:o2,onParseError:null};let sfe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Ee.INITIAL,this.originalInsertionMode=Ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...ife,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new xst(this.options,this),this.activeFormattingElements=new Ast(this.treeAdapter),this.fragmentContextID=r?VA(this.treeAdapter.getTagName(r)):B.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Cst(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...ife,...n};t??(t=r.treeAdapter.createElement(He.TEMPLATE,ct.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ct.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===B.TEMPLATE&&s.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Kst,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ct.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ct.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Ee.TEXT}switchToPlaintextParsing(){this.insertionMode=Ee.TEXT,this.originalInsertionMode=Ee.IN_BODY,this.tokenizer.state=ko.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===He.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ct.HTML))switch(this.fragmentContextID){case B.TITLE:case B.TEXTAREA:{this.tokenizer.state=ko.RCDATA;break}case B.STYLE:case B.XMP:case B.IFRAME:case B.NOEMBED:case B.NOFRAMES:case B.NOSCRIPT:{this.tokenizer.state=ko.RAWTEXT;break}case B.SCRIPT:{this.tokenizer.state=ko.SCRIPT_DATA;break}case B.PLAINTEXT:{this.tokenizer.state=ko.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ct.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ct.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(He.HTML,ct.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,B.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===wr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===B.SVG&&this.treeAdapter.getTagName(n)===He.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ct.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===B.MGLYPH||t.tagID===B.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ct.HTML)}_processToken(t){switch(t.type){case wr.CHARACTER:{this.onCharacter(t);break}case wr.NULL_CHARACTER:{this.onNullCharacter(t);break}case wr.COMMENT:{this.onComment(t);break}case wr.DOCTYPE:{this.onDoctype(t);break}case wr.START_TAG:{this._processStartTag(t);break}case wr.END_TAG:{this.onEndTag(t);break}case wr.EOF:{this.onEof(t);break}case wr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return qst(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===mp.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(B.P),this.openElements.popUntilTagNamePopped(B.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case B.TR:{this.insertionMode=Ee.IN_ROW;return}case B.TBODY:case B.THEAD:case B.TFOOT:{this.insertionMode=Ee.IN_TABLE_BODY;return}case B.CAPTION:{this.insertionMode=Ee.IN_CAPTION;return}case B.COLGROUP:{this.insertionMode=Ee.IN_COLUMN_GROUP;return}case B.TABLE:{this.insertionMode=Ee.IN_TABLE;return}case B.BODY:{this.insertionMode=Ee.IN_BODY;return}case B.FRAMESET:{this.insertionMode=Ee.IN_FRAMESET;return}case B.SELECT:{this._resetInsertionModeForSelect(t);return}case B.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case B.HTML:{this.insertionMode=this.headElement?Ee.AFTER_HEAD:Ee.BEFORE_HEAD;return}case B.TD:case B.TH:{if(t>0){this.insertionMode=Ee.IN_CELL;return}break}case B.HEAD:{if(t>0){this.insertionMode=Ee.IN_HEAD;return}break}}this.insertionMode=Ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===B.TEMPLATE)break;if(r===B.TABLE){this.insertionMode=Ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=Ee.IN_SELECT}_isElementCausesFosterParenting(t){return ITe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case B.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ct.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case B.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return mst[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Tat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{eR(this,t);break}case Ee.BEFORE_HTML:{BD(this,t);break}case Ee.BEFORE_HEAD:{jD(this,t);break}case Ee.IN_HEAD:{UD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{zD(this,t);break}case Ee.AFTER_HEAD:{VD(this,t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:{RTe(this,t);break}case Ee.TEXT:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Bz(this,t);break}case Ee.IN_TABLE_TEXT:{LTe(this,t);break}case Ee.IN_COLUMN_GROUP:{nF(this,t);break}case Ee.AFTER_BODY:{rF(this,t);break}case Ee.AFTER_AFTER_BODY:{sL(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Sat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{eR(this,t);break}case Ee.BEFORE_HTML:{BD(this,t);break}case Ee.BEFORE_HEAD:{jD(this,t);break}case Ee.IN_HEAD:{UD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{zD(this,t);break}case Ee.AFTER_HEAD:{VD(this,t);break}case Ee.TEXT:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Bz(this,t);break}case Ee.IN_COLUMN_GROUP:{nF(this,t);break}case Ee.AFTER_BODY:{rF(this,t);break}case Ee.AFTER_AFTER_BODY:{sL(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){MW(this,t);return}switch(this.insertionMode){case Ee.INITIAL:case Ee.BEFORE_HTML:case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_TEMPLATE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{MW(this,t);break}case Ee.IN_TABLE_TEXT:{tR(this,t);break}case Ee.AFTER_BODY:{not(this,t);break}case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{rot(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Ee.INITIAL:{iot(this,t);break}case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:{this._err(t,et.misplacedDoctype);break}case Ee.IN_TABLE_TEXT:{tR(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,et.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Cat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{eR(this,t);break}case Ee.BEFORE_HTML:{sot(this,t);break}case Ee.BEFORE_HEAD:{aot(this,t);break}case Ee.IN_HEAD:{tm(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{cot(this,t);break}case Ee.AFTER_HEAD:{dot(this,t);break}case Ee.IN_BODY:{vl(this,t);break}case Ee.IN_TABLE:{bC(this,t);break}case Ee.IN_TABLE_TEXT:{tR(this,t);break}case Ee.IN_CAPTION:{uat(this,t);break}case Ee.IN_COLUMN_GROUP:{pZ(this,t);break}case Ee.IN_TABLE_BODY:{zB(this,t);break}case Ee.IN_ROW:{VB(this,t);break}case Ee.IN_CELL:{fat(this,t);break}case Ee.IN_SELECT:{BTe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{hat(this,t);break}case Ee.IN_TEMPLATE:{mat(this,t);break}case Ee.AFTER_BODY:{yat(this,t);break}case Ee.IN_FRAMESET:{vat(this,t);break}case Ee.AFTER_FRAMESET:{xat(this,t);break}case Ee.AFTER_AFTER_BODY:{wat(this,t);break}case Ee.AFTER_AFTER_FRAMESET:{Eat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Aat(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{eR(this,t);break}case Ee.BEFORE_HTML:{oot(this,t);break}case Ee.BEFORE_HEAD:{uot(this,t);break}case Ee.IN_HEAD:{lot(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{fot(this,t);break}case Ee.AFTER_HEAD:{hot(this,t);break}case Ee.IN_BODY:{UB(this,t);break}case Ee.TEXT:{Jot(this,t);break}case Ee.IN_TABLE:{CN(this,t);break}case Ee.IN_TABLE_TEXT:{tR(this,t);break}case Ee.IN_CAPTION:{lat(this,t);break}case Ee.IN_COLUMN_GROUP:{cat(this,t);break}case Ee.IN_TABLE_BODY:{LW(this,t);break}case Ee.IN_ROW:{FTe(this,t);break}case Ee.IN_CELL:{dat(this,t);break}case Ee.IN_SELECT:{jTe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{pat(this,t);break}case Ee.IN_TEMPLATE:{gat(this,t);break}case Ee.AFTER_BODY:{zTe(this,t);break}case Ee.IN_FRAMESET:{bat(this,t);break}case Ee.AFTER_FRAMESET:{_at(this,t);break}case Ee.AFTER_AFTER_BODY:{sL(this,t);break}}}onEof(t){switch(this.insertionMode){case Ee.INITIAL:{eR(this,t);break}case Ee.BEFORE_HTML:{BD(this,t);break}case Ee.BEFORE_HEAD:{jD(this,t);break}case Ee.IN_HEAD:{UD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{zD(this,t);break}case Ee.AFTER_HEAD:{VD(this,t);break}case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{OTe(this,t);break}case Ee.TEXT:{Zot(this,t);break}case Ee.IN_TABLE_TEXT:{tR(this,t);break}case Ee.IN_TEMPLATE:{UTe(this,t);break}case Ee.AFTER_BODY:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{hZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===de.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.TEXT:case Ee.IN_COLUMN_GROUP:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:case Ee.AFTER_BODY:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{kTe(this,t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Bz(this,t);break}case Ee.IN_TABLE_TEXT:{MTe(this,t);break}}}};function Xst(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):PTe(e,t),n}function Qst(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Jst(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Yst;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Zst(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Zst(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function eot(e,t,n){const r=e.treeAdapter.getTagName(t),i=VA(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===B.TEMPLATE&&s===ct.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function tot(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function dZ(e,t){for(let n=0;n<Gst;n++){const r=Xst(e,t);if(!r)break;const i=Qst(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Jst(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&eot(e,o,s),tot(e,i,r)}}function MW(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function not(e,t){e._appendCommentNode(t,e.openElements.items[0])}function rot(e,t){e._appendCommentNode(t,e.document)}function hZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function iot(e,t){e._setDocumentType(t);const n=t.forceQuirks?Hf.QUIRKS:Ost(t);Pst(t)||e._err(t,et.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Ee.BEFORE_HTML}function eR(e,t){e._err(t,et.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Hf.QUIRKS),e.insertionMode=Ee.BEFORE_HTML,e._processToken(t)}function sot(e,t){t.tagID===B.HTML?(e._insertElement(t,ct.HTML),e.insertionMode=Ee.BEFORE_HEAD):BD(e,t)}function oot(e,t){const n=t.tagID;(n===B.HTML||n===B.HEAD||n===B.BODY||n===B.BR)&&BD(e,t)}function BD(e,t){e._insertFakeRootElement(),e.insertionMode=Ee.BEFORE_HEAD,e._processToken(t)}function aot(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.HEAD:{e._insertElement(t,ct.HTML),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD;break}default:jD(e,t)}}function uot(e,t){const n=t.tagID;n===B.HEAD||n===B.BODY||n===B.HTML||n===B.BR?jD(e,t):e._err(t,et.endTagWithoutMatchingOpenElement)}function jD(e,t){e._insertFakeElement(He.HEAD,B.HEAD),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function tm(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case B.TITLE:{e._switchToTextParsing(t,ko.RCDATA);break}case B.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ko.RAWTEXT):(e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_HEAD_NO_SCRIPT);break}case B.NOFRAMES:case B.STYLE:{e._switchToTextParsing(t,ko.RAWTEXT);break}case B.SCRIPT:{e._switchToTextParsing(t,ko.SCRIPT_DATA);break}case B.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE);break}case B.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:UD(e,t)}}function lot(e,t){switch(t.tagID){case B.HEAD:{e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD;break}case B.BODY:case B.BR:case B.HTML:{UD(e,t);break}case B.TEMPLATE:{jE(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function jE(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==B.TEMPLATE&&e._err(t,et.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,et.endTagWithoutMatchingOpenElement)}function UD(e,t){e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD,e._processToken(t)}function cot(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.BASEFONT:case B.BGSOUND:case B.HEAD:case B.LINK:case B.META:case B.NOFRAMES:case B.STYLE:{tm(e,t);break}case B.NOSCRIPT:{e._err(t,et.nestedNoscriptInHead);break}default:zD(e,t)}}function fot(e,t){switch(t.tagID){case B.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Ee.IN_HEAD;break}case B.BR:{zD(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function zD(e,t){const n=t.type===wr.EOF?et.openElementsLeftAfterEof:et.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function dot(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.BODY:{e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_BODY;break}case B.FRAMESET:{e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_FRAMESET;break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{e._err(t,et.abandonedHeadElementChild),e.openElements.push(e.headElement,B.HEAD),tm(e,t),e.openElements.remove(e.headElement);break}case B.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:VD(e,t)}}function hot(e,t){switch(t.tagID){case B.BODY:case B.HTML:case B.BR:{VD(e,t);break}case B.TEMPLATE:{jE(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function VD(e,t){e._insertFakeElement(He.BODY,B.BODY),e.insertionMode=Ee.IN_BODY,jB(e,t)}function jB(e,t){switch(t.type){case wr.CHARACTER:{RTe(e,t);break}case wr.WHITESPACE_CHARACTER:{kTe(e,t);break}case wr.COMMENT:{MW(e,t);break}case wr.START_TAG:{vl(e,t);break}case wr.END_TAG:{UB(e,t);break}case wr.EOF:{OTe(e,t);break}}}function kTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function RTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function pot(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function mot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function got(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_FRAMESET)}function yot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML)}function vot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),vTe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ct.HTML)}function bot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function xot(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML),n||(e.formElement=e.openElements.current))}function _ot(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===B.LI&&i===B.LI||(n===B.DD||n===B.DT)&&(i===B.DD||i===B.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==B.ADDRESS&&i!==B.DIV&&i!==B.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML)}function wot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.tokenizer.state=ko.PLAINTEXT}function Eot(e,t){e.openElements.hasInScope(B.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.framesetOk=!1}function Sot(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(He.A);n&&(dZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Tot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Cot(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(B.NOBR)&&(dZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Aot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Iot(e,t){e.treeAdapter.getDocumentMode(e.document)!==Hf.QUIRKS&&e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_TABLE}function DTe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ct.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function NTe(e){const t=mTe(e,cb.TYPE);return t!=null&&t.toLowerCase()===Wst}function kot(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ct.HTML),NTe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Rot(e,t){e._appendElement(t,ct.HTML),t.ackSelfClosing=!0}function Dot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._appendElement(t,ct.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Not(e,t){t.tagName=He.IMG,t.tagID=B.IMG,DTe(e,t)}function Pot(e,t){e._insertElement(t,ct.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ko.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Ee.TEXT}function Oot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ko.RAWTEXT)}function Mot(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ko.RAWTEXT)}function ofe(e,t){e._switchToTextParsing(t,ko.RAWTEXT)}function Lot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Ee.IN_TABLE||e.insertionMode===Ee.IN_CAPTION||e.insertionMode===Ee.IN_TABLE_BODY||e.insertionMode===Ee.IN_ROW||e.insertionMode===Ee.IN_CELL?Ee.IN_SELECT_IN_TABLE:Ee.IN_SELECT}function $ot(e,t){e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML)}function Fot(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ct.HTML)}function Bot(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(B.RTC),e._insertElement(t,ct.HTML)}function jot(e,t){e._reconstructActiveFormattingElements(),CTe(t),fZ(t),t.selfClosing?e._appendElement(t,ct.MATHML):e._insertElement(t,ct.MATHML),t.ackSelfClosing=!0}function Uot(e,t){e._reconstructActiveFormattingElements(),ATe(t),fZ(t),t.selfClosing?e._appendElement(t,ct.SVG):e._insertElement(t,ct.SVG),t.ackSelfClosing=!0}function afe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML)}function vl(e,t){switch(t.tagID){case B.I:case B.S:case B.B:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.SMALL:case B.STRIKE:case B.STRONG:{Tot(e,t);break}case B.A:{Sot(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{vot(e,t);break}case B.P:case B.DL:case B.OL:case B.UL:case B.DIV:case B.DIR:case B.NAV:case B.MAIN:case B.MENU:case B.ASIDE:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.DETAILS:case B.ADDRESS:case B.ARTICLE:case B.SECTION:case B.SUMMARY:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{yot(e,t);break}case B.LI:case B.DD:case B.DT:{_ot(e,t);break}case B.BR:case B.IMG:case B.WBR:case B.AREA:case B.EMBED:case B.KEYGEN:{DTe(e,t);break}case B.HR:{Dot(e,t);break}case B.RB:case B.RTC:{Fot(e,t);break}case B.RT:case B.RP:{Bot(e,t);break}case B.PRE:case B.LISTING:{bot(e,t);break}case B.XMP:{Oot(e,t);break}case B.SVG:{Uot(e,t);break}case B.HTML:{pot(e,t);break}case B.BASE:case B.LINK:case B.META:case B.STYLE:case B.TITLE:case B.SCRIPT:case B.BGSOUND:case B.BASEFONT:case B.TEMPLATE:{tm(e,t);break}case B.BODY:{mot(e,t);break}case B.FORM:{xot(e,t);break}case B.NOBR:{Cot(e,t);break}case B.MATH:{jot(e,t);break}case B.TABLE:{Iot(e,t);break}case B.INPUT:{kot(e,t);break}case B.PARAM:case B.TRACK:case B.SOURCE:{Rot(e,t);break}case B.IMAGE:{Not(e,t);break}case B.BUTTON:{Eot(e,t);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{Aot(e,t);break}case B.IFRAME:{Mot(e,t);break}case B.SELECT:{Lot(e,t);break}case B.OPTION:case B.OPTGROUP:{$ot(e,t);break}case B.NOEMBED:{ofe(e,t);break}case B.FRAMESET:{got(e,t);break}case B.TEXTAREA:{Pot(e,t);break}case B.NOSCRIPT:{e.options.scriptingEnabled?ofe(e,t):afe(e,t);break}case B.PLAINTEXT:{wot(e,t);break}case B.COL:case B.TH:case B.TD:case B.TR:case B.HEAD:case B.FRAME:case B.TBODY:case B.TFOOT:case B.THEAD:case B.CAPTION:case B.COLGROUP:break;default:afe(e,t)}}function zot(e,t){if(e.openElements.hasInScope(B.BODY)&&(e.insertionMode=Ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Vot(e,t){e.openElements.hasInScope(B.BODY)&&(e.insertionMode=Ee.AFTER_BODY,zTe(e,t))}function Hot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function qot(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(B.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(B.FORM):n&&e.openElements.remove(n))}function Wot(e){e.openElements.hasInButtonScope(B.P)||e._insertFakeElement(He.P,B.P),e._closePElement()}function Got(e){e.openElements.hasInListItemScope(B.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(B.LI),e.openElements.popUntilTagNamePopped(B.LI))}function Yot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Kot(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Xot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Qot(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(He.BR,B.BR),e.openElements.pop(),e.framesetOk=!1}function PTe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==B.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function UB(e,t){switch(t.tagID){case B.A:case B.B:case B.I:case B.S:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.NOBR:case B.SMALL:case B.STRIKE:case B.STRONG:{dZ(e,t);break}case B.P:{Wot(e);break}case B.DL:case B.UL:case B.OL:case B.DIR:case B.DIV:case B.NAV:case B.PRE:case B.MAIN:case B.MENU:case B.ASIDE:case B.BUTTON:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.ADDRESS:case B.ARTICLE:case B.DETAILS:case B.SECTION:case B.SUMMARY:case B.LISTING:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{Hot(e,t);break}case B.LI:{Got(e);break}case B.DD:case B.DT:{Yot(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{Kot(e);break}case B.BR:{Qot(e);break}case B.BODY:{zot(e,t);break}case B.HTML:{Vot(e,t);break}case B.FORM:{qot(e);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{Xot(e,t);break}case B.TEMPLATE:{jE(e,t);break}default:PTe(e,t)}}function OTe(e,t){e.tmplInsertionModeStack.length>0?UTe(e,t):hZ(e,t)}function Jot(e,t){var n;t.tagID===B.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Zot(e,t){e._err(t,et.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Bz(e,t){if(ITe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Ee.IN_TABLE_TEXT,t.type){case wr.CHARACTER:{LTe(e,t);break}case wr.WHITESPACE_CHARACTER:{MTe(e,t);break}}else i3(e,t)}function eat(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_CAPTION}function tat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_COLUMN_GROUP}function nat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.COLGROUP,B.COLGROUP),e.insertionMode=Ee.IN_COLUMN_GROUP,pZ(e,t)}function rat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_TABLE_BODY}function iat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.TBODY,B.TBODY),e.insertionMode=Ee.IN_TABLE_BODY,zB(e,t)}function sat(e,t){e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function oat(e,t){NTe(t)?e._appendElement(t,ct.HTML):i3(e,t),t.ackSelfClosing=!0}function aat(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ct.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function bC(e,t){switch(t.tagID){case B.TD:case B.TH:case B.TR:{iat(e,t);break}case B.STYLE:case B.SCRIPT:case B.TEMPLATE:{tm(e,t);break}case B.COL:{nat(e,t);break}case B.FORM:{aat(e,t);break}case B.TABLE:{sat(e,t);break}case B.TBODY:case B.TFOOT:case B.THEAD:{rat(e,t);break}case B.INPUT:{oat(e,t);break}case B.CAPTION:{eat(e,t);break}case B.COLGROUP:{tat(e,t);break}default:i3(e,t)}}function CN(e,t){switch(t.tagID){case B.TABLE:{e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode());break}case B.TEMPLATE:{jE(e,t);break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:i3(e,t)}}function i3(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,jB(e,t),e.fosterParentingEnabled=n}function MTe(e,t){e.pendingCharacterTokens.push(t)}function LTe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function tR(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)i3(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const $Te=new Set([B.CAPTION,B.COL,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]);function uat(e,t){const n=t.tagID;$Te.has(n)?e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,bC(e,t)):vl(e,t)}function lat(e,t){const n=t.tagID;switch(n){case B.CAPTION:case B.TABLE:{e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,n===B.TABLE&&CN(e,t));break}case B.BODY:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:UB(e,t)}}function pZ(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.COL:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case B.TEMPLATE:{tm(e,t);break}default:nF(e,t)}}function cat(e,t){switch(t.tagID){case B.COLGROUP:{e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case B.TEMPLATE:{jE(e,t);break}case B.COL:break;default:nF(e,t)}}function nF(e,t){e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,e._processToken(t))}function zB(e,t){switch(t.tagID){case B.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_ROW;break}case B.TH:case B.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(He.TR,B.TR),e.insertionMode=Ee.IN_ROW,VB(e,t);break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,bC(e,t));break}default:bC(e,t)}}function LW(e,t){const n=t.tagID;switch(t.tagID){case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case B.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,CN(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:case B.TR:break;default:CN(e,t)}}function VB(e,t){switch(t.tagID){case B.TH:case B.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,zB(e,t));break}default:bC(e,t)}}function FTe(e,t){switch(t.tagID){case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY);break}case B.TABLE:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,LW(e,t));break}case B.TBODY:case B.TFOOT:case B.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(B.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,LW(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:break;default:CN(e,t)}}function fat(e,t){const n=t.tagID;$Te.has(n)?(e.openElements.hasInTableScope(B.TD)||e.openElements.hasInTableScope(B.TH))&&(e._closeTableCell(),VB(e,t)):vl(e,t)}function dat(e,t){const n=t.tagID;switch(n){case B.TD:case B.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_ROW);break}case B.TABLE:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),FTe(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:break;default:UB(e,t)}}function BTe(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._insertElement(t,ct.HTML);break}case B.OPTGROUP:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ct.HTML);break}case B.INPUT:case B.KEYGEN:case B.TEXTAREA:case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),t.tagID!==B.SELECT&&e._processStartTag(t));break}case B.SCRIPT:case B.TEMPLATE:{tm(e,t);break}}}function jTe(e,t){switch(t.tagID){case B.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===B.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===B.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop();break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop();break}case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode());break}case B.TEMPLATE:{jE(e,t);break}}}function hat(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e._processStartTag(t)):BTe(e,t)}function pat(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e.onEndTag(t)):jTe(e,t)}function mat(e,t){switch(t.tagID){case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{tm(e,t);break}case B.CAPTION:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE,e.insertionMode=Ee.IN_TABLE,bC(e,t);break}case B.COL:{e.tmplInsertionModeStack[0]=Ee.IN_COLUMN_GROUP,e.insertionMode=Ee.IN_COLUMN_GROUP,pZ(e,t);break}case B.TR:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE_BODY,e.insertionMode=Ee.IN_TABLE_BODY,zB(e,t);break}case B.TD:case B.TH:{e.tmplInsertionModeStack[0]=Ee.IN_ROW,e.insertionMode=Ee.IN_ROW,VB(e,t);break}default:e.tmplInsertionModeStack[0]=Ee.IN_BODY,e.insertionMode=Ee.IN_BODY,vl(e,t)}}function gat(e,t){t.tagID===B.TEMPLATE&&jE(e,t)}function UTe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):hZ(e,t)}function yat(e,t){t.tagID===B.HTML?vl(e,t):rF(e,t)}function zTe(e,t){var n;if(t.tagID===B.HTML){if(e.fragmentContext||(e.insertionMode=Ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===B.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else rF(e,t)}function rF(e,t){e.insertionMode=Ee.IN_BODY,jB(e,t)}function vat(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.FRAMESET:{e._insertElement(t,ct.HTML);break}case B.FRAME:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case B.NOFRAMES:{tm(e,t);break}}}function bat(e,t){t.tagID===B.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==B.FRAMESET&&(e.insertionMode=Ee.AFTER_FRAMESET))}function xat(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.NOFRAMES:{tm(e,t);break}}}function _at(e,t){t.tagID===B.HTML&&(e.insertionMode=Ee.AFTER_AFTER_FRAMESET)}function wat(e,t){t.tagID===B.HTML?vl(e,t):sL(e,t)}function sL(e,t){e.insertionMode=Ee.IN_BODY,jB(e,t)}function Eat(e,t){switch(t.tagID){case B.HTML:{vl(e,t);break}case B.NOFRAMES:{tm(e,t);break}}}function Sat(e,t){t.chars=Rs,e._insertCharacters(t)}function Tat(e,t){e._insertCharacters(t),e.framesetOk=!1}function VTe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ct.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Cat(e,t){if(Ust(t))VTe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ct.MATHML?CTe(t):r===ct.SVG&&(zst(t),ATe(t)),fZ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Aat(e,t){if(t.tagID===B.P||t.tagID===B.BR){VTe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ct.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}He.AREA,He.BASE,He.BASEFONT,He.BGSOUND,He.BR,He.COL,He.EMBED,He.FRAME,He.HR,He.IMG,He.INPUT,He.KEYGEN,He.LINK,He.META,He.PARAM,He.SOURCE,He.TRACK,He.WBR;const Iat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),ufe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function HTe(e,t){const n=Fat(e),r=cTe("type",{handlers:{root:kat,element:Rat,text:Dat,comment:WTe,doctype:Nat,raw:Oat},unknown:Mat}),i={parser:n?new sfe(ufe):sfe.getFragmentParser(void 0,ufe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),HA(i,og());const s=n?i.parser.document:i.parser.getFragment(),o=Uit(s,{file:i.options.file});return i.stitches&&aZ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function qTe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function kat(e,t){qTe(e.children,t)}function Rat(e,t){Lat(e,t),qTe(e.children,t),$at(e,t)}function Dat(e,t){const n={type:wr.CHARACTER,chars:e.value,location:s3(e)};HA(t,og(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Nat(e,t){const n={type:wr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:s3(e)};HA(t,og(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Pat(e,t){t.stitches=!0;const n=Bat(e);if("children"in e&&"children"in n){const r=HTe({type:"root",children:e.children},t.options);n.children=r.children}WTe({type:"comment",value:{stitch:n}},t)}function WTe(e,t){const n=e.value,r={type:wr.COMMENT,data:n,location:s3(e)};HA(t,og(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Oat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,GTe(t,og(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Mat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Pat(n,t);else{let r="";throw Iat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function HA(e,t){GTe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ko.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function GTe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Lat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ko.PLAINTEXT)return;HA(t,og(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:xw.html;i===xw.html&&n==="svg"&&(i=xw.svg);const s=qit({...e,children:[]},{space:i===xw.svg?"svg":"html"}),o={type:wr.START_TAG,tagName:n,tagID:VA(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:s3(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function $at(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Zit.includes(n)||t.parser.tokenizer.state===ko.PLAINTEXT)return;HA(t,LB(e));const r={type:wr.END_TAG,tagName:n,tagID:VA(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:s3(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ko.RCDATA||t.parser.tokenizer.state===ko.RAWTEXT||t.parser.tokenizer.state===ko.SCRIPT_DATA)&&(t.parser.tokenizer.state=ko.DATA)}function Fat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function s3(e){const t=og(e)||{line:void 0,column:void 0,offset:void 0},n=LB(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Bat(e){return"children"in e?vC({...e,children:[]}):vC(e)}function jat(e){return function(t,n){return HTe(t,{...e,file:n})}}function fl({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return S.jsx(vx,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return S.jsx(lt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return S.jsx(oo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return S.jsx(oo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return S.jsx(oo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return S.jsx(oo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return S.jsx(oo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return S.jsx(oo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return S.jsx(PE,{...s,ref:void 0})},ul({node:i,...s}){return S.jsx(Np,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return S.jsx(Np,{type:"ordered",withPadding:!0,...o,pb:8})}};return S.jsx(Iit,{components:n,rehypePlugins:[jat],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function oL({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return S.jsx(fl,{text:n})}const OT=14;function Uat({completed:e,inProgress:t,rejected:n}){return S.jsxs(an,{ml:4,gap:4,children:[S.jsx(ss,{label:"Completed",children:S.jsx(Dp,{variant:"light",color:"green",leftSection:S.jsx(OB,{width:OT,height:OT,style:{paddingTop:1}}),pb:1,children:e})}),S.jsx(ss,{label:"In Progress",children:S.jsx(Dp,{variant:"light",color:"orange",leftSection:S.jsx(xSe,{width:OT,height:OT,style:{paddingTop:1}}),pb:1,children:t})}),S.jsx(ss,{label:"Rejected",children:S.jsx(Dp,{variant:"light",color:"red",leftSection:S.jsx(e3,{width:OT,height:OT,style:{paddingTop:1}}),pb:1,children:n})})]})}const zat={},Vat=Object.freeze(Object.defineProperty({__proto__:null,default:zat},Symbol.toStringTag,{value:"Module"})),YTe=pUe(Vat);var jz,lfe;function HB(){if(lfe)return jz;lfe=1;var e=YTe;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return jz={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},jz}var Uz,cfe;function Hat(){return cfe||(cfe=1,Uz="3.2.1"),Uz}var zz,ffe;function mZ(){if(ffe)return zz;ffe=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",zz={loadDsf:e,std:{math:i,hex:s,date:o}},zz}var Vz,dfe;function qat(){return dfe||(dfe=1,Vz=function(e,t){var n=HB(),r=mZ(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(H){return H==="{"||H==="}"||H==="["||H==="]"||H===","||H===":"}function d(H){var Q,J=0,ne=1;for(Q=s-1;Q>0&&i[Q]!==`
`;Q--,J++);for(;Q>0;Q--)i[Q]===`
`&&ne++;throw new Error(H+" at line "+ne+","+J+" >>>"+i.substr(s-J,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(H){return i.charAt(s+H)}function m(H){for(var Q="",J=o;h();){if(o===J)return h(),H&&J==="'"&&o==="'"&&Q.length===0?(h(),g()):Q;if(o==="\\")if(h(),o==="u"){for(var ne=0,Z=0;Z<4;Z++){h();var ie=o.charCodeAt(0),q;o>="0"&&o<="9"?q=ie-48:o>="a"&&o<="f"?q=ie-97+10:o>="A"&&o<="F"?q=ie-65+10:d("Bad \\u char "+o),ne=ne*16+q}Q+=String.fromCharCode(ne)}else if(typeof a[o]=="string")Q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):Q+=o}d("Bad string")}function g(){for(var H="",Q=0,J=0;;){var ne=p(-J-5);if(!ne||ne===`
`)break;J++}function Z(){for(var ie=J;o&&o<=" "&&o!==`
`&&ie-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(Q++,h(),Q===3)return H.slice(-1)===`
`&&(H=H.slice(0,-1)),H;continue}else for(;Q>0;)H+="'",Q--;o===`
`?(H+=`
`,h(),Z()):(o!=="\r"&&(H+=o),h())}}function v(){if(o==='"'||o==="'")return m(!1);for(var H="",Q=s,J=-1;;){if(o===":")return H?J>=0&&J!==H.length&&(s=Q+J,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),H;o<=" "?o?J<0&&(J=H.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):H+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var H=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var Q=o==="\r"||o===`
`||o==="";if(Q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var J=H[0];switch(J){case"f":if(H.trim()==="false")return!1;break;case"n":if(H.trim()==="null")return null;break;case"t":if(H.trim()==="true")return!0;break;default:if(J==="-"||J>="0"&&J<="9"){var ne=n.tryParseNumber(H);if(ne!==void 0)return ne}}if(Q){H=H.trim();var Z=l(H);return Z!==void 0?Z:H}}H+=o}}function E(H,Q){var J;for(H--,J=s-2;J>H&&i[J]<=" "&&i[J]!==`
`;J--);i[J]===`
`&&J--,i[J]==="\r"&&J--;var ne=i.substr(H,J-H+1);for(J=0;J<ne.length;J++)if(ne[J]>" "){var Z=ne.indexOf(`
`);if(Z>=0){var ie=[ne.substr(0,Z),ne.substr(Z+1)];return Q&&ie[0].trim().length===0&&ie.shift(),ie}else return[ne]}return[]}function T(H){function Q(ne,Z){var ie,q,U,G;switch(typeof ne){case"string":ne.indexOf(Z)>=0&&(G=ne);break;case"object":if(Object.prototype.toString.apply(ne)==="[object Array]")for(ie=0,U=ne.length;ie<U;ie++)G=Q(ne[ie],Z)||G;else for(q in ne)Object.prototype.hasOwnProperty.call(ne,q)&&(G=Q(ne[q],Z)||G)}return G}function J(ne){var Z=Q(H,ne);return Z?"found '"+ne+`' in a string value, your mistake could be with:
  > `+Z+`
  (unquoted strings contain everything up to the next line!)`:""}return J("}")||J("]")}function C(){var H=[],Q,J,ne;try{if(u&&(Q=n.createComment(H,{a:[]})),h(),J=s,b(),Q&&(ne=E(J,!0).join(`
`)),o==="]")return h(),Q&&(Q.e=[ne]),H;for(;o;){if(H.push(R()),J=s,b(),o===","&&(h(),J=s,b()),Q){var Z=E(J);Q.a.push([ne||"",Z[0]||""]),ne=Z[1]}if(o==="]")return h(),Q&&(Q.a[Q.a.length-1][1]+=ne||""),H;b()}d("End of input while parsing an array (missing ']')")}catch(ie){throw ie.hint=ie.hint||T(H),ie}}function I(H){var Q="",J={},ne,Z,ie;try{if(u&&(ne=n.createComment(J,{c:{},o:[]})),H?Z=1:(h(),Z=s),b(),ne&&(ie=E(Z,!0).join(`
`)),o==="}"&&!H)return ne&&(ne.e=[ie]),h(),J;for(;o;){if(Q=v(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),J[Q]=R(),Z=s,b(),o===","&&(h(),Z=s,b()),ne){var q=E(Z);ne.c[Q]=[ie||"",q[0]||""],ie=q[1],ne.o.push(Q)}if(o==="}"&&!H)return h(),ne&&(ne.c[Q][1]+=ie||""),J;b()}if(H)return J;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||T(J),U}}function R(){switch(b(),o){case"{":return I();case"[":return C();case"'":case'"':return m(!0);default:return w()}}function N(H,Q){var J=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var ne=Q.join(`
`),Z=E(J).join(`
`);if(Z||ne){var ie=n.createComment(H,n.getComment(H));ie.r=[ne,Z]}}return H}function O(){b();var H=u?E(1):null;switch(o){case"{":return N(I(),H);case"[":return N(C(),H);default:return N(R(),H)}}function L(){b();var H=u?E(1):null;switch(o){case"{":return N(I(),H);case"[":return N(C(),H)}try{return N(I(!0),H)}catch(Q){c();try{return N(R(),H)}catch{throw Q}}}if(typeof e!="string")throw new Error("source is not a string");var j=null,F=!0;return t&&typeof t=="object"&&(u=t.keepWsc,j=t.dsf,F=t.legacyRoot!==!1),l=r.loadDsf(j,"parse"),i=e,c(),F?L():O()}),Vz}var Hz,hfe;function Wat(){return hfe||(hfe=1,Hz=function(e,t){var n=HB(),r=mZ(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];g[w].push(i[w][0].length,i[w][1].length)}}var E,T="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+T+"]","g"),I=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),R=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),N=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),O={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},L=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,j="",F=0;function H(G,V){return F+=G[0].length+G[1].length-G[2]-G[3],G[0]+V+G[1]}function Q(G){return G.replace(C,function(V){var Y=O[V];return typeof Y=="string"?H(g.esc,Y):H(g.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function J(G,V,Y,ee){return G?(I.lastIndex=0,N.lastIndex=0,c||Y||I.test(G)||n.tryParseNumber(G,!0)!==void 0||N.test(G)?(C.lastIndex=0,R.lastIndex=0,C.test(G)?!R.test(G)&&!ee&&d?ne(G,V):H(g.qstr,Q(G)):H(g.qstr,G)):H(g.str,G)):H(g.qstr,"")}function ne(G,V){var Y,ee=G.replace(/\r/g,"").split(`
`);if(V+=o,ee.length===1)return H(g.mstr,ee[0]);var ae=s+V+g.mstr[0];for(Y=0;Y<ee.length;Y++)ae+=s,ee[Y]&&(ae+=V+ee[Y]);return ae+s+V+g.mstr[1]}function Z(G){return G?l||L.test(G)?(C.lastIndex=0,H(g.qkey,C.test(G)?Q(G):G)):H(g.key,G):'""'}function ie(G,V,Y,ee){function ae(Un){return Un&&Un[Un[0]==="\r"?1:0]===`
`}function _e(Un){return Un&&!ae(Un)}function pe(Un,tr,Ai){if(!Un)return"";Un=n.forceComment(Un);var Tr,Lo=Un.length;for(Tr=0;Tr<Lo&&Un[Tr]<=" ";Tr++);return Ai&&Tr>0&&(Un=Un.substr(Tr)),Tr<Lo?tr+H(g.rem,Un):Un}var Se=E(G);if(Se!==void 0)return H(g.dsf,Se);switch(typeof G){case"string":return J(G,j,V,ee);case"number":return isFinite(G)?H(g.num,String(G)):H(g.lit,"null");case"boolean":return H(g.lit,String(G));case"object":if(!G)return H(g.lit,"null");var Le;a&&(Le=n.getComment(G));var ye=Object.prototype.toString.apply(G)==="[object Array]",he=j;j+=o;var $e=s+he,De=s+j,tt=Y||u?"":$e,it=[],Me,Ge=f?[]:null,at=c,yt=d,St=h?"":g.com[0],Ot=0,qe,dt,wt,ke,Oe,ht,Lt,Ft,dn;if(ye){for(qe=0,dt=G.length;qe<dt;qe++){if(Me=qe<dt-1,Le?(ht=Le.a[qe]||[],Lt=_e(ht[1]),it.push(pe(ht[0],`
`)+De),Ge&&(ht[0]||ht[1]||Lt)&&(Ge=null)):it.push(De),F=0,ke=G[qe],it.push(ie(ke,Le?Lt:!1,!0)+(Me?h:"")),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Ge.push(ie(ke,!1,!0)+(Me?g.com[0]:"")),c=at,d=yt;break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?St:""));break}Me&&(F+=g.com[0].length-g.com[2]),Ot+=F}Le&&ht[1]&&it.push(pe(ht[1],Lt?" ":`
`,Lt))}dt===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(g.arr,""):(Ft=tt+H(g.arr,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(g.arr,dn))))}else{var Nn=Le?Le.o.slice():[],Sr=[];for(wt in G)Object.prototype.hasOwnProperty.call(G,wt)&&Nn.indexOf(wt)<0&&Sr.push(wt);m&&Sr.sort();var Ni=Nn.concat(Sr);for(qe=0,dt=Ni.length;qe<dt;qe++)if(Me=qe<dt-1,wt=Ni[qe],Le?(ht=Le.c[wt]||[],Lt=_e(ht[1]),it.push(pe(ht[0],`
`)+De),Ge&&(ht[0]||ht[1]||Lt)&&(Ge=null)):it.push(De),F=0,ke=G[wt],Oe=ie(ke,Le&&Lt),it.push(Z(wt)+g.col[0]+(ae(Oe)?"":" ")+Oe+(Me?h:"")),Le&&ht[1]&&it.push(pe(ht[1],Lt?" ":`
`,Lt)),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Oe=ie(ke,!1),c=at,d=yt,Ge.push(Z(wt)+g.col[0]+" "+Oe+(Me?g.com[0]:""));break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?St:""));break}F+=g.col[0].length-g.col[2],Me&&(F+=g.com[0].length-g.com[2]),Ot+=F}dt===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(g.obj,""):(Ft=tt+H(g.obj,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(g.obj,dn))))}return j=he,Ft}}E=r.loadDsf(p,"stringify");var q="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(q=U[0]+`
`),q+=ie(e,null,!0,!0),U&&(q+=U[1]||""),q}),Hz}var qz,pfe;function Gat(){if(pfe)return qz;pfe=1;var e=HB();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}else{g={s:{}};var v,b=Object.keys(c);for(d&&d.o?(v=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,g.o=v,h=0,p=v.length;h<p;h++){var w=v[h];s(g.s,w,d.c[w],n(c[w]))&&(m=!0)}!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),g=c.a[h];g&&(f.push(o(m,g)),a(g.x,f,m))}else c.o&&c.o.forEach(function(v){var b=d.slice().concat([v]),w=c.s[v];w&&(f.push(o(b,w)),a(w.x,f,b))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var g=c.a||{};for(var v in g)if(g.hasOwnProperty(v)){p=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([p]);p<f.length?(m.a[p]=[b.b,b.a],u(b.x,f[p],d,w)):(d.push(o(w,b)),a(b.x,d,w))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(E){var T=h.slice().concat([E]),C=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(m.o.push(E),C&&(m.c[E]=[C.b,C.a],u(C.x,f[E],d,T))):C&&(d.push(o(T,C)),a(C.x,d,T))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return qz={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},qz}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Wz,mfe;function Yat(){if(mfe)return Wz;mfe=1;var e=HB(),t=Hat(),n=qat(),r=Wat(),i=Gat(),s=mZ();return Wz={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},Wz}var Kat=Yat(),gfe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KTe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Xat=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},gZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(KTe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Xat(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Qat;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Qat extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jat=function(e){const t=KTe(e);return gZ.encodeByteArray(t,!0)},iF=function(e){return Jat(e).replace(/\./g,"")},XTe=function(e){try{return gZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QTe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zat=()=>QTe().__FIREBASE_DEFAULTS__,eut=()=>{if(typeof process>"u"||typeof gfe>"u")return;const e=gfe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},tut=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&XTe(e[1]);return t&&JSON.parse(t)},qB=()=>{try{return Zat()||eut()||tut()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},JTe=e=>{var t,n;return(n=(t=qB())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},nut=e=>{const t=JTe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ZTe=()=>{var e;return(e=qB())===null||e===void 0?void 0:e.config},e2e=e=>{var t;return(t=qB())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rut(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[iF(JSON.stringify(n)),iF(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dl())}function sut(){var e;const t=(e=qB())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function out(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aut(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function uut(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lut(){const e=dl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function cut(){return!sut()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yZ(){try{return typeof indexedDB=="object"}catch{return!1}}function fut(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dut="FirebaseError";class ag extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=dut,Object.setPrototypeOf(this,ag.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qA.prototype.create)}}class qA{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?hut(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ag(i,a,r)}}function hut(e,t){return e.replace(put,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const put=/\{\$([^}]+)}/g;function mut(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function IN(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(yfe(s)&&yfe(o)){if(!IN(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yfe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function gut(e,t){const n=new yut(e,t);return n.subscribe.bind(n)}class yut{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vut(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Gz),i.error===void 0&&(i.error=Gz),i.complete===void 0&&(i.complete=Gz);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vut(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Gz(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const but=1e3,xut=2,_ut=4*60*60*1e3,wut=.5;function Eut(e,t=but,n=xut){const r=t*Math.pow(n,e),i=Math.round(wut*r*(Math.random()-.5)*2);return Math.min(_ut,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(e){return e&&e._delegate?e._delegate:e}class B0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sut=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new AN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Cut(t))try{this.getOrInitializeService({instanceIdentifier:K_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=K_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=K_){return this.instances.has(t)}getOptions(t=K_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tut(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=K_){return this.component?this.component.multipleInstances?t:K_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tut(e){return e===K_?void 0:e}function Cut(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aut{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Sut(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Or||(Or={}));const Iut={debug:Or.DEBUG,verbose:Or.VERBOSE,info:Or.INFO,warn:Or.WARN,error:Or.ERROR,silent:Or.SILENT},kut=Or.INFO,Rut={[Or.DEBUG]:"log",[Or.VERBOSE]:"log",[Or.INFO]:"info",[Or.WARN]:"warn",[Or.ERROR]:"error"},Dut=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Rut[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class WB{constructor(t){this.name=t,this._logLevel=kut,this._logHandler=Dut,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Or))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Iut[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Or.DEBUG,...t),this._logHandler(this,Or.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Or.VERBOSE,...t),this._logHandler(this,Or.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Or.INFO,...t),this._logHandler(this,Or.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Or.WARN,...t),this._logHandler(this,Or.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Or.ERROR,...t),this._logHandler(this,Or.ERROR,...t)}}const Nut=(e,t)=>t.some(n=>e instanceof n);let vfe,bfe;function Put(){return vfe||(vfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Out(){return bfe||(bfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t2e=new WeakMap,$W=new WeakMap,n2e=new WeakMap,Yz=new WeakMap,vZ=new WeakMap;function Mut(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(fb(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&t2e.set(n,e)}).catch(()=>{}),vZ.set(t,e),t}function Lut(e){if($W.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});$W.set(e,t)}let FW={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return $W.get(e);if(t==="objectStoreNames")return e.objectStoreNames||n2e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fb(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $ut(e){FW=e(FW)}function Fut(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Kz(this),t,...n);return n2e.set(r,t.sort?t.sort():[t]),fb(r)}:Out().includes(e)?function(...t){return e.apply(Kz(this),t),fb(t2e.get(this))}:function(...t){return fb(e.apply(Kz(this),t))}}function But(e){return typeof e=="function"?Fut(e):(e instanceof IDBTransaction&&Lut(e),Nut(e,Put())?new Proxy(e,FW):e)}function fb(e){if(e instanceof IDBRequest)return Mut(e);if(Yz.has(e))return Yz.get(e);const t=But(e);return t!==e&&(Yz.set(e,t),vZ.set(t,e)),t}const Kz=e=>vZ.get(e);function jut(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=fb(o);return r&&o.addEventListener("upgradeneeded",u=>{r(fb(o.result),u.oldVersion,u.newVersion,fb(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Uut=["get","getKey","getAll","getAllKeys","count"],zut=["put","add","delete","clear"],Xz=new Map;function xfe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xz.get(t))return Xz.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=zut.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Uut.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Xz.set(t,s),s}$ut(e=>({...e,get:(t,n,r)=>xfe(t,n)||e.get(t,n,r),has:(t,n)=>!!xfe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vut{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hut(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hut(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const BW="@firebase/app",_fe="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new WB("@firebase/app"),qut="@firebase/app-compat",Wut="@firebase/analytics-compat",Gut="@firebase/analytics",Yut="@firebase/app-check-compat",Kut="@firebase/app-check",Xut="@firebase/auth",Qut="@firebase/auth-compat",Jut="@firebase/database",Zut="@firebase/data-connect",elt="@firebase/database-compat",tlt="@firebase/functions",nlt="@firebase/functions-compat",rlt="@firebase/installations",ilt="@firebase/installations-compat",slt="@firebase/messaging",olt="@firebase/messaging-compat",alt="@firebase/performance",ult="@firebase/performance-compat",llt="@firebase/remote-config",clt="@firebase/remote-config-compat",flt="@firebase/storage",dlt="@firebase/storage-compat",hlt="@firebase/firestore",plt="@firebase/vertexai",mlt="@firebase/firestore-compat",glt="firebase",ylt="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW="[DEFAULT]",vlt={[BW]:"fire-core",[qut]:"fire-core-compat",[Gut]:"fire-analytics",[Wut]:"fire-analytics-compat",[Kut]:"fire-app-check",[Yut]:"fire-app-check-compat",[Xut]:"fire-auth",[Qut]:"fire-auth-compat",[Jut]:"fire-rtdb",[Zut]:"fire-data-connect",[elt]:"fire-rtdb-compat",[tlt]:"fire-fn",[nlt]:"fire-fn-compat",[rlt]:"fire-iid",[ilt]:"fire-iid-compat",[slt]:"fire-fcm",[olt]:"fire-fcm-compat",[alt]:"fire-perf",[ult]:"fire-perf-compat",[llt]:"fire-rc",[clt]:"fire-rc-compat",[flt]:"fire-gcs",[dlt]:"fire-gcs-compat",[hlt]:"fire-fst",[mlt]:"fire-fst-compat",[plt]:"fire-vertex","fire-js":"fire-js",[glt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=new Map,blt=new Map,UW=new Map;function wfe(e,t){try{e.container.addComponent(t)}catch(n){Zy.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function e1(e){const t=e.name;if(UW.has(t))return Zy.debug(`There were multiple attempts to register component ${t}.`),!1;UW.set(t,e);for(const n of sF.values())wfe(n,e);for(const n of blt.values())wfe(n,e);return!0}function WA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function m0(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xlt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},db=new qA("app","Firebase",xlt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _lt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new B0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw db.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=ylt;function r2e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:jW,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw db.create("bad-app-name",{appName:String(i)});if(n||(n=ZTe()),!n)throw db.create("no-options");const s=sF.get(i);if(s){if(IN(n,s.options)&&IN(r,s.config))return s;throw db.create("duplicate-app",{appName:i})}const o=new Aut(i);for(const u of UW.values())o.addComponent(u);const a=new _lt(n,r,o);return sF.set(i,a),a}function bZ(e=jW){const t=sF.get(e);if(!t&&e===jW&&ZTe())return r2e();if(!t)throw db.create("no-app",{appName:e});return t}function Pp(e,t,n){var r;let i=(r=vlt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zy.warn(a.join(" "));return}e1(new B0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wlt="firebase-heartbeat-database",Elt=1,kN="firebase-heartbeat-store";let Qz=null;function i2e(){return Qz||(Qz=jut(wlt,Elt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(kN)}catch(n){console.warn(n)}}}}).catch(e=>{throw db.create("idb-open",{originalErrorMessage:e.message})})),Qz}async function Slt(e){try{const n=(await i2e()).transaction(kN),r=await n.objectStore(kN).get(s2e(e));return await n.done,r}catch(t){if(t instanceof ag)Zy.warn(t.message);else{const n=db.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Zy.warn(n.message)}}}async function Efe(e,t){try{const r=(await i2e()).transaction(kN,"readwrite");await r.objectStore(kN).put(t,s2e(e)),await r.done}catch(n){if(n instanceof ag)Zy.warn(n.message);else{const r=db.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zy.warn(r.message)}}}function s2e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tlt=1024,Clt=30*24*60*60*1e3;class Alt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new klt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sfe();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Clt}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zy.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sfe(),{heartbeatsToSend:r,unsentEntries:i}=Ilt(this._heartbeatsCache.heartbeats),s=iF(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zy.warn(n),""}}}function Sfe(){return new Date().toISOString().substring(0,10)}function Ilt(e,t=Tlt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Tfe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tfe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class klt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yZ()?fut().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Slt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Efe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Efe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Tfe(e){return iF(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rlt(e){e1(new B0("platform-logger",t=>new Vut(t),"PRIVATE")),e1(new B0("heartbeat",t=>new Alt(t),"PRIVATE")),Pp(BW,_fe,e),Pp(BW,_fe,"esm2017"),Pp("fire-js","")}Rlt("");var Dlt="firebase",Nlt="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pp(Dlt,Nlt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2e="firebasestorage.googleapis.com",a2e="storageBucket",Plt=2*60*1e3,Olt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends ag{constructor(t,n,r=0){super(Jz(t),`Firebase Storage: ${n} (${Jz(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,po.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Jz(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var fo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fo||(fo={}));function Jz(e){return"storage/"+e}function xZ(){const e="An unknown error occurred, please check the error payload for server response.";return new po(fo.UNKNOWN,e)}function Mlt(e){return new po(fo.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Llt(e){return new po(fo.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $lt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new po(fo.UNAUTHENTICATED,e)}function Flt(){return new po(fo.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Blt(e){return new po(fo.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function jlt(){return new po(fo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ult(){return new po(fo.CANCELED,"User canceled the upload/download.")}function zlt(e){return new po(fo.INVALID_URL,"Invalid URL '"+e+"'.")}function Vlt(e){return new po(fo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Hlt(){return new po(fo.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a2e+"' property when initializing the app?")}function qlt(){return new po(fo.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wlt(){return new po(fo.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Glt(e){return new po(fo.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zW(e){return new po(fo.INVALID_ARGUMENT,e)}function u2e(){return new po(fo.APP_DELETED,"The Firebase app was deleted.")}function Ylt(e){return new po(fo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HD(e,t){return new po(fo.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function nR(e){throw new po(fo.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Vl.makeFromUrl(t,n)}catch{return new Vl(t,"")}if(r.path==="")return r;throw Vlt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===o2e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const T=w[E],C=T.regex.exec(t);if(C){const I=C[T.indices.bucket];let R=C[T.indices.path];R||(R=""),r=new Vl(I,R),T.postModify(r);break}}if(r==null)throw zlt(t);return r}}class Klt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xlt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...v){if(l){d();return}if(g){d(),c.call(null,g,...v);return}if(u()||o){d(),c.call(null,g,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Qlt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jlt(e){return e!==void 0}function Zlt(e){return typeof e=="object"&&!Array.isArray(e)}function _Z(e){return typeof e=="string"||e instanceof String}function Cfe(e){return wZ()&&e instanceof Blob}function wZ(){return typeof Blob<"u"}function VW(e,t,n,r){if(r<t)throw zW(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw zW(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function l2e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var $w;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})($w||($w={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ect(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tct{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new Y4(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$w.NO_ERROR,u=s.getStatus();if(!a||ect(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===$w.ABORT;r(!1,new Y4(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new Y4(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Jlt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=xZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?u2e():Ult();o(u)}else{const u=jlt();o(u)}};this.canceled_?n(!1,new Y4(!1,null,!0)):this.backoffId_=Xlt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Qlt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Y4{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function nct(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function rct(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function ict(e,t){t&&(e["X-Firebase-GMPID"]=t)}function sct(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function oct(e,t,n,r,i,s,o=!0){const a=l2e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return ict(l,t),nct(l,n),rct(l,s),sct(l,r),new tct(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function act(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uct(...e){const t=act();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(wZ())return new Blob(e);throw new po(fo.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lct(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cct(e){if(typeof atob>"u")throw Glt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zz{constructor(t,n){this.data=t,this.contentType=n||null}}function fct(e,t){switch(e){case g0.RAW:return new Zz(c2e(t));case g0.BASE64:case g0.BASE64URL:return new Zz(f2e(e,t));case g0.DATA_URL:return new Zz(hct(t),pct(t))}throw xZ()}function c2e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function dct(e){let t;try{t=decodeURIComponent(e)}catch{throw HD(g0.DATA_URL,"Malformed data URL.")}return c2e(t)}function f2e(e,t){switch(e){case g0.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw HD(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case g0.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw HD(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cct(t)}catch(i){throw i.message.includes("polyfill")?i:HD(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class d2e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw HD(g0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=mct(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function hct(e){const t=new d2e(e);return t.base64?f2e(g0.BASE64,t.rest):dct(t.rest)}function pct(e){return new d2e(e).contentType}function mct(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,n){let r=0,i="";Cfe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Cfe(this.data_)){const r=this.data_,i=lct(r,t,n);return i===null?null:new Wv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Wv(r,!0)}}static getBlob(...t){if(wZ()){const n=t.map(r=>r instanceof Wv?r.data_:r);return new Wv(uct.apply(null,n))}else{const n=t.map(o=>_Z(o)?fct(g0.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Wv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(e){let t;try{t=JSON.parse(e)}catch{return null}return Zlt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gct(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function yct(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function h2e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vct(e,t){return t}class Dl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||vct}}let K4=null;function bct(e){return!_Z(e)||e.length<2?e:h2e(e)}function p2e(){if(K4)return K4;const e=[];e.push(new Dl("bucket")),e.push(new Dl("generation")),e.push(new Dl("metageneration")),e.push(new Dl("name","fullPath",!0));function t(s,o){return bct(o)}const n=new Dl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Dl("size");return i.xform=r,e.push(i),e.push(new Dl("timeCreated")),e.push(new Dl("updated")),e.push(new Dl("md5Hash",null,!0)),e.push(new Dl("cacheControl",null,!0)),e.push(new Dl("contentDisposition",null,!0)),e.push(new Dl("contentEncoding",null,!0)),e.push(new Dl("contentLanguage",null,!0)),e.push(new Dl("contentType",null,!0)),e.push(new Dl("metadata","customMetadata",!0)),K4=e,K4}function xct(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Vl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function _ct(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return xct(r,e),r}function m2e(e,t,n){const r=EZ(t);return r===null?null:_ct(e,r,n)}function wct(e,t,n,r){const i=EZ(t);if(i===null||!_Z(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=a3(d,n,r),p=l2e({alt:"media",token:l});return h+p})[0]}function Ect(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Afe="prefixes",Ife="items";function Sct(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Afe])for(const i of n[Afe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Vl(t,s));r.prefixes.push(o)}if(n[Ife])for(const i of n[Ife]){const s=e._makeStorageReference(new Vl(t,i.name));r.items.push(s)}return r}function Tct(e,t,n){const r=EZ(n);return r===null?null:Sct(e,t,r)}class GB{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(e){if(!e)throw xZ()}function Cct(e,t){function n(r,i){const s=m2e(e,i,t);return SZ(s!==null),s}return n}function Act(e,t){function n(r,i){const s=Tct(e,t,i);return SZ(s!==null),s}return n}function Ict(e,t){function n(r,i){const s=m2e(e,i,t);return SZ(s!==null),wct(s,i,e.host,e._protocol)}return n}function TZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Flt():i=$lt():n.getStatus()===402?i=Llt(e.bucket):n.getStatus()===403?i=Blt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function g2e(e){const t=TZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Mlt(e.path)),s.serverResponse=i.serverResponse,s}return n}function kct(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=a3(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new GB(a,u,Act(e,t.bucket),l);return c.urlParams=s,c.errorHandler=TZ(t),c}function Rct(e,t,n){const r=t.fullServerUrl(),i=a3(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new GB(i,s,Ict(e,n),o);return a.errorHandler=g2e(t),a}function Dct(e,t){const n=t.fullServerUrl(),r=a3(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new GB(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=g2e(t),a}function Nct(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Pct(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Nct(null,t)),r}function Oct(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=Pct(t,r,i),c=Ect(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Wv.getBlob(f,r,d);if(h===null)throw qlt();const p={name:l.fullPath},m=a3(s,e.host,e._protocol),g="POST",v=e.maxUploadRetryTime,b=new GB(m,g,Cct(e,n),v);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=TZ(t),b}class Mct{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$w.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$w.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$w.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw nR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Lct extends Mct{initXhr(){this.xhr_.responseType="text"}}function YB(){return new Lct}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,n){this._service=t,n instanceof Vl?this._location=n:this._location=Vl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Kw(t,n)}get root(){const t=new Vl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h2e(this._location.path)}get storage(){return this._service}get parent(){const t=gct(this._location.path);if(t===null)return null;const n=new Vl(this._location.bucket,t);return new Kw(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Ylt(t)}}function $ct(e,t,n){e._throwIfRoot("uploadBytes");const r=Oct(e.storage,e._location,p2e(),new Wv(t,!0),n);return e.storage.makeRequestWithTokens(r,YB).then(i=>({metadata:i,ref:e}))}function Fct(e){const t={prefixes:[],items:[]};return y2e(e,t).then(()=>t)}async function y2e(e,t,n){const i=await Bct(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await y2e(e,t,i.nextPageToken)}function Bct(e,t){t!=null&&typeof t.maxResults=="number"&&VW("options.maxResults",1,1e3,t.maxResults);const n=t,r=kct(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,YB)}function jct(e){e._throwIfRoot("getDownloadURL");const t=Rct(e.storage,e._location,p2e());return e.storage.makeRequestWithTokens(t,YB).then(n=>{if(n===null)throw Wlt();return n})}function Uct(e){e._throwIfRoot("deleteObject");const t=Dct(e.storage,e._location);return e.storage.makeRequestWithTokens(t,YB)}function zct(e,t){const n=yct(e._location.path,t),r=new Vl(e._location.bucket,n);return new Kw(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vct(e){return/^[A-Za-z]+:\/\//.test(e)}function Hct(e,t){return new Kw(e,t)}function v2e(e,t){if(e instanceof CZ){const n=e;if(n._bucket==null)throw Hlt();const r=new Kw(n,n._bucket);return t!=null?v2e(r,t):r}else return t!==void 0?zct(e,t):e}function qct(e,t){if(t&&Vct(t)){if(e instanceof CZ)return Hct(e,t);throw zW("To use ref(service, url), the first argument must be a Storage instance.")}else return v2e(e,t)}function kfe(e,t){const n=t==null?void 0:t[a2e];return n==null?null:Vl.makeFromBucketSpec(n,e)}function Wct(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:rut(i,e.app.options.projectId))}class CZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=o2e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Plt,this._maxUploadRetryTime=Olt,this._requests=new Set,i!=null?this._bucket=Vl.makeFromBucketSpec(i,this._host):this._bucket=kfe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Vl.makeFromBucketSpec(this._url,t):this._bucket=kfe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){VW("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){VW("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Kw(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Klt(u2e());{const o=oct(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Rfe="@firebase/storage",Dfe="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2e="storage";function X4(e,t,n){return e=hs(e),$ct(e,t,n)}function rR(e){return e=hs(e),Fct(e)}function Q4(e){return e=hs(e),jct(e)}function Nfe(e){return e=hs(e),Uct(e)}function Ff(e,t){return e=hs(e),qct(e,t)}function Pfe(e=bZ(),t){e=hs(e);const r=WA(e,b2e).getImmediate({identifier:t}),i=nut("storage");return i&&Gct(r,...i),r}function Gct(e,t,n,r={}){Wct(e,t,n,r)}function Yct(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new CZ(n,r,i,t,UE)}function Kct(){e1(new B0(b2e,Yct,"PUBLIC").setMultipleInstances(!0)),Pp(Rfe,Dfe,""),Pp(Rfe,Dfe,"esm2017")}Kct();var Ofe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,x2e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,R){function N(){}N.prototype=R.prototype,I.D=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(O,L,j){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return R.prototype[L].apply(O,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,N){N||(N=0);var O=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)O[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;16>L;++L)O[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],L=I.g[2];var j=I.g[3],F=R+(j^N&(L^j))+O[0]+3614090360&4294967295;R=N+(F<<7&4294967295|F>>>25),F=j+(L^R&(N^L))+O[1]+3905402710&4294967295,j=R+(F<<12&4294967295|F>>>20),F=L+(N^j&(R^N))+O[2]+606105819&4294967295,L=j+(F<<17&4294967295|F>>>15),F=N+(R^L&(j^R))+O[3]+3250441966&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(j^N&(L^j))+O[4]+4118548399&4294967295,R=N+(F<<7&4294967295|F>>>25),F=j+(L^R&(N^L))+O[5]+1200080426&4294967295,j=R+(F<<12&4294967295|F>>>20),F=L+(N^j&(R^N))+O[6]+2821735955&4294967295,L=j+(F<<17&4294967295|F>>>15),F=N+(R^L&(j^R))+O[7]+4249261313&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(j^N&(L^j))+O[8]+1770035416&4294967295,R=N+(F<<7&4294967295|F>>>25),F=j+(L^R&(N^L))+O[9]+2336552879&4294967295,j=R+(F<<12&4294967295|F>>>20),F=L+(N^j&(R^N))+O[10]+4294925233&4294967295,L=j+(F<<17&4294967295|F>>>15),F=N+(R^L&(j^R))+O[11]+2304563134&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(j^N&(L^j))+O[12]+1804603682&4294967295,R=N+(F<<7&4294967295|F>>>25),F=j+(L^R&(N^L))+O[13]+4254626195&4294967295,j=R+(F<<12&4294967295|F>>>20),F=L+(N^j&(R^N))+O[14]+2792965006&4294967295,L=j+(F<<17&4294967295|F>>>15),F=N+(R^L&(j^R))+O[15]+1236535329&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(L^j&(N^L))+O[1]+4129170786&4294967295,R=N+(F<<5&4294967295|F>>>27),F=j+(N^L&(R^N))+O[6]+3225465664&4294967295,j=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(j^R))+O[11]+643717713&4294967295,L=j+(F<<14&4294967295|F>>>18),F=N+(j^R&(L^j))+O[0]+3921069994&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^j&(N^L))+O[5]+3593408605&4294967295,R=N+(F<<5&4294967295|F>>>27),F=j+(N^L&(R^N))+O[10]+38016083&4294967295,j=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(j^R))+O[15]+3634488961&4294967295,L=j+(F<<14&4294967295|F>>>18),F=N+(j^R&(L^j))+O[4]+3889429448&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^j&(N^L))+O[9]+568446438&4294967295,R=N+(F<<5&4294967295|F>>>27),F=j+(N^L&(R^N))+O[14]+3275163606&4294967295,j=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(j^R))+O[3]+4107603335&4294967295,L=j+(F<<14&4294967295|F>>>18),F=N+(j^R&(L^j))+O[8]+1163531501&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^j&(N^L))+O[13]+2850285829&4294967295,R=N+(F<<5&4294967295|F>>>27),F=j+(N^L&(R^N))+O[2]+4243563512&4294967295,j=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(j^R))+O[7]+1735328473&4294967295,L=j+(F<<14&4294967295|F>>>18),F=N+(j^R&(L^j))+O[12]+2368359562&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(N^L^j)+O[5]+4294588738&4294967295,R=N+(F<<4&4294967295|F>>>28),F=j+(R^N^L)+O[8]+2272392833&4294967295,j=R+(F<<11&4294967295|F>>>21),F=L+(j^R^N)+O[11]+1839030562&4294967295,L=j+(F<<16&4294967295|F>>>16),F=N+(L^j^R)+O[14]+4259657740&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^j)+O[1]+2763975236&4294967295,R=N+(F<<4&4294967295|F>>>28),F=j+(R^N^L)+O[4]+1272893353&4294967295,j=R+(F<<11&4294967295|F>>>21),F=L+(j^R^N)+O[7]+4139469664&4294967295,L=j+(F<<16&4294967295|F>>>16),F=N+(L^j^R)+O[10]+3200236656&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^j)+O[13]+681279174&4294967295,R=N+(F<<4&4294967295|F>>>28),F=j+(R^N^L)+O[0]+3936430074&4294967295,j=R+(F<<11&4294967295|F>>>21),F=L+(j^R^N)+O[3]+3572445317&4294967295,L=j+(F<<16&4294967295|F>>>16),F=N+(L^j^R)+O[6]+76029189&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^j)+O[9]+3654602809&4294967295,R=N+(F<<4&4294967295|F>>>28),F=j+(R^N^L)+O[12]+3873151461&4294967295,j=R+(F<<11&4294967295|F>>>21),F=L+(j^R^N)+O[15]+530742520&4294967295,L=j+(F<<16&4294967295|F>>>16),F=N+(L^j^R)+O[2]+3299628645&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(L^(N|~j))+O[0]+4096336452&4294967295,R=N+(F<<6&4294967295|F>>>26),F=j+(N^(R|~L))+O[7]+1126891415&4294967295,j=R+(F<<10&4294967295|F>>>22),F=L+(R^(j|~N))+O[14]+2878612391&4294967295,L=j+(F<<15&4294967295|F>>>17),F=N+(j^(L|~R))+O[5]+4237533241&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~j))+O[12]+1700485571&4294967295,R=N+(F<<6&4294967295|F>>>26),F=j+(N^(R|~L))+O[3]+2399980690&4294967295,j=R+(F<<10&4294967295|F>>>22),F=L+(R^(j|~N))+O[10]+4293915773&4294967295,L=j+(F<<15&4294967295|F>>>17),F=N+(j^(L|~R))+O[1]+2240044497&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~j))+O[8]+1873313359&4294967295,R=N+(F<<6&4294967295|F>>>26),F=j+(N^(R|~L))+O[15]+4264355552&4294967295,j=R+(F<<10&4294967295|F>>>22),F=L+(R^(j|~N))+O[6]+2734768916&4294967295,L=j+(F<<15&4294967295|F>>>17),F=N+(j^(L|~R))+O[13]+1309151649&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~j))+O[4]+4149444226&4294967295,R=N+(F<<6&4294967295|F>>>26),F=j+(N^(R|~L))+O[11]+3174756917&4294967295,j=R+(F<<10&4294967295|F>>>22),F=L+(R^(j|~N))+O[2]+718787259&4294967295,L=j+(F<<15&4294967295|F>>>17),F=N+(j^(L|~R))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var N=R-this.blockSize,O=this.B,L=this.h,j=0;j<R;){if(L==0)for(;j<=N;)i(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<R;)if(O[L++]=I.charCodeAt(j++),L==this.blockSize){i(this,O),L=0;break}}else for(;j<R;)if(O[L++]=I[j++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var N=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=N&255,N/=256;for(this.u(I),I=Array(16),R=N=0;4>R;++R)for(var O=0;32>O;O+=8)I[N++]=this.g[R]>>>O&255;return I};function s(I,R){var N=a;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function o(I,R){this.h=R;for(var N=[],O=!0,L=I.length-1;0<=L;L--){var j=I[L]|0;O&&j==R||(N[L]=j,O=!1)}this.g=N}var a={};function u(I){return-128<=I&&128>I?s(I,function(R){return new o([R|0],0>R?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return g(l(-I));for(var R=[],N=1,O=0;I>=N;O++)R[O]=I/N|0,N*=4294967296;return new o(R,0)}function c(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return g(c(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(R,8)),O=f,L=0;L<I.length;L+=8){var j=Math.min(8,I.length-L),F=parseInt(I.substring(L,L+j),R);8>j?(j=l(Math.pow(R,j)),O=O.j(j).add(l(F))):(O=O.j(N),O=O.add(l(F)))}return O}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var I=0,R=1,N=0;N<this.g.length;N++){var O=this.i(N);I+=(0<=O?O:4294967296+O)*R,R*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(m(this))return"-"+g(this).toString(I);for(var R=l(Math.pow(I,6)),N=this,O="";;){var L=E(N,R).g;N=v(N,L.j(R));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=L,p(N))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function m(I){return I.h==-1}e.l=function(I){return I=v(this,I),m(I)?-1:p(I)?0:1};function g(I){for(var R=I.g.length,N=[],O=0;O<R;O++)N[O]=~I.g[O];return new o(N,~I.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0,L=0;L<=R;L++){var j=O+(this.i(L)&65535)+(I.i(L)&65535),F=(j>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);O=F>>>16,j&=65535,F&=65535,N[L]=F<<16|j}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(I,R){return I.add(g(R))}e.j=function(I){if(p(this)||p(I))return f;if(m(this))return m(I)?g(this).j(g(I)):g(g(this).j(I));if(m(I))return g(this.j(g(I)));if(0>this.l(h)&&0>I.l(h))return l(this.m()*I.m());for(var R=this.g.length+I.g.length,N=[],O=0;O<2*R;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<I.g.length;L++){var j=this.i(O)>>>16,F=this.i(O)&65535,H=I.i(L)>>>16,Q=I.i(L)&65535;N[2*O+2*L]+=F*Q,b(N,2*O+2*L),N[2*O+2*L+1]+=j*Q,b(N,2*O+2*L+1),N[2*O+2*L+1]+=F*H,b(N,2*O+2*L+1),N[2*O+2*L+2]+=j*H,b(N,2*O+2*L+2)}for(O=0;O<R;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=R;O<2*R;O++)N[O]=0;return new o(N,0)};function b(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function w(I,R){this.g=I,this.h=R}function E(I,R){if(p(R))throw Error("division by zero");if(p(I))return new w(f,f);if(m(I))return R=E(g(I),R),new w(g(R.g),g(R.h));if(m(R))return R=E(I,g(R)),new w(g(R.g),R.h);if(30<I.g.length){if(m(I)||m(R))throw Error("slowDivide_ only works with positive integers.");for(var N=d,O=R;0>=O.l(I);)N=T(N),O=T(O);var L=C(N,1),j=C(O,1);for(O=C(O,2),N=C(N,2);!p(O);){var F=j.add(O);0>=F.l(I)&&(L=L.add(N),j=F),O=C(O,1),N=C(N,1)}return R=v(I,L.j(R)),new w(L,R)}for(L=f;0<=I.l(R);){for(N=Math.max(1,Math.floor(I.m()/R.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=l(N),F=j.j(R);m(F)||0<F.l(I);)N-=O,j=l(N),F=j.j(R);p(j)&&(j=d),L=L.add(j),I=v(I,F)}return new w(L,I)}e.A=function(I){return E(this,I).h},e.and=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)&I.i(O);return new o(N,this.h&I.h)},e.or=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)|I.i(O);return new o(N,this.h|I.h)},e.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)^I.i(O);return new o(N,this.h^I.h)};function T(I){for(var R=I.g.length+1,N=[],O=0;O<R;O++)N[O]=I.i(O)<<1|I.i(O-1)>>>31;return new o(N,I.h)}function C(I,R){var N=R>>5;R%=32;for(var O=I.g.length-N,L=[],j=0;j<O;j++)L[j]=0<R?I.i(j+N)>>>R|I.i(j+N+1)<<32-R:I.i(j+N);return new o(L,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x2e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,hb=o}).apply(typeof Ofe<"u"?Ofe:typeof self<"u"?self:typeof window<"u"?window:{});var J4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _2e,WR,w2e,aL,HW,E2e,S2e,T2e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,W,te){return D==Array.prototype||D==Object.prototype||(D[W]=te.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof J4=="object"&&J4];for(var W=0;W<D.length;++W){var te=D[W];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var r=n(this);function i(D,W){if(W)e:{var te=r;D=D.split(".");for(var ce=0;ce<D.length-1;ce++){var ze=D[ce];if(!(ze in te))break e;te=te[ze]}D=D[D.length-1],ce=te[D],W=W(ce),W!=ce&&W!=null&&t(te,D,{configurable:!0,writable:!0,value:W})}}function s(D,W){D instanceof String&&(D+="");var te=0,ce=!1,ze={next:function(){if(!ce&&te<D.length){var Ze=te++;return{value:W(Ze,D[Ze]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}i("Array.prototype.values",function(D){return D||function(){return s(this,function(W,te){return te})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var W=typeof D;return W=W!="object"?W:D?Array.isArray(D)?"array":W:"null",W=="array"||W=="object"&&typeof D.length=="number"}function l(D){var W=typeof D;return W=="object"&&D!=null||W=="function"}function c(D,W,te){return D.call.apply(D.bind,arguments)}function f(D,W,te){if(!D)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ce),D.apply(W,ze)}}return function(){return D.apply(W,arguments)}}function d(D,W,te){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,W){var te=Array.prototype.slice.call(arguments,1);return function(){var ce=te.slice();return ce.push.apply(ce,arguments),D.apply(this,ce)}}function p(D,W){function te(){}te.prototype=W.prototype,D.aa=W.prototype,D.prototype=new te,D.prototype.constructor=D,D.Qb=function(ce,ze,Ze){for(var Ut=Array(arguments.length-2),ui=2;ui<arguments.length;ui++)Ut[ui-2]=arguments[ui];return W.prototype[ze].apply(ce,Ut)}}function m(D){const W=D.length;if(0<W){const te=Array(W);for(let ce=0;ce<W;ce++)te[ce]=D[ce];return te}return[]}function g(D,W){for(let te=1;te<arguments.length;te++){const ce=arguments[te];if(u(ce)){const ze=D.length||0,Ze=ce.length||0;D.length=ze+Ze;for(let Ut=0;Ut<Ze;Ut++)D[ze+Ut]=ce[Ut]}else D.push(ce)}}class v{constructor(W,te){this.i=W,this.j=te,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function b(D){return/^[\s\xa0]*$/.test(D)}function w(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function E(D){return E[" "](D),D}E[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(D,W,te){for(const ce in D)W.call(te,D[ce],ce,D)}function I(D,W){for(const te in D)W.call(void 0,D[te],te,D)}function R(D){const W={};for(const te in D)W[te]=D[te];return W}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(D,W){let te,ce;for(let ze=1;ze<arguments.length;ze++){ce=arguments[ze];for(te in ce)D[te]=ce[te];for(let Ze=0;Ze<N.length;Ze++)te=N[Ze],Object.prototype.hasOwnProperty.call(ce,te)&&(D[te]=ce[te])}}function L(D){var W=1;D=D.split(":");const te=[];for(;0<W&&D.length;)te.push(D.shift()),W--;return D.length&&te.push(D.join(":")),te}function j(D){a.setTimeout(()=>{throw D},0)}function F(){var D=ie;let W=null;return D.g&&(W=D.g,D.g=D.g.next,D.g||(D.h=null),W.next=null),W}class H{constructor(){this.h=this.g=null}add(W,te){const ce=Q.get();ce.set(W,te),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var Q=new v(()=>new J,D=>D.reset());class J{constructor(){this.next=this.g=this.h=null}set(W,te){this.h=W,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Z=!1,ie=new H,q=()=>{const D=a.Promise.resolve(void 0);ne=()=>{D.then(U)}};var U=()=>{for(var D;D=F();){try{D.h.call(D.g)}catch(te){j(te)}var W=Q;W.j(D),100>W.h&&(W.h++,D.next=W.g,W.g=D)}Z=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(D,W){this.type=D,this.g=this.target=W,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,W=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const te=()=>{};a.addEventListener("test",te,W),a.removeEventListener("test",te,W)}catch{}return D}();function ee(D,W){if(V.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var te=this.type=D.type,ce=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=W,W=D.relatedTarget){if(T){e:{try{E(W.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(W=null)}}else te=="mouseover"?W=D.fromElement:te=="mouseout"&&(W=D.toElement);this.relatedTarget=W,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:ae[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&ee.aa.h.call(this)}}p(ee,V);var ae={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Se(D,W,te,ce,ze){this.listener=D,this.proxy=null,this.src=W,this.type=te,this.capture=!!ce,this.ha=ze,this.key=++pe,this.da=this.fa=!1}function Le(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function ye(D){this.src=D,this.g={},this.h=0}ye.prototype.add=function(D,W,te,ce,ze){var Ze=D.toString();D=this.g[Ze],D||(D=this.g[Ze]=[],this.h++);var Ut=$e(D,W,ce,ze);return-1<Ut?(W=D[Ut],te||(W.fa=!1)):(W=new Se(W,this.src,Ze,!!ce,ze),W.fa=te,D.push(W)),W};function he(D,W){var te=W.type;if(te in D.g){var ce=D.g[te],ze=Array.prototype.indexOf.call(ce,W,void 0),Ze;(Ze=0<=ze)&&Array.prototype.splice.call(ce,ze,1),Ze&&(Le(W),D.g[te].length==0&&(delete D.g[te],D.h--))}}function $e(D,W,te,ce){for(var ze=0;ze<D.length;++ze){var Ze=D[ze];if(!Ze.da&&Ze.listener==W&&Ze.capture==!!te&&Ze.ha==ce)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),tt={};function it(D,W,te,ce,ze){if(Array.isArray(W)){for(var Ze=0;Ze<W.length;Ze++)it(D,W[Ze],te,ce,ze);return null}return te=wt(te),D&&D[_e]?D.K(W,te,l(ce)?!!ce.capture:!1,ze):Me(D,W,te,!1,ce,ze)}function Me(D,W,te,ce,ze,Ze){if(!W)throw Error("Invalid event type");var Ut=l(ze)?!!ze.capture:!!ze,ui=qe(D);if(ui||(D[De]=ui=new ye(D)),te=ui.add(W,te,ce,Ut,Ze),te.proxy)return te;if(ce=Ge(),te.proxy=ce,ce.src=D,ce.listener=te,D.addEventListener)Y||(ze=Ut),ze===void 0&&(ze=!1),D.addEventListener(W.toString(),ce,ze);else if(D.attachEvent)D.attachEvent(St(W.toString()),ce);else if(D.addListener&&D.removeListener)D.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return te}function Ge(){function D(te){return W.call(D.src,D.listener,te)}const W=Ot;return D}function at(D,W,te,ce,ze){if(Array.isArray(W))for(var Ze=0;Ze<W.length;Ze++)at(D,W[Ze],te,ce,ze);else ce=l(ce)?!!ce.capture:!!ce,te=wt(te),D&&D[_e]?(D=D.i,W=String(W).toString(),W in D.g&&(Ze=D.g[W],te=$e(Ze,te,ce,ze),-1<te&&(Le(Ze[te]),Array.prototype.splice.call(Ze,te,1),Ze.length==0&&(delete D.g[W],D.h--)))):D&&(D=qe(D))&&(W=D.g[W.toString()],D=-1,W&&(D=$e(W,te,ce,ze)),(te=-1<D?W[D]:null)&&yt(te))}function yt(D){if(typeof D!="number"&&D&&!D.da){var W=D.src;if(W&&W[_e])he(W.i,D);else{var te=D.type,ce=D.proxy;W.removeEventListener?W.removeEventListener(te,ce,D.capture):W.detachEvent?W.detachEvent(St(te),ce):W.addListener&&W.removeListener&&W.removeListener(ce),(te=qe(W))?(he(te,D),te.h==0&&(te.src=null,W[De]=null)):Le(D)}}}function St(D){return D in tt?tt[D]:tt[D]="on"+D}function Ot(D,W){if(D.da)D=!0;else{W=new ee(W,this);var te=D.listener,ce=D.ha||D.src;D.fa&&yt(D),D=te.call(ce,W)}return D}function qe(D){return D=D[De],D instanceof ye?D:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(D){return typeof D=="function"?D:(D[dt]||(D[dt]=function(W){return D.handleEvent(W)}),D[dt])}function ke(){G.call(this),this.i=new ye(this),this.M=this,this.F=null}p(ke,G),ke.prototype[_e]=!0,ke.prototype.removeEventListener=function(D,W,te,ce){at(this,D,W,te,ce)};function Oe(D,W){var te,ce=D.F;if(ce)for(te=[];ce;ce=ce.F)te.push(ce);if(D=D.M,ce=W.type||W,typeof W=="string")W=new V(W,D);else if(W instanceof V)W.target=W.target||D;else{var ze=W;W=new V(ce,D),O(W,ze)}if(ze=!0,te)for(var Ze=te.length-1;0<=Ze;Ze--){var Ut=W.g=te[Ze];ze=ht(Ut,ce,!0,W)&&ze}if(Ut=W.g=D,ze=ht(Ut,ce,!0,W)&&ze,ze=ht(Ut,ce,!1,W)&&ze,te)for(Ze=0;Ze<te.length;Ze++)Ut=W.g=te[Ze],ze=ht(Ut,ce,!1,W)&&ze}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var D=this.i,W;for(W in D.g){for(var te=D.g[W],ce=0;ce<te.length;ce++)Le(te[ce]);delete D.g[W],D.h--}}this.F=null},ke.prototype.K=function(D,W,te,ce){return this.i.add(String(D),W,!1,te,ce)},ke.prototype.L=function(D,W,te,ce){return this.i.add(String(D),W,!0,te,ce)};function ht(D,W,te,ce){if(W=D.i.g[String(W)],!W)return!0;W=W.concat();for(var ze=!0,Ze=0;Ze<W.length;++Ze){var Ut=W[Ze];if(Ut&&!Ut.da&&Ut.capture==te){var ui=Ut.listener,xo=Ut.ha||Ut.src;Ut.fa&&he(D.i,Ut),ze=ui.call(xo,ce)!==!1&&ze}}return ze&&!ce.defaultPrevented}function Lt(D,W,te){if(typeof D=="function")te&&(D=d(D,te));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(D,W||0)}function Ft(D){D.g=Lt(()=>{D.g=null,D.i&&(D.i=!1,Ft(D))},D.l);const W=D.h;D.h=null,D.m.apply(null,W)}class dn extends G{constructor(W,te){super(),this.m=W,this.l=te,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(D){G.call(this),this.h=D,this.g={}}p(Nn,G);var Sr=[];function Ni(D){C(D.g,function(W,te){this.g.hasOwnProperty(te)&&yt(W)},D),D.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),Ni(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=a.JSON.stringify,tr=a.JSON.parse,Ai=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function Tr(){}Tr.prototype.h=null;function Lo(D){return D.h||(D.h=D.i())}function Ji(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){V.call(this,"d")}p(Zi,V);function Qr(){V.call(this,"c")}p(Qr,V);var $o={},oc=null;function ba(){return oc=oc||new ke}$o.La="serverreachability";function Ru(D){V.call(this,$o.La,D)}p(Ru,V);function Jr(D){const W=ba();Oe(W,new Ru(W))}$o.STAT_EVENT="statevent";function ji(D,W){V.call(this,$o.STAT_EVENT,D),this.stat=W}p(ji,V);function ai(D){const W=ba();Oe(W,new ji(W,D))}$o.Ma="timingevent";function Ws(D,W){V.call(this,$o.Ma,D),this.size=W}p(Ws,V);function Fr(D,W){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},W)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function Fo(D,W,te,ce,ze,Ze){D.info(function(){if(D.g)if(Ze)for(var Ut="",ui=Ze.split("&"),xo=0;xo<ui.length;xo++){var Rr=ui[xo].split("=");if(1<Rr.length){var hi=Rr[0];Rr=Rr[1];var Ts=hi.split("_");Ut=2<=Ts.length&&Ts[1]=="type"?Ut+(hi+"="+Rr+"&"):Ut+(hi+"=redacted&")}}else Ut=null;else Ut=Ze;return"XMLHTTP REQ ("+ce+") [attempt "+ze+"]: "+W+`
`+te+`
`+Ut})}function mo(D,W,te,ce,ze,Ze,Ut){D.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+ze+"]: "+W+`
`+te+`
`+Ze+" "+Ut})}function Qo(D,W,te,ce){D.info(function(){return"XMLHTTP TEXT ("+W+"): "+Ph(D,te)+(ce?" "+ce:"")})}function xl(D,W){D.info(function(){return"TIMEOUT: "+W})}es.prototype.info=function(){};function Ph(D,W){if(!D.g)return W;if(!W)return null;try{var te=JSON.parse(W);if(te){for(D=0;D<te.length;D++)if(Array.isArray(te[D])){var ce=te[D];if(!(2>ce.length)){var ze=ce[1];if(Array.isArray(ze)&&!(1>ze.length)){var Ze=ze[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Un(te)}catch{return W}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ac={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ms;function Ka(){}p(Ka,Tr),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},ms=new Ka;function Jo(D,W,te,ce){this.j=D,this.i=W,this.l=te,this.R=ce||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var Oh={},_d={};function wd(D,W,te){D.L=1,D.v=nr(xt(W)),D.m=te,D.P=!0,gf(D,null)}function gf(D,W){D.F=Date.now(),fr(D),D.A=xt(D.v);var te=D.A,ce=D.R;Array.isArray(ce)||(ce=[String(ce)]),xf(te.i,"t",ce),D.C=0,te=D.j.J,D.h=new mm,D.g=gS(D.j,te?W:null,!D.m),0<D.O&&(D.M=new dn(d(D.Y,D,D.g),D.O)),W=D.U,te=D.g,ce=D.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(Sr[0]=ze.toString()),ze=Sr);for(var Ze=0;Ze<ze.length;Ze++){var Ut=it(te,ze[Ze],ce||W.handleEvent,!1,W.h||W);if(!Ut)break;W.g[Ut.key]=Ut}W=D.H?R(D.H):{},D.m?(D.u||(D.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,W)):(D.u="GET",D.g.ea(D.A,D.u,null,W)),Jr(),Fo(D.i,D.u,D.A,D.l,D.R,D.m)}Jo.prototype.ca=function(D){D=D.target;const W=this.M;W&&Zr(D)==3?W.j():this.Y(D)},Jo.prototype.Y=function(D){try{if(D==this.g)e:{const Ts=Zr(this.g);var W=this.g.Ba();const _a=this.g.Z();if(!(3>Ts)&&(Ts!=3||this.g&&(this.h.h||this.g.oa()||Ks(this.g)))){this.J||Ts!=4||W==7||(W==8||0>=_a?Jr(3):Jr(2)),go(this);var te=this.g.Z();this.X=te;t:if(yf(this)){var ce=Ks(this.g);D="";var ze=ce.length,Ze=Zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gs(this),_l(this);var Ut="";break t}this.h.i=new a.TextDecoder}for(W=0;W<ze;W++)this.h.h=!0,D+=this.h.i.decode(ce[W],{stream:!(Ze&&W==ze-1)});ce.length=0,this.h.g+=D,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=te==200,mo(this.i,this.u,this.A,this.l,this.R,Ts,te),this.o){if(this.T&&!this.K){t:{if(this.g){var ui,xo=this.g;if((ui=xo.g?xo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ui)){var Rr=ui;break t}}Rr=null}if(te=Rr)Qo(this.i,this.l,te,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uc(this,te);else{this.o=!1,this.s=3,ai(12),Gs(this),_l(this);break e}}if(this.P){te=!0;let Pu;for(;!this.J&&this.C<Ut.length;)if(Pu=vf(this,Ut),Pu==_d){Ts==4&&(this.s=4,ai(14),te=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(Pu==Oh){this.s=4,ai(15),Qo(this.i,this.l,Ut,"[Invalid Chunk]"),te=!1;break}else Qo(this.i,this.l,Pu,null),uc(this,Pu);if(yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ts!=4||Ut.length!=0||this.h.h||(this.s=1,ai(16),te=!1),this.o=this.o&&te,!te)Qo(this.i,this.l,Ut,"[Invalid Chunked Response]"),Gs(this),_l(this);else if(0<Ut.length&&!this.W){this.W=!0;var hi=this.j;hi.g==this&&hi.ba&&!hi.M&&(hi.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),hc(hi),hi.M=!0,ai(11))}}else Qo(this.i,this.l,Ut,null),uc(this,Ut);Ts==4&&Gs(this),this.o&&!this.J&&(Ts==4?Ei(this.j,this):(this.o=!1,fr(this)))}else Nu(this.g),te==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,ai(12)):(this.s=0,ai(13)),Gs(this),_l(this)}}}catch{}finally{}};function yf(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function vf(D,W){var te=D.C,ce=W.indexOf(`
`,te);return ce==-1?_d:(te=Number(W.substring(te,ce)),isNaN(te)?Oh:(ce+=1,ce+te>W.length?_d:(W=W.slice(ce,ce+te),D.C=ce+te,W)))}Jo.prototype.cancel=function(){this.J=!0,Gs(this)};function fr(D){D.S=Date.now()+D.I,Mh(D,D.I)}function Mh(D,W){if(D.B!=null)throw Error("WatchDog timer not null");D.B=Fr(d(D.ba,D),W)}function go(D){D.B&&(a.clearTimeout(D.B),D.B=null)}Jo.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(xl(this.i,this.A),this.L!=2&&(Jr(),ai(17)),Gs(this),this.s=2,_l(this)):Mh(this,this.S-D)};function _l(D){D.j.G==0||D.J||Ei(D.j,D)}function Gs(D){go(D);var W=D.M;W&&typeof W.ma=="function"&&W.ma(),D.M=null,Ni(D.U),D.g&&(W=D.g,D.g=null,W.abort(),W.ma())}function uc(D,W){try{var te=D.j;if(te.G!=0&&(te.g==D||vo(te.h,D))){if(!D.K&&vo(te.h,D)&&te.G==3){try{var ce=te.Da.g.parse(W)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var ze=ce;if(ze[0]==0){e:if(!te.u){if(te.g)if(te.g.F+3e3<D.F)ym(te),dc(te);else break e;Cg(te),ai(18)}}else te.za=ze[1],0<te.za-te.T&&37500>ze[2]&&te.F&&te.v==0&&!te.C&&(te.C=Fr(d(te.Za,te),6e3));if(1>=gm(te.h)&&te.ca){try{te.ca()}catch{}te.ca=void 0}}else Tf(te,11)}else if((D.K||te.g==D)&&ym(te),!b(W))for(ze=te.Da.g.parse(W),W=0;W<ze.length;W++){let Rr=ze[W];if(te.T=Rr[0],Rr=Rr[1],te.G==2)if(Rr[0]=="c"){te.K=Rr[1],te.ia=Rr[2];const hi=Rr[3];hi!=null&&(te.la=hi,te.j.info("VER="+te.la));const Ts=Rr[4];Ts!=null&&(te.Aa=Ts,te.j.info("SVER="+te.Aa));const _a=Rr[5];_a!=null&&typeof _a=="number"&&0<_a&&(ce=1.5*_a,te.L=ce,te.j.info("backChannelRequestTimeoutMs_="+ce)),ce=te;const Pu=D.g;if(Pu){const vm=Pu.g?Pu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vm){var Ze=ce.h;Ze.g||vm.indexOf("spdy")==-1&&vm.indexOf("quic")==-1&&vm.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(ue(Ze,Ze.h),Ze.h=null))}if(ce.D){const G1=Pu.g?Pu.g.getResponseHeader("X-HTTP-Session-Id"):null;G1&&(ce.ya=G1,un(ce.I,ce.D,G1))}}te.G=3,te.l&&te.l.ua(),te.ba&&(te.R=Date.now()-D.F,te.j.info("Handshake RTT: "+te.R+"ms")),ce=te;var Ut=D;if(ce.qa=q1(ce,ce.J?ce.ia:null,ce.W),Ut.K){Te(ce.h,Ut);var ui=Ut,xo=ce.L;xo&&(ui.I=xo),ui.B&&(go(ui),fr(ui)),ce.g=Ut}else Tg(ce);0<te.i.length&&Ef(te)}else Rr[0]!="stop"&&Rr[0]!="close"||Tf(te,7);else te.G==3&&(Rr[0]=="stop"||Rr[0]=="close"?Rr[0]=="stop"?Tf(te,7):Fs(te):Rr[0]!="noop"&&te.l&&te.l.ta(Rr),te.v=0)}}Jr(4)}catch{}}var Lh=class{constructor(D,W){this.g=D,this.map=W}};function lc(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yo(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function gm(D){return D.h?1:D.g?D.g.size:0}function vo(D,W){return D.h?D.h==W:D.g?D.g.has(W):!1}function ue(D,W){D.g?D.g.add(W):D.h=W}function Te(D,W){D.h&&D.h==W?D.h=null:D.g&&D.g.has(W)&&D.g.delete(W)}lc.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ge(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let W=D.i;for(const te of D.g.values())W=W.concat(te.D);return W}return m(D.i)}function Ne(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var W=[],te=D.length,ce=0;ce<te;ce++)W.push(D[ce]);return W}W=[],te=0;for(ce in D)W[te++]=D[ce];return W}function Be(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var W=[];D=D.length;for(var te=0;te<D;te++)W.push(te);return W}W=[],te=0;for(const ce in D)W[te++]=ce;return W}}}function Re(D,W){if(D.forEach&&typeof D.forEach=="function")D.forEach(W,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,W,void 0);else for(var te=Be(D),ce=Ne(D),ze=ce.length,Ze=0;Ze<ze;Ze++)W.call(void 0,ce[Ze],te&&te[Ze],D)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bt(D,W){if(D){D=D.split("&");for(var te=0;te<D.length;te++){var ce=D[te].indexOf("="),ze=null;if(0<=ce){var Ze=D[te].substring(0,ce);ze=D[te].substring(ce+1)}else Ze=D[te];W(Ze,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Et(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof Et){this.h=D.h,Dt(this,D.j),this.o=D.o,this.g=D.g,qt(this,D.s),this.l=D.l;var W=D.i,te=new Bo;te.i=W.i,W.g&&(te.g=new Map(W.g),te.h=W.h),In(this,te),this.m=D.m}else D&&(W=String(D).match(rt))?(this.h=!1,Dt(this,W[1]||"",!0),this.o=ln(W[2]||""),this.g=ln(W[3]||"",!0),qt(this,W[4]),this.l=ln(W[5]||"",!0),In(this,W[6]||"",!0),this.m=ln(W[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}Et.prototype.toString=function(){var D=[],W=this.j;W&&D.push(br(W,Xa,!0),":");var te=this.g;return(te||W=="file")&&(D.push("//"),(W=this.o)&&D.push(br(W,Xa,!0),"@"),D.push(encodeURIComponent(String(te)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.s,te!=null&&D.push(":",String(te))),(te=this.l)&&(this.g&&te.charAt(0)!="/"&&D.push("/"),D.push(br(te,te.charAt(0)=="/"?$h:cc,!0))),(te=this.i.toString())&&D.push("?",te),(te=this.m)&&D.push("#",br(te,Fh)),D.join("")};function xt(D){return new Et(D)}function Dt(D,W,te){D.j=te?ln(W,!0):W,D.j&&(D.j=D.j.replace(/:$/,""))}function qt(D,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);D.s=W}else D.s=null}function In(D,W,te){W instanceof Bo?(D.i=W,Du(D.i,D.h)):(te||(W=br(W,bf)),D.i=new Bo(W,D.h))}function un(D,W,te){D.i.set(W,te)}function nr(D){return un(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function ln(D,W){return D?W?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function br(D,W,te){return typeof D=="string"?(D=encodeURI(D).replace(W,Ys),te&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Ys(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var Xa=/[#\/\?@]/g,cc=/[#\?:]/g,$h=/[#\?]/g,bf=/[#\?@]/g,Fh=/#/g;function Bo(D,W){this.h=this.g=null,this.i=D||null,this.j=!!W}function gs(D){D.g||(D.g=new Map,D.h=0,D.i&&bt(D.i,function(W,te){D.add(decodeURIComponent(W.replace(/\+/g," ")),te)}))}e=Bo.prototype,e.add=function(D,W){gs(this),this.i=null,D=Ja(this,D);var te=this.g.get(D);return te||this.g.set(D,te=[]),te.push(W),this.h+=1,this};function jo(D,W){gs(D),W=Ja(D,W),D.g.has(W)&&(D.i=null,D.h-=D.g.get(W).length,D.g.delete(W))}function Qa(D,W){return gs(D),W=Ja(D,W),D.g.has(W)}e.forEach=function(D,W){gs(this),this.g.forEach(function(te,ce){te.forEach(function(ze){D.call(W,ze,ce,this)},this)},this)},e.na=function(){gs(this);const D=Array.from(this.g.values()),W=Array.from(this.g.keys()),te=[];for(let ce=0;ce<W.length;ce++){const ze=D[ce];for(let Ze=0;Ze<ze.length;Ze++)te.push(W[ce])}return te},e.V=function(D){gs(this);let W=[];if(typeof D=="string")Qa(this,D)&&(W=W.concat(this.g.get(Ja(this,D))));else{D=Array.from(this.g.values());for(let te=0;te<D.length;te++)W=W.concat(D[te])}return W},e.set=function(D,W){return gs(this),this.i=null,D=Ja(this,D),Qa(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[W]),this.h+=1,this},e.get=function(D,W){return D?(D=this.V(D),0<D.length?String(D[0]):W):W};function xf(D,W,te){jo(D,W),0<te.length&&(D.i=null,D.g.set(Ja(D,W),m(te)),D.h+=te.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],W=Array.from(this.g.keys());for(var te=0;te<W.length;te++){var ce=W[te];const Ze=encodeURIComponent(String(ce)),Ut=this.V(ce);for(ce=0;ce<Ut.length;ce++){var ze=Ze;Ut[ce]!==""&&(ze+="="+encodeURIComponent(String(Ut[ce]))),D.push(ze)}}return this.i=D.join("&")};function Ja(D,W){return W=String(W),D.j&&(W=W.toLowerCase()),W}function Du(D,W){W&&!D.j&&(gs(D),D.i=null,D.g.forEach(function(te,ce){var ze=ce.toLowerCase();ce!=ze&&(jo(this,ce),xf(this,ze,te))},D)),D.j=W}function V1(D,W){const te=new es;if(a.Image){const ce=new Image;ce.onload=h(Ss,te,"TestLoadImage: loaded",!0,W,ce),ce.onerror=h(Ss,te,"TestLoadImage: error",!1,W,ce),ce.onabort=h(Ss,te,"TestLoadImage: abort",!1,W,ce),ce.ontimeout=h(Ss,te,"TestLoadImage: timeout",!1,W,ce),a.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=D}else W(!1)}function fc(D,W){const te=new es,ce=new AbortController,ze=setTimeout(()=>{ce.abort(),Ss(te,"TestPingServer: timeout",!1,W)},1e4);fetch(D,{signal:ce.signal}).then(Ze=>{clearTimeout(ze),Ze.ok?Ss(te,"TestPingServer: ok",!0,W):Ss(te,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(ze),Ss(te,"TestPingServer: error",!1,W)})}function Ss(D,W,te,ce,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ce(te)}catch{}}function Wx(){this.g=new Ai}function Eg(D,W,te){const ce=te||"";try{Re(D,function(ze,Ze){let Ut=ze;l(ze)&&(Ut=Un(ze)),W.push(ce+Ze+"="+encodeURIComponent(Ut))})}catch(ze){throw W.push(ce+"type="+encodeURIComponent("_badmap")),ze}}function _f(D){this.l=D.Ub||null,this.j=D.eb||!1}p(_f,Tr),_f.prototype.g=function(){return new Ed(this.l,this.j)},_f.prototype.i=function(D){return function(){return D}}({});function Ed(D,W){ke.call(this),this.D=D,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ed,ke),e=Ed.prototype,e.open=function(D,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=W,this.readyState=1,dr(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(W.body=D),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;H1(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function H1(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var W=D.value?D.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!D.done}))&&(this.response=this.responseText+=W)}D.done?xr(this):dr(this),this.readyState==3&&H1(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,xr(this))},e.Qa=function(D){this.g&&(this.response=D,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(D){D.readyState=4,D.l=null,D.j=null,D.v=null,dr(D)}e.setRequestHeader=function(D,W){this.u.append(D,W)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],W=this.h.entries();for(var te=W.next();!te.done;)te=te.value,D.push(te[0]+": "+te[1]),te=W.next();return D.join(`\r
`)};function dr(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function wf(D){let W="";return C(D,function(te,ce){W+=ce,W+=":",W+=te,W+=`\r
`}),W}function ve(D,W,te){e:{for(ce in te){var ce=!1;break e}ce=!0}ce||(te=wf(te),typeof D=="string"?te!=null&&encodeURIComponent(String(te)):un(D,W,te))}function Ae(D){ke.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ae,ke);var Qe=/^https?$/i,tn=["POST","PUT"];e=Ae.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,W,te,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);W=W?W.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ms.g(),this.v=this.o?Lo(this.o):Lo(ms),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(W,String(D),!0),this.B=!1}catch(Ze){rr(this,Ze);return}if(D=te||"",te=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var ze in ce)te.set(ze,ce[ze]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const Ze of ce.keys())te.set(Ze,ce.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from(te.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),ze=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tn,W,void 0))||ce||ze||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,Ut]of te)this.g.setRequestHeader(Ze,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(D),this.u=!1}catch(Ze){rr(this,Ze)}};function rr(D,W){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=W,D.m=5,kr(D),cn(D)}function kr(D){D.A||(D.A=!0,Oe(D,"complete"),Oe(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,Oe(this,"complete"),Oe(this,"abort"),cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Ae.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?di(this):this.bb())},e.bb=function(){di(this)};function di(D){if(D.h&&typeof o<"u"&&(!D.v[1]||Zr(D)!=4||D.Z()!=2)){if(D.u&&Zr(D)==4)Lt(D.Ea,0,D);else if(Oe(D,"readystatechange"),Zr(D)==4){D.h=!1;try{const Ut=D.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var te;if(!(te=W)){var ce;if(ce=Ut===0){var ze=String(D.D).match(rt)[1]||null;!ze&&a.self&&a.self.location&&(ze=a.self.location.protocol.slice(0,-1)),ce=!Qe.test(ze?ze.toLowerCase():"")}te=ce}if(te)Oe(D,"complete"),Oe(D,"success");else{D.m=6;try{var Ze=2<Zr(D)?D.g.statusText:""}catch{Ze=""}D.l=Ze+" ["+D.Z()+"]",kr(D)}}finally{cn(D)}}}}function cn(D,W){if(D.g){Br(D);const te=D.g,ce=D.v[0]?()=>{}:null;D.g=null,D.v=null,W||Oe(D,"ready");try{te.onreadystatechange=ce}catch{}}}function Br(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function Zr(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<Zr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var W=this.g.responseText;return D&&W.indexOf(D)==0&&(W=W.substring(D.length)),tr(W)}};function Ks(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function Nu(D){const W={};D=(D.g&&2<=Zr(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<D.length;ce++){if(b(D[ce]))continue;var te=L(D[ce]);const ze=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const Ze=W[ze]||[];W[ze]=Ze,Ze.push(te)}I(W,function(ce){return ce.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(D,W,te){return te&&te.internalChannelParams&&te.internalChannelParams[D]||W}function Sd(D){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ts("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ts("baseRetryDelayMs",5e3,D),this.cb=ts("retryDelaySeedMs",1e4,D),this.Wa=ts("forwardChannelMaxRetries",2,D),this.wa=ts("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new lc(D&&D.concurrentRequestLimit),this.Da=new Wx,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Sd.prototype,e.la=8,e.G=1,e.connect=function(D,W,te,ce){ai(0),this.W=D,this.H=W||{},te&&ce!==void 0&&(this.H.OSID=te,this.H.OAID=ce),this.F=this.X,this.I=q1(this,null,this.W),Ef(this)};function Fs(D){if(Sg(D),D.G==3){var W=D.U++,te=xt(D.I);if(un(te,"SID",D.K),un(te,"RID",W),un(te,"TYPE","terminate"),Bh(D,te),W=new Jo(D,D.j,W),W.L=2,W.v=nr(xt(te)),te=!1,a.navigator&&a.navigator.sendBeacon)try{te=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!te&&a.Image&&(new Image().src=W.v,te=!0),te||(W.g=gS(W.j,null),W.g.ea(W.v)),W.F=Date.now(),fr(W)}mS(D)}function dc(D){D.g&&(hc(D),D.g.cancel(),D.g=null)}function Sg(D){dc(D),D.u&&(a.clearTimeout(D.u),D.u=null),ym(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function Ef(D){if(!yo(D.h)&&!D.s){D.s=!0;var W=D.Ga;ne||q(),Z||(ne(),Z=!0),ie.add(W,D),D.B=0}}function pS(D,W){return gm(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=W.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=Fr(d(D.Ga,D,W),Sf(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const ze=new Jo(this,this.j,D);let Ze=this.o;if(this.S&&(Ze?(Ze=R(Ze),O(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(ze.H=Ze,Ze=null),this.P)e:{for(var W=0,te=0;te<this.i.length;te++){t:{var ce=this.i[te];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(W+=ce,4096<W){W=te;break e}if(W===4096||te===this.i.length-1){W=te+1;break e}}W=1e3}else W=1e3;W=bo(this,ze,W),te=xt(this.I),un(te,"RID",D),un(te,"CVER",22),this.D&&un(te,"X-HTTP-Session-Id",this.D),Bh(this,te),Ze&&(this.O?W="headers="+encodeURIComponent(String(wf(Ze)))+"&"+W:this.m&&ve(te,this.m,Ze)),ue(this.h,ze),this.Ua&&un(te,"TYPE","init"),this.P?(un(te,"$req",W),un(te,"SID","null"),ze.T=!0,wd(ze,te,null)):wd(ze,te,W),this.G=2}}else this.G==3&&(D?Uo(this,D):this.i.length==0||yo(this.h)||Uo(this))};function Uo(D,W){var te;W?te=W.l:te=D.U++;const ce=xt(D.I);un(ce,"SID",D.K),un(ce,"RID",te),un(ce,"AID",D.T),Bh(D,ce),D.m&&D.o&&ve(ce,D.m,D.o),te=new Jo(D,D.j,te,D.B+1),D.m===null&&(te.H=D.o),W&&(D.i=W.D.concat(D.i)),W=bo(D,te,1e3),te.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),ue(D.h,te),wd(te,ce,W)}function Bh(D,W){D.H&&C(D.H,function(te,ce){un(W,ce,te)}),D.l&&Re({},function(te,ce){un(W,ce,te)})}function bo(D,W,te){te=Math.min(D.i.length,te);var ce=D.l?d(D.l.Na,D.l,D):null;e:{var ze=D.i;let Ze=-1;for(;;){const Ut=["count="+te];Ze==-1?0<te?(Ze=ze[0].g,Ut.push("ofs="+Ze)):Ze=0:Ut.push("ofs="+Ze);let ui=!0;for(let xo=0;xo<te;xo++){let Rr=ze[xo].g;const hi=ze[xo].map;if(Rr-=Ze,0>Rr)Ze=Math.max(0,ze[xo].g-100),ui=!1;else try{Eg(hi,Ut,"req"+Rr+"_")}catch{ce&&ce(hi)}}if(ui){ce=Ut.join("&");break e}}}return D=D.i.splice(0,te),W.D=D,ce}function Tg(D){if(!D.g&&!D.u){D.Y=1;var W=D.Fa;ne||q(),Z||(ne(),Z=!0),ie.add(W,D),D.v=0}}function Cg(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=Fr(d(D.Fa,D),Sf(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,Ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=Fr(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ai(10),dc(this),Ag(this))};function hc(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function Ag(D){D.g=new Jo(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var W=xt(D.qa);un(W,"RID","rpc"),un(W,"SID",D.K),un(W,"AID",D.T),un(W,"CI",D.F?"0":"1"),!D.F&&D.ja&&un(W,"TO",D.ja),un(W,"TYPE","xmlhttp"),Bh(D,W),D.m&&D.o&&ve(W,D.m,D.o),D.L&&(D.g.I=D.L);var te=D.g;D=D.ia,te.L=1,te.v=nr(xt(W)),te.m=null,te.P=!0,gf(te,D)}e.Za=function(){this.C!=null&&(this.C=null,dc(this),Cg(this),ai(19))};function ym(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function Ei(D,W){var te=null;if(D.g==W){ym(D),hc(D),D.g=null;var ce=2}else if(vo(D.h,W))te=W.D,Te(D.h,W),ce=1;else return;if(D.G!=0){if(W.o)if(ce==1){te=W.m?W.m.length:0,W=Date.now()-W.F;var ze=D.B;ce=ba(),Oe(ce,new Ws(ce,te)),Ef(D)}else Tg(D);else if(ze=W.s,ze==3||ze==0&&0<W.X||!(ce==1&&pS(D,W)||ce==2&&Cg(D)))switch(te&&0<te.length&&(W=D.h,W.i=W.i.concat(te)),ze){case 1:Tf(D,5);break;case 4:Tf(D,10);break;case 3:Tf(D,6);break;default:Tf(D,2)}}}function Sf(D,W){let te=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(te*=2),te*W}function Tf(D,W){if(D.j.info("Error code "+W),W==2){var te=d(D.fb,D),ce=D.Xa;const ze=!ce;ce=new Et(ce||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dt(ce,"https"),nr(ce),ze?V1(ce.toString(),te):fc(ce.toString(),te)}else ai(2);D.G=0,D.l&&D.l.sa(W),mS(D),Sg(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),ai(2)):(this.j.info("Failed to ping google.com"),ai(1))};function mS(D){if(D.G=0,D.ka=[],D.l){const W=ge(D.h);(W.length!=0||D.i.length!=0)&&(g(D.ka,W),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function q1(D,W,te){var ce=te instanceof Et?xt(te):new Et(te);if(ce.g!="")W&&(ce.g=W+"."+ce.g),qt(ce,ce.s);else{var ze=a.location;ce=ze.protocol,W=W?W+"."+ze.hostname:ze.hostname,ze=+ze.port;var Ze=new Et(null);ce&&Dt(Ze,ce),W&&(Ze.g=W),ze&&qt(Ze,ze),te&&(Ze.l=te),ce=Ze}return te=D.D,W=D.ya,te&&W&&un(ce,te,W),un(ce,"VER",D.la),Bh(D,ce),ce}function gS(D,W,te){if(W&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=D.Ca&&!D.pa?new Ae(new _f({eb:te})):new Ae(D.pa),W.Ha(D.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gx(){}e=Gx.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function W1(){}W1.prototype.g=function(D,W){return new xa(D,W)};function xa(D,W){ke.call(this),this.g=new Sd(W),this.l=D,this.h=W&&W.messageUrlParams||null,D=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(D?D["X-WebChannel-Content-Type"]=W.messageContentType:D={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(D?D["X-WebChannel-Client-Profile"]=W.va:D={"X-WebChannel-Client-Profile":W.va}),this.g.S=D,(D=W&&W.Sb)&&!b(D)&&(this.g.m=D),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!b(W)&&(this.g.D=W,D=this.h,D!==null&&W in D&&(D=this.h,W in D&&delete D[W])),this.j=new Td(this)}p(xa,ke),xa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xa.prototype.close=function(){Fs(this.g)},xa.prototype.o=function(D){var W=this.g;if(typeof D=="string"){var te={};te.__data__=D,D=te}else this.u&&(te={},te.__data__=Un(D),D=te);W.i.push(new Lh(W.Ya++,D)),W.G==3&&Ef(W)},xa.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,xa.aa.N.call(this)};function Ig(D){Zi.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var W=D.__sm__;if(W){e:{for(const te in W){D=te;break e}D=void 0}(this.i=D)&&(D=this.i,W=W!==null&&D in W?W[D]:void 0),this.data=W}else this.data=D}p(Ig,Zi);function jh(){Qr.call(this),this.status=1}p(jh,Qr);function Td(D){this.g=D}p(Td,Gx),Td.prototype.ua=function(){Oe(this.g,"a")},Td.prototype.ta=function(D){Oe(this.g,new Ig(D))},Td.prototype.sa=function(D){Oe(this.g,new jh)},Td.prototype.ra=function(){Oe(this.g,"b")},W1.prototype.createWebChannel=W1.prototype.g,xa.prototype.send=xa.prototype.o,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,T2e=function(){return new W1},S2e=function(){return ba()},E2e=$o,HW={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,aL=Pr,ac.COMPLETE="complete",w2e=ac,Ji.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",ke.prototype.listen=ke.prototype.K,WR=Ji,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,_2e=Ae}).apply(typeof J4<"u"?J4:typeof self<"u"?self:typeof window<"u"?window:{});const Mfe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mc.UNAUTHENTICATED=new Mc(null),Mc.GOOGLE_CREDENTIALS=new Mc("google-credentials-uid"),Mc.FIRST_PARTY=new Mc("first-party-uid"),Mc.MOCK_USER=new Mc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GA="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new WB("@firebase/firestore");function a2(){return Xw.logLevel}function nn(e,...t){if(Xw.logLevel<=Or.DEBUG){const n=t.map(AZ);Xw.debug(`Firestore (${GA}): ${e}`,...n)}}function t1(e,...t){if(Xw.logLevel<=Or.ERROR){const n=t.map(AZ);Xw.error(`Firestore (${GA}): ${e}`,...n)}}function RN(e,...t){if(Xw.logLevel<=Or.WARN){const n=t.map(AZ);Xw.warn(`Firestore (${GA}): ${e}`,...n)}}function AZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e="Unexpected state"){const t=`FIRESTORE (${GA}) INTERNAL ASSERTION FAILED: `+e;throw t1(t),new Error(t)}function Di(e,t){e||Hn()}function Zn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends ag{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xct{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qct{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Mc.UNAUTHENTICATED))}shutdown(){}}class Jct{constructor(t){this.t=t,this.currentUser=Mc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Di(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new $y;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $y,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $y)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Di(typeof r.accessToken=="string"),new Xct(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Di(t===null||typeof t=="string"),new Mc(t)}}class Zct{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Mc.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class eft{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Zct(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Mc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tft{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nft{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Di(this.o===void 0);const r=s=>{s.error!=null&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,nn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Di(typeof n.token=="string"),this.R=n.token,new tft(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rft(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=rft(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function qr(e,t){return e<t?-1:e>t?1:0}function xC(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=class uL{static now(){return uL.fromMillis(Date.now())}static fromDate(t){return uL.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new uL(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?qr(this.nanoseconds,t.nanoseconds):qr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{static fromTimestamp(t){return new Jn(t)}static min(){return new Jn(new Wl(0,0))}static max(){return new Jn(new Wl(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n,r){n===void 0?n=0:n>t.length&&Hn(),r===void 0?r=t.length-n:r>t.length-n&&Hn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Km.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Km?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Km.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Km.isNumericId(t),i=Km.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Km.extractNumericId(t).compare(Km.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return hb.fromString(t.substring(4,t.length-2))}}class xs extends Km{construct(t,n,r){return new xs(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xs(n)}static emptyPath(){return new xs([])}}const ift=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mu extends Km{construct(t,n,r){return new mu(t,n,r)}static isValidIdentifier(t){return ift.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mu.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mu(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Qt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Qt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Qt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mu(n)}static emptyPath(){return new mu([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.path=t}static fromPath(t){return new Sn(xs.fromString(t))}static fromName(t){return new Sn(xs.fromString(t).popFirst(5))}static empty(){return new Sn(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xs.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xs.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Sn(new xs(t.slice()))}}function sft(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jn.fromTimestamp(r===1e9?new Wl(n+1,0):new Wl(n,r));return new Ab(i,Sn.empty(),t)}function oft(e){return new Ab(e.readTime,e.key,-1)}class Ab{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Ab(Jn.min(),Sn.empty(),-1)}static max(){return new Ab(Jn.max(),Sn.empty(),-1)}}function aft(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Sn.comparator(e.documentKey,t.documentKey),n!==0?n:qr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uft="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lft{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==uft)throw e;nn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new vt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof vt?n:vt.resolve(n)}catch(n){return vt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.reject(n)}static resolve(t){return new vt((n,r)=>{n(t)})}static reject(t){return new vt((n,r)=>{r(t)})}static waitFor(t){return new vt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=vt.resolve(!1);for(const r of t)n=n.next(i=>i?vt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new vt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new vt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function cft(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function KA(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}KB.oe=-1;function XB(e){return e==null}function oF(e){return e===0&&1/e==-1/0}function fft(e){return typeof e=="number"&&Number.isInteger(e)&&!oF(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dft(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Lfe(t)),t=hft(e.get(n),t);return Lfe(t)}function hft(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Lfe(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $fe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _x(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A2e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,n){this.comparator=t,this.root=n||fu.EMPTY}insert(t,n){return new qs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fu.BLACK,null,null))}remove(t){return new qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fu.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Z4(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Z4(this.root,t,this.comparator,!1)}getReverseIterator(){return new Z4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Z4(this.root,t,this.comparator,!0)}}class Z4{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fu{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??fu.RED,this.left=i??fu.EMPTY,this.right=s??fu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new fu(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return fu.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Hn();const t=this.left.check();if(t!==this.right.check())throw Hn();return t+(this.isRed()?0:1)}}fu.EMPTY=null,fu.RED=!0,fu.BLACK=!1;fu.EMPTY=new class{constructor(){this.size=0}get key(){throw Hn()}get value(){throw Hn()}get color(){throw Hn()}get left(){throw Hn()}get right(){throw Hn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new fu(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t){this.comparator=t,this.data=new qs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ffe(this.data.getIterator())}getIteratorFrom(t){return new Ffe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof da)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new da(this.comparator);return n.data=t,n}}class Ffe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t){this.fields=t,t.sort(mu.comparator)}static empty(){return new Jf([])}unionWith(t){let n=new da(mu.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Jf(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xC(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new I2e("Invalid base64 string: "+s):s}}(t);return new Su(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Su(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Su.EMPTY_BYTE_STRING=new Su("");const pft=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ib(e){if(Di(!!e),typeof e=="string"){let t=0;const n=pft.exec(e);if(Di(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Io(e.seconds),nanos:Io(e.nanos)}}function Io(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function kb(e){return typeof e=="string"?Su.fromBase64String(e):Su.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QB(e){const t=e.mapValue.fields.__previous_value__;return IZ(t)?QB(t):t}function DN(e){const t=Ib(e.mapValue.fields.__local_write_time__.timestampValue);return new Wl(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mft{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class NN{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new NN("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof NN&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?IZ(e)?4:yft(e)?9007199254740991:gft(e)?10:11:Hn()}function j0(e,t){if(e===t)return!0;const n=Rb(e);if(n!==Rb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return DN(e).isEqual(DN(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ib(i.timestampValue),a=Ib(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return kb(i.bytesValue).isEqual(kb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Io(i.geoPointValue.latitude)===Io(s.geoPointValue.latitude)&&Io(i.geoPointValue.longitude)===Io(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Io(i.integerValue)===Io(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Io(i.doubleValue),a=Io(s.doubleValue);return o===a?oF(o)===oF(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return xC(e.arrayValue.values||[],t.arrayValue.values||[],j0);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($fe(o)!==$fe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!j0(o[u],a[u])))return!1;return!0}(e,t);default:return Hn()}}function PN(e,t){return(e.values||[]).find(n=>j0(n,t))!==void 0}function _C(e,t){if(e===t)return 0;const n=Rb(e),r=Rb(t);if(n!==r)return qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Io(s.integerValue||s.doubleValue),u=Io(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Bfe(e.timestampValue,t.timestampValue);case 4:return Bfe(DN(e),DN(t));case 5:return qr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=kb(s),u=kb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=qr(a[l],u[l]);if(c!==0)return c}return qr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=qr(Io(s.latitude),Io(o.latitude));return a!==0?a:qr(Io(s.longitude),Io(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return jfe(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=qr(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:jfe(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===e6.mapValue&&o===e6.mapValue)return 0;if(s===e6.mapValue)return 1;if(o===e6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=qr(u[f],c[f]);if(d!==0)return d;const h=_C(a[u[f]],l[c[f]]);if(h!==0)return h}return qr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Hn()}}function Bfe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return qr(e,t);const n=Ib(e),r=Ib(t),i=qr(n.seconds,r.seconds);return i!==0?i:qr(n.nanos,r.nanos)}function jfe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_C(n[i],r[i]);if(s)return s}return qr(n.length,r.length)}function wC(e){return qW(e)}function qW(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Ib(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return kb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Sn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qW(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qW(n.fields[o])}`;return i+"}"}(e.mapValue):Hn()}function lL(e){switch(Rb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=QB(e);return t?16+lL(t):16;case 5:return 2*e.stringValue.length;case 6:return kb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+lL(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return _x(r.fields,(s,o)=>{i+=s.length+lL(o)}),i}(e.mapValue);default:throw Hn()}}function Ufe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function WW(e){return!!e&&"integerValue"in e}function kZ(e){return!!e&&"arrayValue"in e}function zfe(e){return!!e&&"nullValue"in e}function Vfe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cL(e){return!!e&&"mapValue"in e}function gft(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qD(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _x(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=qD(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qD(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yft(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this.value=t}static empty(){return new Vc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!cL(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=qD(n)}setAll(t){let n=mu.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=qD(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());cL(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return j0(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];cL(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){_x(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Vc(qD(this.value))}}function k2e(e){const t=[];return _x(e.fields,(n,r)=>{const i=new mu([n]);if(cL(r)){const s=k2e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Jf(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new el(t,0,Jn.min(),Jn.min(),Jn.min(),Vc.empty(),0)}static newFoundDocument(t,n,r,i){return new el(t,1,n,Jn.min(),r,i,0)}static newNoDocument(t,n){return new el(t,2,n,Jn.min(),Jn.min(),Vc.empty(),0)}static newUnknownDocument(t,n){return new el(t,3,n,Jn.min(),Jn.min(),Vc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof el&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new el(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aF=class{constructor(t,n){this.position=t,this.inclusive=n}};function Hfe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Sn.comparator(Sn.fromName(o.referenceValue),n.key):r=_C(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qfe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!j0(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t,n="asc"){this.field=t,this.dir=n}}function vft(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R2e=class{};class Wo extends R2e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new xft(t,n,r):n==="array-contains"?new Eft(t,r):n==="in"?new Sft(t,r):n==="not-in"?new Tft(t,r):n==="array-contains-any"?new Cft(t,r):new Wo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new _ft(t,r):new wft(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_C(n,this.value)):n!==null&&Rb(this.value)===Rb(n)&&this.matchesComparison(_C(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Up extends R2e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Up(t,n)}matches(t){return D2e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function D2e(e){return e.op==="and"}function N2e(e){return bft(e)&&D2e(e)}function bft(e){for(const t of e.filters)if(t instanceof Up)return!1;return!0}function GW(e){if(e instanceof Wo)return e.field.canonicalString()+e.op.toString()+wC(e.value);if(N2e(e))return e.filters.map(t=>GW(t)).join(",");{const t=e.filters.map(n=>GW(n)).join(",");return`${e.op}(${t})`}}function P2e(e,t){return e instanceof Wo?function(r,i){return i instanceof Wo&&r.op===i.op&&r.field.isEqual(i.field)&&j0(r.value,i.value)}(e,t):e instanceof Up?function(r,i){return i instanceof Up&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&P2e(o,i.filters[a]),!0):!1}(e,t):void Hn()}function O2e(e){return e instanceof Wo?function(n){return`${n.field.canonicalString()} ${n.op} ${wC(n.value)}`}(e):e instanceof Up?function(n){return n.op.toString()+" {"+n.getFilters().map(O2e).join(" ,")+"}"}(e):"Filter"}class xft extends Wo{constructor(t,n,r){super(t,n,r),this.key=Sn.fromName(r.referenceValue)}matches(t){const n=Sn.comparator(t.key,this.key);return this.matchesComparison(n)}}class _ft extends Wo{constructor(t,n){super(t,"in",n),this.keys=M2e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class wft extends Wo{constructor(t,n){super(t,"not-in",n),this.keys=M2e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function M2e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Sn.fromName(r.referenceValue))}class Eft extends Wo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return kZ(n)&&PN(n.arrayValue,this.value)}}class Sft extends Wo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&PN(this.value.arrayValue,n)}}class Tft extends Wo{constructor(t,n){super(t,"not-in",n)}matches(t){if(PN(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!PN(this.value.arrayValue,n)}}class Cft extends Wo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!kZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>PN(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aft{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Wfe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Aft(e,t,n,r,i,s,o)}function RZ(e){const t=Zn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>GW(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),XB(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>wC(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>wC(r)).join(",")),t.ue=n}return t.ue}function DZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vft(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!P2e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qfe(e.startAt,t.startAt)&&qfe(e.endAt,t.endAt)}function YW(e){return Sn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ift(e,t,n,r,i,s,o,a){return new XA(e,t,n,r,i,s,o,a)}function NZ(e){return new XA(e)}function Gfe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function L2e(e){return e.collectionGroup!==null}function WD(e){const t=Zn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new da(mu.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ON(s,r))}),n.has(mu.keyField().canonicalString())||t.ce.push(new ON(mu.keyField(),r))}return t.ce}function w0(e){const t=Zn(e);return t.le||(t.le=kft(t,WD(e))),t.le}function kft(e,t){if(e.limitType==="F")return Wfe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ON(i.field,s)});const n=e.endAt?new aF(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new aF(e.startAt.position,e.startAt.inclusive):null;return Wfe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function KW(e,t){const n=e.filters.concat([t]);return new XA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function XW(e,t,n){return new XA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function JB(e,t){return DZ(w0(e),w0(t))&&e.limitType===t.limitType}function $2e(e){return`${RZ(w0(e))}|lt:${e.limitType}`}function u2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>O2e(i)).join(", ")}]`),XB(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wC(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wC(i)).join(",")),`Target(${r})`}(w0(e))}; limitType=${e.limitType})`}function ZB(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Sn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of WD(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Hfe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,WD(r),i)||r.endAt&&!function(o,a,u){const l=Hfe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,WD(r),i))}(e,t)}function Rft(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function F2e(e){return(t,n)=>{let r=!1;for(const i of WD(e)){const s=Dft(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Dft(e,t,n){const r=e.field.isKeyField()?Sn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?_C(u,l):Hn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Hn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){_x(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return A2e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nft=new qs(Sn.comparator);function n1(){return Nft}const B2e=new qs(Sn.comparator);function GR(...e){let t=B2e;for(const n of e)t=t.insert(n.key,n);return t}function j2e(e){let t=B2e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function _w(){return GD()}function U2e(){return GD()}function GD(){return new zE(e=>e.toString(),(e,t)=>e.isEqual(t))}const Pft=new qs(Sn.comparator),Oft=new da(Sn.comparator);function Mr(...e){let t=Oft;for(const n of e)t=t.add(n);return t}const Mft=new da(qr);function Lft(){return Mft}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PZ(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oF(t)?"-0":t}}function z2e(e){return{integerValue:""+e}}function $ft(e,t){return fft(t)?z2e(t):PZ(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this._=void 0}}function Fft(e,t,n){return e instanceof MN?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&IZ(s)&&(s=QB(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof LN?H2e(e,t):e instanceof $N?q2e(e,t):function(i,s){const o=V2e(i,s),a=Yfe(o)+Yfe(i.Pe);return WW(o)&&WW(i.Pe)?z2e(a):PZ(i.serializer,a)}(e,t)}function Bft(e,t,n){return e instanceof LN?H2e(e,t):e instanceof $N?q2e(e,t):n}function V2e(e,t){return e instanceof uF?function(r){return WW(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class MN extends e9{}class LN extends e9{constructor(t){super(),this.elements=t}}function H2e(e,t){const n=W2e(t);for(const r of e.elements)n.some(i=>j0(i,r))||n.push(r);return{arrayValue:{values:n}}}class $N extends e9{constructor(t){super(),this.elements=t}}function q2e(e,t){let n=W2e(t);for(const r of e.elements)n=n.filter(i=>!j0(i,r));return{arrayValue:{values:n}}}class uF extends e9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Yfe(e){return Io(e.integerValue||e.doubleValue)}function W2e(e){return kZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jft{constructor(t,n){this.field=t,this.transform=n}}function Uft(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof LN&&i instanceof LN||r instanceof $N&&i instanceof $N?xC(r.elements,i.elements,j0):r instanceof uF&&i instanceof uF?j0(r.Pe,i.Pe):r instanceof MN&&i instanceof MN}(e.transform,t.transform)}class zft{constructor(t,n){this.version=t,this.transformResults=n}}class id{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new id}static exists(t){return new id(void 0,t)}static updateTime(t){return new id(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fL(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class t9{}function G2e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new OZ(e.key,id.none()):new u3(e.key,e.data,id.none());{const n=e.data,r=Vc.empty();let i=new da(mu.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wx(e.key,r,new Jf(i.toArray()),id.none())}}function Vft(e,t,n){e instanceof u3?function(i,s,o){const a=i.value.clone(),u=Xfe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof wx?function(i,s,o){if(!fL(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Xfe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Y2e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function YD(e,t,n,r){return e instanceof u3?function(s,o,a,u){if(!fL(s.precondition,o))return a;const l=s.value.clone(),c=Qfe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof wx?function(s,o,a,u){if(!fL(s.precondition,o))return a;const l=Qfe(s.fieldTransforms,u,o),c=o.data;return c.setAll(Y2e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return fL(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Hft(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=V2e(r.transform,i||null);s!=null&&(n===null&&(n=Vc.empty()),n.set(r.field,s))}return n||null}function Kfe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xC(r,i,(s,o)=>Uft(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class u3 extends t9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wx extends t9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Y2e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xfe(e,t,n){const r=new Map;Di(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Bft(o,a,n[i]))}return r}function Qfe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Fft(s,o,t))}return r}class OZ extends t9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qft extends t9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wft{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Vft(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=YD(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=YD(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=U2e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=G2e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mr())}isEqual(t){return this.batchId===t.batchId&&xC(this.mutations,t.mutations,(n,r)=>Kfe(n,r))&&xC(this.baseMutations,t.baseMutations,(n,r)=>Kfe(n,r))}}class MZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Di(t.mutations.length===r.length);let i=function(){return Pft}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new MZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gft{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yft{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho,ri;function Kft(e){switch(e){default:return Hn();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0}}function K2e(e){if(e===void 0)return t1("GRPC error has no .code"),mt.UNKNOWN;switch(e){case Ho.OK:return mt.OK;case Ho.CANCELLED:return mt.CANCELLED;case Ho.UNKNOWN:return mt.UNKNOWN;case Ho.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case Ho.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case Ho.INTERNAL:return mt.INTERNAL;case Ho.UNAVAILABLE:return mt.UNAVAILABLE;case Ho.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case Ho.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case Ho.NOT_FOUND:return mt.NOT_FOUND;case Ho.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case Ho.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case Ho.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case Ho.ABORTED:return mt.ABORTED;case Ho.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case Ho.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case Ho.DATA_LOSS:return mt.DATA_LOSS;default:return Hn()}}(ri=Ho||(Ho={}))[ri.OK=0]="OK",ri[ri.CANCELLED=1]="CANCELLED",ri[ri.UNKNOWN=2]="UNKNOWN",ri[ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ri[ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ri[ri.NOT_FOUND=5]="NOT_FOUND",ri[ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",ri[ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",ri[ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",ri[ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ri[ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ri[ri.ABORTED=10]="ABORTED",ri[ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",ri[ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",ri[ri.INTERNAL=13]="INTERNAL",ri[ri.UNAVAILABLE=14]="UNAVAILABLE",ri[ri.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xft(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qft=new hb([4294967295,4294967295],0);function Jfe(e){const t=Xft().encode(e),n=new x2e;return n.update(t),new Uint8Array(n.digest())}function Zfe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hb([n,r],0),new hb([i,s],0)]}class LZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new YR(`Invalid padding: ${n}`);if(r<0)throw new YR(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new YR(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new YR(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=hb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(hb.fromNumber(r)));return i.compare(Qft)===1&&(i=new hb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Jfe(t),[r,i]=Zfe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new LZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Jfe(t),[r,i]=Zfe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class YR extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,l3.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new n9(Jn.min(),i,new qs(qr),n1(),Mr())}}class l3{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new l3(r,n,Mr(),Mr(),Mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class X2e{constructor(t,n){this.targetId=t,this.me=n}}class Q2e{constructor(t,n,r=Su.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ede{constructor(){this.fe=0,this.ge=tde(),this.pe=Su.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Mr(),n=Mr(),r=Mr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Hn()}}),new l3(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=tde()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Di(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Jft{constructor(t){this.Be=t,this.Le=new Map,this.ke=n1(),this.qe=t6(),this.Qe=t6(),this.Ke=new qs(qr)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:Hn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(YW(s))if(r===0){const o=new Sn(s.path);this.We(n,o,el.newNoDocument(o,Jn.min()))}else Di(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=kb(r).toUint8Array()}catch(u){if(u instanceof I2e)return RN("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new LZ(o,i,s)}catch(u){return RN(u instanceof YR?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&YW(a.target)){const u=new Sn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,el.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Mr();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new n9(t,n,this.Ke,this.ke,r);return this.ke=n1(),this.qe=t6(),this.Qe=t6(),this.Ke=new qs(qr),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new ede,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new da(qr),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new da(qr),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||nn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new ede),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function t6(){return new qs(Sn.comparator)}function tde(){return new qs(Sn.comparator)}const Zft={asc:"ASCENDING",desc:"DESCENDING"},edt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tdt={and:"AND",or:"OR"};class ndt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function QW(e,t){return e.useProto3Json||XB(t)?t:{value:t}}function lF(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function J2e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rdt(e,t){return lF(e,t.toTimestamp())}function E0(e){return Di(!!e),Jn.fromTimestamp(function(n){const r=Ib(n);return new Wl(r.seconds,r.nanos)}(e))}function $Z(e,t){return JW(e,t).canonicalString()}function JW(e,t){const n=function(i){return new xs(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Z2e(e){const t=xs.fromString(e);return Di(iCe(t)),t}function ZW(e,t){return $Z(e.databaseId,t.path)}function eV(e,t){const n=Z2e(t);if(n.get(1)!==e.databaseId.projectId)throw new Qt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Sn(tCe(n))}function eCe(e,t){return $Z(e.databaseId,t)}function idt(e){const t=Z2e(e);return t.length===4?xs.emptyPath():tCe(t)}function eG(e){return new xs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tCe(e){return Di(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function nde(e,t,n){return{name:ZW(e,t),fields:n.value.mapValue.fields}}function sdt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Hn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Di(c===void 0||typeof c=="string"),Su.fromBase64String(c||"")):(Di(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Su.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?mt.UNKNOWN:K2e(l.code);return new Qt(c,l.message||"")}(o);n=new Q2e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=eV(e,r.document.name),s=E0(r.document.updateTime),o=r.document.createTime?E0(r.document.createTime):Jn.min(),a=new Vc({mapValue:{fields:r.document.fields}}),u=el.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new dL(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=eV(e,r.document),s=r.readTime?E0(r.readTime):Jn.min(),o=el.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dL([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=eV(e,r.document),s=r.removedTargetIds||[];n=new dL([],s,i,null)}else{if(!("filter"in t))return Hn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Yft(i,s),a=r.targetId;n=new X2e(a,o)}}return n}function odt(e,t){let n;if(t instanceof u3)n={update:nde(e,t.key,t.value)};else if(t instanceof OZ)n={delete:ZW(e,t.key)};else if(t instanceof wx)n={update:nde(e,t.key,t.data),updateMask:mdt(t.fieldMask)};else{if(!(t instanceof qft))return Hn();n={verify:ZW(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof MN)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof LN)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $N)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uF)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Hn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rdt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hn()}(e,t.precondition)),n}function adt(e,t){return e&&e.length>0?(Di(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?E0(i.updateTime):E0(s);return o.isEqual(Jn.min())&&(o=E0(s)),new zft(o,i.transformResults||[])}(n,t))):[]}function udt(e,t){return{documents:[eCe(e,t.path)]}}function ldt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eCe(e,i);const s=function(l){if(l.length!==0)return rCe(Up.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:l2(d.field),direction:ddt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=QW(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function cdt(e){let t=idt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Di(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=nCe(f);return d instanceof Up&&N2e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new ON(c2(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,XB(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new aF(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new aF(h,d)}(n.endAt)),Ift(t,i,o,s,a,"F",u,l)}function fdt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function nCe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=c2(n.unaryFilter.field);return Wo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=c2(n.unaryFilter.field);return Wo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=c2(n.unaryFilter.field);return Wo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=c2(n.unaryFilter.field);return Wo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Hn()}}(e):e.fieldFilter!==void 0?function(n){return Wo.create(c2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Up.create(n.compositeFilter.filters.map(r=>nCe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Hn()}}(n.compositeFilter.op))}(e):Hn()}function ddt(e){return Zft[e]}function hdt(e){return edt[e]}function pdt(e){return tdt[e]}function l2(e){return{fieldPath:e.canonicalString()}}function c2(e){return mu.fromServerFormat(e.fieldPath)}function rCe(e){return e instanceof Wo?function(n){if(n.op==="=="){if(Vfe(n.value))return{unaryFilter:{field:l2(n.field),op:"IS_NAN"}};if(zfe(n.value))return{unaryFilter:{field:l2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vfe(n.value))return{unaryFilter:{field:l2(n.field),op:"IS_NOT_NAN"}};if(zfe(n.value))return{unaryFilter:{field:l2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:l2(n.field),op:hdt(n.op),value:n.value}}}(e):e instanceof Up?function(n){const r=n.getFilters().map(i=>rCe(i));return r.length===1?r[0]:{compositeFilter:{op:pdt(n.op),filters:r}}}(e):Hn()}function mdt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function iCe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n,r,i,s=Jn.min(),o=Jn.min(),a=Su.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Zv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gdt{constructor(t){this.ht=t}}function ydt(e){const t=cdt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?XW(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vdt{constructor(){this.ln=new bdt}addToCollectionParentIndex(t,n){return this.ln.add(n),vt.resolve()}getCollectionParents(t,n){return vt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return vt.resolve()}deleteFieldIndex(t,n){return vt.resolve()}deleteAllFieldIndexes(t){return vt.resolve()}createTargetIndexes(t,n){return vt.resolve()}getDocumentsMatchingTarget(t,n){return vt.resolve(null)}getIndexType(t,n){return vt.resolve(0)}getFieldIndexes(t,n){return vt.resolve([])}getNextCollectionGroupToUpdate(t){return vt.resolve(null)}getMinOffset(t,n){return vt.resolve(Ab.min())}getMinOffsetFromCollectionGroup(t,n){return vt.resolve(Ab.min())}updateCollectionGroup(t,n,r){return vt.resolve()}updateIndexEntries(t,n){return vt.resolve()}}class bdt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new da(xs.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new da(xs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rde={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lc{static withCacheSize(t){return new Lc(t,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lc.DEFAULT_COLLECTION_PERCENTILE=10,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lc.DEFAULT=new Lc(41943040,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lc.DISABLED=new Lc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new EC(0)}static Qn(){return new EC(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ide([e,t],[n,r]){const i=qr(e,n);return i===0?qr(t,r):i}class xdt{constructor(t){this.Gn=t,this.buffer=new da(ide),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ide(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _dt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){nn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){KA(n)?nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await YA(n)}await this.Yn(3e5)})}}class wdt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return vt.resolve(KB.oe);const r=new xdt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),vt.resolve(rde)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rde):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),a2()<=Or.DEBUG&&nn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),vt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Edt(e,t){return new wdt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sdt{constructor(){this.changes=new zE(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,el.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?vt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tdt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cdt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&YD(r.mutation,i,Jf.empty(),Wl.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Mr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Mr()){const i=_w();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=GR();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=_w();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Mr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=n1();const o=GD(),a=function(){return GD()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof wx)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),YD(c.mutation,l,c.mutation.getFieldMask(),Wl.now())):o.set(l.key,Jf.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Tdt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=GD();let i=new qs((o,a)=>o-a),s=Mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Jf.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Mr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=U2e();c.forEach(d=>{if(!s.has(d)){const h=G2e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return vt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Sn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):L2e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):vt.resolve(_w());let a=-1,u=s;return o.next(l=>vt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?vt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Mr())).next(c=>({batchId:a,changes:j2e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Sn(n)).next(r=>{let i=GR();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=GR();return this.indexManager.getCollectionParents(t,s).next(a=>vt.forEach(a,u=>{const l=function(f,d){return new XA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,el.newInvalidDocument(c)))});let a=GR();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&YD(c.mutation,l,Jf.empty(),Wl.now()),ZB(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Adt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return vt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:E0(i.createTime)}}(n)),vt.resolve()}getNamedQuery(t,n){return vt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:ydt(i.bundledQuery),readTime:E0(i.readTime)}}(n)),vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Idt{constructor(){this.overlays=new qs(Sn.comparator),this.dr=new Map}getOverlay(t,n){return vt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=_w();return vt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),vt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),vt.resolve()}getOverlaysForCollection(t,n,r){const i=_w(),s=n.length+1,o=new Sn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return vt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new qs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=_w(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=_w(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return vt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Gft(n,r));let s=this.dr.get(n);s===void 0&&(s=Mr(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kdt{constructor(){this.sessionToken=Su.EMPTY_BYTE_STRING}getSessionToken(t){return vt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,vt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(){this.Er=new da(Pa.Ar),this.Rr=new da(Pa.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Pa(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Pa(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Sn(new xs([])),r=new Pa(n,t),i=new Pa(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Sn(new xs([])),r=new Pa(n,t),i=new Pa(n,t+1);let s=Mr();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Pa(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Pa{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Sn.comparator(t.key,n.key)||qr(t.br,n.br)}static Vr(t,n){return qr(t.br,n.br)||Sn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rdt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new da(Pa.Ar)}checkEmpty(t){return vt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Wft(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Pa(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return vt.resolve(o)}lookupMutationBatch(t,n){return vt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return vt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Pa(n,0),i=new Pa(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),vt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new da(qr);return n.forEach(i=>{const s=new Pa(i,0),o=new Pa(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),vt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Sn.isDocumentKey(s)||(s=s.child(""));const o=new Pa(new Sn(s),0);let a=new da(qr);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),vt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Di(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return vt.forEach(n.mutations,i=>{const s=new Pa(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Pa(n,0),i=this.vr.firstAfterOrEqual(r);return vt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,vt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ddt{constructor(t){this.Nr=t,this.docs=function(){return new qs(Sn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return vt.resolve(r?r.document.mutableCopy():el.newInvalidDocument(n))}getEntries(t,n){let r=n1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():el.newInvalidDocument(i))}),vt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=n1();const o=n.path,a=new Sn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||aft(oft(c),r)<=0||(i.has(c.key)||ZB(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return vt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Hn()}Br(t,n){return vt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Ndt(this)}getSize(t){return vt.resolve(this.size)}}class Ndt extends Sdt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),vt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pdt{constructor(t){this.persistence=t,this.Lr=new zE(n=>RZ(n),DZ),this.lastRemoteSnapshotVersion=Jn.min(),this.highestTargetId=0,this.kr=0,this.qr=new FZ,this.targetCount=0,this.Qr=EC.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),vt.resolve()}getLastRemoteSnapshotVersion(t){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),vt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new EC(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,vt.resolve()}updateTargetData(t,n){return this.Un(n),vt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,vt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),vt.waitFor(s).next(()=>i)}getTargetCount(t){return vt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return vt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),vt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),vt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),vt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return vt.resolve(r)}containsKey(t,n){return vt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sCe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new KB(0),this.Ur=!1,this.Ur=!0,this.Wr=new kdt,this.referenceDelegate=t(this),this.Gr=new Pdt(this),this.indexManager=new vdt,this.remoteDocumentCache=function(i){return new Ddt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new gdt(n),this.jr=new Adt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Idt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new Rdt(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){nn("MemoryPersistence","Starting transaction:",t);const i=new Odt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return vt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class Odt extends lft{constructor(t){super(),this.currentSequenceNumber=t}}class BZ{constructor(t){this.persistence=t,this.Zr=new FZ,this.Xr=null}static ei(t){return new BZ(t)}get ti(){if(this.Xr)return this.Xr;throw Hn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),vt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),vt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),vt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.ti,r=>{const i=Sn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,Jn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return vt.or([()=>vt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class cF{constructor(t,n){this.persistence=t,this.ri=new zE(r=>dft(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Edt(this,n)}static ei(t,n){return new cF(t,n)}Hr(){}Jr(t){return vt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return vt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?vt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,Jn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=lL(t.data.value)),n}ir(t,n,r){return vt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return vt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Mr(),i=Mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mdt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ldt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return cut()?8:cft(dl())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Mdt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(a2()<=Or.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",u2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),vt.resolve()):(a2()<=Or.DEBUG&&nn("QueryEngine","Query:",u2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(a2()<=Or.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",u2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,w0(n))):vt.resolve())}Xi(t,n){if(Gfe(n))return vt.resolve(null);let r=w0(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=XW(n,null,"F"),r=w0(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Mr(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,XW(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Gfe(n)||i.isEqual(Jn.min())?vt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?vt.resolve(null):(a2()<=Or.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),u2(n)),this.os(t,o,n,sft(i,-1)).next(a=>a))})}rs(t,n){let r=new da(F2e(t));return n.forEach((i,s)=>{ZB(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return a2()<=Or.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",u2(n)),this.Zi.getDocumentsMatchingQuery(t,n,Ab.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $dt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new qs(qr),this.cs=new zE(s=>RZ(s),DZ),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Cdt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function Fdt(e,t,n,r){return new $dt(e,t,n,r)}async function oCe(e,t){const n=Zn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Mr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function Bdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=vt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Di(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Mr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function aCe(e){const t=Zn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function jdt(e,t){const n=Zn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Su.EMPTY_BYTE_STRING,Jn.min()).withLastLimboFreeSnapshotVersion(Jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,v){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=n1(),l=Mr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Udt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Jn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return vt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function Udt(e,t,n){let r=Mr(),i=Mr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=n1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):nn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function zdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Vdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,vt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Zv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function tG(e,t,n){const r=Zn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!KA(o))throw o;nn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function sde(e,t,n){const r=Zn(e);let i=Jn.min(),s=Mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Zn(u),d=f.cs.get(c);return d!==void 0?vt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,w0(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:Jn.min(),n?s:Mr())).next(a=>(Hdt(r,Rft(t),a),{documents:a,Es:s})))}function Hdt(e,t,n){let r=e.ls.get(t)||Jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class ode{constructor(){this.activeTargetIds=Lft()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qdt{constructor(){this._o=new ode,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new ode,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wdt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n6=null;function tV(){return n6===null?n6=function(){return 268435456+Math.round(2147483648*Math.random())}():n6++,"0x"+n6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gdt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ydt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="WebChannelConnection";class Kdt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=tV(),u=this.No(n,r.toUriEncodedString());nn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(nn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw RN("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+GA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Gdt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=tV();return new Promise((o,a)=>{const u=new _2e;u.setWithCredentials(!0),u.listenOnce(w2e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case aL.NO_ERROR:const c=u.getResponseJson();nn(Uu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case aL.TIMEOUT:nn(Uu,`RPC '${t}' ${s} timed out`),a(new Qt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case aL.HTTP_ERROR:const f=u.getStatus();if(nn(Uu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(v)>=0?v:mt.UNKNOWN}(h.status);a(new Qt(p,h.message))}else a(new Qt(mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Qt(mt.UNAVAILABLE,"Connection failed."));break;default:Hn()}}finally{nn(Uu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);nn(Uu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=tV(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=T2e(),a=S2e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");nn(Uu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Ydt({Eo:g=>{h?nn(Uu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(nn(Uu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),nn(Uu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,v,b)=>{g.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,WR.EventType.OPEN,()=>{h||(nn(Uu,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,WR.EventType.CLOSE,()=>{h||(h=!0,nn(Uu,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,WR.EventType.ERROR,g=>{h||(h=!0,RN(Uu,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new Qt(mt.UNAVAILABLE,"The operation could not be completed")))}),m(f,WR.EventType.MESSAGE,g=>{var v;if(!h){const b=g.data[0];Di(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){nn(Uu,`RPC '${t}' stream ${i} received error:`,E);const T=E.status;let C=function(N){const O=Ho[N];if(O!==void 0)return K2e(O)}(T),I=E.message;C===void 0&&(C=mt.INTERNAL,I="Unknown error status: "+T+" with message "+E.message),h=!0,p.Do(new Qt(C,I)),f.close()}else nn(Uu,`RPC '${t}' stream ${i} received:`,b),p.vo(b)}}),m(a,E2e.STAT_EVENT,g=>{g.stat===HW.PROXY?nn(Uu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===HW.NOPROXY&&nn(Uu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function nV(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(e){return new ndt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uCe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&nn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lCe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new uCe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(t1(n.toString()),t1("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Qt(mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return nn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xdt extends lCe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=sdt(this.serializer,t),r=function(s){if(!("targetChange"in s))return Jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Jn.min():o.readTime?E0(o.readTime):Jn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=eG(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=YW(u)?{documents:udt(s,u)}:{query:ldt(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=J2e(s,o.resumeToken);const l=QW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Jn.min())>0){a.readTime=lF(s,o.snapshotVersion.toTimestamp());const l=QW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=fdt(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=eG(this.serializer),n.removeTarget=t,this.c_(n)}}class Qdt extends lCe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Di(!!t.streamToken),this.lastStreamToken=t.streamToken,Di(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Di(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=adt(t.writeResults,t.commitTime),r=E0(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=eG(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>odt(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jdt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Qt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,JW(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qt(mt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,JW(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qt(mt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Zdt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(t1(n),this.C_=!1):nn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eht{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{VE(this)&&(nn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Zn(u);l.k_.add(4),await f3(l),l.K_.set("Unknown"),l.k_.delete(4),await c3(l)}(this))})}),this.K_=new Zdt(r,i)}}async function c3(e){if(VE(e))for(const t of e.q_)await t(!0)}async function f3(e){for(const t of e.q_)await t(!1)}function cCe(e,t){const n=Zn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),HZ(n)?VZ(n):QA(n).s_()&&zZ(n,t))}function UZ(e,t){const n=Zn(e),r=QA(n);n.L_.delete(t),r.s_()&&fCe(n,t),n.L_.size===0&&(r.s_()?r.a_():VE(n)&&n.K_.set("Unknown"))}function zZ(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}QA(e).V_(t)}function fCe(e,t){e.U_.xe(t),QA(e).m_(t)}function VZ(e){e.U_=new Jft({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),QA(e).start(),e.K_.F_()}function HZ(e){return VE(e)&&!QA(e).i_()&&e.L_.size>0}function VE(e){return Zn(e).k_.size===0}function dCe(e){e.U_=void 0}async function tht(e){e.K_.set("Online")}async function nht(e){e.L_.forEach((t,n)=>{zZ(e,t)})}async function rht(e,t){dCe(e),HZ(e)?(e.K_.O_(t),VZ(e)):e.K_.set("Unknown")}async function iht(e,t,n){if(e.K_.set("Online"),t instanceof Q2e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await fF(e,r)}else if(t instanceof dL?e.U_.$e(t):t instanceof X2e?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Jn.min()))try{const r=await aCe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Su.EMPTY_BYTE_STRING,c.snapshotVersion)),fCe(s,u);const f=new Zv(c.target,u,l,c.sequenceNumber);zZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){nn("RemoteStore","Failed to raise snapshot:",r),await fF(e,r)}}async function fF(e,t,n){if(!KA(t))throw t;e.k_.add(1),await f3(e),e.K_.set("Offline"),n||(n=()=>aCe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await c3(e)})}function hCe(e,t){return t().catch(n=>fF(e,n,t))}async function i9(e){const t=Zn(e),n=Db(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;sht(t);)try{const i=await zdt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,oht(t,i)}catch(i){await fF(t,i)}pCe(t)&&mCe(t)}function sht(e){return VE(e)&&e.B_.length<10}function oht(e,t){e.B_.push(t);const n=Db(e);n.s_()&&n.f_&&n.g_(t.mutations)}function pCe(e){return VE(e)&&!Db(e).i_()&&e.B_.length>0}function mCe(e){Db(e).start()}async function aht(e){Db(e).w_()}async function uht(e){const t=Db(e);for(const n of e.B_)t.g_(n.mutations)}async function lht(e,t,n){const r=e.B_.shift(),i=MZ.from(r,t,n);await hCe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await i9(e)}async function cht(e,t){t&&Db(e).f_&&await async function(r,i){if(function(o){return Kft(o)&&o!==mt.ABORTED}(i.code)){const s=r.B_.shift();Db(r).__(),await hCe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await i9(r)}}(e,t),pCe(e)&&mCe(e)}async function ude(e,t){const n=Zn(e);n.asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials");const r=VE(n);n.k_.add(3),await f3(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await c3(n)}async function fht(e,t){const n=Zn(e);t?(n.k_.delete(2),await c3(n)):t||(n.k_.add(2),await f3(n),n.K_.set("Unknown"))}function QA(e){return e.W_||(e.W_=function(n,r,i){const s=Zn(n);return s.b_(),new Xdt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:tht.bind(null,e),mo:nht.bind(null,e),po:rht.bind(null,e),R_:iht.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),HZ(e)?VZ(e):e.K_.set("Unknown")):(await e.W_.stop(),dCe(e))})),e.W_}function Db(e){return e.G_||(e.G_=function(n,r,i){const s=Zn(n);return s.b_(),new Qdt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:aht.bind(null,e),po:cht.bind(null,e),p_:uht.bind(null,e),y_:lht.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await i9(e)):(await e.G_.stop(),e.B_.length>0&&(nn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $y,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new qZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qt(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WZ(e,t){if(t1("AsyncQueue",`${t}: ${e}`),KA(e))return new Qt(mt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{static emptySet(t){return new B2(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Sn.comparator(n.key,r.key):(n,r)=>Sn.comparator(n.key,r.key),this.keyedMap=GR(),this.sortedSet=new qs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof B2)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new B2;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(){this.z_=new qs(Sn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):Hn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class SC{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new SC(t,n,B2.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&JB(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dht{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class hht{constructor(){this.queries=cde(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Zn(n),s=i.queries;i.queries=cde(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Qt(mt.ABORTED,"Firestore shutting down"))}}function cde(){return new zE(e=>$2e(e),JB)}async function gCe(e,t){const n=Zn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new dht,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=WZ(o,`Initialization of query '${u2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&GZ(n)}async function yCe(e,t){const n=Zn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pht(e,t){const n=Zn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&GZ(n)}function mht(e,t,n){const r=Zn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function GZ(e){e.X_.forEach(t=>{t.next()})}var nG,fde;(fde=nG||(nG={})).na="default",fde.Cache="cache";class vCe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new SC(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=SC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==nG.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bCe{constructor(t){this.key=t}}class xCe{constructor(t){this.key=t}}class ght{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Mr(),this.mutatedKeys=Mr(),this.Va=F2e(t),this.ma=new B2(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new lde,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=ZB(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hn()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new SC(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new lde,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Mr(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new xCe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new bCe(r))}),n}va(t){this.Ea=t.Es,this.Ra=Mr();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return SC.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class yht{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class vht{constructor(t){this.key=t,this.Fa=!1}}class bht{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new zE(a=>$2e(a),JB),this.Oa=new Map,this.Na=new Set,this.Ba=new qs(Sn.comparator),this.La=new Map,this.ka=new FZ,this.qa={},this.Qa=new Map,this.Ka=EC.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function xht(e,t,n=!0){const r=CCe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await _Ce(r,t,n,!0),i}async function _ht(e,t){const n=CCe(e);await _Ce(n,t,!0,!1)}async function _Ce(e,t,n,r){const i=await Vdt(e.localStore,w0(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await wht(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&cCe(e.remoteStore,i),a}async function wht(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,v,b){let w=g.view.ga(v);w.ss&&(w=await sde(m.localStore,g.query,!1).then(({documents:I})=>g.view.ga(I,w)));const E=b&&b.targetChanges.get(g.targetId),T=b&&b.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(w,m.isPrimaryClient,E,T);return hde(m,g.targetId,C.ba),C.snapshot}(e,f,d,h);const s=await sde(e.localStore,t,!0),o=new ght(t,s.Es),a=o.ga(s.documents),u=l3.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);hde(e,n,l.ba);const c=new yht(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function Eht(e,t,n){const r=Zn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!JB(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tG(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&UZ(r.remoteStore,i.targetId),rG(r,i.targetId)}).catch(YA)):(rG(r,i.targetId),await tG(r.localStore,i.targetId,!0))}async function Sht(e,t){const n=Zn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),UZ(n.remoteStore,r.targetId))}async function Tht(e,t,n){const r=Nht(e);try{const i=await function(o,a){const u=Zn(o),l=Wl.now(),c=a.reduce((h,p)=>h.add(p.key),Mr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=n1(),m=Mr();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((v,b)=>{b.isValidDocument()||(m=m.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const v=[];for(const b of a){const w=Hft(b,f.get(b.key).overlayedDocument);w!=null&&v.push(new wx(b.key,w,k2e(w.value.mapValue),id.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(g=>{d=g;const v=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:d.batchId,changes:j2e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new qs(qr)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await d3(r,i.changes),await i9(r.remoteStore)}catch(i){const s=WZ(i,"Failed to persist write");n.reject(s)}}async function wCe(e,t){const n=Zn(e);try{const r=await jdt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Di(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Di(o.Fa):i.removedDocuments.size>0&&(Di(o.Fa),o.Fa=!1))}),await d3(n,r,t)}catch(r){await YA(r)}}function dde(e,t,n){const r=Zn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Zn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&GZ(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Cht(e,t,n){const r=Zn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new qs(Sn.comparator);o=o.insert(s,el.newNoDocument(s,Jn.min()));const a=Mr().add(s),u=new n9(Jn.min(),new Map,new qs(qr),o,a);await wCe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),YZ(r)}else await tG(r.localStore,t,!1).then(()=>rG(r,t,n)).catch(YA)}async function Aht(e,t){const n=Zn(e),r=t.batch.batchId;try{const i=await Bdt(n.localStore,t);SCe(n,r,null),ECe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await d3(n,i)}catch(i){await YA(i)}}async function Iht(e,t,n){const r=Zn(e);try{const i=await function(o,a){const u=Zn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Di(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);SCe(r,t,n),ECe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await d3(r,i)}catch(i){await YA(i)}}function ECe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function SCe(e,t,n){const r=Zn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function rG(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||TCe(e,r)})}function TCe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(UZ(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),YZ(e))}function hde(e,t,n){for(const r of n)r instanceof bCe?(e.ka.addReference(r.key,t),kht(e,r)):r instanceof xCe?(nn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||TCe(e,r.key)):Hn()}function kht(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(nn("SyncEngine","New document in limbo: "+n),e.Na.add(r),YZ(e))}function YZ(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Sn(xs.fromString(t)),r=e.Ka.next();e.La.set(r,new vht(n)),e.Ba=e.Ba.insert(n,r),cCe(e.remoteStore,new Zv(w0(NZ(n.path)),r,"TargetPurposeLimboResolution",KB.oe))}}async function d3(e,t,n){const r=Zn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=jZ.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=Zn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>vt.forEach(l,d=>vt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>vt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!KA(f))throw f;nn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function Rht(e,t){const n=Zn(e);if(!n.currentUser.isEqual(t)){nn("SyncEngine","User change. New user:",t.toKey());const r=await oCe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Qt(mt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await d3(n,r.Ts)}}function Dht(e,t){const n=Zn(e),r=n.La.get(t);if(r&&r.Fa)return Mr().add(r.key);{let i=Mr();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function CCe(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wCe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dht.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cht.bind(null,t),t.Ma.R_=pht.bind(null,t.eventManager),t.Ma.Wa=mht.bind(null,t.eventManager),t}function Nht(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Aht.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Iht.bind(null,t),t}class dF{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=r9(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return Fdt(this.persistence,new Ldt,t.initialUser,this.serializer)}ja(t){return new sCe(BZ.ei,this.serializer)}za(t){return new qdt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dF.provider={build:()=>new dF};class Pht extends dF{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Di(this.persistence.referenceDelegate instanceof cF);const r=this.persistence.referenceDelegate.garbageCollector;return new _dt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Lc.withCacheSize(this.cacheSizeBytes):Lc.DEFAULT;return new sCe(r=>cF.ei(r,n),this.serializer)}}class iG{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dde(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rht.bind(null,this.syncEngine),await fht(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hht}()}createDatastore(t){const n=r9(t.databaseInfo.databaseId),r=function(s){return new Kdt(s)}(t.databaseInfo);return function(s,o,a,u){return new Jdt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new eht(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>dde(this.syncEngine,n,0),function(){return ade.p()?new ade:new Wdt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new bht(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=Zn(i);nn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await f3(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}iG.provider={build:()=>new iG};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ACe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):t1("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oht{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mc.UNAUTHENTICATED,this.clientId=C2e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{nn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(nn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $y;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=WZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function rV(e,t){e.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oCe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function pde(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ICe(e);nn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ude(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ude(t.remoteStore,i)),e._onlineComponents=t}async function ICe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nn("FirestoreClient","Using user provided OfflineComponentProvider");try{await rV(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===mt.FAILED_PRECONDITION||i.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;RN("Error using user provided cache. Falling back to memory cache: "+n),await rV(e,new dF)}}else nn("FirestoreClient","Using default OfflineComponentProvider"),await rV(e,new Pht(void 0));return e._offlineComponents}async function KZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nn("FirestoreClient","Using user provided OnlineComponentProvider"),await pde(e,e._uninitializedComponentsProvider._online)):(nn("FirestoreClient","Using default OnlineComponentProvider"),await pde(e,new iG))),e._onlineComponents}function Mht(e){return ICe(e).then(t=>t.persistence)}function Lht(e){return KZ(e).then(t=>t.remoteStore)}function $ht(e){return KZ(e).then(t=>t.syncEngine)}async function kCe(e){const t=await KZ(e),n=t.eventManager;return n.onListen=xht.bind(null,t.syncEngine),n.onUnlisten=Eht.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_ht.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sht.bind(null,t.syncEngine),n}function Fht(e){return e.asyncQueue.enqueue(async()=>{const t=await Mht(e),n=await Lht(e);return t.setNetworkEnabled(!0),function(i){const s=Zn(i);return s.k_.delete(0),c3(s)}(n)})}function Bht(e,t,n={}){const r=new $y;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ACe({next:d=>{c.eu(),o.enqueueAndForget(()=>yCe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Qt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Qt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new vCe(NZ(a.path),c,{includeMetadataChanges:!0,ua:!0});return gCe(s,f)}(await kCe(e),e.asyncQueue,t,n,r)),r.promise}function jht(e,t,n={}){const r=new $y;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ACe({next:d=>{c.eu(),o.enqueueAndForget(()=>yCe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Qt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new vCe(a,c,{includeMetadataChanges:!0,ua:!0});return gCe(s,f)}(await kCe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RCe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mde=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DCe(e,t,n){if(!n)throw new Qt(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Uht(e,t,n,r){if(t===!0&&r===!0)throw new Qt(mt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function gde(e){if(!Sn.isDocumentKey(e))throw new Qt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yde(e){if(Sn.isDocumentKey(e))throw new Qt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function s9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hn()}function U0(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=s9(e);throw new Qt(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Qt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Uht("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RCe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class XZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vde({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Qt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vde(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qct;switch(r.type){case"firstParty":return new eft(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mde.get(n);r&&(nn("ComponentProvider","Removing Datastore"),mde.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h3=class NCe{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new NCe(this.firestore,t,this._query)}};class Gl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pb(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Gl(this.firestore,t,this._key)}}class pb extends h3{constructor(t,n,r){super(t,n,NZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Gl(this.firestore,null,new Sn(t))}withConverter(t){return new pb(this.firestore,t,this._path)}}function Dc(e,t,...n){if(e=hs(e),DCe("collection","path",t),e instanceof XZ){const r=xs.fromString(t,...n);return yde(r),new pb(e,null,r)}{if(!(e instanceof Gl||e instanceof pb))throw new Qt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(xs.fromString(t,...n));return yde(r),new pb(e.firestore,null,r)}}function bs(e,t,...n){if(e=hs(e),arguments.length===1&&(t=C2e.newId()),DCe("doc","path",t),e instanceof XZ){const r=xs.fromString(t,...n);return gde(r),new Gl(e,null,new Sn(r))}{if(!(e instanceof Gl||e instanceof pb))throw new Qt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(xs.fromString(t,...n));return gde(r),new Gl(e.firestore,e instanceof pb?e.converter:null,new Sn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new uCe(this,"async_queue_retry"),this.fu=()=>{const r=nV();r&&nn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=nV();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=nV();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new $y;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!KA(t))throw t;nn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw t1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=qZ.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Hn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class HE extends XZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new bde,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bde(t),this._firestoreClient=void 0,await t}}}function zht(e,t,n){n||(n="(default)");const r=WA(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(IN(s,t))return i;throw new Qt(mt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Qt(mt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function p3(e){if(e._terminated)throw new Qt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Vht(e),e._firestoreClient}function Vht(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new mft(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,RCe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Oht(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function Hht(e){return Fht(p3(e=U0(e,HE)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t){this._byteString=t}static fromBase64String(t){try{return new TC(Su.fromBase64String(t))}catch(n){throw new Qt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new TC(Su.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Qt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mu(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Qt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qr(this._lat,t._lat)||qr(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qht=/^__.*__$/;class Wht{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new wx(t,this.data,this.fieldMask,n,this.fieldTransforms):new u3(t,this.data,n,this.fieldTransforms)}}class PCe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new wx(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function OCe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hn()}}class ZZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new ZZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return hF(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(OCe(this.Mu)&&qht.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class Ght{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||r9(t)}$u(t,n,r,i=!1){return new ZZ({Mu:t,methodName:n,Ku:r,path:mu.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a9(e){const t=e._freezeSettings(),n=r9(e._databaseId);return new Ght(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MCe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);tee("Data must be an object, but it was:",o,r);const a=FCe(r,o);let u,l;if(s.merge)u=new Jf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=sG(t,f,n);if(!o.contains(d))throw new Qt(mt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);jCe(c,d)||c.push(d)}u=new Jf(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Wht(new Vc(a),u,l)}class u9 extends o9{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof u9}}class eee extends o9{_toFieldTransform(t){return new jft(t.path,new MN)}isEqual(t){return t instanceof eee}}function LCe(e,t,n,r){const i=e.$u(1,t,n);tee("Data must be an object, but it was:",i,r);const s=[],o=Vc.empty();_x(r,(u,l)=>{const c=nee(t,u,n);l=hs(l);const f=i.Lu(c);if(l instanceof u9)s.push(c);else{const d=g3(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Jf(s);return new PCe(o,a,i.fieldTransforms)}function $Ce(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[sG(t,r,n)],u=[i];if(s.length%2!=0)throw new Qt(mt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(sG(t,s[d])),u.push(s[d+1]);const l=[],c=Vc.empty();for(let d=a.length-1;d>=0;--d)if(!jCe(l,a[d])){const h=a[d];let p=u[d];p=hs(p);const m=o.Lu(h);if(p instanceof u9)l.push(h);else{const g=g3(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Jf(l);return new PCe(c,f,o.fieldTransforms)}function Yht(e,t,n,r=!1){return g3(n,e.$u(r?4:3,t))}function g3(e,t){if(BCe(e=hs(e)))return tee("Unsupported field value:",t,e),FCe(e,t);if(e instanceof o9)return function(r,i){if(!OCe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=g3(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=hs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $ft(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Wl.fromDate(r);return{timestampValue:lF(i.serializer,s)}}if(r instanceof Wl){const s=new Wl(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lF(i.serializer,s)}}if(r instanceof QZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof TC)return{bytesValue:J2e(i.serializer,r._byteString)};if(r instanceof Gl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$Z(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof JZ)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return PZ(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${s9(r)}`)}(e,t)}function FCe(e,t){const n={};return A2e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_x(e,(r,i)=>{const s=g3(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function BCe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Wl||e instanceof QZ||e instanceof TC||e instanceof Gl||e instanceof o9||e instanceof JZ)}function tee(e,t,n){if(!BCe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=s9(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function sG(e,t,n){if((t=hs(t))instanceof m3)return t._internalPath;if(typeof t=="string")return nee(e,t);throw hF("Field path arguments must be of type string or ",e,!1,void 0,n)}const Kht=new RegExp("[~\\*/\\[\\]]");function nee(e,t,n){if(t.search(Kht)>=0)throw hF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new m3(...t.split("."))._internalPath}catch{throw hF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function hF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Qt(mt.INVALID_ARGUMENT,a+e+u)}function jCe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UCe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Xht(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(l9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Xht extends UCe{data(){return super.data()}}function l9(e,t){return typeof t=="string"?nee(e,t):t instanceof m3?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qht(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Qt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ree{}class zCe extends ree{}function iV(e,t,...n){let r=[];t instanceof ree&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof iee).length,a=s.filter(u=>u instanceof c9).length;if(o>1||o>0&&a>0)throw new Qt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class c9 extends zCe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new c9(t,n,r)}_apply(t){const n=this._parse(t);return VCe(t._query,n),new h3(t.firestore,t.converter,KW(t._query,n))}_parse(t){const n=a9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Qt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Ede(f,c);const h=[];for(const p of f)h.push(wde(u,s,p));d={arrayValue:{values:h}}}else d=wde(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Ede(f,c),d=Yht(a,o,f,c==="in"||c==="not-in");return Wo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function xde(e,t,n){const r=t,i=l9("where",e);return c9._create(i,r,n)}class iee extends ree{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new iee(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Up.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)VCe(o,u),o=KW(o,u)}(t._query,n),new h3(t.firestore,t.converter,KW(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class see extends zCe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new see(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ON(s,o)}(t._query,this._field,this._direction);return new h3(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new XA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function _de(e,t="asc"){const n=t,r=l9("orderBy",e);return see._create(r,n)}function wde(e,t,n){if(typeof(n=hs(n))=="string"){if(n==="")throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L2e(t)&&n.indexOf("/")!==-1)throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(xs.fromString(n));if(!Sn.isDocumentKey(r))throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ufe(e,new Sn(r))}if(n instanceof Gl)return Ufe(e,n._key);throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s9(n)}.`)}function Ede(e,t){if(!Array.isArray(e)||e.length===0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function VCe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Qt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Qt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Jht{convertValue(t,n="none"){switch(Rb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Io(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(kb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Hn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return _x(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Io(o.doubleValue));return new JZ(s)}convertGeoPoint(t){return new QZ(Io(t.latitude),Io(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=QB(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(DN(t));default:return null}}convertTimestamp(t){const n=Ib(t);return new Wl(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=xs.fromString(t);Di(iCe(r));const i=new NN(r.get(1),r.get(3)),s=new Sn(r.popFirst(5));return i.isEqual(n)||t1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HCe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qCe extends UCe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new hL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(l9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hL extends qCe{data(t={}){return super.data(t)}}class Zht{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new KR(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new hL(this._firestore,this._userDataWriter,r.key,r,new KR(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new hL(i._firestore,i._userDataWriter,a.doc.key,a.doc,new KR(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new hL(i._firestore,i._userDataWriter,a.doc.key,a.doc,new KR(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:ept(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ept(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(e){e=U0(e,Gl);const t=U0(e.firestore,HE);return Bht(p3(t),e._key).then(n=>tpt(t,e,n))}class WCe extends Jht{constructor(t){super(),this.firestore=t}convertBytes(t){return new TC(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gl(this.firestore,null,n)}}function MT(e){e=U0(e,h3);const t=U0(e.firestore,HE),n=p3(t),r=new WCe(t);return Qht(e._query),jht(n,e._query).then(i=>new Zht(t,r,e,i))}function zu(e,t,n){e=U0(e,Gl);const r=U0(e.firestore,HE),i=HCe(e.converter,t,n);return oee(r,[MCe(a9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,id.none())])}function Sde(e,t,n,...r){e=U0(e,Gl);const i=U0(e.firestore,HE),s=a9(i);let o;return o=typeof(t=hs(t))=="string"||t instanceof m3?$Ce(s,"updateDoc",e._key,t,n,r):LCe(s,"updateDoc",e._key,t),oee(i,[o.toMutation(e._key,id.exists(!0))])}function oee(e,t){return function(r,i){const s=new $y;return r.asyncQueue.enqueueAndForget(async()=>Tht(await $ht(r),i,s)),s.promise}(p3(e),t)}function tpt(e,t,n){const r=n.docs.get(t._key),i=new WCe(e);return new qCe(e,i,t._key,r,new KR(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=a9(t)}set(t,n,r){this._verifyNotCommitted();const i=sV(t,this._firestore),s=HCe(i.converter,n,r),o=MCe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,id.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=sV(t,this._firestore);let o;return o=typeof(n=hs(n))=="string"||n instanceof m3?$Ce(this._dataReader,"WriteBatch.update",s._key,n,r,i):LCe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,id.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=sV(t,this._firestore);return this._mutations=this._mutations.concat(new OZ(n._key,id.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sV(e,t){if((e=hs(e)).firestore!==t)throw new Qt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function i6(){return new eee("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tde(e){return p3(e=U0(e,HE)),new npt(e,t=>oee(e,t))}(function(t,n=!0){(function(i){GA=i})(UE),e1(new B0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new HE(new Jct(r.getProvider("auth-internal")),new nft(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Qt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new NN(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pp(Mfe,"4.7.6",t),Pp(Mfe,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=new Map,GCe={activated:!1,tokenObservers:[]},rpt={initialized:!1,enabled:!1};function ha(e){return oG.get(e)||Object.assign({},GCe)}function ipt(e,t){return oG.set(e,t),oG.get(e)}function f9(){return rpt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YCe="https://content-firebaseappcheck.googleapis.com/v1",spt="exchangeRecaptchaV3Token",opt="exchangeDebugToken",Cde={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},apt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class upt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new AN,this.pending.promise.catch(n=>{}),await lpt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new AN,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function lpt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qc=new qA("appCheck","AppCheck",cpt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ade(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function aee(e){if(!ha(e).activated)throw qc.create("use-before-activation",{appName:e.name})}function KCe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=s6(n)+"d:"),r&&(o+=s6(r)+"h:"),o+=s6(i)+"m:"+s6(s)+"s",o}function s6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uee({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw qc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw qc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw qc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw qc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function fpt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${YCe}/projects/${n}/apps/${r}:${spt}?key=${i}`,body:{recaptcha_v3_token:t}}}function XCe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${YCe}/projects/${n}/apps/${r}:${opt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dpt="firebase-app-check-database",hpt=1,FN="firebase-app-check-store",QCe="debug-token";let o6=null;function JCe(){return o6||(o6=new Promise((e,t)=>{try{const n=indexedDB.open(dpt,hpt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(qc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(FN,{keyPath:"compositeKey"})}}}catch(n){t(qc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),o6)}function ppt(e){return eAe(tAe(e))}function mpt(e,t){return ZCe(tAe(e),t)}function gpt(e){return ZCe(QCe,e)}function ypt(){return eAe(QCe)}async function ZCe(e,t){const r=(await JCe()).transaction(FN,"readwrite"),s=r.objectStore(FN).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(qc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function eAe(e){const n=(await JCe()).transaction(FN,"readonly"),i=n.objectStore(FN).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(qc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function tAe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new WB("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vpt(e){if(yZ()){let t;try{t=await ppt(e)}catch(n){BN.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function oV(e,t){return yZ()?mpt(e,t).catch(n=>{BN.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function bpt(){let e;try{e=await ypt()}catch{}if(e)return e;{const t=crypto.randomUUID();return gpt(t).catch(n=>BN.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lee(){return f9().enabled}async function cee(){const e=f9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function xpt(){const e=QTe(),t=f9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new AN;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(bpt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pt={error:"UNKNOWN_ERROR"};function wpt(e){return gZ.encodeString(JSON.stringify(e),!1)}async function aG(e,t=!1){const n=e.app;aee(n);const r=ha(n);let i=r.token,s;if(i&&!x2(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(x2(u)?i=u:await oV(n,void 0))}if(!t&&i&&x2(i))return{token:i.token};let o=!1;if(lee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uee(XCe(n,await cee()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await oV(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ha(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?BN.warn(u.message):BN.error(u),s=u}let a;return i?s?x2(i)?a={token:i.token,internalError:s}:a=kde(s):(a={token:i.token},r.token=i,await oV(n,i)):a=kde(s),o&&iAe(n,a),a}async function Ept(e){const t=e.app;aee(t);const{provider:n}=ha(t);if(lee()){const r=await cee(),{token:i}=await uee(XCe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function nAe(e,t,n,r){const{app:i}=e,s=ha(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&x2(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ide(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ide(e))}function rAe(e,t){const n=ha(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ide(e){const{app:t}=e,n=ha(t);let r=n.tokenRefresher;r||(r=Spt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Spt(e){const{app:t}=e;return new upt(async()=>{const n=ha(t);let r;if(n.token?r=await aG(e,!0):r=await aG(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ha(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Cde.RETRIAL_MIN_WAIT,Cde.RETRIAL_MAX_WAIT)}function iAe(e,t){const n=ha(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function x2(e){return e.expireTimeMillis-Date.now()>0}function kde(e){return{token:wpt(_pt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tpt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ha(this.app);for(const n of t)rAe(this.app,n.next);return Promise.resolve()}}function Cpt(e,t){return new Tpt(e,t)}function Apt(e){return{getToken:t=>aG(e,t),getLimitedUseToken:()=>Ept(e),addTokenListener:t=>nAe(e,"INTERNAL",t),removeTokenListener:t=>rAe(e.app,t)}}const Ipt="@firebase/app-check",kpt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rpt="https://www.google.com/recaptcha/api.js";function Dpt(e,t){const n=new AN,r=ha(e);r.reCAPTCHAState={initialized:n};const i=Npt(e),s=Ade(!1);return s?Rde(e,t,s,i,n):Mpt(()=>{const o=Ade(!1);if(!o)throw new Error("no recaptcha");Rde(e,t,o,i,n)}),n.promise}function Rde(e,t,n,r,i){n.ready(()=>{Opt(e,t,n,r),i.resolve(n)})}function Npt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Ppt(e){aee(e);const n=await ha(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ha(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Opt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{ha(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{ha(e).reCAPTCHAState.succeeded=!1}}),s=ha(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Mpt(e){const t=document.createElement("script");t.src=Rpt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fee{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;$pt(this._throttleData);const i=await Ppt(this._app).catch(o=>{throw qc.create("recaptcha-error")});if(!(!((t=ha(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw qc.create("recaptcha-error");let s;try{s=await uee(fpt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Lpt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),qc.create("throttled",{time:KCe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=WA(t,"heartbeat"),Dpt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof fee?this._siteKey===t._siteKey:!1}}function Lpt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+apt,httpStatus:e};{const n=t?t.backoffCount:0,r=Eut(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function $pt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw qc.create("throttled",{time:KCe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fpt(e=bZ(),t){e=hs(e);const n=WA(e,"app-check");if(f9().initialized||xpt(),lee()&&cee().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw qc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Bpt(e,t.provider,t.isTokenAutoRefreshEnabled),ha(e).isTokenAutoRefreshEnabled&&nAe(r,"INTERNAL",()=>{}),r}function Bpt(e,t,n){const r=ipt(e,Object.assign({},GCe));r.activated=!0,r.provider=t,r.cachedTokenPromise=vpt(e).then(i=>(i&&x2(i)&&(r.token=i,iAe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const jpt="app-check",Dde="app-check-internal";function Upt(){e1(new B0(jpt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Cpt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Dde).initialize()})),e1(new B0(Dde,e=>{const t=e.getProvider("app-check").getImmediate();return Apt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pp(Ipt,kpt)}Upt();function sAe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zpt=sAe,oAe=new qA("auth","Firebase",sAe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new WB("@firebase/auth");function Vpt(e,...t){pF.logLevel<=Or.WARN&&pF.warn(`Auth (${UE}): ${e}`,...t)}function pL(e,...t){pF.logLevel<=Or.ERROR&&pF.error(`Auth (${UE}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(e,...t){throw hee(e,...t)}function Op(e,...t){return hee(e,...t)}function dee(e,t,n){const r=Object.assign(Object.assign({},zpt()),{[t]:n});return new qA("auth","Firebase",r).create(t,{appName:e.name})}function mb(e){return dee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hpt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&z0(e,"argument-error"),dee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return oAe.create(e,...t)}function Yn(e,t,...n){if(!e)throw hee(t,...n)}function Ty(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pL(t),new Error(t)}function r1(e,t){e||Ty(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function qpt(){return Nde()==="http:"||Nde()==="https:"}function Nde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wpt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qpt()||aut()||"connection"in navigator)?navigator.onLine:!0}function Gpt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(t,n){this.shortDelay=t,this.longDelay=n,r1(n>t,"Short delay should be less than long delay!"),this.isMobile=iut()||uut()}get(){return Wpt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pee(e,t){r1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aAe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ty("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ty("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ty("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ypt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpt=new y3(3e4,6e4);function d9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function JA(e,t,n,r,i={}){return uAe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=o3(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return out()||(l.referrerPolicy="no-referrer"),aAe.fetch()(cAe(e,e.config.apiHost,n,a),l)})}async function uAe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ypt),t);try{const i=new Xpt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw a6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw a6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw a6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw a6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dee(e,c,l);z0(e,c)}}catch(i){if(i instanceof ag)throw i;z0(e,"network-request-failed",{message:String(i)})}}async function lAe(e,t,n,r,i={}){const s=await JA(e,t,n,r,i);return"mfaPendingCredential"in s&&z0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function cAe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?pee(e.config,i):`${e.config.apiScheme}://${i}`}class Xpt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Op(this.auth,"network-request-failed")),Kpt.get())})}}function a6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Op(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qpt(e,t){return JA(e,"POST","/v1/accounts:delete",t)}async function fAe(e,t){return JA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Jpt(e,t=!1){const n=hs(e),r=await n.getIdToken(t),i=mee(r);Yn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:KD(aV(i.auth_time)),issuedAtTime:KD(aV(i.iat)),expirationTime:KD(aV(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function aV(e){return Number(e)*1e3}function mee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return pL("JWT malformed, contained fewer than 3 sections"),null;try{const i=XTe(n);return i?JSON.parse(i):(pL("Failed to decode base64 JWT payload"),null)}catch(i){return pL("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pde(e){const t=mee(e);return Yn(t,"internal-error"),Yn(typeof t.exp<"u","internal-error"),Yn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ag&&Zpt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Zpt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class emt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=KD(this.lastLoginAt),this.creationTime=KD(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await jN(e,fAe(n,{idToken:r}));Yn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?dAe(s.providerUserInfo):[],a=nmt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lG(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function tmt(e){const t=hs(e);await mF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function nmt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function dAe(e){return e.map(t=>{var{providerId:n}=t,r=UP(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rmt(e,t){const n=await uAe(e,{},async()=>{const r=o3({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=cAe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aAe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function imt(e,t){return JA(e,"POST","/v2/accounts:revokeToken",d9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yn(t.idToken,"internal-error"),Yn(typeof t.idToken<"u","internal-error"),Yn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Pde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yn(t.length!==0,"internal-error");const n=Pde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await rmt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new j2;return r&&(Yn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Yn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Yn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new j2,this.toJSON())}_performRefresh(){return Ty("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(e,t){Yn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Cy{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=UP(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new emt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lG(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await jN(this,this.stsTokenManager.getToken(this.auth,t));return Yn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Jpt(this,t)}reload(){return tmt(this)}_assign(t){this!==t&&(Yn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Cy(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await mF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(m0(this.auth.app))return Promise.reject(mb(this.auth));const t=await this.getIdToken();return await jN(this,Qpt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:C,stsTokenManager:I}=n;Yn(w&&I,t,"internal-error");const R=j2.fromJSON(this.name,I);Yn(typeof w=="string",t,"internal-error"),Tv(f,t.name),Tv(d,t.name),Yn(typeof E=="boolean",t,"internal-error"),Yn(typeof T=="boolean",t,"internal-error"),Tv(h,t.name),Tv(p,t.name),Tv(m,t.name),Tv(g,t.name),Tv(v,t.name),Tv(b,t.name);const N=new Cy({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:R,createdAt:v,lastLoginAt:b});return C&&Array.isArray(C)&&(N.providerData=C.map(O=>Object.assign({},O))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(t,n,r=!1){const i=new j2;i.updateFromServerResponse(n);const s=new Cy({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await mF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Yn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?dAe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new j2;a.updateFromIdToken(r);const u=new Cy({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lG(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode=new Map;function Ay(e){r1(e instanceof Function,"Expected a class definition");let t=Ode.get(e);return t?(r1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ode.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hAe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}hAe.type="NONE";const Mde=hAe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(e,t,n){return`firebase:${e}:${t}:${n}`}class U2{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mL(this.userKey,i.apiKey,s),this.fullPersistenceKey=mL("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Cy._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new U2(Ay(Mde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Ay(Mde);const o=mL(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Cy._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new U2(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new U2(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yAe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pAe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bAe(t))return"Blackberry";if(xAe(t))return"Webos";if(mAe(t))return"Safari";if((t.includes("chrome/")||gAe(t))&&!t.includes("edge/"))return"Chrome";if(vAe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pAe(e=dl()){return/firefox\//i.test(e)}function mAe(e=dl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function gAe(e=dl()){return/crios\//i.test(e)}function yAe(e=dl()){return/iemobile/i.test(e)}function vAe(e=dl()){return/android/i.test(e)}function bAe(e=dl()){return/blackberry/i.test(e)}function xAe(e=dl()){return/webos/i.test(e)}function gee(e=dl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function smt(e=dl()){var t;return gee(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function omt(){return lut()&&document.documentMode===10}function _Ae(e=dl()){return gee(e)||vAe(e)||xAe(e)||bAe(e)||/windows phone/i.test(e)||yAe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wAe(e,t=[]){let n;switch(e){case"Browser":n=Lde(dl());break;case"Worker":n=`${Lde(dl())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${UE}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class amt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function umt(e,t={}){return JA(e,"GET","/v2/passwordPolicy",d9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lmt=6;class cmt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lmt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fmt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $de(this),this.idTokenSubscription=new $de(this),this.beforeStateQueue=new amt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oAe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ay(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await U2.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await fAe(this,{idToken:t}),r=await Cy._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(m0(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Yn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await mF(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Gpt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(m0(this.app))return Promise.reject(mb(this));const n=t?hs(t):null;return n&&Yn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return m0(this.app)?Promise.reject(mb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return m0(this.app)?Promise.reject(mb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ay(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await umt(this),n=new cmt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new qA("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await imt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ay(t)||this._popupRedirectResolver;Yn(n,this,"argument-error"),this.redirectPersistenceManager=await U2.create(this,[Ay(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=wAe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Vpt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function v3(e){return hs(e)}class $de{constructor(t){this.auth=t,this.observer=null,this.addObserver=gut(n=>this.observer=n)}get next(){return Yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dmt(e){yee=e}function hmt(e){return yee.loadJS(e)}function pmt(){return yee.gapiScript}function mmt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gmt(e,t){const n=WA(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(IN(s,t??{}))return i;z0(i,"already-initialized")}return n.initialize({options:t})}function ymt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ay);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function vmt(e,t,n){const r=v3(e);Yn(r._canInitEmulator,r,"emulator-config-failed"),Yn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=EAe(t),{host:o,port:a}=bmt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xmt()}function EAe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bmt(e){const t=EAe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Fde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Fde(o)}}}function Fde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function xmt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SAe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ty("not implemented")}_getIdTokenResponse(t){return Ty("not implemented")}_linkToIdToken(t,n){return Ty("not implemented")}_getReauthenticationResolver(t){return Ty("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(e,t){return lAe(e,"POST","/v1/accounts:signInWithIdp",d9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _mt="http://localhost";class Qw extends SAe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Qw(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):z0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=UP(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Qw(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return z2(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,z2(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,z2(t,n)}buildRequest(){const t={requestUri:_mt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=o3(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3 extends vee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends b3{constructor(){super("facebook.com")}static credential(t){return Qw._fromParams({providerId:Gv.PROVIDER_ID,signInMethod:Gv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gv.credentialFromTaggedObject(t)}static credentialFromError(t){return Gv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gv.credential(t.oauthAccessToken)}catch{return null}}}Gv.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy extends b3{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Qw._fromParams({providerId:vy.PROVIDER_ID,signInMethod:vy.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return vy.credentialFromTaggedObject(t)}static credentialFromError(t){return vy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return vy.credential(n,r)}catch{return null}}}vy.GOOGLE_SIGN_IN_METHOD="google.com";vy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends b3{constructor(){super("github.com")}static credential(t){return Qw._fromParams({providerId:Yv.PROVIDER_ID,signInMethod:Yv.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yv.credentialFromTaggedObject(t)}static credentialFromError(t){return Yv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yv.credential(t.oauthAccessToken)}catch{return null}}}Yv.GITHUB_SIGN_IN_METHOD="github.com";Yv.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends b3{constructor(){super("twitter.com")}static credential(t,n){return Qw._fromParams({providerId:Kv.PROVIDER_ID,signInMethod:Kv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Kv.credentialFromTaggedObject(t)}static credentialFromError(t){return Kv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Kv.credential(n,r)}catch{return null}}}Kv.TWITTER_SIGN_IN_METHOD="twitter.com";Kv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wmt(e,t){return lAe(e,"POST","/v1/accounts:signUp",d9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Cy._fromIdTokenResponse(t,r,i),o=Bde(r);return new Nb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Bde(r);return new Nb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Bde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Emt(e){var t;if(m0(e.app))return Promise.reject(mb(e));const n=v3(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Nb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await wmt(n,{returnSecureToken:!0}),i=await Nb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF extends ag{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new gF(t,n,r,i)}}function TAe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gF._fromErrorAndOperation(e,s,t,r):s})}async function Smt(e,t,n=!1){const r=await jN(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Nb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tmt(e,t,n=!1){const{auth:r}=e;if(m0(r.app))return Promise.reject(mb(r));const i="reauthenticate";try{const s=await jN(e,TAe(r,i,t,e),n);Yn(s.idToken,r,"internal-error");const o=mee(s.idToken);Yn(o,r,"internal-error");const{sub:a}=o;return Yn(e.uid===a,r,"user-mismatch"),Nb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&z0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cmt(e,t,n=!1){if(m0(e.app))return Promise.reject(mb(e));const r="signIn",i=await TAe(e,r,t),s=await Nb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Amt(e,t,n,r){return hs(e).onIdTokenChanged(t,n,r)}function Imt(e,t,n){return hs(e).beforeAuthStateChanged(t,n)}function kmt(e,t,n,r){return hs(e).onAuthStateChanged(t,n,r)}function Rmt(e){return hs(e).signOut()}const yF="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CAe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yF,"1"),this.storage.removeItem(yF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dmt=1e3,Nmt=10;class AAe extends CAe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_Ae(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);omt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Nmt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Dmt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}AAe.type="LOCAL";const Pmt=AAe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe extends CAe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}IAe.type="SESSION";const kAe=IAe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Omt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new h9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Omt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}h9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mmt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=bee("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return window}function Lmt(e){S0().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RAe(){return typeof S0().WorkerGlobalScope<"u"&&typeof S0().importScripts=="function"}async function $mt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fmt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Bmt(){return RAe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DAe="firebaseLocalStorageDb",jmt=1,vF="firebaseLocalStorage",NAe="fbase_key";class x3{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function p9(e,t){return e.transaction([vF],t?"readwrite":"readonly").objectStore(vF)}function Umt(){const e=indexedDB.deleteDatabase(DAe);return new x3(e).toPromise()}function cG(){const e=indexedDB.open(DAe,jmt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(vF,{keyPath:NAe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(vF)?t(r):(r.close(),await Umt(),t(await cG()))})})}async function jde(e,t,n){const r=p9(e,!0).put({[NAe]:t,value:n});return new x3(r).toPromise()}async function zmt(e,t){const n=p9(e,!1).get(t),r=await new x3(n).toPromise();return r===void 0?null:r.value}function Ude(e,t){const n=p9(e,!0).delete(t);return new x3(n).toPromise()}const Vmt=800,Hmt=3;class PAe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cG(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Hmt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RAe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=h9._getInstance(Bmt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await $mt(),!this.activeServiceWorker)return;this.sender=new Mmt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Fmt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await cG();return await jde(t,yF,"1"),await Ude(t,yF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>zmt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ude(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=p9(i,!1).getAll();return new x3(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vmt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PAe.type="LOCAL";const qmt=PAe;new y3(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OAe(e,t){return t?Ay(t):(Yn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xee extends SAe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return z2(t,this._buildIdpRequest())}_linkToIdToken(t,n){return z2(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return z2(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Wmt(e){return Cmt(e.auth,new xee(e),e.bypassAuthState)}function Gmt(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),Tmt(n,new xee(e),e.bypassAuthState)}async function Ymt(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),Smt(n,new xee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MAe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Wmt;case"linkViaPopup":case"linkViaRedirect":return Ymt;case"reauthViaPopup":case"reauthViaRedirect":return Gmt;default:z0(this.auth,"internal-error")}}resolve(t){r1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){r1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kmt=new y3(2e3,1e4);async function Xmt(e,t,n){if(m0(e.app))return Promise.reject(Op(e,"operation-not-supported-in-this-environment"));const r=v3(e);Hpt(e,t,vee);const i=OAe(r,n);return new ww(r,"signInViaPopup",t,i).executeNotNull()}class ww extends MAe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ww.currentPopupAction&&ww.currentPopupAction.cancel(),ww.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yn(t,this.auth,"internal-error"),t}async onExecution(){r1(this.filter.length===1,"Popup operations only handle one event");const t=bee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Op(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Op(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ww.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Op(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Kmt.get())};t()}}ww.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qmt="pendingRedirect",gL=new Map;class Jmt extends MAe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=gL.get(this.auth._key());if(!t){try{const r=await Zmt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}gL.set(this.auth._key(),t)}return this.bypassAuthState||gL.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zmt(e,t){const n=n0t(t),r=t0t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function e0t(e,t){gL.set(e._key(),t)}function t0t(e){return Ay(e._redirectPersistence)}function n0t(e){return mL(Qmt,e.config.apiKey,e.name)}async function r0t(e,t,n=!1){if(m0(e.app))return Promise.reject(mb(e));const r=v3(e),i=OAe(r,t),o=await new Jmt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0t=10*60*1e3;class s0t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!o0t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!LAe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Op(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=i0t&&this.cachedEventUids.clear(),this.cachedEventUids.has(zde(t))}saveEventToCache(t){this.cachedEventUids.add(zde(t)),this.lastProcessedEventTime=Date.now()}}function zde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function LAe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function o0t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LAe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a0t(e,t={}){return JA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l0t=/^https?/;async function c0t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await a0t(e);for(const n of t)try{if(f0t(n))return}catch{}z0(e,"unauthorized-domain")}function f0t(e){const t=uG(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!l0t.test(n))return!1;if(u0t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0t=new y3(3e4,6e4);function Vde(){const e=S0().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function h0t(e){return new Promise((t,n)=>{var r,i,s;function o(){Vde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vde(),n(Op(e,"network-request-failed"))},timeout:d0t.get()})}if(!((i=(r=S0().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=S0().gapi)===null||s===void 0)&&s.load)o();else{const a=mmt("iframefcb");return S0()[a]=()=>{gapi.load?o():n(Op(e,"network-request-failed"))},hmt(`${pmt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw yL=null,t})}let yL=null;function p0t(e){return yL=yL||h0t(e),yL}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0t=new y3(5e3,15e3),g0t="__/auth/iframe",y0t="emulator/auth/iframe",v0t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b0t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x0t(e){const t=e.config;Yn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?pee(t,y0t):`https://${e.config.authDomain}/${g0t}`,r={apiKey:t.apiKey,appName:e.name,v:UE},i=b0t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${o3(r).slice(1)}`}async function _0t(e){const t=await p0t(e),n=S0().gapi;return Yn(n,e,"internal-error"),t.open({where:document.body,url:x0t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v0t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Op(e,"network-request-failed"),a=S0().setTimeout(()=>{s(o)},m0t.get());function u(){S0().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E0t=500,S0t=600,T0t="_blank",C0t="http://localhost";class Hde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A0t(e,t,n,r=E0t,i=S0t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},w0t),{width:r.toString(),height:i.toString(),top:s,left:o}),l=dl().toLowerCase();n&&(a=gAe(l)?T0t:n),pAe(l)&&(t=t||C0t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(smt(l)&&a!=="_self")return I0t(t||"",a),new Hde(null);const f=window.open(t||"",a,c);Yn(f,e,"popup-blocked");try{f.focus()}catch{}return new Hde(f)}function I0t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0t="__/auth/handler",R0t="emulator/auth/handler",D0t=encodeURIComponent("fac");async function qde(e,t,n,r,i,s){Yn(e.config.authDomain,e,"auth-domain-config-required"),Yn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:UE,eventId:i};if(t instanceof vee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",mut(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof b3){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${D0t}=${encodeURIComponent(u)}`:"";return`${N0t(e)}?${o3(a).slice(1)}${l}`}function N0t({config:e}){return e.emulator?pee(e,R0t):`https://${e.authDomain}/${k0t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="webStorageSupport";class P0t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kAe,this._completeRedirectFn=r0t,this._overrideRedirectResult=e0t}async _openPopup(t,n,r,i){var s;r1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qde(t,n,r,uG(),i);return A0t(t,o,bee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await qde(t,n,r,uG(),i);return Lmt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(r1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await _0t(t),r=new s0t(t);return n.register("authEvent",i=>(Yn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(uV,{type:uV},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[uV];o!==void 0&&n(!!o),z0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c0t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _Ae()||mAe()||gee()}}const $Ae=P0t;var Wde="@firebase/auth",Gde="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L0t(e){e1(new B0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Yn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wAe(e)},l=new fmt(r,i,s,u);return ymt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),e1(new B0("auth-internal",t=>{const n=v3(t.getProvider("auth").getImmediate());return(r=>new O0t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pp(Wde,Gde,M0t(e)),Pp(Wde,Gde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0t=5*60,F0t=e2e("authIdTokenMaxAge")||$0t;let Yde=null;const B0t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F0t)return;const i=n==null?void 0:n.token;Yde!==i&&(Yde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bF(e=bZ()){const t=WA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=gmt(e,{popupRedirectResolver:$Ae,persistence:[qmt,Pmt,kAe]}),r=e2e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=B0t(s.toString());Imt(n,o,()=>o(n.currentUser)),Amt(n,a=>o(a))}}const i=JTe("auth");return i&&vmt(n,`http://${i}`),n}function j0t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}dmt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Op("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",j0t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L0t("Browser");function XR(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lV={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Kde;function U0t(){return Kde||(Kde=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof XR=="function"&&XR;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof XR=="function"&&XR,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,v,b=h.length;b;){for(v=h,h=[],g=-1;++g<b;)v[g]();b=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==o&&m(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,C){if(typeof T!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var I=new this.constructor(o);if(this.state!==c){var R=this.state===l?T:C;h(I,R,this.outcome)}else this.queue.push(new d(I,T,C));return I};function d(T,C,I){this.promise=T,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,C,I){s(function(){var R;try{R=C(I)}catch(N){return a.reject(T,N)}R===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,R)})}a.resolve=function(T,C){var I=g(p,C);if(I.status==="error")return a.reject(T,I.value);var R=I.value;if(R)m(T,R);else{T.state=l,T.outcome=C;for(var N=-1,O=T.queue.length;++N<O;)T.queue[N].callFulfilled(C)}return T},a.reject=function(T,C){T.state=u,T.outcome=C;for(var I=-1,R=T.queue.length;++I<R;)T.queue[I].callRejected(C);return T};function p(T){var C=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof C=="function")return function(){C.apply(T,arguments)}}function m(T,C){var I=!1;function R(j){I||(I=!0,a.reject(T,j))}function N(j){I||(I=!0,a.resolve(T,j))}function O(){C(N,R)}var L=g(O);L.status==="error"&&R(L.value)}function g(T,C){var I={};try{I.value=T(C),I.status="success"}catch(R){I.status="error",I.value=R}return I}f.resolve=v;function v(T){return T instanceof this?T:a.resolve(new this(o),T)}f.reject=b;function b(T){var C=new this(o);return a.reject(C,T)}f.all=w;function w(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var N=new Array(I),O=0,L=-1,j=new this(o);++L<I;)F(T[L],L);return j;function F(H,Q){C.resolve(H).then(J,function(ne){R||(R=!0,a.reject(j,ne))});function J(ne){N[Q]=ne,++O===I&&!R&&(R=!0,a.resolve(j,N))}}}f.race=E;function E(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var N=-1,O=new this(o);++N<I;)L(T[N]);return O;function L(j){C.resolve(j).then(function(F){R||(R=!0,a.resolve(O,F))},function(F){R||(R=!0,a.reject(O,F))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function o(ue,Te){if(!(ue instanceof Te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ue=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ue||Te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ue,Te){ue=ue||[],Te=Te||{};try{return new Blob(ue,Te)}catch(Re){if(Re.name!=="TypeError")throw Re;for(var ge=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ne=new ge,Be=0;Be<ue.length;Be+=1)Ne.append(ue[Be]);return Ne.getBlob(Te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ue,Te){Te&&ue.then(function(ge){Te(null,ge)},function(ge){Te(ge)})}function h(ue,Te,ge){typeof Te=="function"&&ue.then(Te),typeof ge=="function"&&ue.catch(ge)}function p(ue){return typeof ue!="string"&&(console.warn(ue+" used as a key, but it is not a string."),ue=String(ue)),ue}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",T="readwrite";function C(ue){for(var Te=ue.length,ge=new ArrayBuffer(Te),Ne=new Uint8Array(ge),Be=0;Be<Te;Be++)Ne[Be]=ue.charCodeAt(Be);return ge}function I(ue){return new f(function(Te){var ge=ue.transaction(g,T),Ne=c([""]);ge.objectStore(g).put(Ne,"key"),ge.onabort=function(Be){Be.preventDefault(),Be.stopPropagation(),Te(!1)},ge.oncomplete=function(){var Be=navigator.userAgent.match(/Chrome\/(\d+)/),Re=navigator.userAgent.match(/Edge\//);Te(Re||!Be||parseInt(Be[1],10)>=43)}}).catch(function(){return!1})}function R(ue){return typeof v=="boolean"?f.resolve(v):I(ue).then(function(Te){return v=Te,v})}function N(ue){var Te=b[ue.name],ge={};ge.promise=new f(function(Ne,Be){ge.resolve=Ne,ge.reject=Be}),Te.deferredOperations.push(ge),Te.dbReady?Te.dbReady=Te.dbReady.then(function(){return ge.promise}):Te.dbReady=ge.promise}function O(ue){var Te=b[ue.name],ge=Te.deferredOperations.pop();if(ge)return ge.resolve(),ge.promise}function L(ue,Te){var ge=b[ue.name],Ne=ge.deferredOperations.pop();if(Ne)return Ne.reject(Te),Ne.promise}function j(ue,Te){return new f(function(ge,Ne){if(b[ue.name]=b[ue.name]||G(),ue.db)if(Te)N(ue),ue.db.close();else return ge(ue.db);var Be=[ue.name];Te&&Be.push(ue.version);var Re=u.open.apply(u,Be);Te&&(Re.onupgradeneeded=function(rt){var bt=Re.result;try{bt.createObjectStore(ue.storeName),rt.oldVersion<=1&&bt.createObjectStore(g)}catch(Et){if(Et.name==="ConstraintError")console.warn('The database "'+ue.name+'" has been upgraded from version '+rt.oldVersion+" to version "+rt.newVersion+', but the storage "'+ue.storeName+'" already exists.');else throw Et}}),Re.onerror=function(rt){rt.preventDefault(),Ne(Re.error)},Re.onsuccess=function(){var rt=Re.result;rt.onversionchange=function(bt){bt.target.close()},ge(rt),O(ue)}})}function F(ue){return j(ue,!1)}function H(ue){return j(ue,!0)}function Q(ue,Te){if(!ue.db)return!0;var ge=!ue.db.objectStoreNames.contains(ue.storeName),Ne=ue.version<ue.db.version,Be=ue.version>ue.db.version;if(Ne&&(ue.version!==Te&&console.warn('The database "'+ue.name+`" can't be downgraded from version `+ue.db.version+" to version "+ue.version+"."),ue.version=ue.db.version),Be||ge){if(ge){var Re=ue.db.version+1;Re>ue.version&&(ue.version=Re)}return!0}return!1}function J(ue){return new f(function(Te,ge){var Ne=new FileReader;Ne.onerror=ge,Ne.onloadend=function(Be){var Re=btoa(Be.target.result||"");Te({__local_forage_encoded_blob:!0,data:Re,type:ue.type})},Ne.readAsBinaryString(ue)})}function ne(ue){var Te=C(atob(ue.data));return c([Te],{type:ue.type})}function Z(ue){return ue&&ue.__local_forage_encoded_blob}function ie(ue){var Te=this,ge=Te._initReady().then(function(){var Ne=b[Te._dbInfo.name];if(Ne&&Ne.dbReady)return Ne.dbReady});return h(ge,ue,ue),ge}function q(ue){N(ue);for(var Te=b[ue.name],ge=Te.forages,Ne=0;Ne<ge.length;Ne++){var Be=ge[Ne];Be._dbInfo.db&&(Be._dbInfo.db.close(),Be._dbInfo.db=null)}return ue.db=null,F(ue).then(function(Re){return ue.db=Re,Q(ue)?H(ue):Re}).then(function(Re){ue.db=Te.db=Re;for(var rt=0;rt<ge.length;rt++)ge[rt]._dbInfo.db=Re}).catch(function(Re){throw L(ue,Re),Re})}function U(ue,Te,ge,Ne){Ne===void 0&&(Ne=1);try{var Be=ue.db.transaction(ue.storeName,Te);ge(null,Be)}catch(Re){if(Ne>0&&(!ue.db||Re.name==="InvalidStateError"||Re.name==="NotFoundError"))return f.resolve().then(function(){if(!ue.db||Re.name==="NotFoundError"&&!ue.db.objectStoreNames.contains(ue.storeName)&&ue.version<=ue.db.version)return ue.db&&(ue.version=ue.db.version+1),H(ue)}).then(function(){return q(ue).then(function(){U(ue,Te,ge,Ne-1)})}).catch(ge);ge(Re)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ue){var Te=this,ge={db:null};if(ue)for(var Ne in ue)ge[Ne]=ue[Ne];var Be=b[ge.name];Be||(Be=G(),b[ge.name]=Be),Be.forages.push(Te),Te._initReady||(Te._initReady=Te.ready,Te.ready=ie);var Re=[];function rt(){return f.resolve()}for(var bt=0;bt<Be.forages.length;bt++){var Et=Be.forages[bt];Et!==Te&&Re.push(Et._initReady().catch(rt))}var xt=Be.forages.slice(0);return f.all(Re).then(function(){return ge.db=Be.db,F(ge)}).then(function(Dt){return ge.db=Dt,Q(ge,Te._defaultConfig.version)?H(ge):Dt}).then(function(Dt){ge.db=Be.db=Dt,Te._dbInfo=ge;for(var qt=0;qt<xt.length;qt++){var In=xt[qt];In!==Te&&(In._dbInfo.db=ge.db,In._dbInfo.version=ge.version)}})}function Y(ue,Te){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.get(ue);xt.onsuccess=function(){var Dt=xt.result;Dt===void 0&&(Dt=null),Z(Dt)&&(Dt=ne(Dt)),Be(Dt)},xt.onerror=function(){Re(xt.error)}}catch(Dt){Re(Dt)}})}).catch(Re)});return d(Ne,Te),Ne}function ee(ue,Te){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.openCursor(),Dt=1;xt.onsuccess=function(){var qt=xt.result;if(qt){var In=qt.value;Z(In)&&(In=ne(In));var un=ue(In,qt.key,Dt++);un!==void 0?Be(un):qt.continue()}else Be()},xt.onerror=function(){Re(xt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(Ne,Te),Ne}function ae(ue,Te,ge){var Ne=this;ue=p(ue);var Be=new f(function(Re,rt){var bt;Ne.ready().then(function(){return bt=Ne._dbInfo,w.call(Te)==="[object Blob]"?R(bt.db).then(function(Et){return Et?Te:J(Te)}):Te}).then(function(Et){U(Ne._dbInfo,T,function(xt,Dt){if(xt)return rt(xt);try{var qt=Dt.objectStore(Ne._dbInfo.storeName);Et===null&&(Et=void 0);var In=qt.put(Et,ue);Dt.oncomplete=function(){Et===void 0&&(Et=null),Re(Et)},Dt.onabort=Dt.onerror=function(){var un=In.error?In.error:In.transaction.error;rt(un)}}catch(un){rt(un)}})}).catch(rt)});return d(Be,ge),Be}function _e(ue,Te){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,T,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.delete(ue);bt.oncomplete=function(){Be()},bt.onerror=function(){Re(xt.error)},bt.onabort=function(){var Dt=xt.error?xt.error:xt.transaction.error;Re(Dt)}}catch(Dt){Re(Dt)}})}).catch(Re)});return d(Ne,Te),Ne}function pe(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){U(Te._dbInfo,T,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Te._dbInfo.storeName),Et=bt.clear();rt.oncomplete=function(){Ne()},rt.onabort=rt.onerror=function(){var xt=Et.error?Et.error:Et.transaction.error;Be(xt)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Se(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){U(Te._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Te._dbInfo.storeName),Et=bt.count();Et.onsuccess=function(){Ne(Et.result)},Et.onerror=function(){Be(Et.error)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Le(ue,Te){var ge=this,Ne=new f(function(Be,Re){if(ue<0){Be(null);return}ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=!1,Dt=Et.openKeyCursor();Dt.onsuccess=function(){var qt=Dt.result;if(!qt){Be(null);return}ue===0||xt?Be(qt.key):(xt=!0,qt.advance(ue))},Dt.onerror=function(){Re(Dt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(Ne,Te),Ne}function ye(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){U(Te._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Te._dbInfo.storeName),Et=bt.openKeyCursor(),xt=[];Et.onsuccess=function(){var Dt=Et.result;if(!Dt){Ne(xt);return}xt.push(Dt.key),Dt.continue()},Et.onerror=function(){Be(Et.error)}}catch(Dt){Be(Dt)}})}).catch(Be)});return d(ge,ue),ge}function he(ue,Te){Te=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var Ne=this,Be;if(!ue.name)Be=f.reject("Invalid arguments");else{var Re=ue.name===ge.name&&Ne._dbInfo.db,rt=Re?f.resolve(Ne._dbInfo.db):F(ue).then(function(bt){var Et=b[ue.name],xt=Et.forages;Et.db=bt;for(var Dt=0;Dt<xt.length;Dt++)xt[Dt]._dbInfo.db=bt;return bt});ue.storeName?Be=rt.then(function(bt){if(bt.objectStoreNames.contains(ue.storeName)){var Et=bt.version+1;N(ue);var xt=b[ue.name],Dt=xt.forages;bt.close();for(var qt=0;qt<Dt.length;qt++){var In=Dt[qt];In._dbInfo.db=null,In._dbInfo.version=Et}var un=new f(function(nr,ln){var br=u.open(ue.name,Et);br.onerror=function(Ys){var Xa=br.result;Xa.close(),ln(Ys)},br.onupgradeneeded=function(){var Ys=br.result;Ys.deleteObjectStore(ue.storeName)},br.onsuccess=function(){var Ys=br.result;Ys.close(),nr(Ys)}});return un.then(function(nr){xt.db=nr;for(var ln=0;ln<Dt.length;ln++){var br=Dt[ln];br._dbInfo.db=nr,O(br._dbInfo)}}).catch(function(nr){throw(L(ue,nr)||f.resolve()).catch(function(){}),nr})}}):Be=rt.then(function(bt){N(ue);var Et=b[ue.name],xt=Et.forages;bt.close();for(var Dt=0;Dt<xt.length;Dt++){var qt=xt[Dt];qt._dbInfo.db=null}var In=new f(function(un,nr){var ln=u.deleteDatabase(ue.name);ln.onerror=function(){var br=ln.result;br&&br.close(),nr(ln.error)},ln.onblocked=function(){console.warn('dropInstance blocked for database "'+ue.name+'" until all open connections are closed')},ln.onsuccess=function(){var br=ln.result;br&&br.close(),un(br)}});return In.then(function(un){Et.db=un;for(var nr=0;nr<xt.length;nr++){var ln=xt[nr];O(ln._dbInfo)}}).catch(function(un){throw(L(ue,un)||f.resolve()).catch(function(){}),un})})}return d(Be,Te),Be}var $e={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:ee,getItem:Y,setItem:ae,removeItem:_e,clear:pe,length:Se,key:Le,keys:ye,dropInstance:he};function De(){return typeof openDatabase=="function"}var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Me=/^~~local_forage_type~([^~]+)~/,Ge="__lfsc__:",at=Ge.length,yt="arbf",St="blob",Ot="si08",qe="ui08",dt="uic8",wt="si16",ke="si32",Oe="ur16",ht="ui32",Lt="fl32",Ft="fl64",dn=at+yt.length,Nn=Object.prototype.toString;function Sr(ue){var Te=ue.length*.75,ge=ue.length,Ne,Be=0,Re,rt,bt,Et;ue[ue.length-1]==="="&&(Te--,ue[ue.length-2]==="="&&Te--);var xt=new ArrayBuffer(Te),Dt=new Uint8Array(xt);for(Ne=0;Ne<ge;Ne+=4)Re=tt.indexOf(ue[Ne]),rt=tt.indexOf(ue[Ne+1]),bt=tt.indexOf(ue[Ne+2]),Et=tt.indexOf(ue[Ne+3]),Dt[Be++]=Re<<2|rt>>4,Dt[Be++]=(rt&15)<<4|bt>>2,Dt[Be++]=(bt&3)<<6|Et&63;return xt}function Ni(ue){var Te=new Uint8Array(ue),ge="",Ne;for(Ne=0;Ne<Te.length;Ne+=3)ge+=tt[Te[Ne]>>2],ge+=tt[(Te[Ne]&3)<<4|Te[Ne+1]>>4],ge+=tt[(Te[Ne+1]&15)<<2|Te[Ne+2]>>6],ge+=tt[Te[Ne+2]&63];return Te.length%3===2?ge=ge.substring(0,ge.length-1)+"=":Te.length%3===1&&(ge=ge.substring(0,ge.length-2)+"=="),ge}function Un(ue,Te){var ge="";if(ue&&(ge=Nn.call(ue)),ue&&(ge==="[object ArrayBuffer]"||ue.buffer&&Nn.call(ue.buffer)==="[object ArrayBuffer]")){var Ne,Be=Ge;ue instanceof ArrayBuffer?(Ne=ue,Be+=yt):(Ne=ue.buffer,ge==="[object Int8Array]"?Be+=Ot:ge==="[object Uint8Array]"?Be+=qe:ge==="[object Uint8ClampedArray]"?Be+=dt:ge==="[object Int16Array]"?Be+=wt:ge==="[object Uint16Array]"?Be+=Oe:ge==="[object Int32Array]"?Be+=ke:ge==="[object Uint32Array]"?Be+=ht:ge==="[object Float32Array]"?Be+=Lt:ge==="[object Float64Array]"?Be+=Ft:Te(new Error("Failed to get type for BinaryArray"))),Te(Be+Ni(Ne))}else if(ge==="[object Blob]"){var Re=new FileReader;Re.onload=function(){var rt=it+ue.type+"~"+Ni(this.result);Te(Ge+St+rt)},Re.readAsArrayBuffer(ue)}else try{Te(JSON.stringify(ue))}catch(rt){console.error("Couldn't convert value into a JSON string: ",ue),Te(null,rt)}}function tr(ue){if(ue.substring(0,at)!==Ge)return JSON.parse(ue);var Te=ue.substring(dn),ge=ue.substring(at,dn),Ne;if(ge===St&&Me.test(Te)){var Be=Te.match(Me);Ne=Be[1],Te=Te.substring(Be[0].length)}var Re=Sr(Te);switch(ge){case yt:return Re;case St:return c([Re],{type:Ne});case Ot:return new Int8Array(Re);case qe:return new Uint8Array(Re);case dt:return new Uint8ClampedArray(Re);case wt:return new Int16Array(Re);case Oe:return new Uint16Array(Re);case ke:return new Int32Array(Re);case ht:return new Uint32Array(Re);case Lt:return new Float32Array(Re);case Ft:return new Float64Array(Re);default:throw new Error("Unkown type: "+ge)}}var Ai={serialize:Un,deserialize:tr,stringToBuffer:Sr,bufferToString:Ni};function Tr(ue,Te,ge,Ne){ue.executeSql("CREATE TABLE IF NOT EXISTS "+Te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ge,Ne)}function Lo(ue){var Te=this,ge={db:null};if(ue)for(var Ne in ue)ge[Ne]=typeof ue[Ne]!="string"?ue[Ne].toString():ue[Ne];var Be=new f(function(Re,rt){try{ge.db=openDatabase(ge.name,String(ge.version),ge.description,ge.size)}catch(bt){return rt(bt)}ge.db.transaction(function(bt){Tr(bt,ge,function(){Te._dbInfo=ge,Re()},function(Et,xt){rt(xt)})},rt)});return ge.serializer=Ai,Be}function Ji(ue,Te,ge,Ne,Be,Re){ue.executeSql(ge,Ne,Be,function(rt,bt){bt.code===bt.SYNTAX_ERR?rt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Te.storeName],function(Et,xt){xt.rows.length?Re(Et,bt):Tr(Et,Te,function(){Et.executeSql(ge,Ne,Be,Re)},Re)},Re):Re(rt,bt)},Re)}function Pi(ue,Te){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT * FROM "+rt.storeName+" WHERE key = ? LIMIT 1",[ue],function(Et,xt){var Dt=xt.rows.length?xt.rows.item(0).value:null;Dt&&(Dt=rt.serializer.deserialize(Dt)),Be(Dt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Te),Ne}function Zi(ue,Te){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT * FROM "+rt.storeName,[],function(Et,xt){for(var Dt=xt.rows,qt=Dt.length,In=0;In<qt;In++){var un=Dt.item(In),nr=un.value;if(nr&&(nr=rt.serializer.deserialize(nr)),nr=ue(nr,un.key,In+1),nr!==void 0){Be(nr);return}}Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Te),Ne}function Qr(ue,Te,ge,Ne){var Be=this;ue=p(ue);var Re=new f(function(rt,bt){Be.ready().then(function(){Te===void 0&&(Te=null);var Et=Te,xt=Be._dbInfo;xt.serializer.serialize(Te,function(Dt,qt){qt?bt(qt):xt.db.transaction(function(In){Ji(In,xt,"INSERT OR REPLACE INTO "+xt.storeName+" (key, value) VALUES (?, ?)",[ue,Dt],function(){rt(Et)},function(un,nr){bt(nr)})},function(In){if(In.code===In.QUOTA_ERR){if(Ne>0){rt(Qr.apply(Be,[ue,Et,ge,Ne-1]));return}bt(In)}})})}).catch(bt)});return d(Re,ge),Re}function $o(ue,Te,ge){return Qr.apply(this,[ue,Te,ge,1])}function oc(ue,Te){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"DELETE FROM "+rt.storeName+" WHERE key = ?",[ue],function(){Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Te),Ne}function ba(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){var Re=Te._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"DELETE FROM "+Re.storeName,[],function(){Ne()},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Ru(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){var Re=Te._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"SELECT COUNT(key) as c FROM "+Re.storeName,[],function(bt,Et){var xt=Et.rows.item(0).c;Ne(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Jr(ue,Te){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT key FROM "+rt.storeName+" WHERE id = ? LIMIT 1",[ue+1],function(Et,xt){var Dt=xt.rows.length?xt.rows.item(0).key:null;Be(Dt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Te),Ne}function ji(ue){var Te=this,ge=new f(function(Ne,Be){Te.ready().then(function(){var Re=Te._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"SELECT key FROM "+Re.storeName,[],function(bt,Et){for(var xt=[],Dt=0;Dt<Et.rows.length;Dt++)xt.push(Et.rows.item(Dt).key);Ne(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function ai(ue){return new f(function(Te,ge){ue.transaction(function(Ne){Ne.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Be,Re){for(var rt=[],bt=0;bt<Re.rows.length;bt++)rt.push(Re.rows.item(bt).name);Te({db:ue,storeNames:rt})},function(Be,Re){ge(Re)})},function(Ne){ge(Ne)})})}function Ws(ue,Te){Te=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var Ne=this,Be;return ue.name?Be=new f(function(Re){var rt;ue.name===ge.name?rt=Ne._dbInfo.db:rt=openDatabase(ue.name,"","",0),ue.storeName?Re({db:rt,storeNames:[ue.storeName]}):Re(ai(rt))}).then(function(Re){return new f(function(rt,bt){Re.db.transaction(function(Et){function xt(un){return new f(function(nr,ln){Et.executeSql("DROP TABLE IF EXISTS "+un,[],function(){nr()},function(br,Ys){ln(Ys)})})}for(var Dt=[],qt=0,In=Re.storeNames.length;qt<In;qt++)Dt.push(xt(Re.storeNames[qt]));f.all(Dt).then(function(){rt()}).catch(function(un){bt(un)})},function(Et){bt(Et)})})}):Be=f.reject("Invalid arguments"),d(Be,Te),Be}var Fr={_driver:"webSQLStorage",_initStorage:Lo,_support:De(),iterate:Zi,getItem:Pi,setItem:$o,removeItem:oc,clear:ba,length:Ru,key:Jr,keys:ji,dropInstance:Ws};function es(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Fo(ue,Te){var ge=ue.name+"/";return ue.storeName!==Te.storeName&&(ge+=ue.storeName+"/"),ge}function mo(){var ue="_localforage_support_test";try{return localStorage.setItem(ue,!0),localStorage.removeItem(ue),!1}catch{return!0}}function Qo(){return!mo()||localStorage.length>0}function xl(ue){var Te=this,ge={};if(ue)for(var Ne in ue)ge[Ne]=ue[Ne];return ge.keyPrefix=Fo(ue,Te._defaultConfig),Qo()?(Te._dbInfo=ge,ge.serializer=Ai,f.resolve()):f.reject()}function Ph(ue){var Te=this,ge=Te.ready().then(function(){for(var Ne=Te._dbInfo.keyPrefix,Be=localStorage.length-1;Be>=0;Be--){var Re=localStorage.key(Be);Re.indexOf(Ne)===0&&localStorage.removeItem(Re)}});return d(ge,ue),ge}function Pr(ue,Te){var ge=this;ue=p(ue);var Ne=ge.ready().then(function(){var Be=ge._dbInfo,Re=localStorage.getItem(Be.keyPrefix+ue);return Re&&(Re=Be.serializer.deserialize(Re)),Re});return d(Ne,Te),Ne}function ac(ue,Te){var ge=this,Ne=ge.ready().then(function(){for(var Be=ge._dbInfo,Re=Be.keyPrefix,rt=Re.length,bt=localStorage.length,Et=1,xt=0;xt<bt;xt++){var Dt=localStorage.key(xt);if(Dt.indexOf(Re)===0){var qt=localStorage.getItem(Dt);if(qt&&(qt=Be.serializer.deserialize(qt)),qt=ue(qt,Dt.substring(rt),Et++),qt!==void 0)return qt}}});return d(Ne,Te),Ne}function ms(ue,Te){var ge=this,Ne=ge.ready().then(function(){var Be=ge._dbInfo,Re;try{Re=localStorage.key(ue)}catch{Re=null}return Re&&(Re=Re.substring(Be.keyPrefix.length)),Re});return d(Ne,Te),Ne}function Ka(ue){var Te=this,ge=Te.ready().then(function(){for(var Ne=Te._dbInfo,Be=localStorage.length,Re=[],rt=0;rt<Be;rt++){var bt=localStorage.key(rt);bt.indexOf(Ne.keyPrefix)===0&&Re.push(bt.substring(Ne.keyPrefix.length))}return Re});return d(ge,ue),ge}function Jo(ue){var Te=this,ge=Te.keys().then(function(Ne){return Ne.length});return d(ge,ue),ge}function mm(ue,Te){var ge=this;ue=p(ue);var Ne=ge.ready().then(function(){var Be=ge._dbInfo;localStorage.removeItem(Be.keyPrefix+ue)});return d(Ne,Te),Ne}function Oh(ue,Te,ge){var Ne=this;ue=p(ue);var Be=Ne.ready().then(function(){Te===void 0&&(Te=null);var Re=Te;return new f(function(rt,bt){var Et=Ne._dbInfo;Et.serializer.serialize(Te,function(xt,Dt){if(Dt)bt(Dt);else try{localStorage.setItem(Et.keyPrefix+ue,xt),rt(Re)}catch(qt){(qt.name==="QuotaExceededError"||qt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&bt(qt),bt(qt)}})})});return d(Be,ge),Be}function _d(ue,Te){if(Te=m.apply(this,arguments),ue=typeof ue!="function"&&ue||{},!ue.name){var ge=this.config();ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName}var Ne=this,Be;return ue.name?Be=new f(function(Re){ue.storeName?Re(Fo(ue,Ne._defaultConfig)):Re(ue.name+"/")}).then(function(Re){for(var rt=localStorage.length-1;rt>=0;rt--){var bt=localStorage.key(rt);bt.indexOf(Re)===0&&localStorage.removeItem(bt)}}):Be=f.reject("Invalid arguments"),d(Be,Te),Be}var wd={_driver:"localStorageWrapper",_initStorage:xl,_support:es(),iterate:ac,getItem:Pr,setItem:Oh,removeItem:mm,clear:Ph,length:Jo,key:ms,keys:Ka,dropInstance:_d},gf=function(Te,ge){return Te===ge||typeof Te=="number"&&typeof ge=="number"&&isNaN(Te)&&isNaN(ge)},yf=function(Te,ge){for(var Ne=Te.length,Be=0;Be<Ne;){if(gf(Te[Be],ge))return!0;Be++}return!1},vf=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},fr={},Mh={},go={INDEXEDDB:$e,WEBSQL:Fr,LOCALSTORAGE:wd},_l=[go.INDEXEDDB._driver,go.WEBSQL._driver,go.LOCALSTORAGE._driver],Gs=["dropInstance"],uc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Gs),Lh={description:"",driver:_l.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function lc(ue,Te){ue[Te]=function(){var ge=arguments;return ue.ready().then(function(){return ue[Te].apply(ue,ge)})}}function yo(){for(var ue=1;ue<arguments.length;ue++){var Te=arguments[ue];if(Te)for(var ge in Te)Te.hasOwnProperty(ge)&&(vf(Te[ge])?arguments[0][ge]=Te[ge].slice():arguments[0][ge]=Te[ge])}return arguments[0]}var gm=function(){function ue(Te){o(this,ue);for(var ge in go)if(go.hasOwnProperty(ge)){var Ne=go[ge],Be=Ne._driver;this[ge]=Be,fr[Be]||this.defineDriver(Ne)}this._defaultConfig=yo({},Lh),this._config=yo({},this._defaultConfig,Te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ue.prototype.config=function(ge){if((typeof ge>"u"?"undefined":s(ge))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ne in ge){if(Ne==="storeName"&&(ge[Ne]=ge[Ne].replace(/\W/g,"_")),Ne==="version"&&typeof ge[Ne]!="number")return new Error("Database version must be a number.");this._config[Ne]=ge[Ne]}return"driver"in ge&&ge.driver?this.setDriver(this._config.driver):!0}else return typeof ge=="string"?this._config[ge]:this._config},ue.prototype.defineDriver=function(ge,Ne,Be){var Re=new f(function(rt,bt){try{var Et=ge._driver,xt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ge._driver){bt(xt);return}for(var Dt=uc.concat("_initStorage"),qt=0,In=Dt.length;qt<In;qt++){var un=Dt[qt],nr=!yf(Gs,un);if((nr||ge[un])&&typeof ge[un]!="function"){bt(xt);return}}var ln=function(){for(var Xa=function(Bo){return function(){var gs=new Error("Method "+Bo+" is not implemented by the current driver"),jo=f.reject(gs);return d(jo,arguments[arguments.length-1]),jo}},cc=0,$h=Gs.length;cc<$h;cc++){var bf=Gs[cc];ge[bf]||(ge[bf]=Xa(bf))}};ln();var br=function(Xa){fr[Et]&&console.info("Redefining LocalForage driver: "+Et),fr[Et]=ge,Mh[Et]=Xa,rt()};"_support"in ge?ge._support&&typeof ge._support=="function"?ge._support().then(br,bt):br(!!ge._support):br(!0)}catch(Ys){bt(Ys)}});return h(Re,Ne,Be),Re},ue.prototype.driver=function(){return this._driver||null},ue.prototype.getDriver=function(ge,Ne,Be){var Re=fr[ge]?f.resolve(fr[ge]):f.reject(new Error("Driver not found."));return h(Re,Ne,Be),Re},ue.prototype.getSerializer=function(ge){var Ne=f.resolve(Ai);return h(Ne,ge),Ne},ue.prototype.ready=function(ge){var Ne=this,Be=Ne._driverSet.then(function(){return Ne._ready===null&&(Ne._ready=Ne._initDriver()),Ne._ready});return h(Be,ge,ge),Be},ue.prototype.setDriver=function(ge,Ne,Be){var Re=this;vf(ge)||(ge=[ge]);var rt=this._getSupportedDrivers(ge);function bt(){Re._config.driver=Re.driver()}function Et(qt){return Re._extend(qt),bt(),Re._ready=Re._initStorage(Re._config),Re._ready}function xt(qt){return function(){var In=0;function un(){for(;In<qt.length;){var nr=qt[In];return In++,Re._dbInfo=null,Re._ready=null,Re.getDriver(nr).then(Et).catch(un)}bt();var ln=new Error("No available storage method found.");return Re._driverSet=f.reject(ln),Re._driverSet}return un()}}var Dt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Dt.then(function(){var qt=rt[0];return Re._dbInfo=null,Re._ready=null,Re.getDriver(qt).then(function(In){Re._driver=In._driver,bt(),Re._wrapLibraryMethodsWithReady(),Re._initDriver=xt(rt)})}).catch(function(){bt();var qt=new Error("No available storage method found.");return Re._driverSet=f.reject(qt),Re._driverSet}),h(this._driverSet,Ne,Be),this._driverSet},ue.prototype.supports=function(ge){return!!Mh[ge]},ue.prototype._extend=function(ge){yo(this,ge)},ue.prototype._getSupportedDrivers=function(ge){for(var Ne=[],Be=0,Re=ge.length;Be<Re;Be++){var rt=ge[Be];this.supports(rt)&&Ne.push(rt)}return Ne},ue.prototype._wrapLibraryMethodsWithReady=function(){for(var ge=0,Ne=uc.length;ge<Ne;ge++)lc(this,uc[ge])},ue.prototype.createInstance=function(ge){return new ue(ge)},ue}(),vo=new gm;r.exports=vo},{3:3}]},{},[4])(4)})}(lV)),lV.exports}var z0t=U0t();const f2=vh(z0t),au=[];for(let e=0;e<256;++e)au.push((e+256).toString(16).slice(1));function V0t(e,t=0){return(au[e[t+0]]+au[e[t+1]]+au[e[t+2]]+au[e[t+3]]+"-"+au[e[t+4]]+au[e[t+5]]+"-"+au[e[t+6]]+au[e[t+7]]+"-"+au[e[t+8]]+au[e[t+9]]+"-"+au[e[t+10]]+au[e[t+11]]+au[e[t+12]]+au[e[t+13]]+au[e[t+14]]+au[e[t+15]]).toLowerCase()}let cV;const H0t=new Uint8Array(16);function q0t(){if(!cV){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cV=crypto.getRandomValues.bind(crypto)}return cV(H0t)}const W0t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xde={randomUUID:W0t};function xF(e,t,n){var i;if(Xde.randomUUID&&!e)return Xde.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??q0t();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,V0t(r)}class FAe{constructor(t){kl(this,"engine");kl(this,"connected",!1);kl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function _F(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function iR(e){return e.participantId!==void 0}class gp extends FAe{constructor(){super("firebase");kl(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");kl(this,"firestore");kl(this,"collectionPrefix","prod-");kl(this,"studyCollection");kl(this,"storage");kl(this,"studyId","");kl(this,"localForage",f2.createInstance({name:"currentParticipantId"}));kl(this,"participantData",null);kl(this,"userManagementData",{});const n=Kat.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=r2e(n);this.firestore=zht(r,{}),this.storage=Pfe();try{Fpt(r,{provider:new fee(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Hht(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=bF();if(!i.currentUser&&(await Emt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Dc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await _F(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(iR(a))return this.participantData=a,a;const l=await _F(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=bs(this.studyCollection,"configHash"),r=await r6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=bs(this.studyCollection,"configHash");await zu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Ff(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=xF(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=bs(this.studyCollection,"sequenceAssignment");await zu(i,{});const s=Dc(i,"sequenceAssignment"),o=bs(s,this.currentParticipantId),a=iV(s,xde("rejected","==",!0),xde("claimed","==",!1)),u=await MT(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await zu(v.ref,{claimed:!0}),await zu(o,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:i6()}))}else r.dataCollectionEnabled&&await zu(o,{participantId:this.currentParticipantId,timestamp:i6(),rejected:!1,claimed:!1,completed:null,createdTime:i6()});const l=iV(s,_de("timestamp","asc")),f=(await MT(l)).docs.map(v=>v.data()),d=f.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Ff(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await rR(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");iR(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=Pfe(),s=await Q4(Ff(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return iR(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=xF();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=bs(this.studyCollection,"sequenceAssignment"),i=Dc(r,"sequenceAssignment"),s=bs(i,this.currentParticipantId);return await Sde(s,{completed:i6()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Dc(this.firestore,"user-management"),i=await MT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await zu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await zu(bs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await zu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await zu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await zu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Ff(this.storage,`${this.collectionPrefix}${n}/participants`),i=await rR(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");iR(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Dc(this.firestore,`${this.collectionPrefix}${n}`),o=Ff(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!iR(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=bs(s,"sequenceAssignment"),l=Dc(u,"sequenceAssignment"),c=bs(l,r);await Sde(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await zu(s,{[r]:i},{merge:!0})}async getModes(n){const r=bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await r6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await zu(r,s),s}async getParticipantsStatusCounts(n){const r=Dc(this.firestore,`${this.collectionPrefix}${n}`),i=bs(r,"sequenceAssignment"),s=Dc(i,"sequenceAssignment"),o=iV(s,_de("timestamp","asc")),u=(await MT(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=bs(this.firestore,"metadata","collections"),i=await r6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=bs(this.firestore,"metadata","collections");await zu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=bs(this.firestore,"metadata","collections");return await zu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=bs(this.firestore,"metadata","collections"),i=await r6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await zu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Ff(this.storage,n),s=(await rR(r)).items.map(o=>Nfe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Ff(this.storage,n),o=(await rR(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Ff(this.storage,n),s=Ff(this.storage,r),o=await Q4(i),u=await(await fetch(o)).blob();await X4(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Dc(this.firestore,n),s=bs(i,"sequenceAssignment"),o=Dc(s,"sequenceAssignment"),a=Dc(this.firestore,r),u=bs(a,"sequenceAssignment");await zu(u,{});const l=Dc(u,"sequenceAssignment"),c=await MT(o),f=Tde(this.firestore);c.docs.forEach(d=>{const h=bs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Dc(this.firestore,n),i=bs(r,"sequenceAssignment"),s=Dc(i,"sequenceAssignment"),o=await MT(s),a=Tde(this.firestore);o.forEach(u=>{const l=bs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Ff(this.storage,n);return(await rR(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Ff(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Q4(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Q4(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Ff(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await X4(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await X4(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await X4(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Ff(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Nfe(i)}}const BAe=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),ZA=()=>P.useContext(BAe);function G0t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=ho(),l=async()=>{const h=bF();try{await Rmt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;P.useEffect(()=>{s(t);let h;if(u instanceof gp)try{h=bF()}catch{console.warn("No firebase store.")}const p=async v=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,s(b)}else l()},g=(async()=>{if(u instanceof gp){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=kmt(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(v=>v())}},[u,o]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return S.jsx(BAe.Provider,{value:d,children:i.determiningStatus?S.jsx(ld,{visible:!0}):e})}const Y0t="https://github.com/revisit-studies/study/tree/main/public/";function K0t({configName:e,config:t,url:n}){const{storageEngine:r}=ho(),[i,s]=P.useState(null);P.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=P.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=P.useState(null);P.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=P.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return S.jsx(NA,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:"bold",children:e}),S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(MD,{color:"red"}),S.jsx(lt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),S.jsx(oL,{issues:t.errors,type:"error"}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(MD,{color:"orange"}),S.jsx(lt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(oL,{issues:t.warnings,type:"warning"})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(an,{direction:"row",justify:"space-between",children:S.jsx(lt,{fw:"bold",children:t.studyMetadata.title})}),S.jsxs(lt,{c:"dimmed",children:[S.jsx(lt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),S.jsx(lt,{c:"dimmed",children:t.studyMetadata.description}),S.jsx(lt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:S.jsxs(PE,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Y0t}${n}`,children:["View source:"," ",n,S.jsx(vSe,{style:{width:Ke(18),height:Ke(18),marginLeft:Ke(2),marginBottom:Ke(-3)}})]})}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(MD,{color:"orange"}),S.jsx(lt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(oL,{issues:t.warnings,type:"warning"})]}),S.jsx(OE,{my:"md"}),S.jsxs(an,{direction:"row",gap:"sm",children:[S.jsxs(lt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&S.jsx(Uat,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&S.jsxs(lt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),S.jsxs(an,{direction:"row",align:"end",gap:"sm",mt:"md",children:[S.jsx(gn,{leftSection:S.jsx(ySe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Ha}analysis/stats/${n}`,children:"Analyze & Manage Study"}),S.jsx(gn,{leftSection:S.jsx(bSe,{}),component:"a",href:`${Ha}${n}`,children:"Go to Study"})]})]})},e)}function LT({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=SSe(n);return S.jsx(K0t,{configName:n,config:r,url:i},n)})}function X0t({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=ho(),{configsList:r}=e,i=r.filter(v=>v.startsWith("demo-")),s=r.filter(v=>v.startsWith("tutorial-")),o=r.filter(v=>v.startsWith("example-")),a=r.filter(v=>v.startsWith("test-")),u=r.filter(v=>v.startsWith("library-")),l=P.useMemo(()=>r.filter(v=>!v.startsWith("demo-")&&!v.startsWith("tutorial-")&&!v.startsWith("example-")&&!v.startsWith("test-")&&!v.startsWith("library-")),[r]),[c,f]=P.useState({});P.useEffect(()=>{async function v(){const b={};await Promise.all(l.map(async w=>{if(n instanceof gp){const E=await n.getModes(w);b[w]=E.analyticsInterfacePubliclyAccessible}})),f(b)}v()},[l,n]);const{user:d}=ZA(),h=P.useMemo(()=>l.filter(v=>c[v]||d.isAdmin),[l,c,d]),[p]=C1(),m=P.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),g=em();return S.jsx(Vi.Main,{children:S.jsxs(Qy,{size:"sm",px:0,children:[S.jsx(vx,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ha}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),S.jsxs(Vr,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:v=>g(`/?tab=${v}`),children:[S.jsxs(Vr.List,{children:[h.length>0&&S.jsx(Vr.Tab,{value:"Others",children:"Your Studies"}),S.jsx(Vr.Tab,{value:"Demos",children:"Demo Studies"}),S.jsx(Vr.Tab,{value:"Examples",children:"Example Studies"}),S.jsx(Vr.Tab,{value:"Tutorials",children:"Tutorials"}),S.jsx(Vr.Tab,{value:"Tests",children:"Tests"}),S.jsx(Vr.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&S.jsx(Vr.Panel,{value:"Others",children:S.jsx(LT,{configNames:h,studyConfigs:t})}),S.jsxs(Vr.Panel,{value:"Demos",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),S.jsx(LT,{configNames:i,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Examples",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),S.jsx(LT,{configNames:o,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tutorials",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),S.jsx(LT,{configNames:s,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tests",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),S.jsx(LT,{configNames:a,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Libraries",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),S.jsx(LT,{configNames:u,studyConfigs:t})]})]})]})})}var fV={exports:{}},dV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qde;function Q0t(){if(Qde)return dV;Qde=1;var e=X8();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return dV.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(T){if(!v){if(v=!0,b=T,T=f(T),d!==void 0&&p.hasValue){var C=p.value;if(d(C,T))return w=C}return w=T}if(C=w,n(b,T))return C;var I=f(T);return d!==void 0&&d(C,I)?(b=T,C):(b=T,w=I)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return g(l())},E===null?void 0:function(){return g(E())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},dV}var Jde;function J0t(){return Jde||(Jde=1,fV.exports=Q0t()),fV.exports}var Z0t=J0t();function egt(e){e()}function tgt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){egt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Zde={notify(){},get:()=>[]};function ngt(e,t){let n,r=Zde,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let v=!1;return()=>{v||(v=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=tgt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Zde)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var rgt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",igt=rgt(),sgt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ogt=sgt(),agt=()=>igt||ogt?P.useLayoutEffect:P.useEffect,ugt=agt(),hV=Symbol.for("react-redux-context"),pV=typeof globalThis<"u"?globalThis:{};function lgt(){if(!P.createContext)return{};const e=pV[hV]??(pV[hV]=new Map);let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var Pb=lgt();function cgt(e){const{children:t,context:n,serverState:r,store:i}=e,s=P.useMemo(()=>{const u=ngt(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=P.useMemo(()=>i.getState(),[i]);ugt(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||Pb;return P.createElement(a.Provider,{value:s},t)}var fgt=cgt;function _ee(e=Pb){return function(){return P.useContext(e)}}var jAe=_ee();function UAe(e=Pb){const t=e===Pb?jAe:_ee(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var dgt=UAe();function hgt(e=Pb){const t=e===Pb?dgt:UAe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zAe=hgt(),pgt=(e,t)=>e===t;function mgt(e=Pb){const t=e===Pb?jAe:_ee(e),n=(r,i={})=>{const{equalityFn:s=pgt}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;P.useRef(!0);const c=P.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=Z0t.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return P.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var ggt=mgt();function lu(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ygt=typeof Symbol=="function"&&Symbol.observable||"@@observable",ehe=ygt,mV=()=>Math.random().toString(36).substring(7).split("").join("."),vgt={INIT:`@@redux/INIT${mV()}`,REPLACE:`@@redux/REPLACE${mV()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mV()}`},wF=vgt;function wee(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VAe(e,t,n){if(typeof e!="function")throw new Error(lu(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lu(1));return n(VAe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,v)=>{o.set(v,g)}))}function c(){if(u)throw new Error(lu(3));return i}function f(g){if(typeof g!="function")throw new Error(lu(4));if(u)throw new Error(lu(5));let v=!0;l();const b=a++;return o.set(b,g),function(){if(v){if(u)throw new Error(lu(6));v=!1,l(),o.delete(b),s=null}}}function d(g){if(!wee(g))throw new Error(lu(7));if(typeof g.type>"u")throw new Error(lu(8));if(typeof g.type!="string")throw new Error(lu(17));if(u)throw new Error(lu(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(lu(10));r=g,d({type:wF.REPLACE})}function p(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(lu(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:g(b)}},[ehe](){return this}}}return d({type:wF.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[ehe]:p}}function bgt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:wF.INIT})>"u")throw new Error(lu(12));if(typeof n(void 0,{type:wF.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lu(13))})}function xgt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{bgt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(lu(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function EF(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function _gt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(lu(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=EF(...a)(i.dispatch),{...i,dispatch:s}}}function wgt(e){return wee(e)&&"type"in e&&typeof e.type=="string"}var HAe=Symbol.for("immer-nothing"),the=Symbol.for("immer-draftable"),cd=Symbol.for("immer-state");function vp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var CC=Object.getPrototypeOf;function Jw(e){return!!e&&!!e[cd]}function i1(e){var t;return e?qAe(e)||Array.isArray(e)||!!e[the]||!!((t=e.constructor)!=null&&t[the])||g9(e)||y9(e):!1}var Egt=Object.prototype.constructor.toString();function qAe(e){if(!e||typeof e!="object")return!1;const t=CC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Egt}function SF(e,t){m9(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function m9(e){const t=e[cd];return t?t.type_:Array.isArray(e)?1:g9(e)?2:y9(e)?3:0}function fG(e,t){return m9(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WAe(e,t,n){const r=m9(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Sgt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function g9(e){return e instanceof Map}function y9(e){return e instanceof Set}function X_(e){return e.copy_||e.base_}function dG(e,t){if(g9(e))return new Map(e);if(y9(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=qAe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[cd];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(CC(e),r)}else{const r=CC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Eee(e,t=!1){return v9(e)||Jw(e)||!i1(e)||(m9(e)>1&&(e.set=e.add=e.clear=e.delete=Tgt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Eee(r,!0))),e}function Tgt(){vp(2)}function v9(e){return Object.isFrozen(e)}var Cgt={};function Zw(e){const t=Cgt[e];return t||vp(0,e),t}var UN;function GAe(){return UN}function Agt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nhe(e,t){t&&(Zw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function hG(e){pG(e),e.drafts_.forEach(Igt),e.drafts_=null}function pG(e){e===UN&&(UN=e.parent_)}function rhe(e){return UN=Agt(UN,e)}function Igt(e){const t=e[cd];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ihe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[cd].modified_&&(hG(t),vp(4)),i1(e)&&(e=TF(t,e),t.parent_||CF(t,e)),t.patches_&&Zw("Patches").generateReplacementPatches_(n[cd].base_,e,t.patches_,t.inversePatches_)):e=TF(t,n,[]),hG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HAe?e:void 0}function TF(e,t,n){if(v9(t))return t;const r=t[cd];if(!r)return SF(t,(i,s)=>she(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return CF(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),SF(s,(a,u)=>she(e,r,i,a,u,n,o)),CF(e,i,!1),n&&e.patches_&&Zw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function she(e,t,n,r,i,s,o){if(Jw(i)){const a=s&&t&&t.type_!==3&&!fG(t.assigned_,r)?s.concat(r):void 0,u=TF(e,i,a);if(WAe(n,r,u),Jw(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(i1(i)&&!v9(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;TF(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&CF(e,i)}}function CF(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Eee(t,n)}function kgt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:GAe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=See;n&&(i=[r],s=zN);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var See={get(e,t){if(t===cd)return e;const n=X_(e);if(!fG(n,t))return Rgt(e,n,t);const r=n[t];return e.finalized_||!i1(r)?r:r===gV(e.base_,t)?(yV(e),e.copy_[t]=gG(r,e)):r},has(e,t){return t in X_(e)},ownKeys(e){return Reflect.ownKeys(X_(e))},set(e,t,n){const r=YAe(X_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=gV(X_(e),t),s=i==null?void 0:i[cd];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Sgt(n,i)&&(n!==void 0||fG(e.base_,t)))return!0;yV(e),mG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gV(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,yV(e),mG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=X_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){vp(11)},getPrototypeOf(e){return CC(e.base_)},setPrototypeOf(){vp(12)}},zN={};SF(See,(e,t)=>{zN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zN.deleteProperty=function(e,t){return zN.set.call(this,e,t,void 0)};zN.set=function(e,t,n){return See.set.call(this,e[0],t,n,e[0])};function gV(e,t){const n=e[cd];return(n?X_(n):e)[t]}function Rgt(e,t,n){var i;const r=YAe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function YAe(e,t){if(!(t in e))return;let n=CC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=CC(n)}}function mG(e){e.modified_||(e.modified_=!0,e.parent_&&mG(e.parent_))}function yV(e){e.copy_||(e.copy_=dG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Dgt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&vp(6),r!==void 0&&typeof r!="function"&&vp(7);let i;if(i1(t)){const s=rhe(this),o=gG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?hG(s):pG(s)}return nhe(s,r),ihe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===HAe&&(i=void 0),this.autoFreeze_&&Eee(i,!0),r){const s=[],o=[];Zw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else vp(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){i1(e)||vp(8),Jw(e)&&(e=Ngt(e));const t=rhe(this),n=gG(e,void 0);return n[cd].isManual_=!0,pG(t),n}finishDraft(e,t){const n=e&&e[cd];(!n||!n.isManual_)&&vp(9);const{scope_:r}=n;return nhe(r,t),ihe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Zw("Patches").applyPatches_;return Jw(e)?r(e,t):this.produce(e,i=>r(i,t))}};function gG(e,t){const n=g9(e)?Zw("MapSet").proxyMap_(e,t):y9(e)?Zw("MapSet").proxySet_(e,t):kgt(e,t);return(t?t.scope_:GAe()).drafts_.push(n),n}function Ngt(e){return Jw(e)||vp(10,e),KAe(e)}function KAe(e){if(!i1(e)||v9(e))return e;const t=e[cd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=dG(e,t.scope_.immer_.useStrictShallowCopy_)}else n=dG(e,!0);return SF(n,(r,i)=>{WAe(n,r,KAe(i))}),t&&(t.finalized_=!1),n}var fd=new Dgt,XAe=fd.produce;fd.produceWithPatches.bind(fd);fd.setAutoFreeze.bind(fd);fd.setUseStrictShallowCopy.bind(fd);fd.applyPatches.bind(fd);fd.createDraft.bind(fd);fd.finishDraft.bind(fd);function Pgt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ogt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Mgt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var ohe=e=>Array.isArray(e)?e:[e];function Lgt(e){const t=Array.isArray(e[0])?e[0]:e;return Mgt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function $gt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Fgt=class{constructor(e){this.value=e}deref(){return this.value}},Bgt=typeof WeakRef<"u"?WeakRef:Fgt,jgt=0,ahe=1;function u6(){return{s:jgt,v:void 0,o:null,p:null}}function QAe(e,t={}){let n=u6();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=u6(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=u6(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===ahe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Bgt(c):c}return l.s=ahe,l.v=c,c}return o.clearCache=()=>{n=u6(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ugt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Pgt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=QAe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=ohe(d),v=ohe(p),b=Lgt(i),w=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const C=$gt(b,arguments);return a=w.apply(null,C),a},...v);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var JAe=Ugt(QAe),zgt=Object.assign((e,t=JAe)=>{Ogt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>zgt});function ZAe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Vgt=ZAe(),Hgt=ZAe,qgt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?EF:EF.apply(null,arguments)};function uhe(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Fy(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>wgt(r)&&r.type===e,n}var eIe=class QR extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,QR.prototype)}static get[Symbol.species](){return QR}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new QR(...t[0].concat(this)):new QR(...t.concat(this))}};function lhe(e){return i1(e)?XAe(e,()=>{}):e}function che(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Wgt(e){return typeof e=="boolean"}var Ggt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new eIe;return n&&(Wgt(n)?o.push(Vgt):o.push(Hgt(n.extraArgument))),o},Ygt="RTK_autoBatch",fhe=e=>t=>{setTimeout(t,e)},Kgt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fhe(10):e.type==="callback"?e.queueNotification:fhe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Ygt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Xgt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new eIe(e);return r&&i.push(Kgt(typeof r=="object"?r:void 0)),i};function Qgt(e){const t=Ggt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(wee(n))a=xgt(n);else throw new Error(Fy(1));let u;typeof r=="function"?u=r(t):u=t();let l=EF;i&&(l=qgt({trace:!1,...typeof i=="object"&&i}));const c=_gt(...u),f=Xgt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return VAe(a,s,h)}function tIe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Fy(28));if(a in t)throw new Error(Fy(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Jgt(e){return typeof e=="function"}function Zgt(e,t){let[n,r,i]=tIe(t),s;if(Jgt(e))s=()=>lhe(e());else{const a=lhe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Jw(c)){const h=f(c,u);return h===void 0?c:h}else{if(i1(c))return XAe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var eyt=Symbol.for("rtk-slice-createasyncthunk");function tyt(e,t){return`${e}/${t}`}function nyt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[eyt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Fy(11));const a=(typeof i.reducers=="function"?i.reducers(syt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Fy(12));if(T in l.sliceCaseReducersByType)throw new Error(Fy(13));return l.sliceCaseReducersByType[T]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],T={reducerName:w,type:tyt(s,w),createNotation:typeof i.reducers=="function"};ayt(E)?lyt(T,E,c,t):oyt(T,E,c)});function f(){const[w={},E=[],T=void 0]=typeof i.extraReducers=="function"?tIe(i.extraReducers):[i.extraReducers],C={...w,...l.sliceCaseReducersByType};return Zgt(i.initialState,I=>{for(let R in C)I.addCase(R,C[R]);for(let R of l.sliceMatchers)I.addMatcher(R.matcher,R.reducer);for(let R of E)I.addMatcher(R.matcher,R.reducer);T&&I.addDefaultCase(T)})}const d=w=>w,h=new Map;let p;function m(w,E){return p||(p=f()),p(w,E)}function g(){return p||(p=f()),p.getInitialState()}function v(w,E=!1){function T(I){let R=I[w];return typeof R>"u"&&E&&(R=g()),R}function C(I=d){const R=che(h,E,()=>new WeakMap);return che(R,I,()=>{const N={};for(const[O,L]of Object.entries(i.selectors??{}))N[O]=ryt(L,I,g,E);return N})}return{reducerPath:w,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...v(o),injectInto(w,{reducerPath:E,...T}={}){const C=E??o;return w.inject({reducerPath:C,reducer:m},T),{...b,...v(C,!0)}}};return b}}function ryt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var iyt=nyt();function syt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function oyt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!uyt(r))throw new Error(Fy(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?uhe(e,o):uhe(e))}function ayt(e){return e._reducerDefinitionType==="asyncThunk"}function uyt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function lyt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Fy(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||l6,pending:a||l6,rejected:u||l6,settled:l||l6})}function l6(){}function Fy(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function zp(e){return e.components.flatMap(t=>typeof t=="string"?t:zp(t))}function nIe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:nIe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function rIe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+zp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+zp(e).length-1}];r+=1}else{const o=rIe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Tee(e,t){const n=rIe(e,t,0);return typeof n=="number"?null:n}function iIe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=iIe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function cyt(e,t){const n=iIe(e,t,0);return n.found?n.distance:-1}function sIe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...sIe(i,`${t}-${s}`))}),n}function Cee(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Cee(n,`${t}-${r}`))}}async function fyt(e,t,n,r,i,s,o){const a=zp(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=iyt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:v,val:b}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[v]:b}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:T}=m.payload,C=((g=p.matrixAnswers[v])==null?void 0:g[b])??"";let I="";E?C.length>0?I=[...C.split("|"),w].sort((R,N)=>T.map(O=>O.value).indexOf(R)-T.map(O=>O.value).indexOf(N)).join("|"):I=`${w}`:I=C.split("|").filter(R=>R!==w).join("|"),p.matrixAnswers={...p.matrixAnswers,[v]:{...p.matrixAnswers[v],[b]:I}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{if(p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(m.values).length>0){const g=p.trialValidation[m.identifier][m.location].values;p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...g,...m.values}}}m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,incorrectAnswers:I,helpButtonClickedCount:R}=m;p.answers[g]={incorrectAnswers:I,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,helpButtonClickedCount:R}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:v,question:b}=m;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[g]||(p.answers[b].incorrectAnswers[g]={id:g,value:[]}),p.answers[b].incorrectAnswers[g].value.push(v)}}});return{store:Qgt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const oIe=P.createContext(null);function Tu(){return P.useContext(oIe).actions}const bl=zAe,yi=ggt;function dyt(e){return yi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const hyt=JAe(e=>e.sequence,e=>zp(e));function Aee(){return yi(hyt)}var vL={exports:{}},bL={exports:{}},pyt=bL.exports,dhe;function Xr(){return dhe||(dhe=1,function(e,t){(function(n,r){e.exports=r()})(pyt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof la<"u"&&la.crypto&&(s=la.crypto),!s&&typeof XR=="function")try{s=YTe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,T=this.sigBytes,C=b.sigBytes;if(this.clamp(),T%4)for(var I=0;I<C;I++){var R=E[I>>>2]>>>24-I%4*8&255;w[T+I>>>2]|=R<<24-(T+I)%4*8}else for(var N=0;N<C;N+=4)w[T+N>>>2]=E[N>>>2];return this.sigBytes+=C,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(o());return new f.init(w,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var I=w[C>>>2]>>>24-C%4*8&255;T.push((I>>>4).toString(16)),T.push((I&15).toString(16))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T+=2)E[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new f.init(E,w/2)}},p=d.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var I=w[C>>>2]>>>24-C%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T++)E[T>>>2]|=(b.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,w)}},m=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=m.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,T=E.words,C=E.sigBytes,I=this.blockSize,R=I*4,N=C/R;b?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var O=N*I,L=r.min(O*4,C);if(O){for(var j=0;j<O;j+=I)this._doProcessBlock(T,j);w=T.splice(0,O),E.sigBytes-=L}return new f.init(w,L)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(bL)),bL.exports}var xL={exports:{}},myt=xL.exports,hhe;function b9(){return hhe||(hhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(myt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(xL)),xL.exports}var _L={exports:{}},gyt=_L.exports,phe;function yyt(){return phe||(phe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(gyt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(_L)),_L.exports}var wL={exports:{}},vyt=wL.exports,mhe;function byt(){return mhe||(mhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(vyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(wL)),wL.exports}var EL={exports:{}},xyt=EL.exports,ghe;function qE(){return ghe||(ghe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(xyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|m<<8|g,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(v>>>6*(3-b)&63));var w=f.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(EL)),EL.exports}var SL={exports:{}},_yt=SL.exports,yhe;function wyt(){return yhe||(yhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(_yt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=m<<16|g<<8|v,w=0;w<4&&p+w*.75<f;w++)h.push(d.charAt(b>>>6*(3-w)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(SL)),SL.exports}var TL={exports:{}},Eyt=TL.exports,vhe;function WE(){return vhe||(vhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Eyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var v=0;v<16;v++){var b=g+v,w=m[b];m[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,T=m[g+0],C=m[g+1],I=m[g+2],R=m[g+3],N=m[g+4],O=m[g+5],L=m[g+6],j=m[g+7],F=m[g+8],H=m[g+9],Q=m[g+10],J=m[g+11],ne=m[g+12],Z=m[g+13],ie=m[g+14],q=m[g+15],U=E[0],G=E[1],V=E[2],Y=E[3];U=f(U,G,V,Y,T,7,l[0]),Y=f(Y,U,G,V,C,12,l[1]),V=f(V,Y,U,G,I,17,l[2]),G=f(G,V,Y,U,R,22,l[3]),U=f(U,G,V,Y,N,7,l[4]),Y=f(Y,U,G,V,O,12,l[5]),V=f(V,Y,U,G,L,17,l[6]),G=f(G,V,Y,U,j,22,l[7]),U=f(U,G,V,Y,F,7,l[8]),Y=f(Y,U,G,V,H,12,l[9]),V=f(V,Y,U,G,Q,17,l[10]),G=f(G,V,Y,U,J,22,l[11]),U=f(U,G,V,Y,ne,7,l[12]),Y=f(Y,U,G,V,Z,12,l[13]),V=f(V,Y,U,G,ie,17,l[14]),G=f(G,V,Y,U,q,22,l[15]),U=d(U,G,V,Y,C,5,l[16]),Y=d(Y,U,G,V,L,9,l[17]),V=d(V,Y,U,G,J,14,l[18]),G=d(G,V,Y,U,T,20,l[19]),U=d(U,G,V,Y,O,5,l[20]),Y=d(Y,U,G,V,Q,9,l[21]),V=d(V,Y,U,G,q,14,l[22]),G=d(G,V,Y,U,N,20,l[23]),U=d(U,G,V,Y,H,5,l[24]),Y=d(Y,U,G,V,ie,9,l[25]),V=d(V,Y,U,G,R,14,l[26]),G=d(G,V,Y,U,F,20,l[27]),U=d(U,G,V,Y,Z,5,l[28]),Y=d(Y,U,G,V,I,9,l[29]),V=d(V,Y,U,G,j,14,l[30]),G=d(G,V,Y,U,ne,20,l[31]),U=h(U,G,V,Y,O,4,l[32]),Y=h(Y,U,G,V,F,11,l[33]),V=h(V,Y,U,G,J,16,l[34]),G=h(G,V,Y,U,ie,23,l[35]),U=h(U,G,V,Y,C,4,l[36]),Y=h(Y,U,G,V,N,11,l[37]),V=h(V,Y,U,G,j,16,l[38]),G=h(G,V,Y,U,Q,23,l[39]),U=h(U,G,V,Y,Z,4,l[40]),Y=h(Y,U,G,V,T,11,l[41]),V=h(V,Y,U,G,R,16,l[42]),G=h(G,V,Y,U,L,23,l[43]),U=h(U,G,V,Y,H,4,l[44]),Y=h(Y,U,G,V,ne,11,l[45]),V=h(V,Y,U,G,q,16,l[46]),G=h(G,V,Y,U,I,23,l[47]),U=p(U,G,V,Y,T,6,l[48]),Y=p(Y,U,G,V,j,10,l[49]),V=p(V,Y,U,G,ie,15,l[50]),G=p(G,V,Y,U,O,21,l[51]),U=p(U,G,V,Y,ne,6,l[52]),Y=p(Y,U,G,V,R,10,l[53]),V=p(V,Y,U,G,Q,15,l[54]),G=p(G,V,Y,U,C,21,l[55]),U=p(U,G,V,Y,F,6,l[56]),Y=p(Y,U,G,V,q,10,l[57]),V=p(V,Y,U,G,L,15,l[58]),G=p(G,V,Y,U,Z,21,l[59]),U=p(U,G,V,Y,N,6,l[60]),Y=p(Y,U,G,V,J,10,l[61]),V=p(V,Y,U,G,I,15,l[62]),G=p(G,V,Y,U,H,21,l[63]),E[0]=E[0]+U|0,E[1]=E[1]+G|0,E[2]=E[2]+V|0,E[3]=E[3]+Y|0},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,b=m.sigBytes*8;g[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;g[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var T=this._hash,C=T.words,I=0;I<4;I++){var R=C[I];C[I]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return T},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,v,b,w,E,T){var C=m+(g&v|~g&b)+w+T;return(C<<E|C>>>32-E)+g}function d(m,g,v,b,w,E,T){var C=m+(g&b|v&~b)+w+T;return(C<<E|C>>>32-E)+g}function h(m,g,v,b,w,E,T){var C=m+(g^v^b)+w+T;return(C<<E|C>>>32-E)+g}function p(m,g,v,b,w,E,T){var C=m+(v^(g|~b))+w+T;return(C<<E|C>>>32-E)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(TL)),TL.exports}var CL={exports:{}},Syt=CL.exports,bhe;function aIe(){return bhe||(bhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Syt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],v=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(p&m|~p&g)+1518500249:b<40?E+=(p^m^g)+1859775393:b<60?E+=(p&m|p&g|m&g)-1894007588:E+=(p^m^g)-899497514,v=g,g=m,m=p<<30|p>>>2,p=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(CL)),CL.exports}var AL={exports:{}},Tyt=AL.exports,xhe;function Iee(){return xhe||(xhe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Tyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],v=m[1],b=m[2],w=m[3],E=m[4],T=m[5],C=m[6],I=m[7],R=0;R<64;R++){if(R<16)f[R]=h[p+R]|0;else{var N=f[R-15],O=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,L=f[R-2],j=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;f[R]=O+f[R-7]+j+f[R-16]}var F=E&T^~E&C,H=g&v^g&b^v&b,Q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ne=I+J+F+c[R]+f[R],Z=Q+H;I=C,C=T,T=E,E=w+ne|0,w=b,b=v,v=g,g=ne+Z|0}m[0]=m[0]+g|0,m[1]=m[1]+v|0,m[2]=m[2]+b|0,m[3]=m[3]+w|0,m[4]=m[4]+E|0,m[5]=m[5]+T|0,m[6]=m[6]+C|0,m[7]=m[7]+I|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(AL)),AL.exports}var IL={exports:{}},Cyt=IL.exports,_he;function Ayt(){return _he||(_he=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Iee())})(Cyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(IL)),IL.exports}var kL={exports:{}},Iyt=kL.exports,whe;function uIe(){return whe||(whe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),b9())})(Iyt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],b=g[1],w=g[2],E=g[3],T=g[4],C=g[5],I=g[6],R=g[7],N=v.high,O=v.low,L=b.high,j=b.low,F=w.high,H=w.low,Q=E.high,J=E.low,ne=T.high,Z=T.low,ie=C.high,q=C.low,U=I.high,G=I.low,V=R.high,Y=R.low,ee=N,ae=O,_e=L,pe=j,Se=F,Le=H,ye=Q,he=J,$e=ne,De=Z,tt=ie,it=q,Me=U,Ge=G,at=V,yt=Y,St=0;St<80;St++){var Ot,qe,dt=d[St];if(St<16)qe=dt.high=p[m+St*2]|0,Ot=dt.low=p[m+St*2+1]|0;else{var wt=d[St-15],ke=wt.high,Oe=wt.low,ht=(ke>>>1|Oe<<31)^(ke>>>8|Oe<<24)^ke>>>7,Lt=(Oe>>>1|ke<<31)^(Oe>>>8|ke<<24)^(Oe>>>7|ke<<25),Ft=d[St-2],dn=Ft.high,Nn=Ft.low,Sr=(dn>>>19|Nn<<13)^(dn<<3|Nn>>>29)^dn>>>6,Ni=(Nn>>>19|dn<<13)^(Nn<<3|dn>>>29)^(Nn>>>6|dn<<26),Un=d[St-7],tr=Un.high,Ai=Un.low,Tr=d[St-16],Lo=Tr.high,Ji=Tr.low;Ot=Lt+Ai,qe=ht+tr+(Ot>>>0<Lt>>>0?1:0),Ot=Ot+Ni,qe=qe+Sr+(Ot>>>0<Ni>>>0?1:0),Ot=Ot+Ji,qe=qe+Lo+(Ot>>>0<Ji>>>0?1:0),dt.high=qe,dt.low=Ot}var Pi=$e&tt^~$e&Me,Zi=De&it^~De&Ge,Qr=ee&_e^ee&Se^_e&Se,$o=ae&pe^ae&Le^pe&Le,oc=(ee>>>28|ae<<4)^(ee<<30|ae>>>2)^(ee<<25|ae>>>7),ba=(ae>>>28|ee<<4)^(ae<<30|ee>>>2)^(ae<<25|ee>>>7),Ru=($e>>>14|De<<18)^($e>>>18|De<<14)^($e<<23|De>>>9),Jr=(De>>>14|$e<<18)^(De>>>18|$e<<14)^(De<<23|$e>>>9),ji=f[St],ai=ji.high,Ws=ji.low,Fr=yt+Jr,es=at+Ru+(Fr>>>0<yt>>>0?1:0),Fr=Fr+Zi,es=es+Pi+(Fr>>>0<Zi>>>0?1:0),Fr=Fr+Ws,es=es+ai+(Fr>>>0<Ws>>>0?1:0),Fr=Fr+Ot,es=es+qe+(Fr>>>0<Ot>>>0?1:0),Fo=ba+$o,mo=oc+Qr+(Fo>>>0<ba>>>0?1:0);at=Me,yt=Ge,Me=tt,Ge=it,tt=$e,it=De,De=he+Fr|0,$e=ye+es+(De>>>0<he>>>0?1:0)|0,ye=Se,he=Le,Se=_e,Le=pe,_e=ee,pe=ae,ae=Fr+Fo|0,ee=es+mo+(ae>>>0<Fr>>>0?1:0)|0}O=v.low=O+ae,v.high=N+ee+(O>>>0<ae>>>0?1:0),j=b.low=j+pe,b.high=L+_e+(j>>>0<pe>>>0?1:0),H=w.low=H+Le,w.high=F+Se+(H>>>0<Le>>>0?1:0),J=E.low=J+he,E.high=Q+ye+(J>>>0<he>>>0?1:0),Z=T.low=Z+De,T.high=ne+$e+(Z>>>0<De>>>0?1:0),q=C.low=q+it,C.high=ie+tt+(q>>>0<it>>>0?1:0),G=I.low=G+Ge,I.high=U+Me+(G>>>0<Ge>>>0?1:0),Y=R.low=Y+yt,R.high=V+at+(Y>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(v+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(kL)),kL.exports}var RL={exports:{}},kyt=RL.exports,Ehe;function Ryt(){return Ehe||(Ehe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),b9(),uIe())})(kyt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(RL)),RL.exports}var DL={exports:{}},Dyt=DL.exports,She;function Nyt(){return She||(She=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),b9())})(Dyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,v=0,b=0;b<24;b++){f[g+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*g+3*v)%5;g=w,v=E}for(var g=0;g<5;g++)for(var v=0;v<5;v++)d[g+5*v]=v+(2*g+3*v)%5*5;for(var T=1,C=0;C<24;C++){for(var I=0,R=0,N=0;N<7;N++){if(T&1){var O=(1<<N)-1;O<32?R^=1<<O:I^=1<<O-32}T&128?T=T<<1^113:T<<=1}h[C]=l.create(I,R)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],v=0;v<25;v++)g[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var T=g[v+2*E],C=g[v+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var I=b[E];I.high^=C,I.low^=T}for(var R=0;R<24;R++){for(var N=0;N<5;N++){for(var O=0,L=0,j=0;j<5;j++){var I=b[N+5*j];O^=I.high,L^=I.low}var F=p[N];F.high=O,F.low=L}for(var N=0;N<5;N++)for(var H=p[(N+4)%5],Q=p[(N+1)%5],J=Q.high,ne=Q.low,O=H.high^(J<<1|ne>>>31),L=H.low^(ne<<1|J>>>31),j=0;j<5;j++){var I=b[N+5*j];I.high^=O,I.low^=L}for(var Z=1;Z<25;Z++){var O,L,I=b[Z],ie=I.high,q=I.low,U=f[Z];U<32?(O=ie<<U|q>>>32-U,L=q<<U|ie>>>32-U):(O=q<<U-32|ie>>>64-U,L=ie<<U-32|q>>>64-U);var G=p[d[Z]];G.high=O,G.low=L}var V=p[0],Y=b[0];V.high=Y.high,V.low=Y.low;for(var N=0;N<5;N++)for(var j=0;j<5;j++){var Z=N+5*j,I=b[Z],ee=p[Z],ae=p[(N+1)%5+5*j],_e=p[(N+2)%5+5*j];I.high=ee.high^~ae.high&_e.high,I.low=ee.low^~ae.low&_e.low}var I=b[0],pe=h[R];I.high^=pe.high,I.low^=pe.low}},_doFinalize:function(){var g=this._data,v=g.words;this._nDataBytes*8;var b=g.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,g.sigBytes=v.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,C=T/8,I=[],R=0;R<C;R++){var N=E[R],O=N.high,L=N.low;O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,I.push(L),I.push(O)}return new o.init(I,T)},clone:function(){for(var g=a.clone.call(this),v=g._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(DL)),DL.exports}var NL={exports:{}},Pyt=NL.exports,The;function Oyt(){return The||(The=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Pyt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,I){for(var R=0;R<16;R++){var N=I+R,O=C[N];C[N]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var L=this._hash.words,j=h.words,F=p.words,H=l.words,Q=c.words,J=f.words,ne=d.words,Z,ie,q,U,G,V,Y,ee,ae,_e;V=Z=L[0],Y=ie=L[1],ee=q=L[2],ae=U=L[3],_e=G=L[4];for(var pe,R=0;R<80;R+=1)pe=Z+C[I+H[R]]|0,R<16?pe+=g(ie,q,U)+j[0]:R<32?pe+=v(ie,q,U)+j[1]:R<48?pe+=b(ie,q,U)+j[2]:R<64?pe+=w(ie,q,U)+j[3]:pe+=E(ie,q,U)+j[4],pe=pe|0,pe=T(pe,J[R]),pe=pe+G|0,Z=G,G=U,U=T(q,10),q=ie,ie=pe,pe=V+C[I+Q[R]]|0,R<16?pe+=E(Y,ee,ae)+F[0]:R<32?pe+=w(Y,ee,ae)+F[1]:R<48?pe+=b(Y,ee,ae)+F[2]:R<64?pe+=v(Y,ee,ae)+F[3]:pe+=g(Y,ee,ae)+F[4],pe=pe|0,pe=T(pe,ne[R]),pe=pe+_e|0,V=_e,_e=ae,ae=T(ee,10),ee=Y,Y=pe;pe=L[1]+q+ae|0,L[1]=L[2]+U+_e|0,L[2]=L[3]+G+V|0,L[3]=L[4]+Z+Y|0,L[4]=L[0]+ie+ee|0,L[0]=pe},_doFinalize:function(){var C=this._data,I=C.words,R=this._nDataBytes*8,N=C.sigBytes*8;I[N>>>5]|=128<<24-N%32,I[(N+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,C.sigBytes=(I.length+1)*4,this._process();for(var O=this._hash,L=O.words,j=0;j<5;j++){var F=L[j];L[j]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return O},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,I,R){return C^I^R}function v(C,I,R){return C&I|~C&R}function b(C,I,R){return(C|~I)^R}function w(C,I,R){return C&R|I&~R}function E(C,I,R){return C^(I|~R)}function T(C,I){return C<<I|C>>>32-I}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(NL)),NL.exports}var PL={exports:{}},Myt=PL.exports,Che;function kee(){return Che||(Che=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Myt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,v=0;v<f;v++)m[v]^=1549556828,g[v]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(PL)),PL.exports}var OL={exports:{}},Lyt=OL.exports,Ahe;function $yt(){return Ahe||(Ahe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Iee(),kee())})(Lyt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),v=m.words,b=g.words,w=h.keySize,E=h.iterations;v.length<w;){var T=p.update(d).finalize(g);p.reset();for(var C=T.words,I=C.length,R=T,N=1;N<E;N++){R=p.finalize(R),p.reset();for(var O=R.words,L=0;L<I;L++)C[L]^=O[L]}m.concat(T),b[0]++}return m.sigBytes=w*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(OL)),OL.exports}var ML={exports:{}},Fyt=ML.exports,Ihe;function Ex(){return Ihe||(Ihe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),aIe(),kee())})(Fyt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,v=h.keySize,b=h.iterations;g.length<v;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var w=1;w<b;w++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=v*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(ML)),ML.exports}var LL={exports:{}},Byt=LL.exports,khe;function Wa(){return khe||(khe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ex())})(Byt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(O,L){return this.create(this._ENC_XFORM_MODE,O,L)},createDecryptor:function(O,L){return this.create(this._DEC_XFORM_MODE,O,L)},init:function(O,L,j){this.cfg=this.cfg.extend(j),this._xformMode=O,this._key=L,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){O&&this._append(O);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function O(L){return typeof L=="string"?N:C}return function(L){return{encrypt:function(j,F,H){return O(F).encrypt(L,j,F,H)},decrypt:function(j,F,H){return O(F).decrypt(L,j,F,H)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var O=this._process(!0);return O},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(O,L){return this.Encryptor.create(O,L)},createDecryptor:function(O,L){return this.Decryptor.create(O,L)},init:function(O,L){this._cipher=O,this._iv=L}}),g=p.CBC=function(){var O=m.extend();O.Encryptor=O.extend({processBlock:function(j,F){var H=this._cipher,Q=H.blockSize;L.call(this,j,F,Q),H.encryptBlock(j,F),this._prevBlock=j.slice(F,F+Q)}}),O.Decryptor=O.extend({processBlock:function(j,F){var H=this._cipher,Q=H.blockSize,J=j.slice(F,F+Q);H.decryptBlock(j,F),L.call(this,j,F,Q),this._prevBlock=J}});function L(j,F,H){var Q,J=this._iv;J?(Q=J,this._iv=r):Q=this._prevBlock;for(var ne=0;ne<H;ne++)j[F+ne]^=Q[ne]}return O}(),v=i.pad={},b=v.Pkcs7={pad:function(O,L){for(var j=L*4,F=j-O.sigBytes%j,H=F<<24|F<<16|F<<8|F,Q=[],J=0;J<F;J+=4)Q.push(H);var ne=a.create(Q,F);O.concat(ne)},unpad:function(O){var L=O.words[O.sigBytes-1>>>2]&255;O.sigBytes-=L}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:b}),reset:function(){var O;h.reset.call(this);var L=this.cfg,j=L.iv,F=L.mode;this._xformMode==this._ENC_XFORM_MODE?O=F.createEncryptor:(O=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==O?this._mode.init(this,j&&j.words):(this._mode=O.call(F,this,j&&j.words),this._mode.__creator=O)},_doProcessBlock:function(O,L){this._mode.processBlock(O,L)},_doFinalize:function(){var O,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),O=this._process(!0)):(O=this._process(!0),L.unpad(O)),O},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}}),E=i.format={},T=E.OpenSSL={stringify:function(O){var L,j=O.ciphertext,F=O.salt;return F?L=a.create([1398893684,1701076831]).concat(F).concat(j):L=j,L.toString(c)},parse:function(O){var L,j=c.parse(O),F=j.words;return F[0]==1398893684&&F[1]==1701076831&&(L=a.create(F.slice(2,4)),F.splice(0,4),j.sigBytes-=16),w.create({ciphertext:j,salt:L})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(O,L,j,F){F=this.cfg.extend(F);var H=O.createEncryptor(j,F),Q=H.finalize(L),J=H.cfg;return w.create({ciphertext:Q,key:j,iv:J.iv,algorithm:O,mode:J.mode,padding:J.padding,blockSize:O.blockSize,formatter:F.format})},decrypt:function(O,L,j,F){F=this.cfg.extend(F),L=this._parse(L,F.format);var H=O.createDecryptor(j,F).finalize(L.ciphertext);return H},_parse:function(O,L){return typeof O=="string"?L.parse(O,this):O}}),I=i.kdf={},R=I.OpenSSL={execute:function(O,L,j,F,H){if(F||(F=a.random(64/8)),H)var Q=d.create({keySize:L+j,hasher:H}).compute(O,F);else var Q=d.create({keySize:L+j}).compute(O,F);var J=a.create(Q.words.slice(L),j*4);return Q.sigBytes=L*4,w.create({key:Q,iv:J,salt:F})}},N=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:R}),encrypt:function(O,L,j,F){F=this.cfg.extend(F);var H=F.kdf.execute(j,O.keySize,O.ivSize,F.salt,F.hasher);F.iv=H.iv;var Q=C.encrypt.call(this,O,L,H.key,F);return Q.mixIn(H),Q},decrypt:function(O,L,j,F){F=this.cfg.extend(F),L=this._parse(L,F.format);var H=F.kdf.execute(j,O.keySize,O.ivSize,L.salt,F.hasher);F.iv=H.iv;var Q=C.decrypt.call(this,O,L,H.key,F);return Q}})}()})}(LL)),LL.exports}var $L={exports:{}},jyt=$L.exports,Rhe;function Uyt(){return Rhe||(Rhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(jyt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}($L)),$L.exports}var FL={exports:{}},zyt=FL.exports,Dhe;function Vyt(){return Dhe||(Dhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(zyt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(FL)),FL.exports}var BL={exports:{}},Hyt=BL.exports,Nhe;function qyt(){return Nhe||(Nhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(Hyt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(BL)),BL.exports}var jL={exports:{}},Wyt=jL.exports,Phe;function Gyt(){return Phe||(Phe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(Wyt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(jL)),jL.exports}var UL={exports:{}},Yyt=UL.exports,Ohe;function Kyt(){return Ohe||(Ohe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(Yyt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(UL)),UL.exports}var zL={exports:{}},Xyt=zL.exports,Mhe;function Qyt(){return Mhe||(Mhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(Xyt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(zL)),zL.exports}var VL={exports:{}},Jyt=VL.exports,Lhe;function Zyt(){return Lhe||(Lhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(Jyt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(VL)),VL.exports}var HL={exports:{}},e1t=HL.exports,$he;function t1t(){return $he||($he=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(e1t,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(HL)),HL.exports}var qL={exports:{}},n1t=qL.exports,Fhe;function r1t(){return Fhe||(Fhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(n1t,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(qL)),qL.exports}var WL={exports:{}},i1t=WL.exports,Bhe;function s1t(){return Bhe||(Bhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(i1t,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(WL)),WL.exports}var GL={exports:{}},o1t=GL.exports,jhe;function a1t(){return jhe||(jhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Wa())})(o1t,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(GL)),GL.exports}var YL={exports:{}},u1t=YL.exports,Uhe;function l1t(){return Uhe||(Uhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(u1t,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var T=0,C=0,E=0;E<256;E++){var I=C^C<<1^C<<2^C<<3^C<<4;I=I>>>8^I&255^99,a[T]=I,u[I]=T;var R=w[T],N=w[R],O=w[N],L=w[I]*257^I*16843008;l[T]=L<<24|L>>>8,c[T]=L<<16|L>>>16,f[T]=L<<8|L>>>24,d[T]=L;var L=O*16843009^N*65537^R*257^T*16843008;h[I]=L<<24|L>>>8,p[I]=L<<16|L>>>16,m[I]=L<<8|L>>>24,g[I]=L,T?(T=R^w[w[w[O^R]]],C^=w[w[C]]):T=C=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,C=E.sigBytes/4,I=this._nRounds=C+6,R=(I+1)*4,N=this._keySchedule=[],O=0;O<R;O++)O<C?N[O]=T[O]:(w=N[O-1],O%C?C>6&&O%C==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[O/C|0]<<24),N[O]=N[O-C]^w);for(var L=this._invKeySchedule=[],j=0;j<R;j++){var O=R-j;if(j%4)var w=N[O];else var w=N[O-4];j<4||O<=4?L[j]=w:L[j]=h[a[w>>>24]]^p[a[w>>>16&255]]^m[a[w>>>8&255]]^g[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(w,E){var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T,this._doCryptBlock(w,E,this._invKeySchedule,h,p,m,g,u);var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T},_doCryptBlock:function(w,E,T,C,I,R,N,O){for(var L=this._nRounds,j=w[E]^T[0],F=w[E+1]^T[1],H=w[E+2]^T[2],Q=w[E+3]^T[3],J=4,ne=1;ne<L;ne++){var Z=C[j>>>24]^I[F>>>16&255]^R[H>>>8&255]^N[Q&255]^T[J++],ie=C[F>>>24]^I[H>>>16&255]^R[Q>>>8&255]^N[j&255]^T[J++],q=C[H>>>24]^I[Q>>>16&255]^R[j>>>8&255]^N[F&255]^T[J++],U=C[Q>>>24]^I[j>>>16&255]^R[F>>>8&255]^N[H&255]^T[J++];j=Z,F=ie,H=q,Q=U}var Z=(O[j>>>24]<<24|O[F>>>16&255]<<16|O[H>>>8&255]<<8|O[Q&255])^T[J++],ie=(O[F>>>24]<<24|O[H>>>16&255]<<16|O[Q>>>8&255]<<8|O[j&255])^T[J++],q=(O[H>>>24]<<24|O[Q>>>16&255]<<16|O[j>>>8&255]<<8|O[F&255])^T[J++],U=(O[Q>>>24]<<24|O[j>>>16&255]<<16|O[F>>>8&255]<<8|O[H&255])^T[J++];w[E]=Z,w[E+1]=ie,w[E+2]=q,w[E+3]=U},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}(YL)),YL.exports}var KL={exports:{}},c1t=KL.exports,zhe;function f1t(){return zhe||(zhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(c1t,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var T=u[E]-1;w[E]=b[T>>>5]>>>31-T%32&1}for(var C=this._subKeys=[],I=0;I<16;I++){for(var R=C[I]=[],N=c[I],E=0;E<24;E++)R[E/6|0]|=w[(l[E]-1+N)%28]<<31-E%6,R[4+(E/6|0)]|=w[28+(l[E+24]-1+N)%28]<<31-E%6;R[0]=R[0]<<1|R[0]>>>31;for(var E=1;E<7;E++)R[E]=R[E]>>>(E-1)*4+3;R[7]=R[7]<<5|R[7]>>>27}for(var O=this._invSubKeys=[],E=0;E<16;E++)O[E]=C[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=w[E],C=this._lBlock,I=this._rBlock,R=0,N=0;N<8;N++)R|=f[N][((I^T[N])&d[N])>>>0];this._lBlock=I,this._rBlock=C^R}var O=this._lBlock;this._lBlock=this._rBlock,this._rBlock=O,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function m(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),T=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(w)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(T))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(KL)),KL.exports}var XL={exports:{}},d1t=XL.exports,Vhe;function h1t(){return Vhe||(Vhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(d1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,v=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+v)%256;var b=h[p];h[p]=h[m],h[m]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(XL)),XL.exports}var QL={exports:{}},p1t=QL.exports,Hhe;function m1t(){return Hhe||(Hhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(p1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,I=T<<16|E&65535;g[0]^=E,g[1]^=C,g[2]^=T,g[3]^=I,g[4]^=E,g[5]^=C,g[6]^=T,g[7]^=I;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(QL)),QL.exports}var JL={exports:{}},g1t=JL.exports,qhe;function y1t(){return qhe||(qhe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(g1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,I=T<<16|E&65535;m[0]^=E,m[1]^=C,m[2]^=T,m[3]^=I,m[4]^=E,m[5]^=C,m[6]^=T,m[7]^=I;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(JL)),JL.exports}var ZL={exports:{}},v1t=ZL.exports,Whe;function b1t(){return Whe||(Whe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),qE(),WE(),Ex(),Wa())})(v1t,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,T=v&255,C=g.sbox[0][b]+g.sbox[1][w];return C=C^g.sbox[2][E],C=C+g.sbox[3][T],C}function d(g,v,b){let w=v,E=b,T;for(let C=0;C<a;++C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[a],w=w^g.pbox[a+1],{left:w,right:E}}function h(g,v,b){let w=v,E=b,T;for(let C=a+1;C>1;--C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[1],w=w^g.pbox[0],{left:w,right:E}}function p(g,v,b){for(let I=0;I<4;I++){g.sbox[I]=[];for(let R=0;R<256;R++)g.sbox[I][R]=l[I][R]}let w=0;for(let I=0;I<a+2;I++)g.pbox[I]=u[I]^v[w],w++,w>=b&&(w=0);let E=0,T=0,C=0;for(let I=0;I<a+2;I+=2)C=d(g,E,T),E=C.left,T=C.right,g.pbox[I]=E,g.pbox[I+1]=T;for(let I=0;I<4;I++)for(let R=0;R<256;R+=2)C=d(g,E,T),E=C.left,T=C.right,g.sbox[I][R]=E,g.sbox[I][R+1]=T;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,v=g.words,b=g.sigBytes/4;p(c,v,b)}},encryptBlock:function(g,v){var b=d(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},decryptBlock:function(g,v){var b=h(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(ZL)),ZL.exports}var x1t=vL.exports,Ghe;function _1t(){return Ghe||(Ghe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),b9(),yyt(),byt(),qE(),wyt(),WE(),aIe(),Iee(),Ayt(),uIe(),Ryt(),Nyt(),Oyt(),kee(),$yt(),Ex(),Wa(),Uyt(),Vyt(),qyt(),Gyt(),Kyt(),Qyt(),Zyt(),t1t(),r1t(),s1t(),a1t(),l1t(),f1t(),h1t(),m1t(),y1t(),b1t())})(x1t,function(n){return n})}(vL)),vL.exports}var yG=_1t();function bp(e){const t=yG.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function w1t(e){const t=yG.AES.decrypt(atob(e),"notSecret").toString(yG.enc.Utf8);return parseInt(t,10)}function GE(){const{studyId:e}=F0();return`${e}`}function Ch(){const{index:e}=F0();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:w1t(e)}function Ah(){const e=Ch(),t=Aee();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var JR={exports:{}};JR.exports;var Yhe;function E1t(){return Yhe||(Yhe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",T="[object Set]",C="[object String]",I="[object Undefined]",R="[object WeakMap]",N="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",ne="[object Uint8ClampedArray]",Z="[object Uint16Array]",ie="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,V={};V[L]=V[j]=V[F]=V[H]=V[Q]=V[J]=V[ne]=V[Z]=V[ie]=!0,V[a]=V[u]=V[N]=V[c]=V[O]=V[f]=V[d]=V[h]=V[m]=V[g]=V[b]=V[E]=V[T]=V[C]=V[R]=!1;var Y=typeof la=="object"&&la&&la.Object===Object&&la,ee=typeof self=="object"&&self&&self.Object===Object&&self,ae=Y||ee||Function("return this")(),_e=t&&!t.nodeType&&t,pe=_e&&!0&&e&&!e.nodeType&&e,Se=pe&&pe.exports===_e,Le=Se&&Y.process,ye=function(){try{var ve=pe&&pe.require&&pe.require("util").types;return ve||Le&&Le.binding&&Le.binding("util")}catch{}}(),he=ye&&ye.isTypedArray;function $e(ve,Ae,Qe){switch(Qe.length){case 0:return ve.call(Ae);case 1:return ve.call(Ae,Qe[0]);case 2:return ve.call(Ae,Qe[0],Qe[1]);case 3:return ve.call(Ae,Qe[0],Qe[1],Qe[2])}return ve.apply(Ae,Qe)}function De(ve,Ae){for(var Qe=-1,tn=Array(ve);++Qe<ve;)tn[Qe]=Ae(Qe);return tn}function tt(ve){return function(Ae){return ve(Ae)}}function it(ve,Ae){return ve==null?void 0:ve[Ae]}function Me(ve,Ae){return function(Qe){return ve(Ae(Qe))}}var Ge=Array.prototype,at=Function.prototype,yt=Object.prototype,St=ae["__core-js_shared__"],Ot=at.toString,qe=yt.hasOwnProperty,dt=function(){var ve=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return ve?"Symbol(src)_1."+ve:""}(),wt=yt.toString,ke=Ot.call(Object),Oe=RegExp("^"+Ot.call(qe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=Se?ae.Buffer:void 0,Lt=ae.Symbol,Ft=ae.Uint8Array;ht&&ht.allocUnsafe;var dn=Me(Object.getPrototypeOf,Object),Nn=Object.create,Sr=yt.propertyIsEnumerable,Ni=Ge.splice,Un=Lt?Lt.toStringTag:void 0,tr=function(){try{var ve=Et(Object,"defineProperty");return ve({},"",{}),ve}catch{}}(),Ai=ht?ht.isBuffer:void 0,Tr=Math.max,Lo=Date.now,Ji=Et(ae,"Map"),Pi=Et(Object,"create"),Zi=function(){function ve(){}return function(Ae){if(!fc(Ae))return{};if(Nn)return Nn(Ae);ve.prototype=Ae;var Qe=new ve;return ve.prototype=void 0,Qe}}();function Qr(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function $o(){this.__data__=Pi?Pi(null):{},this.size=0}function oc(ve){var Ae=this.has(ve)&&delete this.__data__[ve];return this.size-=Ae?1:0,Ae}function ba(ve){var Ae=this.__data__;if(Pi){var Qe=Ae[ve];return Qe===r?void 0:Qe}return qe.call(Ae,ve)?Ae[ve]:void 0}function Ru(ve){var Ae=this.__data__;return Pi?Ae[ve]!==void 0:qe.call(Ae,ve)}function Jr(ve,Ae){var Qe=this.__data__;return this.size+=this.has(ve)?0:1,Qe[ve]=Pi&&Ae===void 0?r:Ae,this}Qr.prototype.clear=$o,Qr.prototype.delete=oc,Qr.prototype.get=ba,Qr.prototype.has=Ru,Qr.prototype.set=Jr;function ji(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function ai(){this.__data__=[],this.size=0}function Ws(ve){var Ae=this.__data__,Qe=vf(Ae,ve);if(Qe<0)return!1;var tn=Ae.length-1;return Qe==tn?Ae.pop():Ni.call(Ae,Qe,1),--this.size,!0}function Fr(ve){var Ae=this.__data__,Qe=vf(Ae,ve);return Qe<0?void 0:Ae[Qe][1]}function es(ve){return vf(this.__data__,ve)>-1}function Fo(ve,Ae){var Qe=this.__data__,tn=vf(Qe,ve);return tn<0?(++this.size,Qe.push([ve,Ae])):Qe[tn][1]=Ae,this}ji.prototype.clear=ai,ji.prototype.delete=Ws,ji.prototype.get=Fr,ji.prototype.has=es,ji.prototype.set=Fo;function mo(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function Qo(){this.size=0,this.__data__={hash:new Qr,map:new(Ji||ji),string:new Qr}}function xl(ve){var Ae=bt(this,ve).delete(ve);return this.size-=Ae?1:0,Ae}function Ph(ve){return bt(this,ve).get(ve)}function Pr(ve){return bt(this,ve).has(ve)}function ac(ve,Ae){var Qe=bt(this,ve),tn=Qe.size;return Qe.set(ve,Ae),this.size+=Qe.size==tn?0:1,this}mo.prototype.clear=Qo,mo.prototype.delete=xl,mo.prototype.get=Ph,mo.prototype.has=Pr,mo.prototype.set=ac;function ms(ve){var Ae=this.__data__=new ji(ve);this.size=Ae.size}function Ka(){this.__data__=new ji,this.size=0}function Jo(ve){var Ae=this.__data__,Qe=Ae.delete(ve);return this.size=Ae.size,Qe}function mm(ve){return this.__data__.get(ve)}function Oh(ve){return this.__data__.has(ve)}function _d(ve,Ae){var Qe=this.__data__;if(Qe instanceof ji){var tn=Qe.__data__;if(!Ji||tn.length<n-1)return tn.push([ve,Ae]),this.size=++Qe.size,this;Qe=this.__data__=new mo(tn)}return Qe.set(ve,Ae),this.size=Qe.size,this}ms.prototype.clear=Ka,ms.prototype.delete=Jo,ms.prototype.get=mm,ms.prototype.has=Oh,ms.prototype.set=_d;function wd(ve,Ae){var Qe=jo(ve),tn=!Qe&&gs(ve),rr=!Qe&&!tn&&Ja(ve),kr=!Qe&&!tn&&!rr&&Eg(ve),di=Qe||tn||rr||kr,cn=di?De(ve.length,String):[],Br=cn.length;for(var Zr in ve)di&&(Zr=="length"||rr&&(Zr=="offset"||Zr=="parent")||kr&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||qt(Zr,Br))||cn.push(Zr);return cn}function gf(ve,Ae,Qe){(Qe!==void 0&&!Bo(ve[Ae],Qe)||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function yf(ve,Ae,Qe){var tn=ve[Ae];(!(qe.call(ve,Ae)&&Bo(tn,Qe))||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function vf(ve,Ae){for(var Qe=ve.length;Qe--;)if(Bo(ve[Qe][0],Ae))return Qe;return-1}function fr(ve,Ae,Qe){Ae=="__proto__"&&tr?tr(ve,Ae,{configurable:!0,enumerable:!0,value:Qe,writable:!0}):ve[Ae]=Qe}var Mh=rt();function go(ve){return ve==null?ve===void 0?I:v:Un&&Un in Object(ve)?xt(ve):Ys(ve)}function _l(ve){return Ss(ve)&&go(ve)==a}function Gs(ve){if(!fc(ve)||nr(ve))return!1;var Ae=Du(ve)?Oe:U;return Ae.test(Fh(ve))}function uc(ve){return Ss(ve)&&V1(ve.length)&&!!V[go(ve)]}function Lh(ve){if(!fc(ve))return br(ve);var Ae=ln(ve),Qe=[];for(var tn in ve)tn=="constructor"&&(Ae||!qe.call(ve,tn))||Qe.push(tn);return Qe}function lc(ve,Ae,Qe,tn,rr){ve!==Ae&&Mh(Ae,function(kr,di){if(rr||(rr=new ms),fc(kr))yo(ve,Ae,di,Qe,lc,tn,rr);else{var cn=tn?tn(cc(ve,di),kr,di+"",ve,Ae,rr):void 0;cn===void 0&&(cn=kr),gf(ve,di,cn)}},Ed)}function yo(ve,Ae,Qe,tn,rr,kr,di){var cn=cc(ve,Qe),Br=cc(Ae,Qe),Zr=di.get(Br);if(Zr){gf(ve,Qe,Zr);return}var Ks=kr?kr(cn,Br,Qe+"",ve,Ae,di):void 0,Nu=Ks===void 0;if(Nu){var ts=jo(Br),Sd=!ts&&Ja(Br),Fs=!ts&&!Sd&&Eg(Br);Ks=Br,ts||Sd||Fs?jo(cn)?Ks=cn:xf(cn)?Ks=Ne(cn):Sd?(Nu=!1,Ks=ue(Br)):Fs?(Nu=!1,Ks=ge(Br)):Ks=[]:Wx(Br)||gs(Br)?(Ks=cn,gs(cn)?Ks=_f(cn):(!fc(cn)||Du(cn))&&(Ks=Dt(Br))):Nu=!1}Nu&&(di.set(Br,Ks),rr(Ks,Br,tn,kr,di),di.delete(Br)),gf(ve,Qe,Ks)}function gm(ve,Ae){return $h(Xa(ve,Ae,dr),ve+"")}var vo=tr?function(ve,Ae){return tr(ve,"toString",{configurable:!0,enumerable:!1,value:xr(Ae),writable:!0})}:dr;function ue(ve,Ae){return ve.slice()}function Te(ve){var Ae=new ve.constructor(ve.byteLength);return new Ft(Ae).set(new Ft(ve)),Ae}function ge(ve,Ae){var Qe=Te(ve.buffer);return new ve.constructor(Qe,ve.byteOffset,ve.length)}function Ne(ve,Ae){var Qe=-1,tn=ve.length;for(Ae||(Ae=Array(tn));++Qe<tn;)Ae[Qe]=ve[Qe];return Ae}function Be(ve,Ae,Qe,tn){var rr=!Qe;Qe||(Qe={});for(var kr=-1,di=Ae.length;++kr<di;){var cn=Ae[kr],Br=void 0;Br===void 0&&(Br=ve[cn]),rr?fr(Qe,cn,Br):yf(Qe,cn,Br)}return Qe}function Re(ve){return gm(function(Ae,Qe){var tn=-1,rr=Qe.length,kr=rr>1?Qe[rr-1]:void 0,di=rr>2?Qe[2]:void 0;for(kr=ve.length>3&&typeof kr=="function"?(rr--,kr):void 0,di&&In(Qe[0],Qe[1],di)&&(kr=rr<3?void 0:kr,rr=1),Ae=Object(Ae);++tn<rr;){var cn=Qe[tn];cn&&ve(Ae,cn,tn,kr)}return Ae})}function rt(ve){return function(Ae,Qe,tn){for(var rr=-1,kr=Object(Ae),di=tn(Ae),cn=di.length;cn--;){var Br=di[++rr];if(Qe(kr[Br],Br,kr)===!1)break}return Ae}}function bt(ve,Ae){var Qe=ve.__data__;return un(Ae)?Qe[typeof Ae=="string"?"string":"hash"]:Qe.map}function Et(ve,Ae){var Qe=it(ve,Ae);return Gs(Qe)?Qe:void 0}function xt(ve){var Ae=qe.call(ve,Un),Qe=ve[Un];try{ve[Un]=void 0;var tn=!0}catch{}var rr=wt.call(ve);return tn&&(Ae?ve[Un]=Qe:delete ve[Un]),rr}function Dt(ve){return typeof ve.constructor=="function"&&!ln(ve)?Zi(dn(ve)):{}}function qt(ve,Ae){var Qe=typeof ve;return Ae=Ae??o,!!Ae&&(Qe=="number"||Qe!="symbol"&&G.test(ve))&&ve>-1&&ve%1==0&&ve<Ae}function In(ve,Ae,Qe){if(!fc(Qe))return!1;var tn=typeof Ae;return(tn=="number"?Qa(Qe)&&qt(Ae,Qe.length):tn=="string"&&Ae in Qe)?Bo(Qe[Ae],ve):!1}function un(ve){var Ae=typeof ve;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?ve!=="__proto__":ve===null}function nr(ve){return!!dt&&dt in ve}function ln(ve){var Ae=ve&&ve.constructor,Qe=typeof Ae=="function"&&Ae.prototype||yt;return ve===Qe}function br(ve){var Ae=[];if(ve!=null)for(var Qe in Object(ve))Ae.push(Qe);return Ae}function Ys(ve){return wt.call(ve)}function Xa(ve,Ae,Qe){return Ae=Tr(Ae===void 0?ve.length-1:Ae,0),function(){for(var tn=arguments,rr=-1,kr=Tr(tn.length-Ae,0),di=Array(kr);++rr<kr;)di[rr]=tn[Ae+rr];rr=-1;for(var cn=Array(Ae+1);++rr<Ae;)cn[rr]=tn[rr];return cn[Ae]=Qe(di),$e(ve,this,cn)}}function cc(ve,Ae){if(!(Ae==="constructor"&&typeof ve[Ae]=="function")&&Ae!="__proto__")return ve[Ae]}var $h=bf(vo);function bf(ve){var Ae=0,Qe=0;return function(){var tn=Lo(),rr=s-(tn-Qe);if(Qe=tn,rr>0){if(++Ae>=i)return arguments[0]}else Ae=0;return ve.apply(void 0,arguments)}}function Fh(ve){if(ve!=null){try{return Ot.call(ve)}catch{}try{return ve+""}catch{}}return""}function Bo(ve,Ae){return ve===Ae||ve!==ve&&Ae!==Ae}var gs=_l(function(){return arguments}())?_l:function(ve){return Ss(ve)&&qe.call(ve,"callee")&&!Sr.call(ve,"callee")},jo=Array.isArray;function Qa(ve){return ve!=null&&V1(ve.length)&&!Du(ve)}function xf(ve){return Ss(ve)&&Qa(ve)}var Ja=Ai||wf;function Du(ve){if(!fc(ve))return!1;var Ae=go(ve);return Ae==h||Ae==p||Ae==l||Ae==w}function V1(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=o}function fc(ve){var Ae=typeof ve;return ve!=null&&(Ae=="object"||Ae=="function")}function Ss(ve){return ve!=null&&typeof ve=="object"}function Wx(ve){if(!Ss(ve)||go(ve)!=b)return!1;var Ae=dn(ve);if(Ae===null)return!0;var Qe=qe.call(Ae,"constructor")&&Ae.constructor;return typeof Qe=="function"&&Qe instanceof Qe&&Ot.call(Qe)==ke}var Eg=he?tt(he):uc;function _f(ve){return Be(ve,Ed(ve))}function Ed(ve){return Qa(ve)?wd(ve):Lh(ve)}var H1=Re(function(ve,Ae,Qe){lc(ve,Ae,Qe)});function xr(ve){return function(){return ve}}function dr(ve){return ve}function wf(){return!1}e.exports=H1}(JR,JR.exports)),JR.exports}var S1t=E1t();const Ree=vh(S1t);function By(e){return structuredClone(e)}function Dee(){const e=Ch(),n=`${Ah()}_${e}`;return yi(i=>i.answers[n])}const lIe=P.createContext(null);function T1t(){const e=P.useContext(lIe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function s1(){return yi(e=>e.config)}function eI(){const[e]=C1();return!!e.get("participantId")}function Khe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function cIe(){const e=Ch(),t=Aee(),r=`${Ah()}_${e}`,i=yi(L=>L.trialValidation),s=yi(L=>L.sequence),o=yi(L=>L.answers),a=yi(L=>L.modes),u=yi(L=>L.otherTexts),l=bl(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Tu(),{storageEngine:m}=ho(),g=GE(),v=P.useMemo(()=>a.dataCollectionEnabled,[a]),b=dyt(r),w=eI(),E=typeof e!="number"||w||!b,T=Dee(),C=em(),I=s1(),R=P.useMemo(()=>Date.now(),[]),N=T1t(),O=P.useCallback((L=!0)=>{if(typeof e!="number")return;const j=By(i[r]),F=Object.values(j).reduce((V,Y)=>Object.hasOwn(Y,"values")?{...V,...Y.values}:V,{});Object.entries(u).forEach(([V,Y])=>{Array.isArray(F[V])&&F[V].includes("__other")&&(F[V]=F[V].filter(ee=>ee!=="__other"),F[V].push(`other:${Y}`)),typeof F[V]=="string"&&F[V]==="__other"&&(F[V]=`other:${Y}`)});const{provenanceGraph:H}=j,Q=Date.now(),{incorrectAnswers:J,helpButtonClickedCount:ne}=T,Z=N&&"current"in N&&N.current?N.current.splice(0,N.current.length):[];if(v&&T.endTime===-1){const V={answer:L?F:{},startTime:R,endTime:Q,incorrectAnswers:J,provenanceGraph:H,windowEvents:Z,timedOut:!L,helpButtonClickedCount:ne};l(c({identifier:r,...V})),m&&m.saveAnswers({...o,[r]:V}),l(f({})),l(p()),l(h(null)),l(d(null))}let ie=e+1;const q=Tee(s,e),U=q!==null&&q.some(V=>Object.hasOwn(V.currentBlock,"skip")&&V.currentBlock.skip!==void 0),G={...o,[r]:{answer:F,startTime:R,endTime:Q,provenanceGraph:H,windowEvents:Z}};U&&[...q.flatMap(Y=>Y.currentBlock.skip?Y.currentBlock.skip.map(ee=>({...ee,firstIndex:Y.firstIndex,lastIndex:Y.lastIndex})):[])].some(Y=>{let ee=!1;const ae=Object.fromEntries(Object.entries(G).filter(([pe])=>{const Se=parseInt(pe.slice(pe.lastIndexOf("_")+1),10);return Se>=Y.firstIndex&&Se<=e})),_e=Y.check!=="block"?Object.entries(ae).filter(([pe])=>pe.slice(0,pe.lastIndexOf("_"))===Y.name):Object.entries(ae);if(_e.length===0)return!1;if(_e.some(([pe,Se])=>!Se))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(Y,null,2)}`);if(Y.check==="response"||Y.check==="responses"){const[pe,Se]=_e[0];Y.check==="response"?ee=Y.comparison==="equal"?Y.value===Se.answer[Y.responseId]:Y.value!==Se.answer[Y.responseId]:ee=!Khe(Se.answer,pe,I.components[pe.slice(0,pe.lastIndexOf("_"))],I)}else if(Y.check==="block"||Y.check==="repeatedComponent"){if(_e.length<Y.value)return!1;const pe=_e.map(([ye,he])=>Khe(he.answer,ye,I.components[ye.slice(0,ye.lastIndexOf("_"))],I)),Se=pe.filter(ye=>ye).length,Le=pe.length-Se;ee=Y.condition==="numCorrect"&&Se===Y.value||Y.condition==="numIncorrect"&&Le===Y.value}if(ee){const pe=t.indexOf(Y.to),Se=pe===-1?cyt(s,Y.to):-1;return ie=pe===-1?Se:pe,!0}return!1}),C(`/${g}/${bp(ie)}${window.location.search}`)},[e,i,r,u,T,N,v,s,o,R,C,g,l,c,m,f,p,h,d,I,t]);return{isNextDisabled:E,goToNextStep:O}}function C1t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=cIe(),o=s1(),a=em(),u=P.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=P.useState(void 0);P.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),P.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=P.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return P.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),S.jsxs(S.Fragment,{children:[S.jsx(gn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&S.jsxs(My,{mt:"md",title:"Please wait",color:"blue",icon:S.jsx(YJ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?S.jsxs(My,{mt:"md",title:"Next button disables soon",color:"yellow",icon:S.jsx(MD,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&S.jsxs(My,{mt:"md",title:"Next button disabled",color:"red",icon:S.jsx(MD,{}),children:["The next button has timed out and is now disabled.",S.jsx(Yr,{justify:"right",mt:"sm",children:S.jsx(gn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function A1t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const I1t=typeof window<"u"?P.useLayoutEffect:P.useEffect;function su(e,t){I1t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function k1t(e,t){e&&A1t(e),su(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),su(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),su(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),su(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),su(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),su(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),su(`mantine-form:${e}:clear-errors`,t.clearErrors),su(`mantine-form:${e}:reset`,t.reset),su(`mantine-form:${e}:validate`,t.validate),su(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),su(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),su(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),su(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),su(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),su(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),su(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),su(`mantine-form:${e}:reset-touched`,t.resetTouched)}function R1t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function vG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function D1t(e){const[t,n]=P.useState(vG(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=vG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=P.useCallback(()=>i({}),[]),o=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function bG(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Xhe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Qhe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=bG(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Xhe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Xhe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function N1t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Jhe(e,t,n){typeof n.value=="object"&&(n.value=_2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function _2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(_2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(_2(a),_2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(_2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Jhe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Jhe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function fIe(e){return typeof e!="string"?[]:e.split(".")}function gu(e,t){const n=fIe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function _3(e,t,n){const r=fIe(e);if(r.length===0)return n;const i=_2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function P1t(e,{from:t,to:n},r){const i=gu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),_3(e,s,r)}function O1t(e,t,n,r){const i=gu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),_3(e,s,r)}function M1t(e,t,n){const r=gu(e,n);return Array.isArray(r)?_3(e,r.filter((i,s)=>s!==t),n):n}function L1t(e,t,n,r){const i=gu(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,_3(e,s,r)}function $1t({$values:e,$errors:t,$status:n}){const r=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>N1t(a,u,l)),e.setValues({values:P1t(a,u,e.refValues.current),updateState:!0})},[]),i=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Qhe(a,u,l,-1)),e.setValues({values:M1t(a,u,e.refValues.current),updateState:!0})},[]),s=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>Qhe(a,l,c,1)),e.setValues({values:O1t(a,u,l,e.refValues.current),updateState:!0})},[]),o=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:L1t(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var vV,Zhe;function Nee(){return Zhe||(Zhe=1,vV=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),vV}var F1t=Nee();const ZR=vh(F1t);function sR(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function B1t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=P.useState(t),[o,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(C=>{const I=typeof C=="function"?C(u.current):C;u.current=I,n==="controlled"&&s(I)},[]),f=P.useCallback((C,I=!1)=>{const R=typeof C=="function"?C(l.current):C;l.current=R,(n==="controlled"||I)&&a(R)},[]),d=P.useCallback(()=>c({}),[]),h=P.useCallback(C=>{const I=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(I),f({})},[]),p=P.useCallback((C,I)=>{c(R=>sR(R,C)===I?R:{...R,[C]:I})},[]),m=P.useCallback((C,I,R)=>{f(N=>sR(N,C)===I?N:{...N,[C]:I},R)},[]),g=P.useCallback((C,I)=>{const R=sR(l.current,C),N=!ZR(gu(C,r.getValuesSnapshot()),I),O=bG(C,l.current);O[C]=N,f(O,R!==N)},[]),v=P.useCallback(C=>sR(u.current,C),[]),b=P.useCallback(C=>f(I=>{if(typeof C!="string")return I;const R=bG(C,I);return delete R[C],ZR(R,I)?I:R}),[]),w=P.useCallback(C=>{if(C){const R=gu(C,l.current);if(typeof R=="boolean")return R;const N=gu(C,r.refValues.current),O=gu(C,r.valuesSnapshot.current);return!ZR(N,O)}return Object.keys(l.current).length>0?sR(l.current):!ZR(r.refValues.current,r.valuesSnapshot.current)},[]),E=P.useCallback(()=>l.current,[]),T=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:v,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:T,setCalculatedFieldDirty:g}}function j1t({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,s]=P.useState(e||{}),o=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:m,subscribers:g,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=o.current,E=m instanceof Function?m(o.current):m,T=b?{...w,...E}:E;o.current=T,v&&s(T),t==null||t(T,w),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:T,previousValues:w}))},[t]),l=P.useCallback(m=>{var b;const g=gu(m.path,o.current),v=m.value instanceof Function?m.value(g):m.value;if(g!==v){const w=o.current,E=_3(m.path,v,o.current);u({values:E,updateState:m.updateState}),(b=m.subscribers)==null||b.filter(Boolean).forEach(T=>T({path:m.path,updatedValues:E,previousValues:w}))}},[u]),c=P.useCallback(m=>{a.current=m},[]),f=P.useCallback((m,g)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),g())},[u]),d=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=P.useCallback(()=>o.current,[]),p=P.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function U1t({$status:e}){const t=P.useRef({}),n=P.useCallback((i,s)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:gu(i,o.previousValues),value:gu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function epe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function tpe(e){const t=vG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function xG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=gu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>xG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||xG(o,t,a,i)),i},r)}function _G(e,t){return tpe(typeof e=="function"?e(t):xG(e,t))}function c6(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=_G(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const z1t="__MANTINE_FORM_INDEX__";function npe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${z1t}`)):!1:!1}function dIe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=D1t(r),g=j1t({initialValues:n,onValuesChange:l,mode:t}),v=B1t({initialDirty:i,initialTouched:s,$values:g,mode:t}),b=$1t({$values:g,$errors:m,$status:v}),w=U1t({$status:v}),[E,T]=P.useState(0),[C,I]=P.useState({}),[R,N]=P.useState(!1),O=P.useCallback(()=>{g.resetValues(),m.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&T(ee=>ee+1)},[]),L=P.useCallback(ee=>{o&&m.clearErrors(),t==="uncontrolled"&&T(ae=>ae+1),Object.keys(w.subscribers.current).forEach(ae=>{const _e=gu(ae,g.refValues.current),pe=gu(ae,ee);_e!==pe&&w.getFieldSubscribers(ae).forEach(Se=>Se({previousValues:ee,updatedValues:g.refValues.current}))})},[o]),j=P.useCallback(ee=>{const ae=g.refValues.current;g.initialize(ee,()=>t==="uncontrolled"&&T(_e=>_e+1)),L(ae)},[L]),F=P.useCallback((ee,ae,_e)=>{const pe=npe(ee,a),Se=ae instanceof Function?ae(gu(ee,g.refValues.current)):ae;v.setCalculatedFieldDirty(ee,Se),p==="change"&&v.setFieldTouched(ee,!0),!pe&&o&&m.clearFieldError(ee),g.setFieldValue({path:ee,value:ae,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(ee),pe?Le=>{const ye=c6(ee,d,Le.updatedValues);ye.hasError?m.setFieldError(ee,ye.error):m.clearFieldError(ee)}:null,(_e==null?void 0:_e.forceUpdate)!==!1&&t!=="controlled"?()=>I(Le=>({...Le,[ee]:(Le[ee]||0)+1})):null]})},[l,d]),H=P.useCallback(ee=>{const ae=g.refValues.current;g.setValues({values:ee,updateState:t==="controlled"}),L(ae)},[l,L]),Q=P.useCallback(()=>{const ee=_G(d,g.refValues.current);return m.setErrors(ee.errors),ee},[d]),J=P.useCallback(ee=>{const ae=c6(ee,d,g.refValues.current);return ae.hasError?m.setFieldError(ee,ae.error):m.clearFieldError(ee),ae},[d]),ne=(ee,{type:ae="input",withError:_e=!0,withFocus:pe=!0,...Se}={})=>{const ye={onChange:R1t(he=>F(ee,he,{forceUpdate:!1})),"data-path":epe(e,ee)};return _e&&(ye.error=m.errorsState[ee]),ae==="checkbox"?ye[t==="controlled"?"checked":"defaultChecked"]=gu(ee,g.refValues.current):ye[t==="controlled"?"value":"defaultValue"]=gu(ee,g.refValues.current),pe&&(ye.onFocus=()=>v.setFieldTouched(ee,!0),ye.onBlur=()=>{if(npe(ee,u)){const he=c6(ee,d,g.refValues.current);he.hasError?m.setFieldError(ee,he.error):m.clearFieldError(ee)}}),Object.assign(ye,f==null?void 0:f({inputProps:ye,field:ee,options:{type:ae,withError:_e,withFocus:pe,...Se},form:Y}))},Z=(ee,ae)=>_e=>{h==="always"&&(_e==null||_e.preventDefault());const pe=Q();if(pe.hasErrors)h==="validation-failed"&&(_e==null||_e.preventDefault()),ae==null||ae(pe.errors,g.refValues.current,_e);else{const Se=ee==null?void 0:ee(c(g.refValues.current),_e);Se instanceof Promise&&(N(!0),Se.finally(()=>N(!1)))}},ie=ee=>c(ee||g.refValues.current),q=P.useCallback(ee=>{ee.preventDefault(),O()},[]),U=P.useCallback(ee=>ee?!c6(ee,d,g.refValues.current).hasError:!_G(d,g.refValues.current).hasErrors,[d]),G=ee=>`${E}-${ee}-${C[ee]||0}`,V=P.useCallback(ee=>document.querySelector(`[data-path="${epe(e,ee)}"]`),[]),Y={watch:w.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:j,setValues:H,setFieldValue:F,submitting:R,setSubmitting:N,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:O,validate:Q,validateField:J,getInputProps:ne,onSubmit:Z,onReset:q,isValid:U,getTransformedValues:ie,key:G,getInputNode:V};return k1t(e,Y),Y}function V1t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function H1t(e){return V1t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function hIe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const q1t=new URLSearchParams(window.location.search),W1t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=q1t.get(r.paramCapture):r.type==="reactive"?s=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?s=Object.fromEntries(r.questionOptions.map(a=>[a,""])):r.type==="slider"&&r.startingValue&&(s=r.startingValue.toString());const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},G1t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?hIe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Y1t(e,t,n){const[r,i]=P.useState(null),s=dIe({initialValues:W1t(e,n),validate:G1t(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function YE(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=hIe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function pIe({horizontal:e,children:t,style:n}){return e?S.jsx(Yr,{mt:Ke(4),gap:"lg",style:n,children:t}):S.jsx(uo,{gap:"md",style:n,children:t})}function K1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(w=>typeof w=="string"?{value:w,label:w}:w),[d,h]=P.useState(!1),[p,m]=P.useState(""),{setOtherText:g}=Tu(),v=bl();P.useEffect(()=>{v(g({key:e.id,value:p}))},[p,e.id,g,v]);const b=P.useMemo(()=>YE(e,n,f),[e,n,f]);return S.jsxs(il.Group,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:s,required:o})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsx(je,{mt:"xs",children:S.jsxs(pIe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(w=>S.jsx(il,{disabled:t,value:w.value,label:w.label},w.value)),c&&S.jsx(il,{disabled:t,value:"__other",checked:d,onClick:w=>h(w.currentTarget.checked),label:l?"Other":S.jsx(Ki,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value)})},"__other")]})}),l&&c&&S.jsx(Ki,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value),w:216})]})}function X1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return S.jsx(ME,{disabled:t,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:YE(e,n,c)})}function Q1t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return S.jsx(Ki.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[r&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&S.jsx(Np,{children:Array.isArray(t.value)?t.value.map(a=>S.jsx(Np.Item,{children:a},a)):S.jsx(Np.Item,{children:t.value})})})}function mIe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[m,g]=P.useState(!1),[v,b]=P.useState(""),{setOtherText:w}=Tu(),E=bl();return P.useEffect(()=>{E(w({key:e.id,value:v}))},[v,e.id,w,E]),S.jsxs(_0.Group,{name:`radioInput${e.id}`,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:o,required:a})})]}),description:f,...n,error:YE(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsxs(Yr,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?S.jsx(lt,{children:l}):null,S.jsxs(pIe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(T=>S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(lt,{size:"sm",children:T.label}),S.jsx(_0,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&S.jsx(lt,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(lt,{size:"sm",children:"Other"}),S.jsx(_0,{disabled:t,value:"other",checked:m,onClick:T=>g(T.currentTarget.checked),label:!d&&S.jsx(Ki,{mt:-8,placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value)}),mt:0})]})]}),S.jsx(lt,{children:c})]}),d&&h&&S.jsx(Ki,{mt:"sm",placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value),w:216})]},e.id)}function J1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return S.jsx(mIe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Z1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return S.jsx(vJ,{disabled:t,placeholder:l,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:YE(e,n)})}const evt="_markLabel_18a7j_1",tvt={markLabel:evt};function nvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,snap:l}=e,[c,f]=P.useMemo(()=>[Math.min(...a.map(h=>h.value)),Math.max(...a.map(h=>h.value))],[a]),d=YE(e,n);return S.jsx(Ki.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:s,required:o})})]}),description:u,error:d,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:S.jsx(DB,{disabled:t,marks:a,min:c,max:f,...n,h:40,mt:4,classNames:{markLabel:tvt.markLabel},restrictToMarks:l,label:h=>l?null:h})})}function rvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(Sy,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:YE(e,n)})}function ivt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(sJ,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:YE(e,n)})}function svt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>S.jsx(il,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function ovt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return S.jsx(_0.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>S.jsx(_0,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function avt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Tu(),a=bl(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),m=l.map(E=>typeof E=="string"?{value:E,label:E}:E),g=(E,T)=>{const C={type:"radio",questionKey:T,val:E,responseId:e.id};a(s(C))},v=(E,T,C)=>{const I=E.target.checked,R={questionKey:T,responseId:e.id,value:C.value,label:C.label,isChecked:I,choiceOptions:p};a(o(R))},b=p.length,w=m.length;return S.jsxs(S.Fragment,{children:[S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(fl,{text:c,required:d})})]}),S.jsx(lt,{c:"dimmed",size:"sm",mt:0,children:f}),S.jsxs(je,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[S.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((E,T)=>S.jsx(lt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:m.map((E,T)=>S.jsx(lt,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:m.map((E,T)=>S.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?S.jsx(ovt,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:g,response:e}):S.jsx(svt,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:v})},`question-${T}`))})]})]})}function uvt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=C1(),c=s1().uiConfig.enumerateQuestions??!1,f=P.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=P.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return P.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),S.jsxs(je,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&S.jsx(Z1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&S.jsx(rvt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&S.jsx(ivt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&S.jsx(J1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&S.jsx(X1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&S.jsx(nvt,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&S.jsx(mIe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&S.jsx(K1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&S.jsx(Q1t,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&S.jsx(avt,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&S.jsx(il,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&S.jsx(OE,{mt:"xl",mb:"xs"})]})}function AF({config:e,location:t,status:n,style:r}){var q;const{storageEngine:i}=ho(),s=bl(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Tu(),c=Ch(),f=Ah(),d=n==null?void 0:n.answer,h=GE(),p=em(),m=e,g=P.useMemo(()=>{var U;return((U=m==null?void 0:m.response)==null?void 0:U.filter(G=>G.location?G.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),v=P.useMemo(()=>g.map(U=>({...U,required:U.required===void 0?!0:U.required})),[g]),b=Y1t(v,c,d||{}),[w,E]=P.useState(void 0),T=yi(U=>U.reactiveAnswers),C=yi(U=>U.reactiveProvenance),I=yi(U=>U.matrixAnswers),R=(m==null?void 0:m.provideFeedback)&&(((q=m==null?void 0:m.correctAnswer)==null?void 0:q.length)||0)>0,N=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[O,L]=P.useState(0),j=(m==null?void 0:m.trainingAttempts)||2,[F,H]=P.useState(!1),Q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");P.useEffect(()=>{const U=v.find(G=>G.type==="reactive");if(T&&U){const G=U.id;b.setValues({...b.values,[G]:T[G]})}},[T]),P.useEffect(()=>{C&&E(C)},[C]),P.useEffect(()=>{const U=v.filter(G=>G.type==="matrix-radio"||G.type==="matrix-checkbox");if(I&&U.length>0){const G={...b.values};U.forEach(V=>{const{id:Y}=V;G[Y]={...b.getInputProps(Y).value,...I[Y]}}),b.setValues(G)}},[I]),P.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:By(b.values),provenanceGraph:w}))},[b.values,f,c,t,s,o,w]);const[J,ne]=P.useState(Object.fromEntries(v.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Z=(U,G,V,Y,ee)=>{ne(ae=>({...ae,[U]:{visible:G,title:V,message:Y,color:ee}}))},ie=()=>{const U=O+1;L(U);const G=Object.fromEntries(v.map(V=>{var ae,_e;const Y=(_e=(ae=m.correctAnswer)==null?void 0:ae.find(pe=>pe.id===V.id))==null?void 0:_e.answer,ee=b.values[V.id];return[V.id,Array.isArray(ee)?typeof Y=="string"?ee.length===1&&Y===ee[0]:ee.length===Y.length&&ee.every(pe=>Y.includes(pe)):Y===ee]}));R&&(v.forEach(V=>{var Y;if(G[V.id]&&!((Y=J[V.id])!=null&&Y.message.includes("You've failed to answer this question correctly")))Z(V.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:V.id,answer:b.values[V.id]}));let ee="";j===-1?ee="Please try again.":U>=j?(ee=`You didn't answer this question correctly after ${j} attempts. ${N?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!N&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):j-U===1?ee="Please try again. You have 1 attempt left.":ee=`Please try again. You have ${j-U} attempts left.`,Z(V.id,!0,"Incorrect Answer",ee,"red")}}),H(N&&U>=j||Object.values(G).every(V=>V)&&U<=j))};return S.jsxs("div",{style:r,children:[v.map((U,G)=>{var Y,ee;const V=(ee=(Y=m.correctAnswer)==null?void 0:Y.find(ae=>ae.id===U.id))==null?void 0:ee.answer;return S.jsx(fi.Fragment,{children:U.hidden?"":S.jsxs(S.Fragment,{children:[S.jsx(uvt,{storedAnswer:d,answer:{...b.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:G+1,configInUse:m,form:b}),J[U.id].visible&&S.jsxs(My,{mb:"md",title:J[U.id].title,color:J[U.id].color,children:[J[U.id].message," ",J[U.id].message.includes("Please try again")&&S.jsxs(S.Fragment,{children:[S.jsx("br",{}),S.jsx("br",{}),"If you're unsure"," ",S.jsx(PE,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),S.jsx("br",{}),S.jsx("br",{}),O>=j&&j>=0&&V&&` The correct answer was: ${V}.`]})]})},`${U.id}-${c}`)}),S.jsxs(Yr,{justify:"right",gap:"xs",children:[R&&Q&&S.jsx(gn,{onClick:()=>ie(),disabled:!b.isValid()||O>=j&&j>=0,children:"Check Answer"}),Q&&S.jsx(C1t,{disabled:R&&!F||!b.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const oR="@REVISIT_COMMS",lvt={minHeight:"500px",width:"100%",border:0};function cvt({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Tu(),r=bl(),i=zAe(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ah(),u=P.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${oR}/${l}`,iframeId:o,message:c},"*")},[s,o]);return P.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${oR}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${oR}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${oR}/ANSWERS`:r(t(f.message));break;case`${oR}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),S.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Ha}${e.path}?trialid=${a}&id=${o}`,style:lvt})}async function Pee(e){const n=await(await fetch(`${Ha}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function fvt(e){const t=await fetch(`${Ha}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Ob({email:e,path:t}){const n=Sh();return S.jsxs(Qy,{fluid:!0,my:50,maw:800,mx:"auto",children:[S.jsx(oo,{order:2,children:S.jsx(lt,{span:!0,c:"orange",children:"404"})}),S.jsxs(lt,{children:[S.jsx(lt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),S.jsx(rd,{h:"lg"}),S.jsxs(Np,{children:[S.jsx(Np.Item,{children:S.jsx(lt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),S.jsx(Np.Item,{children:S.jsxs(lt,{children:["If you're a participant, please contact the study administrator"," ",e&&S.jsxs(S.Fragment,{children:["at"," ",S.jsxs(PE,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const dvt={maxWidth:"100%"};function hvt({currentConfig:e}){const t={...dvt,...e.style},[n,r]=P.useState(!0),[i,s]=P.useState(!1);return P.useEffect(()=>{async function o(){const a=await Pee(e.path);s(!!a),r(!1)}o()},[e]),n||i?S.jsx(vx,{mx:"auto",src:`${Ha}${e.path}`,style:t}):S.jsx(Ob,{path:e.path})}function jy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pvt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tI(e){let t,n,r;e.length!==2?(t=jy,n=(a,u)=>jy(e(a),u),r=(a,u)=>e(a)-u):(t=e===jy||e===pvt?e:mvt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function mvt(){return 0}function gIe(e){return e===null?NaN:+e}function*gvt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const yIe=tI(jy),Mb=yIe.right,yvt=yIe.left;tI(gIe).center;function vvt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function bvt(e,t){const n=vvt(e,t);return n&&Math.sqrt(n)}function VN(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Yl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class rpe extends Map{constructor(t,n=xIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(wG(this,t))}has(t){return super.has(wG(this,t))}set(t,n){return super.set(vIe(this,t),n)}delete(t){return super.delete(bIe(this,t))}}class IF extends Set{constructor(t,n=xIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(wG(this,t))}add(t){return super.add(vIe(this,t))}delete(t){return super.delete(bIe(this,t))}}function wG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function vIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function bIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function xIe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xvt(e,t){return Array.from(t,n=>e[n])}function _vt(e=jy){if(e===jy)return _Ie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function _Ie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wvt=Math.sqrt(50),Evt=Math.sqrt(10),Svt=Math.sqrt(2);function kF(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=wvt?10:s>=Evt?5:s>=Svt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?kF(e,t,n*2):[a,u,l]}function EG(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?kF(t,e,n):kF(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function SG(e,t,n){return t=+t,e=+e,n=+n,kF(e,t,n)[2]}function Lb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?SG(t,e,n):SG(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Uy(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function TG(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function wIe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?_Ie:_vt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));wIe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(aR(e,n,t),i(e[r],s)>0&&aR(e,n,r);o<a;){for(aR(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?aR(e,n,a):(++a,aR(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function aR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function CG(e,t,n){if(e=Float64Array.from(gvt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return TG(e);if(t>=1)return Uy(e);var r,i=(r-1)*t,s=Math.floor(i),o=Uy(wIe(e,s).subarray(0,s+1)),a=TG(e.subarray(s+1));return o+(a-o)*(i-s)}}function EIe(e,t,n=gIe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Tvt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function SIe(e,t){return CG(e,.5,t)}function*Cvt(e){for(const t of e)yield*t}function TIe(e){return Array.from(Cvt(e))}function Wc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function CIe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Avt(e,...t){e=new IF(e),t=t.map(Ivt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Ivt(e){return e instanceof IF?e:new IF(e)}function kvt(...e){const t=new IF;for(const n of e)for(const r of n)t.add(r);return t}var Rvt={value:()=>{}};function x9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new e$(n)}function e$(e){this._=e}function Dvt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}e$.prototype=x9.prototype={constructor:e$,on:function(e,t){var n=this._,r=Dvt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Nvt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=ipe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ipe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new e$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Nvt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ipe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Rvt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var AG="http://www.w3.org/1999/xhtml";const spe={svg:"http://www.w3.org/2000/svg",xhtml:AG,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),spe.hasOwnProperty(t)?{space:spe[t],local:e}:e}function Pvt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===AG&&t.documentElement.namespaceURI===AG?t.createElement(e):t.createElementNS(n,e)}}function Ovt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function AIe(e){var t=_9(e);return(t.local?Ovt:Pvt)(t)}function Mvt(){}function Oee(e){return e==null?Mvt:function(){return this.querySelector(e)}}function Lvt(e){typeof e!="function"&&(e=Oee(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xl(r,this._parents)}function IIe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $vt(){return[]}function kIe(e){return e==null?$vt:function(){return this.querySelectorAll(e)}}function Fvt(e){return function(){return IIe(e.apply(this,arguments))}}function Bvt(e){typeof e=="function"?e=Fvt(e):e=kIe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xl(r,i)}function RIe(e){return function(){return this.matches(e)}}function DIe(e){return function(t){return t.matches(e)}}var jvt=Array.prototype.find;function Uvt(e){return function(){return jvt.call(this.children,e)}}function zvt(){return this.firstElementChild}function Vvt(e){return this.select(e==null?zvt:Uvt(typeof e=="function"?e:DIe(e)))}var Hvt=Array.prototype.filter;function qvt(){return Array.from(this.children)}function Wvt(e){return function(){return Hvt.call(this.children,e)}}function Gvt(e){return this.selectAll(e==null?qvt:Wvt(typeof e=="function"?e:DIe(e)))}function Yvt(e){typeof e!="function"&&(e=RIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xl(r,this._parents)}function NIe(e){return new Array(e.length)}function Kvt(){return new Xl(this._enter||this._groups.map(NIe),this._parents)}function RF(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}RF.prototype={constructor:RF,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xvt(e){return function(){return e}}function Qvt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new RF(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Jvt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new RF(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Zvt(e){return e.__data__}function ebt(e,t){if(!arguments.length)return Array.from(this,Zvt);var n=t?Jvt:Qvt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Xvt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=tbt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),v=u[l]=new Array(d);n(c,f,m,g,v,h,t);for(var b=0,w=0,E,T;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(T=g[w])&&++w<p;);E._next=T||null}}return o=new Xl(o,r),o._enter=a,o._exit=u,o}function tbt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nbt(){return new Xl(this._exit||this._groups.map(NIe),this._parents)}function rbt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ibt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xl(a,this._parents)}function sbt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function obt(e){e||(e=abt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xl(i,this._parents).order()}function abt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ubt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lbt(){return Array.from(this)}function cbt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function fbt(){let e=0;for(const t of this)++e;return e}function dbt(){return!this.node()}function hbt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function pbt(e){return function(){this.removeAttribute(e)}}function mbt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gbt(e,t){return function(){this.setAttribute(e,t)}}function ybt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vbt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bbt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xbt(e,t){var n=_9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?mbt:pbt:typeof t=="function"?n.local?bbt:vbt:n.local?ybt:gbt)(n,t))}function PIe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _bt(e){return function(){this.style.removeProperty(e)}}function wbt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ebt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Sbt(e,t,n){return arguments.length>1?this.each((t==null?_bt:typeof t=="function"?Ebt:wbt)(e,t,n??"")):AC(this.node(),e)}function AC(e,t){return e.style.getPropertyValue(t)||PIe(e).getComputedStyle(e,null).getPropertyValue(t)}function Tbt(e){return function(){delete this[e]}}function Cbt(e,t){return function(){this[e]=t}}function Abt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ibt(e,t){return arguments.length>1?this.each((t==null?Tbt:typeof t=="function"?Abt:Cbt)(e,t)):this.node()[e]}function OIe(e){return e.trim().split(/^|\s+/)}function Mee(e){return e.classList||new MIe(e)}function MIe(e){this._node=e,this._names=OIe(e.getAttribute("class")||"")}MIe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function LIe(e,t){for(var n=Mee(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function $Ie(e,t){for(var n=Mee(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function kbt(e){return function(){LIe(this,e)}}function Rbt(e){return function(){$Ie(this,e)}}function Dbt(e,t){return function(){(t.apply(this,arguments)?LIe:$Ie)(this,e)}}function Nbt(e,t){var n=OIe(e+"");if(arguments.length<2){for(var r=Mee(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Dbt:t?kbt:Rbt)(n,t))}function Pbt(){this.textContent=""}function Obt(e){return function(){this.textContent=e}}function Mbt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lbt(e){return arguments.length?this.each(e==null?Pbt:(typeof e=="function"?Mbt:Obt)(e)):this.node().textContent}function $bt(){this.innerHTML=""}function Fbt(e){return function(){this.innerHTML=e}}function Bbt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function jbt(e){return arguments.length?this.each(e==null?$bt:(typeof e=="function"?Bbt:Fbt)(e)):this.node().innerHTML}function Ubt(){this.nextSibling&&this.parentNode.appendChild(this)}function zbt(){return this.each(Ubt)}function Vbt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hbt(){return this.each(Vbt)}function qbt(e){var t=typeof e=="function"?e:AIe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wbt(){return null}function Gbt(e,t){var n=typeof e=="function"?e:AIe(e),r=t==null?Wbt:typeof t=="function"?t:Oee(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ybt(){var e=this.parentNode;e&&e.removeChild(this)}function Kbt(){return this.each(Ybt)}function Xbt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qbt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jbt(e){return this.select(e?Qbt:Xbt)}function Zbt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ext(e){return function(t){e.call(this,t,this.__data__)}}function txt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nxt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function rxt(e,t,n){return function(){var r=this.__on,i,s=ext(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ixt(e,t,n){var r=txt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?rxt:nxt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function FIe(e,t,n){var r=PIe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function sxt(e,t){return function(){return FIe(this,e,t)}}function oxt(e,t){return function(){return FIe(this,e,t.apply(this,arguments))}}function axt(e,t){return this.each((typeof t=="function"?oxt:sxt)(e,t))}function*uxt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Lee=[null];function Xl(e,t){this._groups=e,this._parents=t}function w3(){return new Xl([[document.documentElement]],Lee)}function lxt(){return this}Xl.prototype=w3.prototype={constructor:Xl,select:Lvt,selectAll:Bvt,selectChild:Vvt,selectChildren:Gvt,filter:Yvt,data:ebt,enter:Kvt,exit:nbt,join:rbt,merge:ibt,selection:lxt,order:sbt,sort:obt,call:ubt,nodes:lbt,node:cbt,size:fbt,empty:dbt,each:hbt,attr:xbt,style:Sbt,property:Ibt,classed:Nbt,text:Lbt,html:jbt,raise:zbt,lower:Hbt,append:qbt,insert:Gbt,remove:Kbt,clone:Jbt,datum:Zbt,on:ixt,dispatch:axt,[Symbol.iterator]:uxt};function si(e){return typeof e=="string"?new Xl([[document.querySelector(e)]],[document.documentElement]):new Xl([[e]],Lee)}function cxt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function DF(e,t){if(e=cxt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function BIe(e){return typeof e=="string"?new Xl([document.querySelectorAll(e)],[document.documentElement]):new Xl([IIe(e)],Lee)}const IG={capture:!0,passive:!1};function kG(e){e.preventDefault(),e.stopImmediatePropagation()}function fxt(e){var t=e.document.documentElement,n=si(e).on("dragstart.drag",kG,IG);"onselectstart"in t?n.on("selectstart.drag",kG,IG):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function dxt(e,t){var n=e.document.documentElement,r=si(e).on("dragstart.drag",null);t&&(r.on("click.drag",kG,IG),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function nI(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function E3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Sx(){}var eE=.7,IC=1/eE,V2="\\s*([+-]?\\d+)\\s*",HN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",T0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hxt=/^#([0-9a-f]{3,8})$/,pxt=new RegExp(`^rgb\\(${V2},${V2},${V2}\\)$`),mxt=new RegExp(`^rgb\\(${T0},${T0},${T0}\\)$`),gxt=new RegExp(`^rgba\\(${V2},${V2},${V2},${HN}\\)$`),yxt=new RegExp(`^rgba\\(${T0},${T0},${T0},${HN}\\)$`),vxt=new RegExp(`^hsl\\(${HN},${T0},${T0}\\)$`),bxt=new RegExp(`^hsla\\(${HN},${T0},${T0},${HN}\\)$`),ope={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nI(Sx,tE,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ape,formatHex:ape,formatHex8:xxt,formatHsl:_xt,formatRgb:upe,toString:upe});function ape(){return this.rgb().formatHex()}function xxt(){return this.rgb().formatHex8()}function _xt(){return jIe(this).formatHsl()}function upe(){return this.rgb().formatRgb()}function tE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hxt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lpe(t):n===3?new $a(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pxt.exec(e))?new $a(t[1],t[2],t[3],1):(t=mxt.exec(e))?new $a(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gxt.exec(e))?f6(t[1],t[2],t[3],t[4]):(t=yxt.exec(e))?f6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vxt.exec(e))?dpe(t[1],t[2]/100,t[3]/100,1):(t=bxt.exec(e))?dpe(t[1],t[2]/100,t[3]/100,t[4]):ope.hasOwnProperty(e)?lpe(ope[e]):e==="transparent"?new $a(NaN,NaN,NaN,0):null}function lpe(e){return new $a(e>>16&255,e>>8&255,e&255,1)}function f6(e,t,n,r){return r<=0&&(e=t=n=NaN),new $a(e,t,n,r)}function $ee(e){return e instanceof Sx||(e=tE(e)),e?(e=e.rgb(),new $a(e.r,e.g,e.b,e.opacity)):new $a}function $b(e,t,n,r){return arguments.length===1?$ee(e):new $a(e,t,n,r??1)}function $a(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}nI($a,$b,E3(Sx,{brighter(e){return e=e==null?IC:Math.pow(IC,e),new $a(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eE:Math.pow(eE,e),new $a(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $a(Fw(this.r),Fw(this.g),Fw(this.b),NF(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cpe,formatHex:cpe,formatHex8:wxt,formatRgb:fpe,toString:fpe}));function cpe(){return`#${Ew(this.r)}${Ew(this.g)}${Ew(this.b)}`}function wxt(){return`#${Ew(this.r)}${Ew(this.g)}${Ew(this.b)}${Ew((isNaN(this.opacity)?1:this.opacity)*255)}`}function fpe(){const e=NF(this.opacity);return`${e===1?"rgb(":"rgba("}${Fw(this.r)}, ${Fw(this.g)}, ${Fw(this.b)}${e===1?")":`, ${e})`}`}function NF(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ew(e){return e=Fw(e),(e<16?"0":"")+e.toString(16)}function dpe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xp(e,t,n,r)}function jIe(e){if(e instanceof xp)return new xp(e.h,e.s,e.l,e.opacity);if(e instanceof Sx||(e=tE(e)),!e)return new xp;if(e instanceof xp)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new xp(o,a,u,e.opacity)}function PF(e,t,n,r){return arguments.length===1?jIe(e):new xp(e,t,n,r??1)}function xp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nI(xp,PF,E3(Sx,{brighter(e){return e=e==null?IC:Math.pow(IC,e),new xp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eE:Math.pow(eE,e),new xp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new $a(bV(e>=240?e-240:e+120,i,r),bV(e,i,r),bV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new xp(hpe(this.h),d6(this.s),d6(this.l),NF(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=NF(this.opacity);return`${e===1?"hsl(":"hsla("}${hpe(this.h)}, ${d6(this.s)*100}%, ${d6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hpe(e){return e=(e||0)%360,e<0?e+360:e}function d6(e){return Math.max(0,Math.min(1,e||0))}function bV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UIe=Math.PI/180,zIe=180/Math.PI,OF=18,VIe=.96422,HIe=1,qIe=.82521,WIe=4/29,H2=6/29,GIe=3*H2*H2,Ext=H2*H2*H2;function YIe(e){if(e instanceof C0)return new C0(e.l,e.a,e.b,e.opacity);if(e instanceof Iy)return KIe(e);e instanceof $a||(e=$ee(e));var t=EV(e.r),n=EV(e.g),r=EV(e.b),i=xV((.2225045*t+.7168786*n+.0606169*r)/HIe),s,o;return t===n&&n===r?s=o=i:(s=xV((.4360747*t+.3850649*n+.1430804*r)/VIe),o=xV((.0139322*t+.0971045*n+.7141733*r)/qIe)),new C0(116*i-16,500*(s-i),200*(i-o),e.opacity)}function MF(e,t,n,r){return arguments.length===1?YIe(e):new C0(e,t,n,r??1)}function C0(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}nI(C0,MF,E3(Sx,{brighter(e){return new C0(this.l+OF*(e??1),this.a,this.b,this.opacity)},darker(e){return new C0(this.l-OF*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=VIe*_V(t),e=HIe*_V(e),n=qIe*_V(n),new $a(wV(3.1338561*t-1.6168667*e-.4906146*n),wV(-.9787684*t+1.9161415*e+.033454*n),wV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function xV(e){return e>Ext?Math.pow(e,1/3):e/GIe+WIe}function _V(e){return e>H2?e*e*e:GIe*(e-WIe)}function wV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function EV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Sxt(e){if(e instanceof Iy)return new Iy(e.h,e.c,e.l,e.opacity);if(e instanceof C0||(e=YIe(e)),e.a===0&&e.b===0)return new Iy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*zIe;return new Iy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function LF(e,t,n,r){return arguments.length===1?Sxt(e):new Iy(e,t,n,r??1)}function Iy(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function KIe(e){if(isNaN(e.h))return new C0(e.l,0,0,e.opacity);var t=e.h*UIe;return new C0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}nI(Iy,LF,E3(Sx,{brighter(e){return new Iy(this.h,this.c,this.l+OF*(e??1),this.opacity)},darker(e){return new Iy(this.h,this.c,this.l-OF*(e??1),this.opacity)},rgb(){return KIe(this).rgb()}}));var XIe=-.14861,Fee=1.78277,Bee=-.29227,w9=-.90649,qN=1.97294,ppe=qN*w9,mpe=qN*Fee,gpe=Fee*Bee-w9*XIe;function Txt(e){if(e instanceof Bw)return new Bw(e.h,e.s,e.l,e.opacity);e instanceof $a||(e=$ee(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(gpe*r+ppe*t-mpe*n)/(gpe+ppe-mpe),s=r-i,o=(qN*(n-i)-Bee*s)/w9,a=Math.sqrt(o*o+s*s)/(qN*i*(1-i)),u=a?Math.atan2(o,s)*zIe-120:NaN;return new Bw(u<0?u+360:u,a,i,e.opacity)}function RG(e,t,n,r){return arguments.length===1?Txt(e):new Bw(e,t,n,r??1)}function Bw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nI(Bw,RG,E3(Sx,{brighter(e){return e=e==null?IC:Math.pow(IC,e),new Bw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eE:Math.pow(eE,e),new Bw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*UIe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new $a(255*(t+n*(XIe*r+Fee*i)),255*(t+n*(Bee*r+w9*i)),255*(t+n*(qN*r)),this.opacity)}}));function QIe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function JIe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return QIe((n-r/t)*t,o,i,s,a)}}function ZIe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return QIe((n-r/t)*t,i,s,o,a)}}const E9=e=>()=>e;function eke(e,t){return function(n){return e+n*t}}function Cxt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function S9(e,t){var n=t-e;return n?eke(e,n>180||n<-180?n-360*Math.round(n/360):n):E9(isNaN(e)?t:e)}function Axt(e){return(e=+e)==1?Fa:function(t,n){return n-t?Cxt(t,n,e):E9(isNaN(t)?n:t)}}function Fa(e,t){var n=t-e;return n?eke(e,n):E9(isNaN(e)?t:e)}const WN=function e(t){var n=Axt(t);function r(i,s){var o=n((i=$b(i)).r,(s=$b(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Fa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function tke(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=$b(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Ixt=tke(JIe),kxt=tke(ZIe);function jee(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function nke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rxt(e,t){return(nke(t)?jee:rke)(e,t)}function rke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=A1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ike(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ske(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=A1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var DG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SV=new RegExp(DG.source,"g");function Dxt(e){return function(){return e}}function Nxt(e){return function(t){return e(t)+""}}function Uee(e,t){var n=DG.lastIndex=SV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=DG.exec(e))&&(i=SV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Qd(r,i)})),n=SV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Nxt(u[0].x):Dxt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function A1(e,t){var n=typeof t,r;return t==null||n==="boolean"?E9(t):(n==="number"?Qd:n==="string"?(r=tE(t))?(t=r,WN):Uee:t instanceof tE?WN:t instanceof Date?ike:nke(t)?jee:Array.isArray(t)?rke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ske:Qd)(e,t)}function Pxt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Oxt(e,t){var n=S9(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function S3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ype=180/Math.PI,NG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oke(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ype,skewX:Math.atan(u)*ype,scaleX:o,scaleY:a}}var h6;function Mxt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?NG:oke(t.a,t.b,t.c,t.d,t.e,t.f)}function Lxt(e){return e==null||(h6||(h6=document.createElementNS("http://www.w3.org/2000/svg","g")),h6.setAttribute("transform",e),!(e=h6.transform.baseVal.consolidate()))?NG:(e=e.matrix,oke(e.a,e.b,e.c,e.d,e.e,e.f))}function ake(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Qd(l,f)},{i:m-2,x:Qd(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Qd(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Qd(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Qd(l,f)},{i:m-2,x:Qd(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var uke=ake(Mxt,"px, ","px)","deg)"),lke=ake(Lxt,", ",")",")"),$xt=1e-12;function vpe(e){return((e=Math.exp(e))+1/e)/2}function Fxt(e){return((e=Math.exp(e))-1/e)/2}function Bxt(e){return((e=Math.exp(2*e))-1)/(e+1)}const jxt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,v;if(m<$xt)v=Math.log(d/l)/t,g=function(I){return[a+I*h,u+I*p,l*Math.exp(t*I*v)]};else{var b=Math.sqrt(m),w=(d*d-l*l+r*m)/(2*l*n*b),E=(d*d-l*l-r*m)/(2*d*n*b),T=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(E*E+1)-E);v=(C-T)/t,g=function(I){var R=I*v,N=vpe(T),O=l/(n*b)*(N*Bxt(t*R+T)-Fxt(T));return[a+O*h,u+O*p,l*N/vpe(t*R+T)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function cke(e){return function(t,n){var r=e((t=PF(t)).h,(n=PF(n)).h),i=Fa(t.s,n.s),s=Fa(t.l,n.l),o=Fa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Uxt=cke(S9);var zxt=cke(Fa);function Vxt(e,t){var n=Fa((e=MF(e)).l,(t=MF(t)).l),r=Fa(e.a,t.a),i=Fa(e.b,t.b),s=Fa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function fke(e){return function(t,n){var r=e((t=LF(t)).h,(n=LF(n)).h),i=Fa(t.c,n.c),s=Fa(t.l,n.l),o=Fa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Hxt=fke(S9);var qxt=fke(Fa);function dke(e){return function t(n){n=+n;function r(i,s){var o=e((i=RG(i)).h,(s=RG(s)).h),a=Fa(i.s,s.s),u=Fa(i.l,s.l),l=Fa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Wxt=dke(S9);var Gxt=dke(Fa);function zee(e,t){t===void 0&&(t=e,e=A1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Yxt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Kxt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:A1,interpolateArray:Rxt,interpolateBasis:JIe,interpolateBasisClosed:ZIe,interpolateCubehelix:Wxt,interpolateCubehelixLong:Gxt,interpolateDate:ike,interpolateDiscrete:Pxt,interpolateHcl:Hxt,interpolateHclLong:qxt,interpolateHsl:Uxt,interpolateHslLong:zxt,interpolateHue:Oxt,interpolateLab:Vxt,interpolateNumber:Qd,interpolateNumberArray:jee,interpolateObject:ske,interpolateRgb:WN,interpolateRgbBasis:Ixt,interpolateRgbBasisClosed:kxt,interpolateRound:S3,interpolateString:Uee,interpolateTransformCss:uke,interpolateTransformSvg:lke,interpolateZoom:jxt,piecewise:zee,quantize:Yxt},Symbol.toStringTag,{value:"Module"}));var kC=0,eD=0,uR=0,hke=1e3,$F,tD,FF=0,nE=0,T9=0,GN=typeof performance=="object"&&performance.now?performance:Date,pke=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function C9(){return nE||(pke(Xxt),nE=GN.now()+T9)}function Xxt(){nE=0}function YN(){this._call=this._time=this._next=null}YN.prototype=Vee.prototype={constructor:YN,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?C9():+n)+(t==null?0:+t),!this._next&&tD!==this&&(tD?tD._next=this:$F=this,tD=this),this._call=e,this._time=n,PG()},stop:function(){this._call&&(this._call=null,this._time=1/0,PG())}};function Vee(e,t,n){var r=new YN;return r.restart(e,t,n),r}function Qxt(){C9(),++kC;for(var e=$F,t;e;)(t=nE-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kC}function bpe(){nE=(FF=GN.now())+T9,kC=eD=0;try{Qxt()}finally{kC=0,Zxt(),nE=0}}function Jxt(){var e=GN.now(),t=e-FF;t>hke&&(T9-=t,FF=e)}function Zxt(){for(var e,t=$F,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:$F=n);tD=e,PG(r)}function PG(e){if(!kC){eD&&(eD=clearTimeout(eD));var t=e-nE;t>24?(e<1/0&&(eD=setTimeout(bpe,e-GN.now()-T9)),uR&&(uR=clearInterval(uR))):(uR||(FF=GN.now(),uR=setInterval(Jxt,hke)),kC=1,pke(bpe))}}function xpe(e,t,n){var r=new YN;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function e_t(e,t,n){var r=new YN,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?C9():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var t_t=x9("start","end","cancel","interrupt"),n_t=[],mke=0,_pe=1,OG=2,t$=3,wpe=4,MG=5,n$=6;function A9(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;r_t(e,n,{name:t,index:r,group:i,on:t_t,tween:n_t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:mke})}function Hee(e,t){var n=nm(e,t);if(n.state>mke)throw new Error("too late; already scheduled");return n}function ug(e,t){var n=nm(e,t);if(n.state>t$)throw new Error("too late; already running");return n}function nm(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function r_t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Vee(s,0,n.time);function s(l){n.state=_pe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==_pe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===t$)return xpe(o);h.state===wpe?(h.state=n$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=n$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(xpe(function(){n.state===t$&&(n.state=wpe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=OG,n.on.call("start",e,e.__data__,n.index,n.group),n.state===OG){for(n.state=t$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=MG,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===MG&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=n$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function LG(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>OG&&r.state<MG,r.state=n$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function i_t(e){return this.each(function(){LG(this,e)})}function s_t(e,t){var n,r;return function(){var i=ug(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function o_t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ug(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function a_t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nm(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?s_t:o_t)(n,e,t))}function qee(e,t,n){var r=e._id;return e.each(function(){var i=ug(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return nm(i,r).value[t]}}function gke(e,t){var n;return(typeof t=="number"?Qd:t instanceof tE?WN:(n=tE(t))?(t=n,WN):Uee)(e,t)}function u_t(e){return function(){this.removeAttribute(e)}}function l_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function c_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function f_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function d_t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function h_t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function p_t(e,t){var n=_9(e),r=n==="transform"?lke:gke;return this.attrTween(e,typeof t=="function"?(n.local?h_t:d_t)(n,r,qee(this,"attr."+e,t)):t==null?(n.local?l_t:u_t)(n):(n.local?f_t:c_t)(n,r,t))}function m_t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function g_t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function y_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&g_t(e,s)),n}return i._value=t,i}function v_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&m_t(e,s)),n}return i._value=t,i}function b_t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_9(e);return this.tween(n,(r.local?y_t:v_t)(r,t))}function x_t(e,t){return function(){Hee(this,e).delay=+t.apply(this,arguments)}}function __t(e,t){return t=+t,function(){Hee(this,e).delay=t}}function w_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?x_t:__t)(t,e)):nm(this.node(),t).delay}function E_t(e,t){return function(){ug(this,e).duration=+t.apply(this,arguments)}}function S_t(e,t){return t=+t,function(){ug(this,e).duration=t}}function T_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?E_t:S_t)(t,e)):nm(this.node(),t).duration}function C_t(e,t){if(typeof t!="function")throw new Error;return function(){ug(this,e).ease=t}}function A_t(e){var t=this._id;return arguments.length?this.each(C_t(t,e)):nm(this.node(),t).ease}function I_t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ug(this,e).ease=n}}function k_t(e){if(typeof e!="function")throw new Error;return this.each(I_t(this._id,e))}function R_t(e){typeof e!="function"&&(e=RIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new o1(r,this._parents,this._name,this._id)}function D_t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new o1(o,this._parents,this._name,this._id)}function N_t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function P_t(e,t,n){var r,i,s=N_t(t)?Hee:ug;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function O_t(e,t){var n=this._id;return arguments.length<2?nm(this.node(),n).on.on(e):this.each(P_t(n,e,t))}function M_t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function L_t(){return this.on("end.remove",M_t(this._id))}function $_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Oee(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,A9(l[d],t,n,d,l,nm(c,n)));return new o1(s,this._parents,t,n)}function F_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kIe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=nm(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&A9(h,t,n,m,d,p);s.push(d),o.push(c)}return new o1(s,o,t,n)}var B_t=w3.prototype.constructor;function j_t(){return new B_t(this._groups,this._parents)}function U_t(e,t){var n,r,i;return function(){var s=AC(this,e),o=(this.style.removeProperty(e),AC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function yke(e){return function(){this.style.removeProperty(e)}}function z_t(e,t,n){var r,i=n+"",s;return function(){var o=AC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function V_t(e,t,n){var r,i,s;return function(){var o=AC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),AC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function H_t(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=ug(this,e),l=u.on,c=u.value[s]==null?a||(a=yke(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function q_t(e,t,n){var r=(e+="")=="transform"?uke:gke;return t==null?this.styleTween(e,U_t(e,r)).on("end.style."+e,yke(e)):typeof t=="function"?this.styleTween(e,V_t(e,r,qee(this,"style."+e,t))).each(H_t(this._id,e)):this.styleTween(e,z_t(e,r,t),n).on("end.style."+e,null)}function W_t(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function G_t(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&W_t(e,o,n)),r}return s._value=t,s}function Y_t(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,G_t(e,t,n??""))}function K_t(e){return function(){this.textContent=e}}function X_t(e){return function(){var t=e(this);this.textContent=t??""}}function Q_t(e){return this.tween("text",typeof e=="function"?X_t(qee(this,"text",e)):K_t(e==null?"":e+""))}function J_t(e){return function(t){this.textContent=e.call(this,t)}}function Z_t(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&J_t(i)),t}return r._value=e,r}function ewt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Z_t(e))}function twt(){for(var e=this._name,t=this._id,n=vke(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=nm(u,t);A9(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new o1(r,this._parents,e,n)}function nwt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=ug(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var rwt=0;function o1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vke(){return++rwt}var Jg=w3.prototype;o1.prototype={constructor:o1,select:$_t,selectAll:F_t,selectChild:Jg.selectChild,selectChildren:Jg.selectChildren,filter:R_t,merge:D_t,selection:j_t,transition:twt,call:Jg.call,nodes:Jg.nodes,node:Jg.node,size:Jg.size,empty:Jg.empty,each:Jg.each,on:O_t,attr:p_t,attrTween:b_t,style:q_t,styleTween:Y_t,text:Q_t,textTween:ewt,remove:L_t,tween:a_t,delay:w_t,duration:T_t,ease:A_t,easeVarying:k_t,end:nwt,[Symbol.iterator]:Jg[Symbol.iterator]};const iwt=e=>+e;function swt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var owt={time:null,delay:0,duration:250,ease:swt};function awt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uwt(e){var t,n;e instanceof o1?(t=e._id,e=e._name):(t=vke(),(n=owt).time=C9(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&A9(u,e,t,l,o,n||awt(u,t));return new o1(r,this._parents,e,t)}w3.prototype.interrupt=i_t;w3.prototype.transition=uwt;const TV=e=>()=>e;function lwt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function cwt(e){e.stopImmediatePropagation()}function CV(e){e.preventDefault(),e.stopImmediatePropagation()}var Epe={name:"drag"},AV={name:"space"},$T={name:"handle"},FT={name:"center"};const{abs:Spe,max:Vu,min:Hu}=Math;function Tpe(e){return[+e[0],+e[1]]}function $G(e){return[Tpe(e[0]),Tpe(e[1])]}var r$={name:"x",handles:["w","e"].map(KN),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},i$={name:"y",handles:["n","s"].map(KN),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},fwt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(KN),input:function(e){return e==null?null:$G(e)},output:function(e){return e}},Zg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cpe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ape={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},dwt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hwt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function KN(e){return{type:e}}function pwt(e){return!e.ctrlKey&&!e.button}function mwt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function gwt(){return navigator.maxTouchPoints||"ontouchstart"in this}function IV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function ywt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function bke(){return Wee(r$)}function xke(){return Wee(i$)}function _ke(){return Wee(fwt)}function Wee(e){var t=mwt,n=pwt,r=gwt,i=!0,s=x9("start","brush","end"),o=6,a;function u(g){var v=g.property("__brush",m).selectAll(".overlay").data([KN("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Zg.overlay).merge(v).each(function(){var w=IV(this).extent;si(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([KN("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Zg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Zg[w.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,v,b){g.tween?g.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,E=w.__brush,T=c(w,arguments),C=E.selection,I=e.input(typeof v=="function"?v.apply(this,arguments):v,E.extent),R=A1(C,I);function N(O){E.selection=O===1&&I===null?null:R(O),l.call(w),T.brush()}return C!==null&&I!==null?N:N(1)}):g.each(function(){var w=this,E=arguments,T=w.__brush,C=e.input(typeof v=="function"?v.apply(w,E):v,T.extent),I=c(w,E).beforestart();LG(w),T.selection=C===null?null:C,l.call(w),I.start(b).brush(b).end(b)})},u.clear=function(g,v){u.move(g,null,v)};function l(){var g=si(this),v=IV(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,v,b){var w=g.__brush.emitter;return w&&(!b||!w.clean)?w:new f(g,v,b)}function f(g,v,b){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,b){var w=si(this.that).datum();s.call(g,this.that,new lwt(g,{sourceEvent:v,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var v=this,b=g.target.__data__.type,w=(i&&g.metaKey?b="overlay":b)==="selection"?Epe:i&&g.altKey?FT:$T,E=e===i$?null:dwt[b],T=e===r$?null:hwt[b],C=IV(v),I=C.extent,R=C.selection,N=I[0][0],O,L,j=I[0][1],F,H,Q=I[1][0],J,ne,Z=I[1][1],ie,q,U=0,G=0,V,Y=E&&T&&i&&g.shiftKey,ee,ae,_e=Array.from(g.touches||[g],Me=>{const Ge=Me.identifier;return Me=DF(Me,v),Me.point0=Me.slice(),Me.identifier=Ge,Me});LG(v);var pe=c(v,arguments,!0).beforestart();if(b==="overlay"){R&&(V=!0);const Me=[_e[0],_e[1]||_e[0]];C.selection=R=[[O=e===i$?N:Hu(Me[0][0],Me[1][0]),F=e===r$?j:Hu(Me[0][1],Me[1][1])],[J=e===i$?Q:Vu(Me[0][0],Me[1][0]),ie=e===r$?Z:Vu(Me[0][1],Me[1][1])]],_e.length>1&&$e(g)}else O=R[0][0],F=R[0][1],J=R[1][0],ie=R[1][1];L=O,H=F,ne=J,q=ie;var Se=si(v).attr("pointer-events","none"),Le=Se.selectAll(".overlay").attr("cursor",Zg[b]);if(g.touches)pe.moved=he,pe.ended=De;else{var ye=si(g.view).on("mousemove.brush",he,!0).on("mouseup.brush",De,!0);i&&ye.on("keydown.brush",tt,!0).on("keyup.brush",it,!0),fxt(g.view)}l.call(v),pe.start(g,w.name);function he(Me){for(const Ge of Me.changedTouches||[Me])for(const at of _e)at.identifier===Ge.identifier&&(at.cur=DF(Ge,v));if(Y&&!ee&&!ae&&_e.length===1){const Ge=_e[0];Spe(Ge.cur[0]-Ge[0])>Spe(Ge.cur[1]-Ge[1])?ae=!0:ee=!0}for(const Ge of _e)Ge.cur&&(Ge[0]=Ge.cur[0],Ge[1]=Ge.cur[1]);V=!0,CV(Me),$e(Me)}function $e(Me){const Ge=_e[0],at=Ge.point0;var yt;switch(U=Ge[0]-at[0],G=Ge[1]-at[1],w){case AV:case Epe:{E&&(U=Vu(N-O,Hu(Q-J,U)),L=O+U,ne=J+U),T&&(G=Vu(j-F,Hu(Z-ie,G)),H=F+G,q=ie+G);break}case $T:{_e[1]?(E&&(L=Vu(N,Hu(Q,_e[0][0])),ne=Vu(N,Hu(Q,_e[1][0])),E=1),T&&(H=Vu(j,Hu(Z,_e[0][1])),q=Vu(j,Hu(Z,_e[1][1])),T=1)):(E<0?(U=Vu(N-O,Hu(Q-O,U)),L=O+U,ne=J):E>0&&(U=Vu(N-J,Hu(Q-J,U)),L=O,ne=J+U),T<0?(G=Vu(j-F,Hu(Z-F,G)),H=F+G,q=ie):T>0&&(G=Vu(j-ie,Hu(Z-ie,G)),H=F,q=ie+G));break}case FT:{E&&(L=Vu(N,Hu(Q,O-U*E)),ne=Vu(N,Hu(Q,J+U*E))),T&&(H=Vu(j,Hu(Z,F-G*T)),q=Vu(j,Hu(Z,ie+G*T)));break}}ne<L&&(E*=-1,yt=O,O=J,J=yt,yt=L,L=ne,ne=yt,b in Cpe&&Le.attr("cursor",Zg[b=Cpe[b]])),q<H&&(T*=-1,yt=F,F=ie,ie=yt,yt=H,H=q,q=yt,b in Ape&&Le.attr("cursor",Zg[b=Ape[b]])),C.selection&&(R=C.selection),ee&&(L=R[0][0],ne=R[1][0]),ae&&(H=R[0][1],q=R[1][1]),(R[0][0]!==L||R[0][1]!==H||R[1][0]!==ne||R[1][1]!==q)&&(C.selection=[[L,H],[ne,q]],l.call(v),pe.brush(Me,w.name))}function De(Me){if(cwt(Me),Me.touches){if(Me.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else dxt(Me.view,V),ye.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Se.attr("pointer-events","all"),Le.attr("cursor",Zg.overlay),C.selection&&(R=C.selection),ywt(R)&&(C.selection=null,l.call(v)),pe.end(Me,w.name)}function tt(Me){switch(Me.keyCode){case 16:{Y=E&&T;break}case 18:{w===$T&&(E&&(J=ne-U*E,O=L+U*E),T&&(ie=q-G*T,F=H+G*T),w=FT,$e(Me));break}case 32:{(w===$T||w===FT)&&(E<0?J=ne-U:E>0&&(O=L-U),T<0?ie=q-G:T>0&&(F=H-G),w=AV,Le.attr("cursor",Zg.selection),$e(Me));break}default:return}CV(Me)}function it(Me){switch(Me.keyCode){case 16:{Y&&(ee=ae=Y=!1,$e(Me));break}case 18:{w===FT&&(E<0?J=ne:E>0&&(O=L),T<0?ie=q:T>0&&(F=H),w=$T,$e(Me));break}case 32:{w===AV&&(Me.altKey?(E&&(J=ne-U*E,O=L+U*E),T&&(ie=q-G*T,F=H+G*T),w=FT):(E<0?J=ne:E>0&&(O=L),T<0?ie=q:T>0&&(F=H),w=$T),Le.attr("cursor",Zg[b]),$e(Me));break}default:return}CV(Me)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=$G(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:TV($G(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:TV(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:TV(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const FG=Math.PI,BG=2*FG,Q_=1e-6,vwt=BG-Q_;function wke(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bwt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return wke;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Gee=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?wke:bwt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Q_)if(!(Math.abs(f*u-l*c)>Q_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,v=Math.sqrt(m),b=Math.sqrt(d),w=s*Math.tan((FG-Math.acos((m+d-g)/(2*v*b)))/2),E=w/b,T=w/v;Math.abs(E-1)>Q_&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Q_||Math.abs(this._y1-c)>Q_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%BG+BG),d>vwt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Q_&&this._append`A${r},${r},0,${+(d>=FG)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function I9(){return new Gee}I9.prototype=Gee.prototype;const zy=11102230246251565e-32,qu=134217729,xwt=(3+8*zy)*zy;function kV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function _wt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function T3(e){return new Float64Array(e)}const wwt=(3+16*zy)*zy,Ewt=(2+12*zy)*zy,Swt=(9+64*zy)*zy*zy,BT=T3(4),Ipe=T3(8),kpe=T3(12),Rpe=T3(16),Nl=T3(4);function Twt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,v,b,w,E,T,C,I,R;const N=e-i,O=n-i,L=t-s,j=r-s;E=N*j,d=qu*N,h=d-(d-N),p=N-h,d=qu*j,m=d-(d-j),g=j-m,T=p*g-(E-h*m-p*m-h*g),C=L*O,d=qu*L,h=d-(d-L),p=L-h,d=qu*O,m=d-(d-O),g=O-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,BT[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,BT[1]=w-(v+f)+(f-C),R=b+v,f=R-b,BT[2]=b-(R-f)+(v-f),BT[3]=R;let F=_wt(4,BT),H=Ewt*o;if(F>=H||-F>=H||(f=e-N,a=e-(N+f)+(f-i),f=n-O,l=n-(O+f)+(f-i),f=t-L,u=t-(L+f)+(f-s),f=r-j,c=r-(j+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(H=Swt*o+xwt*Math.abs(F),F+=N*c+j*a-(L*l+O*u),F>=H||-F>=H))return F;E=a*j,d=qu*a,h=d-(d-a),p=a-h,d=qu*j,m=d-(d-j),g=j-m,T=p*g-(E-h*m-p*m-h*g),C=u*O,d=qu*u,h=d-(d-u),p=u-h,d=qu*O,m=d-(d-O),g=O-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const Q=kV(4,BT,4,Nl,Ipe);E=N*c,d=qu*N,h=d-(d-N),p=N-h,d=qu*c,m=d-(d-c),g=c-m,T=p*g-(E-h*m-p*m-h*g),C=L*l,d=qu*L,h=d-(d-L),p=L-h,d=qu*l,m=d-(d-l),g=l-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const J=kV(Q,Ipe,4,Nl,kpe);E=a*c,d=qu*a,h=d-(d-a),p=a-h,d=qu*c,m=d-(d-c),g=c-m,T=p*g-(E-h*m-p*m-h*g),C=u*l,d=qu*u,h=d-(d-u),p=u-h,d=qu*l,m=d-(d-l),g=l-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const ne=kV(J,kpe,4,Nl,Rpe);return Rpe[ne-1]}function p6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=wwt*l?u:-Twt(e,t,n,r,i,s,l)}const Dpe=Math.pow(2,-52),m6=new Uint32Array(512);class BF{static from(t,n=Rwt,r=Dwt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new BF(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){const O=t[2*N],L=t[2*N+1];O<a&&(a=O),L<u&&(u=L),O>l&&(l=O),L>c&&(c=L),this._ids[N]=N}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let N=0,O=1/0;N<o;N++){const L=RV(f,d,t[2*N],t[2*N+1]);L<O&&(h=N,O=L)}const g=t[2*h],v=t[2*h+1];for(let N=0,O=1/0;N<o;N++){if(N===h)continue;const L=RV(g,v,t[2*N],t[2*N+1]);L<O&&L>0&&(p=N,O=L)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;const O=Iwt(g,v,b,w,t[2*N],t[2*N+1]);O<E&&(m=N,E=O)}let T=t[2*m],C=t[2*m+1];if(E===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];w2(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let O=0;for(let L=0,j=-1/0;L<o;L++){const F=this._ids[L],H=this._dists[F];H>j&&(N[O++]=F,j=H)}this.hull=N.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(p6(g,v,b,w,T,C)<0){const N=p,O=b,L=w;p=m,b=T,w=C,m=N,T=O,C=L}const I=kwt(g,v,b,w,T,C);this._cx=I.x,this._cy=I.y;for(let N=0;N<o;N++)this._dists[N]=RV(t[2*N],t[2*N+1],I.x,I.y);w2(this._ids,this._dists,0,o-1),this._hullStart=h;let R=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,v)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(T,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let N=0,O,L;N<this._ids.length;N++){const j=this._ids[N],F=t[2*j],H=t[2*j+1];if(N>0&&Math.abs(F-O)<=Dpe&&Math.abs(H-L)<=Dpe||(O=F,L=H,j===h||j===p||j===m))continue;let Q=0;for(let q=0,U=this._hashKey(F,H);q<this._hashSize&&(Q=s[(U+q)%this._hashSize],!(Q!==-1&&Q!==r[Q]));q++);Q=n[Q];let J=Q,ne;for(;ne=r[J],p6(F,H,t[2*J],t[2*J+1],t[2*ne],t[2*ne+1])>=0;)if(J=ne,J===Q){J=-1;break}if(J===-1)continue;let Z=this._addTriangle(J,j,r[J],-1,-1,i[J]);i[j]=this._legalize(Z+2),i[J]=Z,R++;let ie=r[J];for(;ne=r[ie],p6(F,H,t[2*ie],t[2*ie+1],t[2*ne],t[2*ne+1])<0;)Z=this._addTriangle(ie,j,ne,i[j],-1,i[ie]),i[j]=this._legalize(Z+2),r[ie]=ie,R--,ie=ne;if(J===Q)for(;ne=n[J],p6(F,H,t[2*ne],t[2*ne+1],t[2*J],t[2*J+1])<0;)Z=this._addTriangle(ne,j,J,-1,i[J],i[ne]),this._legalize(Z+2),i[ne]=Z,r[J]=J,R--,J=ne;this._hullStart=n[j]=J,r[J]=n[ie]=j,r[j]=ie,s[this._hashKey(F,H)]=j,s[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(R);for(let N=0,O=this._hullStart;N<R;N++)this.hull[N]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Cwt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=m6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Awt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const v=r[f];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<m6.length&&(m6[s++]=b)}else{if(s===0)break;t=m6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Cwt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function RV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Awt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Iwt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function kwt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function w2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;lR(e,i,s),t[e[n]]>t[e[r]]&&lR(e,n,r),t[e[s]]>t[e[r]]&&lR(e,s,r),t[e[n]]>t[e[s]]&&lR(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;lR(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(w2(e,t,s,r),w2(e,t,n,o-1)):(w2(e,t,n,o-1),w2(e,t,s,r))}}function lR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Rwt(e){return e[0]}function Dwt(e){return e[1]}const Npe=1e-6;class Sw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Npe||Math.abs(this._y1-s)>Npe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class jG{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Nwt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,b,w;m<v;m+=3,g+=2){const E=r[m]*2,T=r[m+1]*2,C=r[m+2]*2,I=t[E],R=t[E+1],N=t[T],O=t[T+1],L=t[C],j=t[C+1],F=N-I,H=O-R,Q=L-I,J=j-R,ne=(F*J-H*Q)*2;if(Math.abs(ne)<1e-9){if(s===void 0){s=o=0;for(const ie of n)s+=t[ie*2],o+=t[ie*2+1];s/=n.length,o/=n.length}const Z=1e9*Math.sign((s-I)*J-(o-R)*Q);b=(I+L)/2-Z*J,w=(R+j)/2+Z*Q}else{const Z=1/ne,ie=F*F+H*H,q=Q*Q+J*J;b=I+(J*ie-H*q)*Z,w=R+(F*q-Q*ie)*Z}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Sw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],v=o[p],b=o[p+1];this._renderSegment(m,g,v,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Sw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Sw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new jG;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,v,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,v,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[v,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,b):i=[v,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Pwt=2*Math.PI,jT=Math.pow;function Owt(e){return e[0]}function Mwt(e){return e[1]}function Lwt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function $wt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Yee{static from(t,n=Owt,r=Mwt,i){return new Yee("length"in t?Fwt(t,n,r,i):Float64Array.from(Bwt(t,n,r,i)))}constructor(t){this._delaunator=new BF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Lwt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=$wt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new BF(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Nwt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=jT(n-l[t*2],2)+jT(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=jT(n-l[p*2],2)+jT(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&jT(n-l[h*2],2)+jT(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Sw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Sw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Pwt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Sw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new jG;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Sw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new jG;return this.renderTriangle(t,n),n.value()}}function Fwt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Bwt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Ppe={},DV={},NV=34,cR=10,PV=13;function Eke(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jwt(e,t){var n=Eke(e);return function(r,i){return t(n(r),i,e)}}function Ope(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Oc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Uwt(e){return e<0?"-"+Oc(-e,6):e>9999?"+"+Oc(e,6):Oc(e,4)}function zwt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Uwt(e.getUTCFullYear())+"-"+Oc(e.getUTCMonth()+1,2)+"-"+Oc(e.getUTCDate(),2)+(i?"T"+Oc(t,2)+":"+Oc(n,2)+":"+Oc(r,2)+"."+Oc(i,3)+"Z":r?"T"+Oc(t,2)+":"+Oc(n,2)+":"+Oc(r,2)+"Z":n||t?"T"+Oc(t,2)+":"+Oc(n,2)+"Z":"")}function Ske(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,v){if(h)return h(g,v-1);p=g,h=d?jwt(g,d):Eke(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,v,b=p<=0,w=!1;f.charCodeAt(p-1)===cR&&--p,f.charCodeAt(p-1)===PV&&--p;function E(){if(b)return DV;if(w)return w=!1,Ppe;var C,I=m,R;if(f.charCodeAt(I)===NV){for(;m++<p&&f.charCodeAt(m)!==NV||f.charCodeAt(++m)===NV;);return(C=m)>=p?b=!0:(R=f.charCodeAt(m++))===cR?w=!0:R===PV&&(w=!0,f.charCodeAt(m)===cR&&++m),f.slice(I+1,C-1).replace(/""/g,'"')}for(;m<p;){if((R=f.charCodeAt(C=m++))===cR)w=!0;else if(R===PV)w=!0,f.charCodeAt(m)===cR&&++m;else if(R!==n)continue;return f.slice(I,C)}return b=!0,f.slice(I,p)}for(;(v=E())!==DV;){for(var T=[];v!==Ppe&&v!==DV;)T.push(v),v=E();d&&(T=d(T,g++))==null||h.push(T)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Ope(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Ope(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?zwt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Vwt=Ske(","),Hwt=Vwt.parse;function qwt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Wwt(e,t){return fetch(e,t).then(qwt)}function Gwt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Wwt(t,n).then(function(i){return e(i,r)})}}var Kee=Gwt(Hwt);function Ywt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Kwt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Tke(this.cover(t,n),t,n,e)}function Tke(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,v,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[v=g<<1|m]))return i[v]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[v]=o:e._root=o,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((v=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[v]=o,e}function Xwt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Tke(this,o[n],a[n],e[n]);return this}function Qwt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Jwt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Zwt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ul(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function eEt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ul(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,v=(a+l)/2;d.push(new Ul(h[3],g,v,u,l),new Ul(h[2],o,v,g,l),new Ul(h[1],g,a,u,v),new Ul(h[0],o,a,g,v)),(m=(t>=v)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var T=Math.sqrt(n=E);i=e-T,s=t-T,c=e+T,f=t+T,r=h.data}}return r}function tEt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function nEt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function rEt(){return this._root}function iEt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function sEt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ul(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ul(i,l,c,a,u)),(i=r[2])&&t.push(new Ul(i,s,c,l,u)),(i=r[1])&&t.push(new Ul(i,l,o,a,c)),(i=r[0])&&t.push(new Ul(i,s,o,l,c))}return this}function oEt(e){var t=[],n=[],r;for(this._root&&t.push(new Ul(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ul(s,o,a,c,f)),(s=i[1])&&t.push(new Ul(s,c,a,u,f)),(s=i[2])&&t.push(new Ul(s,o,f,c,l)),(s=i[3])&&t.push(new Ul(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function aEt(e){return e[0]}function uEt(e){return arguments.length?(this._x=e,this):this._x}function lEt(e){return e[1]}function cEt(e){return arguments.length?(this._y=e,this):this._y}function Xee(e,t,n){var r=new Qee(t??aEt,n??lEt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Qee(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Mpe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nc=Xee.prototype=Qee.prototype;nc.copy=function(){var e=new Qee(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Mpe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Mpe(r));return e};nc.add=Kwt;nc.addAll=Xwt;nc.cover=Qwt;nc.data=Jwt;nc.extent=Zwt;nc.find=eEt;nc.remove=tEt;nc.removeAll=nEt;nc.root=rEt;nc.size=iEt;nc.visit=sEt;nc.visitAfter=oEt;nc.x=uEt;nc.y=cEt;function Hl(e){return function(){return e}}function eb(e){return(e()-.5)*1e-6}function fEt(e){return e.x+e.vx}function dEt(e){return e.y+e.vy}function hEt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Hl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,v=0;v<s;++v)for(f=Xee(t,fEt,dEt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(w,E,T,C,I){var R=w.data,N=w.r,O=m+N;if(R){if(R.index>d.index){var L=h-R.x-R.vx,j=p-R.y-R.vy,F=L*L+j*j;F<O*O&&(L===0&&(L=eb(r),F+=L*L),j===0&&(j=eb(r),F+=j*j),F=(O-(F=Math.sqrt(F)))/F*i,d.vx+=(L*=F)*(O=(N*=N)/(g+N)),d.vy+=(j*=F)*O,R.vx-=L*(O=1-O),R.vy-=j*O)}return}return E>h+O||C<h-O||T>p+O||I<p-O}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Hl(+l),u(),o):e},o}function pEt(e){return e.index}function Lpe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function mEt(e){var t=pEt,n=f,r,i=Hl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,T,C,I,R,N,O;w<b;++w)E=e[w],T=E.source,C=E.target,I=C.x+C.vx-T.x-T.vx||eb(l),R=C.y+C.vy-T.y-T.vy||eb(l),N=Math.sqrt(I*I+R*R),N=(N-s[w])/N*g*r[w],I*=N,R*=N,C.vx-=I*(O=u[w]),C.vy-=R*O,T.vx+=I*(O=1-O),T.vy+=R*O}function h(){if(o){var g,v=o.length,b=e.length,w=new Map(o.map((T,C)=>[t(T,C,o),T])),E;for(g=0,a=new Array(v);g<b;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=Lpe(w,E.source)),typeof E.target!="object"&&(E.target=Lpe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,v=e.length;g<v;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,v){o=g,l=v,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Hl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Hl(+g),m(),d):i},d}const gEt=1664525,yEt=1013904223,$pe=4294967296;function vEt(){let e=1;return()=>(e=(gEt*e+yEt)%$pe)/$pe}function bEt(e){return e.x}function xEt(e){return e.y}var _Et=10,wEt=Math.PI*(3-Math.sqrt(5));function EEt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=Vee(f),l=x9("tick","end"),c=vEt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,v=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<v;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=_Et*Math.sqrt(.5+m),w=m*wEt;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,v){var b=0,w=e.length,E,T,C,I,R;for(v==null?v=1/0:v*=v,b=0;b<w;++b)I=e[b],E=m-I.x,T=g-I.y,C=E*E+T*T,C<v&&(R=I,v=C);return R},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function SEt(){var e,t,n,r,i=Hl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=Xee(e,bEt,xEt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,v+=g,b+=g*m.x,w+=g*m.y);h.x=b/v,h.y=w/v}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=g-p,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=eb(n),E+=v*v),b===0&&(b=eb(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=eb(n),E+=v*v),b===0&&(b=eb(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Hl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function TEt(e){var t=Hl(.1),n,r,i;typeof e!="function"&&(e=Hl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Hl(+a),o(),s):e},s}function CEt(e){var t=Hl(.1),n,r,i;typeof e!="function"&&(e=Hl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Hl(+a),o(),s):e},s}function AEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jF(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function RC(e){return e=jF(Math.abs(e)),e?e[1]:NaN}function IEt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function kEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var REt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rE(e){if(!(t=REt.exec(e)))throw new Error("invalid format: "+e);var t;return new Jee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}rE.prototype=Jee.prototype;function Jee(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Jee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Cke;function NEt(e,t){var n=jF(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Cke=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jF(e,Math.max(0,t+s-1))[0]}function Fpe(e,t){var n=jF(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Bpe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Fpe(e*100,t),r:Fpe,s:NEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jpe(e){return e}var Upe=Array.prototype.map,zpe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ake(e){var t=e.grouping===void 0||e.thousands===void 0?jpe:IEt(Upe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?jpe:kEt(Upe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=rE(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,b=f.comma,w=f.precision,E=f.trim,T=f.type;T==="n"?(b=!0,T="g"):Bpe[T]||(w===void 0&&(w=12),E=!0,T="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=m==="$"?r:/[%p]/.test(T)?o:"",R=Bpe[T],N=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(L){var j=C,F=I,H,Q,J;if(T==="c")F=R(L)+F,L="";else{L=+L;var ne=L<0||1/L<0;if(L=isNaN(L)?u:R(Math.abs(L),w),E&&(L=DEt(L)),ne&&+L==0&&p!=="+"&&(ne=!1),j=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+j,F=(T==="s"?zpe[8+Cke/3]:"")+F+(ne&&p==="("?")":""),N){for(H=-1,Q=L.length;++H<Q;)if(J=L.charCodeAt(H),48>J||J>57){F=(J===46?i+L.slice(H+1):L.slice(H))+F,L=L.slice(0,H);break}}}b&&!g&&(L=t(L,1/0));var Z=j.length+L.length+F.length,ie=Z<v?new Array(v-Z+1).join(d):"";switch(b&&g&&(L=t(ie+L,ie.length?v-F.length:1/0),ie=""),h){case"<":L=j+L+F+ie;break;case"=":L=j+ie+L+F;break;case"^":L=ie.slice(0,Z=ie.length>>1)+j+L+F+ie.slice(Z);break;default:L=ie+j+L+F;break}return s(L)}return O.toString=function(){return f+""},O}function c(f,d){var h=l((f=rE(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(RC(d)/3)))*3,m=Math.pow(10,-p),g=zpe[8+p/3];return function(v){return h(m*v)+g}}return{format:l,formatPrefix:c}}var g6,Tx,Zee;PEt({thousands:",",grouping:[3],currency:["$",""]});function PEt(e){return g6=Ake(e),Tx=g6.format,Zee=g6.formatPrefix,g6}function Ike(e){return Math.max(0,-RC(Math.abs(e)))}function kke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(RC(t)/3)))*3-RC(Math.abs(e)))}function Rke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,RC(t)-RC(e))+1}var An=1e-6,UG=1e-12,Ar=Math.PI,ao=Ar/2,UF=Ar/4,Ql=Ar*2,Ao=180/Ar,Er=Ar/180,Gr=Math.abs,rI=Math.atan,ch=Math.atan2,Cn=Math.cos,y6=Math.ceil,Dke=Math.exp,zG=Math.hypot,zF=Math.log,OV=Math.pow,xn=Math.sin,rh=Math.sign||function(e){return e>0?1:e<0?-1:0},Jl=Math.sqrt,ete=Math.tan;function Nke(e){return e>1?0:e<-1?Ar:Math.acos(e)}function Zc(e){return e>1?ao:e<-1?-ao:Math.asin(e)}function vu(){}function VF(e,t){e&&Hpe.hasOwnProperty(e.type)&&Hpe[e.type](e,t)}var Vpe={Feature:function(e,t){VF(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)VF(n[r].geometry,t)}},Hpe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){VG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)VG(n[r],t,0)},Polygon:function(e,t){qpe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)qpe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)VF(n[r],t)}};function VG(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function qpe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)VG(e[n],t,1);t.polygonEnd()}function by(e,t){e&&Vpe.hasOwnProperty(e.type)?Vpe[e.type](e,t):VF(e,t)}var HF=new Yl,qF=new Yl,Pke,Oke,HG,qG,WG,V0={point:vu,lineStart:vu,lineEnd:vu,polygonStart:function(){HF=new Yl,V0.lineStart=OEt,V0.lineEnd=MEt},polygonEnd:function(){var e=+HF;qF.add(e<0?Ql+e:e),this.lineStart=this.lineEnd=this.point=vu},sphere:function(){qF.add(Ql)}};function OEt(){V0.point=LEt}function MEt(){Mke(Pke,Oke)}function LEt(e,t){V0.point=Mke,Pke=e,Oke=t,e*=Er,t*=Er,HG=e,qG=Cn(t=t/2+UF),WG=xn(t)}function Mke(e,t){e*=Er,t*=Er,t=t/2+UF;var n=e-HG,r=n>=0?1:-1,i=r*n,s=Cn(t),o=xn(t),a=WG*o,u=qG*s+a*Cn(i),l=a*r*xn(i);HF.add(ch(l,u)),HG=e,qG=s,WG=o}function $Et(e){return qF=new Yl,by(e,V0),qF*2}function WF(e){return[ch(e[1],e[0]),Zc(e[2])]}function iE(e){var t=e[0],n=e[1],r=Cn(n);return[r*Cn(t),r*xn(t),xn(n)]}function v6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function MV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function GF(e){var t=Jl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Us,Uc,eo,qf,J_,Lke,$ke,q2,XD,$v,a1,dy={point:GG,lineStart:Wpe,lineEnd:Gpe,polygonStart:function(){dy.point=Bke,dy.lineStart=FEt,dy.lineEnd=BEt,XD=new Yl,V0.polygonStart()},polygonEnd:function(){V0.polygonEnd(),dy.point=GG,dy.lineStart=Wpe,dy.lineEnd=Gpe,HF<0?(Us=-(eo=180),Uc=-(qf=90)):XD>An?qf=90:XD<-1e-6&&(Uc=-90),a1[0]=Us,a1[1]=eo},sphere:function(){Us=-(eo=180),Uc=-(qf=90)}};function GG(e,t){$v.push(a1=[Us=e,eo=e]),t<Uc&&(Uc=t),t>qf&&(qf=t)}function Fke(e,t){var n=iE([e*Er,t*Er]);if(q2){var r=DC(q2,n),i=[r[1],-r[0],0],s=DC(i,r);GF(s),s=WF(s);var o=e-J_,a=o>0?1:-1,u=s[0]*Ao*a,l,c=Gr(o)>180;c^(a*J_<u&&u<a*e)?(l=s[1]*Ao,l>qf&&(qf=l)):(u=(u+360)%360-180,c^(a*J_<u&&u<a*e)?(l=-s[1]*Ao,l<Uc&&(Uc=l)):(t<Uc&&(Uc=t),t>qf&&(qf=t))),c?e<J_?Vf(Us,e)>Vf(Us,eo)&&(eo=e):Vf(e,eo)>Vf(Us,eo)&&(Us=e):eo>=Us?(e<Us&&(Us=e),e>eo&&(eo=e)):e>J_?Vf(Us,e)>Vf(Us,eo)&&(eo=e):Vf(e,eo)>Vf(Us,eo)&&(Us=e)}else $v.push(a1=[Us=e,eo=e]);t<Uc&&(Uc=t),t>qf&&(qf=t),q2=n,J_=e}function Wpe(){dy.point=Fke}function Gpe(){a1[0]=Us,a1[1]=eo,dy.point=GG,q2=null}function Bke(e,t){if(q2){var n=e-J_;XD.add(Gr(n)>180?n+(n>0?360:-360):n)}else Lke=e,$ke=t;V0.point(e,t),Fke(e,t)}function FEt(){V0.lineStart()}function BEt(){Bke(Lke,$ke),V0.lineEnd(),Gr(XD)>An&&(Us=-(eo=180)),a1[0]=Us,a1[1]=eo,q2=null}function Vf(e,t){return(t-=e)<0?t+360:t}function jEt(e,t){return e[0]-t[0]}function Ype(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function UEt(e){var t,n,r,i,s,o,a;if(qf=eo=-(Us=Uc=1/0),$v=[],by(e,dy),n=$v.length){for($v.sort(jEt),t=1,r=$v[0],s=[r];t<n;++t)i=$v[t],Ype(r,i[0])||Ype(r,i[1])?(Vf(r[0],i[1])>Vf(r[0],r[1])&&(r[1]=i[1]),Vf(i[0],r[1])>Vf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Vf(r[1],i[0]))>o&&(o=a,Us=i[0],eo=r[1])}return $v=a1=null,Us===1/0||Uc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Us,Uc],[eo,qf]]}var nD,YF,KF,XF,QF,JF,ZF,e5,YG,KG,XG,jke,Uke,Fl,Bl,jl,Cp={sphere:vu,point:tte,lineStart:Kpe,lineEnd:Xpe,polygonStart:function(){Cp.lineStart=HEt,Cp.lineEnd=qEt},polygonEnd:function(){Cp.lineStart=Kpe,Cp.lineEnd=Xpe}};function tte(e,t){e*=Er,t*=Er;var n=Cn(t);C3(n*Cn(e),n*xn(e),xn(t))}function C3(e,t,n){++nD,KF+=(e-KF)/nD,XF+=(t-XF)/nD,QF+=(n-QF)/nD}function Kpe(){Cp.point=zEt}function zEt(e,t){e*=Er,t*=Er;var n=Cn(t);Fl=n*Cn(e),Bl=n*xn(e),jl=xn(t),Cp.point=VEt,C3(Fl,Bl,jl)}function VEt(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=ch(Jl((o=Bl*s-jl*i)*o+(o=jl*r-Fl*s)*o+(o=Fl*i-Bl*r)*o),Fl*r+Bl*i+jl*s);YF+=o,JF+=o*(Fl+(Fl=r)),ZF+=o*(Bl+(Bl=i)),e5+=o*(jl+(jl=s)),C3(Fl,Bl,jl)}function Xpe(){Cp.point=tte}function HEt(){Cp.point=WEt}function qEt(){zke(jke,Uke),Cp.point=tte}function WEt(e,t){jke=e,Uke=t,e*=Er,t*=Er,Cp.point=zke;var n=Cn(t);Fl=n*Cn(e),Bl=n*xn(e),jl=xn(t),C3(Fl,Bl,jl)}function zke(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=Bl*s-jl*i,a=jl*r-Fl*s,u=Fl*i-Bl*r,l=zG(o,a,u),c=Zc(l),f=l&&-c/l;YG.add(f*o),KG.add(f*a),XG.add(f*u),YF+=c,JF+=c*(Fl+(Fl=r)),ZF+=c*(Bl+(Bl=i)),e5+=c*(jl+(jl=s)),C3(Fl,Bl,jl)}function GEt(e){nD=YF=KF=XF=QF=JF=ZF=e5=0,YG=new Yl,KG=new Yl,XG=new Yl,by(e,Cp);var t=+YG,n=+KG,r=+XG,i=zG(t,n,r);return i<UG&&(t=JF,n=ZF,r=e5,YF<An&&(t=KF,n=XF,r=QF),i=zG(t,n,r),i<UG)?[NaN,NaN]:[ch(n,t)*Ao,Zc(r/i)*Ao]}function QG(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function JG(e,t){return Gr(e)>Ar&&(e-=Math.round(e/Ql)*Ql),[e,t]}JG.invert=JG;function Vke(e,t,n){return(e%=Ql)?t||n?QG(Jpe(e),Zpe(t,n)):Jpe(e):t||n?Zpe(t,n):JG}function Qpe(e){return function(t,n){return t+=e,Gr(t)>Ar&&(t-=Math.round(t/Ql)*Ql),[t,n]}}function Jpe(e){var t=Qpe(e);return t.invert=Qpe(-e),t}function Zpe(e,t){var n=Cn(e),r=xn(e),i=Cn(t),s=xn(t);function o(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*n+c*r;return[ch(f*i-h*s,c*n-d*r),Zc(h*i+f*s)]}return o.invert=function(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*i-f*s;return[ch(f*i+d*s,c*n+h*r),Zc(h*n-c*r)]},o}function YEt(e){e=Vke(e[0]*Er,e[1]*Er,e.length>2?e[2]*Er:0);function t(n){return n=e(n[0]*Er,n[1]*Er),n[0]*=Ao,n[1]*=Ao,n}return t.invert=function(n){return n=e.invert(n[0]*Er,n[1]*Er),n[0]*=Ao,n[1]*=Ao,n},t}function KEt(e,t,n,r,i,s){if(n){var o=Cn(t),a=xn(t),u=r*n;i==null?(i=t+r*Ql,s=t-u/2):(i=eme(o,i),s=eme(o,s),(r>0?i<s:i>s)&&(i+=r*Ql));for(var l,c=i;r>0?c>s:c<s;c-=u)l=WF([o,-a*Cn(c),-a*xn(c)]),e.point(l[0],l[1])}}function eme(e,t){t=iE(t),t[0]-=e,GF(t);var n=Nke(-t[1]);return((-t[2]<0?-n:n)+Ql-An)%Ql}function Hke(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:vu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function s$(e,t){return Gr(e[0]-t[0])<An&&Gr(e[1]-t[1])<An}function x6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function qke(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],v=p[m],b;if(s$(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}v[0]+=2*An}s.push(b=new x6(g,p,null,!0)),o.push(b.o=new x6(g,null,b,!1)),s.push(b=new x6(v,p,null,!1)),o.push(b.o=new x6(v,null,b,!0))}}),!!s.length){for(o.sort(t),tme(s),tme(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function tme(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function LV(e){return Gr(e[0])<=Ar?e[0]:rh(e[0])*((Gr(e[0])+Ar)%Ql-Ar)}function XEt(e,t){var n=LV(t),r=t[1],i=xn(r),s=[xn(n),-Cn(n),0],o=0,a=0,u=new Yl;i===1?r=ao+An:i===-1&&(r=-ao-An);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=LV(h),m=h[1]/2+UF,g=xn(m),v=Cn(m),b=0;b<d;++b,p=E,g=C,v=I,h=w){var w=f[b],E=LV(w),T=w[1]/2+UF,C=xn(T),I=Cn(T),R=E-p,N=R>=0?1:-1,O=N*R,L=O>Ar,j=g*C;if(u.add(ch(j*N*xn(O),v*I+j*Cn(O))),o+=L?R+N*Ql:R,L^p>=n^E>=n){var F=DC(iE(h),iE(w));GF(F);var H=DC(s,F);GF(H);var Q=(L^R>=0?-1:1)*Zc(H[2]);(r>Q||r===Q&&(F[0]||F[1]))&&(a+=L^R>=0?1:-1)}}return(o<-1e-6||o<An&&u<-1e-12)^a&1}function Wke(e,t,n,r){return function(i){var s=t(i),o=Hke(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=TIe(c);var E=XEt(l,r);c.length?(u||(i.polygonStart(),u=!0),qke(c,JEt,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,T){e(E,T)&&i.point(E,T)}function p(E,T){s.point(E,T)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function v(E,T){f.push([E,T]),a.point(E,T)}function b(){a.lineStart(),f=[]}function w(){v(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),T=o.result(),C,I=T.length,R,N,O;if(f.pop(),l.push(f),f=null,!!I){if(E&1){if(N=T[0],(R=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<R;++C)i.point((O=N[C])[0],O[1]);i.lineEnd()}return}I>1&&E&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(QEt))}}return d}}function QEt(e){return e.length>1}function JEt(e,t){return((e=e.x)[0]<0?e[1]-ao-An:ao-e[1])-((t=t.x)[0]<0?t[1]-ao-An:ao-t[1])}const nme=Wke(function(){return!0},ZEt,tSt,[-Ar,-ao]);function ZEt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ar:-Ar,u=Gr(s-t);Gr(u-Ar)<An?(e.point(t,n=(n+o)/2>0?ao:-ao),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Ar&&(Gr(t-r)<An&&(t-=r*An),Gr(s-a)<An&&(s-=a*An),n=eSt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function eSt(e,t,n,r){var i,s,o=xn(e-n);return Gr(o)>An?rI((xn(t)*(s=Cn(r))*xn(n)-xn(r)*(i=Cn(t))*xn(e))/(i*s*o)):(t+r)/2}function tSt(e,t,n,r){var i;if(e==null)i=n*ao,r.point(-Ar,i),r.point(0,i),r.point(Ar,i),r.point(Ar,0),r.point(Ar,-i),r.point(0,-i),r.point(-Ar,-i),r.point(-Ar,0),r.point(-Ar,i);else if(Gr(e[0]-t[0])>An){var s=e[0]<t[0]?Ar:-Ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function nSt(e){var t=Cn(e),n=2*Er,r=t>0,i=Gr(t)>An;function s(c,f,d,h){KEt(h,e,n,d,c,f)}function o(c,f){return Cn(c)*Cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,v){var b=[g,v],w,E=o(g,v),T=r?E?0:l(g,v):E?l(g+(g<0?Ar:-Ar),v):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||s$(f,w)||s$(b,w))&&(b[2]=1)),E!==h)m=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var C;!(T&d)&&(C=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}E&&(!f||!s$(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=iE(c),p=iE(f),m=[1,0,0],g=DC(h,p),v=v6(g,g),b=g[0],w=v-b*b;if(!w)return!d&&c;var E=t*v/w,T=-t*b/w,C=DC(m,g),I=b6(m,E),R=b6(g,T);MV(I,R);var N=C,O=v6(I,N),L=v6(N,N),j=O*O-L*(v6(I,I)-1);if(!(j<0)){var F=Jl(j),H=b6(N,(-O-F)/L);if(MV(H,I),H=WF(H),!d)return H;var Q=c[0],J=f[0],ne=c[1],Z=f[1],ie;J<Q&&(ie=Q,Q=J,J=ie);var q=J-Q,U=Gr(q-Ar)<An,G=U||q<An;if(!U&&Z<ne&&(ie=ne,ne=Z,Z=ie),G?U?ne+Z>0^H[1]<(Gr(H[0]-Q)<An?ne:Z):ne<=H[1]&&H[1]<=Z:q>Ar^(Q<=H[0]&&H[0]<=J)){var V=b6(N,(-O+F)/L);return MV(V,I),[H,WF(V)]}}}function l(c,f){var d=r?e:Ar-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Wke(o,a,s,r?[0,-e]:[-Ar,e-Ar])}function rSt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var _6=1e9,w6=-1e9;function Gke(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Gr(l[0]-e)<An?c>0?0:3:Gr(l[0]-n)<An?c>0?2:1:Gr(l[1]-t)<An?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Hke(),d,h,p,m,g,v,b,w,E,T,C,I={point:R,lineStart:j,lineEnd:F,polygonStart:O,polygonEnd:L};function R(Q,J){i(Q,J)&&c.point(Q,J)}function N(){for(var Q=0,J=0,ne=h.length;J<ne;++J)for(var Z=h[J],ie=1,q=Z.length,U=Z[0],G,V,Y=U[0],ee=U[1];ie<q;++ie)G=Y,V=ee,U=Z[ie],Y=U[0],ee=U[1],V<=r?ee>r&&(Y-G)*(r-V)>(ee-V)*(e-G)&&++Q:ee<=r&&(Y-G)*(r-V)<(ee-V)*(e-G)&&--Q;return Q}function O(){c=f,d=[],h=[],C=!0}function L(){var Q=N(),J=C&&Q,ne=(d=TIe(d)).length;(J||ne)&&(l.polygonStart(),J&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ne&&qke(d,a,Q,s,l),l.polygonEnd()),c=l,d=h=p=null}function j(){I.point=H,h&&h.push(p=[]),T=!0,E=!1,b=w=NaN}function F(){d&&(H(m,g),v&&E&&f.rejoin(),d.push(f.result())),I.point=R,E&&c.lineEnd()}function H(Q,J){var ne=i(Q,J);if(h&&p.push([Q,J]),T)m=Q,g=J,v=ne,T=!1,ne&&(c.lineStart(),c.point(Q,J));else if(ne&&E)c.point(Q,J);else{var Z=[b=Math.max(w6,Math.min(_6,b)),w=Math.max(w6,Math.min(_6,w))],ie=[Q=Math.max(w6,Math.min(_6,Q)),J=Math.max(w6,Math.min(_6,J))];rSt(Z,ie,e,t,n,r)?(E||(c.lineStart(),c.point(Z[0],Z[1])),c.point(ie[0],ie[1]),ne||c.lineEnd(),C=!1):ne&&(c.lineStart(),c.point(Q,J),C=!1)}b=Q,w=J,E=ne}return I}}function rme(e,t,n){var r=Wc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function ime(e,t,n){var r=Wc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function iSt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return Wc(y6(r/c)*c,n,c).map(p).concat(Wc(y6(a/f)*f,o,f).map(m)).concat(Wc(y6(t/u)*u,e,u).filter(function(w){return Gr(w%c)>An}).map(d)).concat(Wc(y6(s/l)*l,i,l).filter(function(w){return Gr(w%f)>An}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),v.precision(g)):[[r,a],[n,o]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),v.precision(g)):[[t,s],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],v):[c,f]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(g=+w,d=rme(s,i,90),h=ime(t,e,g),p=rme(a,o,90),m=ime(r,n,g),v):g},v.extentMajor([[-180,-90+An],[180,90-An]]).extentMinor([[-180,-80-An],[180,80+An]])}const XN=e=>e;var $V=new Yl,ZG=new Yl,Yke,Kke,eY,tY,xy={point:vu,lineStart:vu,lineEnd:vu,polygonStart:function(){xy.lineStart=sSt,xy.lineEnd=aSt},polygonEnd:function(){xy.lineStart=xy.lineEnd=xy.point=vu,$V.add(Gr(ZG)),ZG=new Yl},result:function(){var e=$V/2;return $V=new Yl,e}};function sSt(){xy.point=oSt}function oSt(e,t){xy.point=Xke,Yke=eY=e,Kke=tY=t}function Xke(e,t){ZG.add(tY*e-eY*t),eY=e,tY=t}function aSt(){Xke(Yke,Kke)}var NC=1/0,t5=NC,QN=-NC,n5=QN,r5={point:uSt,lineStart:vu,lineEnd:vu,polygonStart:vu,polygonEnd:vu,result:function(){var e=[[NC,t5],[QN,n5]];return QN=n5=-(t5=NC=1/0),e}};function uSt(e,t){e<NC&&(NC=e),e>QN&&(QN=e),t<t5&&(t5=t),t>n5&&(n5=t)}var nY=0,rY=0,rD=0,i5=0,s5=0,E2=0,iY=0,sY=0,iD=0,Qke,Jke,r0,i0,th={point:sE,lineStart:sme,lineEnd:ome,polygonStart:function(){th.lineStart=fSt,th.lineEnd=dSt},polygonEnd:function(){th.point=sE,th.lineStart=sme,th.lineEnd=ome},result:function(){var e=iD?[iY/iD,sY/iD]:E2?[i5/E2,s5/E2]:rD?[nY/rD,rY/rD]:[NaN,NaN];return nY=rY=rD=i5=s5=E2=iY=sY=iD=0,e}};function sE(e,t){nY+=e,rY+=t,++rD}function sme(){th.point=lSt}function lSt(e,t){th.point=cSt,sE(r0=e,i0=t)}function cSt(e,t){var n=e-r0,r=t-i0,i=Jl(n*n+r*r);i5+=i*(r0+e)/2,s5+=i*(i0+t)/2,E2+=i,sE(r0=e,i0=t)}function ome(){th.point=sE}function fSt(){th.point=hSt}function dSt(){Zke(Qke,Jke)}function hSt(e,t){th.point=Zke,sE(Qke=r0=e,Jke=i0=t)}function Zke(e,t){var n=e-r0,r=t-i0,i=Jl(n*n+r*r);i5+=i*(r0+e)/2,s5+=i*(i0+t)/2,E2+=i,i=i0*e-r0*t,iY+=i*(r0+e),sY+=i*(i0+t),iD+=i*3,sE(r0=e,i0=t)}function eRe(e){this._context=e}eRe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ql);break}}},result:vu};var oY=new Yl,FV,tRe,nRe,sD,oD,JN={point:vu,lineStart:function(){JN.point=pSt},lineEnd:function(){FV&&rRe(tRe,nRe),JN.point=vu},polygonStart:function(){FV=!0},polygonEnd:function(){FV=null},result:function(){var e=+oY;return oY=new Yl,e}};function pSt(e,t){JN.point=rRe,tRe=sD=e,nRe=oD=t}function rRe(e,t){sD-=e,oD-=t,oY.add(Jl(sD*sD+oD*oD)),sD=e,oD=t}let ame,o5,ume,lme;class cme{constructor(t){this._append=t==null?iRe:mSt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==ume||this._append!==o5){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ume=r,o5=this._append,lme=this._,this._=i}this._+=lme;break}}}result(){const t=this._;return this._="",t.length?t:null}}function iRe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mSt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return iRe;if(t!==ame){const n=10**t;ame=t,o5=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return o5}function sRe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),by(a,i(s))),s.result()}return o.area=function(a){return by(a,i(xy)),xy.result()},o.measure=function(a){return by(a,i(JN)),JN.result()},o.bounds=function(a){return by(a,i(r5)),r5.result()},o.centroid=function(a){return by(a,i(th)),th.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,XN):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new cme(n)):new eRe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new cme(n)),o},o.projection(e).digits(n).context(t)}function k9(e){return function(t){var n=new aY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function aY(){}aY.prototype={constructor:aY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),by(n,e.stream(r5)),t(r5.result()),r!=null&&e.clipExtent(r),e}function R9(e,t,n){return nte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function rte(e,t,n){return R9(e,[[0,0],t],n)}function ite(e,t,n){return nte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function ste(e,t,n){return nte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var fme=16,gSt=Cn(30*Er);function dme(e,t){return+t?vSt(e,t):ySt(e)}function ySt(e){return k9({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vSt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&m--){var E=o+d,T=a+h,C=u+p,I=Jl(E*E+T*T+C*C),R=Zc(C/=I),N=Gr(Gr(C)-1)<An||Gr(s-f)<An?(s+f)/2:ch(T,E),O=e(N,R),L=O[0],j=O[1],F=L-r,H=j-i,Q=b*F-v*H;(Q*Q/w>t||Gr((v*F+b*H)/w-.5)>.3||o*d+a*h+u*p<gSt)&&(n(r,i,s,o,a,u,L,j,N,E/=I,T/=I,C,m,g),g.point(L,j),n(L,j,N,E,T,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=T},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(R,N){R=e(R,N),r.point(R[0],R[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(R,N){var O=iE([R,N]),L=e(R,N);n(f,d,c,h,p,m,f=L[0],d=L[1],c=R,h=O[0],p=O[1],m=O[2],fme,r),r.point(f,d)}function E(){g.point=v,r.lineEnd()}function T(){b(),g.point=C,g.lineEnd=I}function C(R,N){w(i=R,N),s=f,o=d,a=h,u=p,l=m,g.point=w}function I(){n(f,d,c,h,p,m,s,o,i,a,u,l,fme,r),g.lineEnd=E,E()}return g}}var bSt=k9({point:function(e,t){this.stream.point(e*Er,t*Er)}});function xSt(e){return k9({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function _St(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function hme(e,t,n,r,i,s){if(!s)return _St(e,t,n,r,i);var o=Cn(s),a=xn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function lg(e){return oRe(function(){return e})()}function oRe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=nme,g=null,v,b,w,E=XN,T=.5,C,I,R,N,O;function L(Q){return R(Q[0]*Er,Q[1]*Er)}function j(Q){return Q=R.invert(Q[0],Q[1]),Q&&[Q[0]*Ao,Q[1]*Ao]}L.stream=function(Q){return N&&O===Q?N:N=bSt(xSt(c)(m(C(E(O=Q)))))},L.preclip=function(Q){return arguments.length?(m=Q,p=void 0,H()):m},L.postclip=function(Q){return arguments.length?(E=Q,g=v=b=w=null,H()):E},L.clipAngle=function(Q){return arguments.length?(m=+Q?nSt(p=Q*Er):(p=null,nme),H()):p*Ao},L.clipExtent=function(Q){return arguments.length?(E=Q==null?(g=v=b=w=null,XN):Gke(g=+Q[0][0],v=+Q[0][1],b=+Q[1][0],w=+Q[1][1]),H()):g==null?null:[[g,v],[b,w]]},L.scale=function(Q){return arguments.length?(n=+Q,F()):n},L.translate=function(Q){return arguments.length?(r=+Q[0],i=+Q[1],F()):[r,i]},L.center=function(Q){return arguments.length?(s=Q[0]%360*Er,o=Q[1]%360*Er,F()):[s*Ao,o*Ao]},L.rotate=function(Q){return arguments.length?(a=Q[0]%360*Er,u=Q[1]%360*Er,l=Q.length>2?Q[2]%360*Er:0,F()):[a*Ao,u*Ao,l*Ao]},L.angle=function(Q){return arguments.length?(f=Q%360*Er,F()):f*Ao},L.reflectX=function(Q){return arguments.length?(d=Q?-1:1,F()):d<0},L.reflectY=function(Q){return arguments.length?(h=Q?-1:1,F()):h<0},L.precision=function(Q){return arguments.length?(C=dme(I,T=Q*Q),H()):Jl(T)},L.fitExtent=function(Q,J){return R9(L,Q,J)},L.fitSize=function(Q,J){return rte(L,Q,J)},L.fitWidth=function(Q,J){return ite(L,Q,J)},L.fitHeight=function(Q,J){return ste(L,Q,J)};function F(){var Q=hme(n,0,0,d,h,f).apply(null,t(s,o)),J=hme(n,r-Q[0],i-Q[1],d,h,f);return c=Vke(a,u,l),I=QG(t,J),R=QG(c,I),C=dme(I,T),H()}function H(){return N=O=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&j,F()}}function ote(e){var t=0,n=Ar/3,r=oRe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Er,n=s[1]*Er):[t*Ao,n*Ao]},i}function wSt(e){var t=Cn(e);function n(r,i){return[r*t,xn(i)/t]}return n.invert=function(r,i){return[r/t,Zc(i*t)]},n}function ESt(e,t){var n=xn(e),r=(n+xn(t))/2;if(Gr(r)<An)return wSt(e);var i=1+n*(2*r-n),s=Jl(i)/r;function o(a,u){var l=Jl(i-2*r*xn(u))/r;return[l*xn(a*=r),s-l*Cn(a)]}return o.invert=function(a,u){var l=s-u,c=ch(a,Gr(l))*rh(l);return l*r<0&&(c-=Ar*rh(a)*rh(l)),[c/r,Zc((i-(a*a+l*l)*r*r)/(2*r))]},o}function a5(){return ote(ESt).scale(155.424).center([0,33.6442])}function aRe(){return a5().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function SSt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function TSt(){var e,t,n=aRe(),r,i=a5().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=a5().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=SSt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+An,m+.12*h+An],[p-.214*h-An,m+.234*h-An]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+An,m+.166*h+An],[p-.115*h-An,m+.234*h-An]]).stream(l),f()},c.fitExtent=function(d,h){return R9(c,d,h)},c.fitSize=function(d,h){return rte(c,d,h)},c.fitWidth=function(d,h){return ite(c,d,h)},c.fitHeight=function(d,h){return ste(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function uRe(e){return function(t,n){var r=Cn(t),i=Cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*xn(t),s*xn(n)]}}function A3(e){return function(t,n){var r=Jl(t*t+n*n),i=e(r),s=xn(i),o=Cn(i);return[ch(t*s,r*o),Zc(r&&n*s/r)]}}var lRe=uRe(function(e){return Jl(2/(1+e))});lRe.invert=A3(function(e){return 2*Zc(e/2)});function CSt(){return lg(lRe).scale(124.75).clipAngle(180-.001)}var cRe=uRe(function(e){return(e=Nke(e))&&e/xn(e)});cRe.invert=A3(function(e){return e});function ASt(){return lg(cRe).scale(79.4188).clipAngle(180-.001)}function D9(e,t){return[e,zF(ete((ao+t)/2))]}D9.invert=function(e,t){return[e,2*rI(Dke(t))-ao]};function ISt(){return fRe(D9).scale(961/Ql)}function fRe(e){var t=lg(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Ar*r(),d=t(YEt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===D9?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function E6(e){return ete((ao+e)/2)}function kSt(e,t){var n=Cn(e),r=e===t?xn(e):zF(n/Cn(t))/zF(E6(t)/E6(e)),i=n*OV(E6(e),r)/r;if(!r)return D9;function s(o,a){i>0?a<-ao+An&&(a=-ao+An):a>ao-An&&(a=ao-An);var u=i/OV(E6(a),r);return[u*xn(r*o),i-u*Cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=rh(r)*Jl(o*o+u*u),c=ch(o,Gr(u))*rh(u);return u*r<0&&(c-=Ar*rh(o)*rh(u)),[c/r,2*rI(OV(i/l,1/r))-ao]},s}function RSt(){return ote(kSt).scale(109.5).parallels([30,30])}function u5(e,t){return[e,t]}u5.invert=u5;function DSt(){return lg(u5).scale(152.63)}function NSt(e,t){var n=Cn(e),r=e===t?xn(e):(n-Cn(t))/(t-e),i=n/r+e;if(Gr(r)<An)return u5;function s(o,a){var u=i-a,l=r*o;return[u*xn(l),i-u*Cn(l)]}return s.invert=function(o,a){var u=i-a,l=ch(o,Gr(u))*rh(u);return u*r<0&&(l-=Ar*rh(o)*rh(u)),[l/r,i-rh(r)*Jl(o*o+u*u)]},s}function PSt(){return ote(NSt).scale(131.154).center([0,13.9389])}var QD=1.340264,JD=-.081106,ZD=893e-6,eN=.003796,l5=Jl(3)/2,OSt=12;function dRe(e,t){var n=Zc(l5*xn(t)),r=n*n,i=r*r*r;return[e*Cn(n)/(l5*(QD+3*JD*r+i*(7*ZD+9*eN*r))),n*(QD+JD*r+i*(ZD+eN*r))]}dRe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<OSt&&(a=n*(QD+JD*r+i*(ZD+eN*r))-t,u=QD+3*JD*r+i*(7*ZD+9*eN*r),n-=o=a/u,r=n*n,i=r*r*r,!(Gr(o)<UG));++s);return[l5*e*(QD+3*JD*r+i*(7*ZD+9*eN*r))/Cn(n),Zc(xn(n)/l5)]};function MSt(){return lg(dRe).scale(177.158)}function hRe(e,t){var n=Cn(t),r=Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}hRe.invert=A3(rI);function LSt(){return lg(hRe).scale(144.049).clipAngle(60)}function $St(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=k9({point:function(E,T){var C=w([E,T]);this.stream.point(C[0],C[1])}}),m=XN,g,v;function b(){return d=e*r,h=e*i,g=v=null,w}function w(E){var T=E[0]*d,C=E[1]*h;if(s){var I=C*o-T*a;T=T*o+C*a,C=I}return[T+t,C+n]}return w.invert=function(E){var T=E[0]-t,C=E[1]-n;if(s){var I=C*o+T*a;T=T*o-C*a,C=I}return[T/d,C/h]},w.stream=function(E){return g&&v===E?g:g=p(m(v=E))},w.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,b()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,XN):Gke(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*Er,a=xn(s),o=Cn(s),b()):s*Ao},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,T){return R9(w,E,T)},w.fitSize=function(E,T){return rte(w,E,T)},w.fitWidth=function(E,T){return ite(w,E,T)},w.fitHeight=function(E,T){return ste(w,E,T)},w}function pRe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}pRe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Gr(i)>An&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function FSt(){return lg(pRe).scale(175.295)}function mRe(e,t){return[Cn(t)*xn(e),xn(t)]}mRe.invert=A3(Zc);function BSt(){return lg(mRe).scale(249.5).clipAngle(90+An)}function gRe(e,t){var n=Cn(t),r=1+Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}gRe.invert=A3(function(e){return 2*rI(e)});function jSt(){return lg(gRe).scale(250).clipAngle(142)}function yRe(e,t){return[zF(ete((ao+t)/2)),-e]}yRe.invert=function(e,t){return[-t,2*rI(Dke(e))-ao]};function USt(){var e=fRe(yRe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function zSt(e,t){return e.parent===t.parent?1:2}function VSt(e){return e.reduce(HSt,0)/e.length}function HSt(e,t){return e+t.x}function qSt(e){return 1+e.reduce(WSt,0)}function WSt(e,t){return Math.max(e,t.y)}function GSt(e){for(var t;t=e.children;)e=t[0];return e}function YSt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function KSt(){var e=zSt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=VSt(h),d.y=qSt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=GSt(s),l=YSt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function XSt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function QSt(){return this.eachAfter(XSt)}function JSt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function ZSt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function eTt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function tTt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function nTt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function rTt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function iTt(e){for(var t=this,n=sTt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function sTt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function oTt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function aTt(){return Array.from(this)}function uTt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function lTt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*cTt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function I3(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=hTt)):t===void 0&&(t=dTt);for(var n=new PC(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new PC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(vRe)}function fTt(){return I3(this).eachBefore(pTt)}function dTt(e){return e.children}function hTt(e){return Array.isArray(e)?e[1]:null}function pTt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vRe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function PC(e){this.data=e,this.depth=this.height=0,this.parent=null}PC.prototype=I3.prototype={constructor:PC,count:QSt,each:JSt,eachAfter:eTt,eachBefore:ZSt,find:tTt,sum:nTt,sort:rTt,path:iTt,ancestors:oTt,descendants:aTt,leaves:uTt,links:lTt,copy:fTt,[Symbol.iterator]:cTt};function o$(e){return e==null?null:bRe(e)}function bRe(e){if(typeof e!="function")throw new Error;return e}function uw(){return 0}function d2(e){return function(){return e}}const mTt=1664525,gTt=1013904223,pme=4294967296;function yTt(){let e=1;return()=>(e=(mTt*e+gTt)%pme)/pme}function vTt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bTt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function xTt(e,t){for(var n=0,r=(e=bTt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&xRe(o,s)?++n:(o=wTt(i=_Tt(i,s)),n=0);return o}function _Tt(e,t){var n,r;if(BV(t,e))return[t];for(n=0;n<e.length;++n)if(S6(t,e[n])&&BV(aD(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(S6(aD(e[n],e[r]),t)&&S6(aD(e[n],t),e[r])&&S6(aD(e[r],t),e[n])&&BV(_Re(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function S6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function xRe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function BV(e,t){for(var n=0;n<t.length;++n)if(!xRe(e,t[n]))return!1;return!0}function wTt(e){switch(e.length){case 1:return ETt(e[0]);case 2:return aD(e[0],e[1]);case 3:return _Re(e[0],e[1],e[2])}}function ETt(e){return{x:e.x,y:e.y,r:e.r}}function aD(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function _Re(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,v=f-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,E=b-l*l-c*c+f*f,T=h*p-d*m,C=(p*E-m*w)/(T*2)-r,I=(m*g-p*v)/T,R=(h*w-d*E)/(T*2)-i,N=(d*v-h*g)/T,O=I*I+N*N-1,L=2*(s+C*I+R*N),j=C*C+R*R-s*s,F=-(Math.abs(O)>1e-6?(L+Math.sqrt(L*L-4*O*j))/(2*O):j/L);return{x:r+C+I*F,y:i+R+N*F,r:F}}function mme(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function gme(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function yme(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function T6(e){this._=e,this.next=null,this.previous=null}function STt(e,t){if(!(s=(e=vTt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;mme(r,n,i=e[2]),n=new T6(n),r=new T6(r),i=new T6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){mme(n._,r._,i=e[u]),i=new T6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(gme(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(gme(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=yme(n);(i=i.next)!==r;)(a=yme(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=xTt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function TTt(e){return Math.sqrt(e.value)}function ate(){var e=null,t=1,n=1,r=uw;function i(s){const o=yTt();return s.x=t/2,s.y=n/2,e?s.eachBefore(vme(e)).eachAfter(jV(r,.5,o)).eachBefore(bme(1)):s.eachBefore(vme(TTt)).eachAfter(jV(uw,1,o)).eachAfter(jV(r,s.r/Math.min(t,n),o)).eachBefore(bme(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=o$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:d2(+s),i):r},i}function vme(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function jV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=STt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function bme(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function wRe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function k3(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function CTt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(wRe),o}function s(o,a){return function(u){u.children&&k3(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var ATt={depth:-1},xme={},UV={};function ITt(e){return e.id}function kTt(e){return e.parentId}function _me(){var e=ITt,t=kTt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const v=s.map((E,T)=>RTt(n(E,T,i))),b=v.map(wme),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(wme(E)),s.push(UV));o=(E,T)=>v[T],a=(E,T)=>b[T]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new PC(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?xme:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===xme)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===UV&&f.children.length===1;)f=f.children[0],--u;for(let v=s.length-1;v>=0&&(h=s[v],h.data===UV);--v)h.data=null}if(f.parent=ATt,f.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(vRe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=o$(i),r):e},r.parentId=function(i){return arguments.length?(t=o$(i),r):t},r.path=function(i){return arguments.length?(n=o$(i),r):n},r}function RTt(e){e=`${e}`;let t=e.length;return uY(e,t-1)&&!uY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function wme(e){let t=e.length;if(t<2)return"";for(;--t>1&&!uY(e,t););return e.slice(0,t)}function uY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function DTt(e,t){return e.parent===t.parent?1:2}function zV(e){var t=e.children;return t?t[0]:e.t}function VV(e){var t=e.children;return t?t[t.length-1]:e.t}function NTt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function PTt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function OTt(e,t,n){return e.a.parent===t.parent?e.a:n}function a$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}a$.prototype=Object.create(PC.prototype);function MTt(e){for(var t=new a$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new a$(s[o],o)),i.parent=n;return(t.parent=new a$(null,0)).children=[t],t}function LTt(){var e=DTt,t=1,n=1,r=null;function i(l){var c=MTt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*v})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){PTt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,v=h.m,b=p.m,w=m.m,E;p=VV(p),d=zV(d),p&&d;)m=zV(m),h=VV(h),h.a=l,E=p.z+b-d.z-g+e(p._,d._),E>0&&(NTt(OTt(p,l,f),l,E),g+=E,v+=E),b+=p.m,g+=d.m,w+=m.m,v+=h.m;p&&!VV(h)&&(h.t=p,h.m+=b-v),d&&!zV(m)&&(m.t=d,m.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function N9(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var ERe=(1+Math.sqrt(5))/2;function SRe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,v,b,w,E,T,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(v=b=g,T=Math.max(p/h,h/p)/(m*e),C=g*g*T,E=Math.max(b/C,C/v);f<d;++f){if(g+=l=a[f].value,l<v&&(v=l),l>b&&(b=l),C=g*g*T,w=Math.max(b/C,C/v),w>E){g-=l;break}E=w}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?k3(u,n,r,i,m?r+=p*g/m:s):N9(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const TRe=function e(t){function n(r,i,s,o,a){SRe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ERe);function $Tt(){var e=TRe,t=!1,n=1,r=1,i=[0],s=uw,o=uw,a=uw,u=uw,l=uw;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(wRe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,v=d.y1-h;g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,v-=u(d)-h,g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),e(d,p,m,g,v))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=bRe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:d2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:d2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:d2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:d2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:d2(+d),c):l},c}function FTt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,v){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=v;return}for(var w=l[f],E=h/2+w,T=f+1,C=d-1;T<C;){var I=T+C>>>1;l[I]<E?T=I+1:C=I}E-l[T-1]<l[T]-E&&f+1<T&&--T;var R=l[T]-w,N=h-R;if(g-p>v-m){var O=h?(p*N+g*R)/h:g;c(f,T,R,p,m,O,v),c(T,d,N,O,m,g,v)}else{var L=h?(m*N+v*R)/h:v;c(f,T,R,p,m,g,L),c(T,d,N,p,L,g,v)}}}function BTt(e,t,n,r,i){(e.depth&1?N9:k3)(e,t,n,r,i)}const jTt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?k3(l,i,s,o,m?s+=(a-s)*l.value/m:a):N9(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=SRe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ERe);function rm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Cx(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const lY=Symbol("implicit");function Ax(){var e=new rpe,t=[],n=[],r=lY;function i(s){let o=e.get(s);if(o===void 0){if(r!==lY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new rpe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ax(t,n).unknown(r)},rm.apply(i,arguments),i}function iI(){var e=Ax().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Wc(d).map(function(v){return p+s*v});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return iI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},rm.apply(f(),arguments)}function UTt(e){return function(){return e}}function cY(e){return+e}var Eme=[0,1];function Gc(e){return e}function fY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:UTt(isNaN(t)?NaN:.5)}function zTt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function VTt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=fY(i,r),s=n(o,s)):(r=fY(r,i),s=n(s,o)),function(a){return s(r(a))}}function HTt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=fY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Mb(e,a,1,r)-1;return s[u](i[u](a))}}function R3(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function P9(){var e=Eme,t=Eme,n=A1,r,i,s,o=Gc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Gc&&(o=zTt(e[0],e[d-1])),a=d>2?HTt:VTt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Qd)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,cY),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=S3,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Gc,c()):o!==Gc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function CRe(){return P9()(Gc,Gc)}function ARe(e,t,n,r){var i=Lb(e,t,n),s;switch(r=rE(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=kke(i,o))&&(r.precision=s),Zee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Rke(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ike(i))&&(r.precision=s-(r.type==="%")*2);break}}return Tx(r)}function KE(e){var t=e.domain;return e.ticks=function(n){var r=t();return EG(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ARe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=SG(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function ef(){var e=CRe();return e.copy=function(){return R3(e,ef())},rm.apply(e,arguments),KE(e)}function IRe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,cY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return IRe(e).unknown(t)},e=arguments.length?Array.from(e,cY):[0,1],KE(n)}function kRe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Sme(e){return Math.log(e)}function Tme(e){return Math.exp(e)}function qTt(e){return-Math.log(-e)}function WTt(e){return-Math.exp(-e)}function GTt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function YTt(e){return e===10?GTt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function KTt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Cme(e){return(t,n)=>-e(-t,n)}function ute(e){const t=e(Sme,Tme),n=t.domain;let r=10,i,s;function o(){return i=KTt(r),s=YTt(r),n()[0]<0?(i=Cme(i),s=Cme(s),e(qTt,WTt)):e(Sme,Tme),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}v.length*2<g&&(v=EG(l,c,g))}else v=EG(d,h,Math.min(h-d,g)).map(s);return f?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=rE(u)).precision==null&&(u.trim=!0),u=Tx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(kRe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function RRe(){const e=ute(P9()).domain([1,10]);return e.copy=()=>R3(e,RRe()).base(e.base()),rm.apply(e,arguments),e}function Ame(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ime(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lte(e){var t=1,n=e(Ame(t),Ime(t));return n.constant=function(r){return arguments.length?e(Ame(t=+r),Ime(t)):t},KE(n)}function DRe(){var e=lte(P9());return e.copy=function(){return R3(e,DRe()).constant(e.constant())},rm.apply(e,arguments)}function kme(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XTt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QTt(e){return e<0?-e*e:e*e}function cte(e){var t=e(Gc,Gc),n=1;function r(){return n===1?e(Gc,Gc):n===.5?e(XTt,QTt):e(kme(n),kme(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},KE(t)}function fte(){var e=cte(P9());return e.copy=function(){return R3(e,fte()).exponent(e.exponent())},rm.apply(e,arguments),e}function JTt(){return fte.apply(null,arguments).exponent(.5)}function NRe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=EIe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Mb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(jy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return NRe().domain(e).range(t).unknown(r)},rm.apply(s,arguments)}function dte(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Mb(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dte().domain([e,t]).range(i).unknown(s)},rm.apply(KE(o),arguments)}function PRe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Mb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return PRe().domain(e).range(t).unknown(n)},rm.apply(i,arguments)}const HV=new Date,qV=new Date;function ya(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ya(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(HV.setTime(+s),qV.setTime(+o),e(HV),e(qV),Math.floor(n(HV,qV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const OC=ya(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);OC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ya(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):OC);OC.range;const ky=1e3,ih=ky*60,Ry=ih*60,u1=Ry*24,hte=u1*7,Rme=u1*30,WV=u1*365,Dy=ya(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ky)},(e,t)=>(t-e)/ky,e=>e.getUTCSeconds());Dy.range;const O9=ya(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ky)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getMinutes());O9.range;const M9=ya(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getUTCMinutes());M9.range;const L9=ya(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ky-e.getMinutes()*ih)},(e,t)=>{e.setTime(+e+t*Ry)},(e,t)=>(t-e)/Ry,e=>e.getHours());L9.range;const $9=ya(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ry)},(e,t)=>(t-e)/Ry,e=>e.getUTCHours());$9.range;const Vy=ya(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ih)/u1,e=>e.getDate()-1);Vy.range;const gb=ya(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/u1,e=>e.getUTCDate()-1);gb.range;const ORe=ya(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/u1,e=>Math.floor(e/u1));ORe.range;function XE(e){return ya(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ih)/hte)}const sI=XE(0),c5=XE(1),ZTt=XE(2),e2t=XE(3),MC=XE(4),t2t=XE(5),n2t=XE(6);sI.range;c5.range;ZTt.range;e2t.range;MC.range;t2t.range;n2t.range;function QE(e){return ya(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/hte)}const oI=QE(0),f5=QE(1),r2t=QE(2),i2t=QE(3),LC=QE(4),s2t=QE(5),o2t=QE(6);oI.range;f5.range;r2t.range;i2t.range;LC.range;s2t.range;o2t.range;const ZN=ya(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ZN.range;const eP=ya(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eP.range;const H0=ya(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());H0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ya(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});H0.range;const q0=ya(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());q0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ya(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});q0.range;function MRe(e,t,n,r,i,s){const o=[[Dy,1,ky],[Dy,5,5*ky],[Dy,15,15*ky],[Dy,30,30*ky],[s,1,ih],[s,5,5*ih],[s,15,15*ih],[s,30,30*ih],[i,1,Ry],[i,3,3*Ry],[i,6,6*Ry],[i,12,12*Ry],[r,1,u1],[r,2,2*u1],[n,1,hte],[t,1,Rme],[t,3,3*Rme],[e,1,WV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=tI(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Lb(l/WV,c/WV,f));if(h===0)return OC.every(Math.max(Lb(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[a2t,u2t]=MRe(q0,eP,oI,ORe,$9,M9),[l2t,c2t]=MRe(H0,ZN,sI,Vy,L9,O9);function GV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function YV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fR(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function LRe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=dR(i),c=hR(i),f=dR(s),d=hR(s),h=dR(o),p=hR(o),m=dR(a),g=hR(a),v=dR(u),b=hR(u),w={a:ne,A:Z,b:ie,B:q,c:null,d:Lme,e:Lme,f:P2t,g:V2t,G:q2t,H:R2t,I:D2t,j:N2t,L:$Re,m:O2t,M:M2t,p:U,q:G,Q:Bme,s:jme,S:L2t,u:$2t,U:F2t,V:B2t,w:j2t,W:U2t,x:null,X:null,y:z2t,Y:H2t,Z:W2t,"%":Fme},E={a:V,A:Y,b:ee,B:ae,c:null,d:$me,e:$me,f:X2t,g:oCt,G:uCt,H:G2t,I:Y2t,j:K2t,L:BRe,m:Q2t,M:J2t,p:_e,q:pe,Q:Bme,s:jme,S:Z2t,u:eCt,U:tCt,V:nCt,w:rCt,W:iCt,x:null,X:null,y:sCt,Y:aCt,Z:lCt,"%":Fme},T={a:O,A:L,b:j,B:F,c:H,d:Ome,e:Ome,f:C2t,g:Pme,G:Nme,H:Mme,I:Mme,j:w2t,L:T2t,m:_2t,M:E2t,p:N,q:x2t,Q:I2t,s:k2t,S:S2t,u:m2t,U:g2t,V:y2t,w:p2t,W:v2t,x:Q,X:J,y:Pme,Y:Nme,Z:b2t,"%":A2t};w.x=C(n,w),w.X=C(r,w),w.c=C(t,w),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(Se,Le){return function(ye){var he=[],$e=-1,De=0,tt=Se.length,it,Me,Ge;for(ye instanceof Date||(ye=new Date(+ye));++$e<tt;)Se.charCodeAt($e)===37&&(he.push(Se.slice(De,$e)),(Me=Dme[it=Se.charAt(++$e)])!=null?it=Se.charAt(++$e):Me=it==="e"?" ":"0",(Ge=Le[it])&&(it=Ge(ye,Me)),he.push(it),De=$e+1);return he.push(Se.slice(De,$e)),he.join("")}}function I(Se,Le){return function(ye){var he=fR(1900,void 0,1),$e=R(he,Se,ye+="",0),De,tt;if($e!=ye.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Le&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(De=YV(fR(he.y,0,1)),tt=De.getUTCDay(),De=tt>4||tt===0?f5.ceil(De):f5(De),De=gb.offset(De,(he.V-1)*7),he.y=De.getUTCFullYear(),he.m=De.getUTCMonth(),he.d=De.getUTCDate()+(he.w+6)%7):(De=GV(fR(he.y,0,1)),tt=De.getDay(),De=tt>4||tt===0?c5.ceil(De):c5(De),De=Vy.offset(De,(he.V-1)*7),he.y=De.getFullYear(),he.m=De.getMonth(),he.d=De.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),tt="Z"in he?YV(fR(he.y,0,1)).getUTCDay():GV(fR(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(tt+5)%7:he.w+he.U*7-(tt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,YV(he)):GV(he)}}function R(Se,Le,ye,he){for(var $e=0,De=Le.length,tt=ye.length,it,Me;$e<De;){if(he>=tt)return-1;if(it=Le.charCodeAt($e++),it===37){if(it=Le.charAt($e++),Me=T[it in Dme?Le.charAt($e++):it],!Me||(he=Me(Se,ye,he))<0)return-1}else if(it!=ye.charCodeAt(he++))return-1}return he}function N(Se,Le,ye){var he=l.exec(Le.slice(ye));return he?(Se.p=c.get(he[0].toLowerCase()),ye+he[0].length):-1}function O(Se,Le,ye){var he=h.exec(Le.slice(ye));return he?(Se.w=p.get(he[0].toLowerCase()),ye+he[0].length):-1}function L(Se,Le,ye){var he=f.exec(Le.slice(ye));return he?(Se.w=d.get(he[0].toLowerCase()),ye+he[0].length):-1}function j(Se,Le,ye){var he=v.exec(Le.slice(ye));return he?(Se.m=b.get(he[0].toLowerCase()),ye+he[0].length):-1}function F(Se,Le,ye){var he=m.exec(Le.slice(ye));return he?(Se.m=g.get(he[0].toLowerCase()),ye+he[0].length):-1}function H(Se,Le,ye){return R(Se,t,Le,ye)}function Q(Se,Le,ye){return R(Se,n,Le,ye)}function J(Se,Le,ye){return R(Se,r,Le,ye)}function ne(Se){return o[Se.getDay()]}function Z(Se){return s[Se.getDay()]}function ie(Se){return u[Se.getMonth()]}function q(Se){return a[Se.getMonth()]}function U(Se){return i[+(Se.getHours()>=12)]}function G(Se){return 1+~~(Se.getMonth()/3)}function V(Se){return o[Se.getUTCDay()]}function Y(Se){return s[Se.getUTCDay()]}function ee(Se){return u[Se.getUTCMonth()]}function ae(Se){return a[Se.getUTCMonth()]}function _e(Se){return i[+(Se.getUTCHours()>=12)]}function pe(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Le=C(Se+="",w);return Le.toString=function(){return Se},Le},parse:function(Se){var Le=I(Se+="",!1);return Le.toString=function(){return Se},Le},utcFormat:function(Se){var Le=C(Se+="",E);return Le.toString=function(){return Se},Le},utcParse:function(Se){var Le=I(Se+="",!0);return Le.toString=function(){return Se},Le}}}var Dme={"-":"",_:" ",0:"0"},Ga=/^\s*\d+/,f2t=/^%/,d2t=/[\\^$*+?|[\]().{}]/g;function vi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function h2t(e){return e.replace(d2t,"\\$&")}function dR(e){return new RegExp("^(?:"+e.map(h2t).join("|")+")","i")}function hR(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function p2t(e,t,n){var r=Ga.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function m2t(e,t,n){var r=Ga.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function g2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function y2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function v2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Nme(e,t,n){var r=Ga.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Pme(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function b2t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function x2t(e,t,n){var r=Ga.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function _2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ome(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function w2t(e,t,n){var r=Ga.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Mme(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function E2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function S2t(e,t,n){var r=Ga.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function T2t(e,t,n){var r=Ga.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function C2t(e,t,n){var r=Ga.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function A2t(e,t,n){var r=f2t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function I2t(e,t,n){var r=Ga.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function k2t(e,t,n){var r=Ga.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Lme(e,t){return vi(e.getDate(),t,2)}function R2t(e,t){return vi(e.getHours(),t,2)}function D2t(e,t){return vi(e.getHours()%12||12,t,2)}function N2t(e,t){return vi(1+Vy.count(H0(e),e),t,3)}function $Re(e,t){return vi(e.getMilliseconds(),t,3)}function P2t(e,t){return $Re(e,t)+"000"}function O2t(e,t){return vi(e.getMonth()+1,t,2)}function M2t(e,t){return vi(e.getMinutes(),t,2)}function L2t(e,t){return vi(e.getSeconds(),t,2)}function $2t(e){var t=e.getDay();return t===0?7:t}function F2t(e,t){return vi(sI.count(H0(e)-1,e),t,2)}function FRe(e){var t=e.getDay();return t>=4||t===0?MC(e):MC.ceil(e)}function B2t(e,t){return e=FRe(e),vi(MC.count(H0(e),e)+(H0(e).getDay()===4),t,2)}function j2t(e){return e.getDay()}function U2t(e,t){return vi(c5.count(H0(e)-1,e),t,2)}function z2t(e,t){return vi(e.getFullYear()%100,t,2)}function V2t(e,t){return e=FRe(e),vi(e.getFullYear()%100,t,2)}function H2t(e,t){return vi(e.getFullYear()%1e4,t,4)}function q2t(e,t){var n=e.getDay();return e=n>=4||n===0?MC(e):MC.ceil(e),vi(e.getFullYear()%1e4,t,4)}function W2t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vi(t/60|0,"0",2)+vi(t%60,"0",2)}function $me(e,t){return vi(e.getUTCDate(),t,2)}function G2t(e,t){return vi(e.getUTCHours(),t,2)}function Y2t(e,t){return vi(e.getUTCHours()%12||12,t,2)}function K2t(e,t){return vi(1+gb.count(q0(e),e),t,3)}function BRe(e,t){return vi(e.getUTCMilliseconds(),t,3)}function X2t(e,t){return BRe(e,t)+"000"}function Q2t(e,t){return vi(e.getUTCMonth()+1,t,2)}function J2t(e,t){return vi(e.getUTCMinutes(),t,2)}function Z2t(e,t){return vi(e.getUTCSeconds(),t,2)}function eCt(e){var t=e.getUTCDay();return t===0?7:t}function tCt(e,t){return vi(oI.count(q0(e)-1,e),t,2)}function jRe(e){var t=e.getUTCDay();return t>=4||t===0?LC(e):LC.ceil(e)}function nCt(e,t){return e=jRe(e),vi(LC.count(q0(e),e)+(q0(e).getUTCDay()===4),t,2)}function rCt(e){return e.getUTCDay()}function iCt(e,t){return vi(f5.count(q0(e)-1,e),t,2)}function sCt(e,t){return vi(e.getUTCFullYear()%100,t,2)}function oCt(e,t){return e=jRe(e),vi(e.getUTCFullYear()%100,t,2)}function aCt(e,t){return vi(e.getUTCFullYear()%1e4,t,4)}function uCt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?LC(e):LC.ceil(e),vi(e.getUTCFullYear()%1e4,t,4)}function lCt(){return"+0000"}function Fme(){return"%"}function Bme(e){return+e}function jme(e){return Math.floor(+e/1e3)}var UT,pte,URe,D3,zRe;cCt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cCt(e){return UT=LRe(e),pte=UT.format,URe=UT.parse,D3=UT.utcFormat,zRe=UT.utcParse,UT}function fCt(e){return new Date(e)}function dCt(e){return e instanceof Date?+e:+new Date(+e)}function mte(e,t,n,r,i,s,o,a,u,l){var c=CRe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function T(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?v:b:n(C)<C?w:E)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,dCt)):d().map(fCt)},c.ticks=function(C){var I=d();return e(I[0],I[I.length-1],C??10)},c.tickFormat=function(C,I){return I==null?T:l(I)},c.nice=function(C){var I=d();return(!C||typeof C.range!="function")&&(C=t(I[0],I[I.length-1],C??10)),C?d(kRe(I,C)):c},c.copy=function(){return R3(c,mte(e,t,n,r,i,s,o,a,u,l))},c}function gte(){return rm.apply(mte(l2t,c2t,H0,ZN,sI,Vy,L9,O9,Dy,pte).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hCt(){return rm.apply(mte(a2t,u2t,q0,eP,oI,gb,$9,M9,Dy,D3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F9(){var e=0,t=1,n,r,i,s,o=Gc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(A1),l.rangeRound=c(S3),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Ix(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yte(){var e=KE(F9()(Gc));return e.copy=function(){return Ix(e,yte())},Cx.apply(e,arguments)}function VRe(){var e=ute(F9()).domain([1,10]);return e.copy=function(){return Ix(e,VRe()).base(e.base())},Cx.apply(e,arguments)}function HRe(){var e=lte(F9());return e.copy=function(){return Ix(e,HRe()).constant(e.constant())},Cx.apply(e,arguments)}function vte(){var e=cte(F9());return e.copy=function(){return Ix(e,vte()).exponent(e.exponent())},Cx.apply(e,arguments)}function pCt(){return vte.apply(null,arguments).exponent(.5)}function B9(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Gc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,l=zee(m,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(A1),h.rangeRound=p(S3),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function qRe(){var e=KE(B9()(Gc));return e.copy=function(){return Ix(e,qRe())},Cx.apply(e,arguments)}function WRe(){var e=ute(B9()).domain([.1,1,10]);return e.copy=function(){return Ix(e,WRe()).base(e.base())},Cx.apply(e,arguments)}function GRe(){var e=lte(B9());return e.copy=function(){return Ix(e,GRe()).constant(e.constant())},Cx.apply(e,arguments)}function bte(){var e=cte(B9());return e.copy=function(){return Ix(e,bte()).exponent(e.exponent())},Cx.apply(e,arguments)}function mCt(){return bte.apply(null,arguments).exponent(.5)}function im(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const gCt=im("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yCt=im("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vCt=im("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),bCt=im("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),xCt=im("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_Ct=im("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),wCt=im("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ECt=im("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),SCt=im("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),TCt=im("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),j9=im("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function mr(e){return function(){return e}}const Ume=Math.abs,Wu=Math.atan2,N_=Math.cos,CCt=Math.max,KV=Math.min,Fm=Math.sin,Tw=Math.sqrt,Gu=1e-12,$C=Math.PI,d5=$C/2,tN=2*$C;function ACt(e){return e>1?0:e<-1?$C:Math.acos(e)}function zme(e){return e>=1?d5:e<=-1?-d5:Math.asin(e)}function U9(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Gee(t)}function ICt(e){return e.innerRadius}function kCt(e){return e.outerRadius}function RCt(e){return e.startAngle}function DCt(e){return e.endAngle}function NCt(e){return e&&e.padAngle}function PCt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Gu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function C6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Tw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,v=(h+m)/2,b=p-d,w=m-h,E=b*b+w*w,T=i-s,C=d*m-p*h,I=(w<0?-1:1)*Tw(CCt(0,T*T*E-C*C)),R=(C*w-b*I)/E,N=(-C*b-w*I)/E,O=(C*w+b*I)/E,L=(-C*b+w*I)/E,j=R-g,F=N-v,H=O-g,Q=L-v;return j*j+F*F>H*H+Q*Q&&(R=O,N=L),{cx:R,cy:N,x01:-c,y01:-f,x11:R*(i/T-1),y11:N*(i/T-1)}}function dY(){var e=ICt,t=kCt,n=mr(0),r=null,i=RCt,s=DCt,o=NCt,a=null,u=U9(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-d5,m=s.apply(this,arguments)-d5,g=Ume(m-p),v=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Gu))a.moveTo(0,0);else if(g>tN-Gu)a.moveTo(h*N_(p),h*Fm(p)),a.arc(0,0,h,p,m,!v),d>Gu&&(a.moveTo(d*N_(m),d*Fm(m)),a.arc(0,0,d,m,p,v));else{var b=p,w=m,E=p,T=m,C=g,I=g,R=o.apply(this,arguments)/2,N=R>Gu&&(r?+r.apply(this,arguments):Tw(d*d+h*h)),O=KV(Ume(h-d)/2,+n.apply(this,arguments)),L=O,j=O,F,H;if(N>Gu){var Q=zme(N/d*Fm(R)),J=zme(N/h*Fm(R));(C-=Q*2)>Gu?(Q*=v?1:-1,E+=Q,T-=Q):(C=0,E=T=(p+m)/2),(I-=J*2)>Gu?(J*=v?1:-1,b+=J,w-=J):(I=0,b=w=(p+m)/2)}var ne=h*N_(b),Z=h*Fm(b),ie=d*N_(T),q=d*Fm(T);if(O>Gu){var U=h*N_(w),G=h*Fm(w),V=d*N_(E),Y=d*Fm(E),ee;if(g<$C)if(ee=PCt(ne,Z,V,Y,U,G,ie,q)){var ae=ne-ee[0],_e=Z-ee[1],pe=U-ee[0],Se=G-ee[1],Le=1/Fm(ACt((ae*pe+_e*Se)/(Tw(ae*ae+_e*_e)*Tw(pe*pe+Se*Se)))/2),ye=Tw(ee[0]*ee[0]+ee[1]*ee[1]);L=KV(O,(d-ye)/(Le-1)),j=KV(O,(h-ye)/(Le+1))}else L=j=0}I>Gu?j>Gu?(F=C6(V,Y,ne,Z,h,j,v),H=C6(U,G,ie,q,h,j,v),a.moveTo(F.cx+F.x01,F.cy+F.y01),j<O?a.arc(F.cx,F.cy,j,Wu(F.y01,F.x01),Wu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,j,Wu(F.y01,F.x01),Wu(F.y11,F.x11),!v),a.arc(0,0,h,Wu(F.cy+F.y11,F.cx+F.x11),Wu(H.cy+H.y11,H.cx+H.x11),!v),a.arc(H.cx,H.cy,j,Wu(H.y11,H.x11),Wu(H.y01,H.x01),!v))):(a.moveTo(ne,Z),a.arc(0,0,h,b,w,!v)):a.moveTo(ne,Z),!(d>Gu)||!(C>Gu)?a.lineTo(ie,q):L>Gu?(F=C6(ie,q,U,G,d,-L,v),H=C6(ne,Z,V,Y,d,-L,v),a.lineTo(F.cx+F.x01,F.cy+F.y01),L<O?a.arc(F.cx,F.cy,L,Wu(F.y01,F.x01),Wu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,L,Wu(F.y01,F.x01),Wu(F.y11,F.x11),!v),a.arc(0,0,d,Wu(F.cy+F.y11,F.cx+F.x11),Wu(H.cy+H.y11,H.cx+H.x11),v),a.arc(H.cx,H.cy,L,Wu(H.y11,H.x11),Wu(H.y01,H.x01),!v))):a.arc(0,0,d,T,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-$C/2;return[N_(f)*c,Fm(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:mr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:mr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:mr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:mr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:mr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:mr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:mr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function z9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YRe(e){this._context=e}YRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xte(e){return new YRe(e)}function KRe(e){return e[0]}function XRe(e){return e[1]}function QRe(e,t){var n=mr(!0),r=null,i=xte,s=null,o=U9(a);e=typeof e=="function"?e:e===void 0?KRe:mr(e),t=typeof t=="function"?t:t===void 0?XRe:mr(t);function a(u){var l,c=(u=z9(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:mr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:mr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:mr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function JRe(e,t,n){var r=null,i=mr(!0),s=null,o=xte,a=null,u=U9(l);e=typeof e=="function"?e:e===void 0?KRe:mr(+e),t=typeof t=="function"?t:mr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?XRe:mr(+n);function l(f){var d,h,p,m=(f=z9(f)).length,g,v=!1,b,w=new Array(m),E=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}v&&(w[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return QRe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:mr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:mr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function OCt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function MCt(e){return e}function LCt(){var e=MCt,t=OCt,n=null,r=mr(0),i=mr(tN),s=mr(0);function o(a){var u,l=(a=z9(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(tN,Math.max(-tN,i.apply(this,arguments)-m)),v,b=Math.min(Math.abs(g)/l,s.apply(this,arguments)),w=b*(g<0?-1:1),E;for(u=0;u<l;++u)(E=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=E);for(t!=null?h.sort(function(T,C){return t(p[T],p[C])}):n!=null&&h.sort(function(T,C){return n(a[T],a[C])}),u=0,f=d?(g-l*w)/d:0;u<l;++u,m=v)c=h[u],E=p[c],v=m+(E>0?E*f:0)+w,p[c]={data:a[c],index:u,value:E,startAngle:m,endAngle:v,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:mr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:mr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:mr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:mr(+a),o):s},o}const $Ct={draw(e,t){const n=Tw(t/$C);e.moveTo(n,0),e.arc(0,0,n,0,tN)}};function FCt(e,t){let n=null,r=U9(i);e=typeof e=="function"?e:mr(e||$Ct),t=typeof t=="function"?t:mr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:mr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:mr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Fb(){}function h5(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function V9(e){this._context=e}V9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BCt(e){return new V9(e)}function ZRe(e){this._context=e}ZRe.prototype={areaStart:Fb,areaEnd:Fb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jCt(e){return new ZRe(e)}function eDe(e){this._context=e}eDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:h5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UCt(e){return new eDe(e)}function tDe(e,t){this._basis=new V9(e),this._beta=t}tDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zCt=function e(t){function n(r){return t===1?new V9(r):new tDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function p5(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function _te(e,t){this._context=e,this._k=(1-t)/6}_te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:p5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:p5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VCt=function e(t){function n(r){return new _te(r,t)}return n.tension=function(r){return e(+r)},n}(0);function wte(e,t){this._context=e,this._k=(1-t)/6}wte.prototype={areaStart:Fb,areaEnd:Fb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:p5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HCt=function e(t){function n(r){return new wte(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Ete(e,t){this._context=e,this._k=(1-t)/6}Ete.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:p5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qCt=function e(t){function n(r){return new Ete(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Ste(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Gu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Gu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function nDe(e,t){this._context=e,this._alpha=t}nDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ste(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WCt=function e(t){function n(r){return t?new nDe(r,t):new _te(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function rDe(e,t){this._context=e,this._alpha=t}rDe.prototype={areaStart:Fb,areaEnd:Fb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ste(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GCt=function e(t){function n(r){return t?new rDe(r,t):new wte(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function iDe(e,t){this._context=e,this._alpha=t}iDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ste(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YCt=function e(t){function n(r){return t?new iDe(r,t):new Ete(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sDe(e){this._context=e}sDe.prototype={areaStart:Fb,areaEnd:Fb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function KCt(e){return new sDe(e)}function Vme(e){return e<0?-1:1}function Hme(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Vme(s)+Vme(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function qme(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function XV(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function m5(e){this._context=e}m5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XV(this,this._t0,qme(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,XV(this,qme(this,n=Hme(this,e,t)),n);break;default:XV(this,this._t0,n=Hme(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function oDe(e){this._context=new aDe(e)}(oDe.prototype=Object.create(m5.prototype)).point=function(e,t){m5.prototype.point.call(this,t,e)};function aDe(e){this._context=e}aDe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function XCt(e){return new m5(e)}function QCt(e){return new oDe(e)}function uDe(e){this._context=e}uDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Wme(e),i=Wme(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Wme(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function JCt(e){return new uDe(e)}function H9(e,t){this._context=e,this._t=t}H9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ZCt(e){return new H9(e,.5)}function eAt(e){return new H9(e,0)}function tAt(e){return new H9(e,1)}function Gme(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Yme(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function nAt(e,t){return e[t]}function rAt(e){const t=[];return t.key=e,t}function iAt(){var e=mr([]),t=Yme,n=Gme,r=nAt;function i(s){var o=Array.from(e.apply(this,arguments),rAt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=z9(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:mr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:mr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Yme:typeof s=="function"?s:mr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Gme,i):n},i}function uD(e,t,n){this.k=e,this.x=t,this.y=n}uD.prototype={constructor:uD,scale:function(e){return e===1?this:new uD(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new uD(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};uD.prototype;function _p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Bb(e){return!!e&&!!e[Ps]}function l1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===hAt}(e)||Array.isArray(e)||!!e[t0e]||!!(!((t=e.constructor)===null||t===void 0)&&t[t0e])||Tte(e)||Cte(e))}function oE(e,t,n){n===void 0&&(n=!1),aI(e)===0?(n?Object.keys:G2)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function aI(e){var t=e[Ps];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Tte(e)?2:Cte(e)?3:0}function W2(e,t){return aI(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sAt(e,t){return aI(e)===2?e.get(t):e[t]}function lDe(e,t,n){var r=aI(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function cDe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Tte(e){return fAt&&e instanceof Map}function Cte(e){return dAt&&e instanceof Set}function Z_(e){return e.o||e.t}function Ate(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=dDe(e);delete t[Ps];for(var n=G2(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ite(e,t){return t===void 0&&(t=!1),kte(e)||Bb(e)||!l1(e)||(aI(e)>1&&(e.set=e.add=e.clear=e.delete=oAt),Object.freeze(e),t&&oE(e,function(n,r){return Ite(r,!0)},!0)),e}function oAt(){_p(2)}function kte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function A0(e){var t=gY[e];return t||_p(18,e),t}function aAt(e,t){gY[e]||(gY[e]=t)}function hY(){return tP}function QV(e,t){t&&(A0("Patches"),e.u=[],e.s=[],e.v=t)}function g5(e){pY(e),e.p.forEach(uAt),e.p=null}function pY(e){e===tP&&(tP=e.l)}function Kme(e){return tP={p:[],l:tP,h:e,m:!0,_:0}}function uAt(e){var t=e[Ps];t.i===0||t.i===1?t.j():t.g=!0}function JV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||A0("ES5").S(t,e,r),r?(n[Ps].P&&(g5(t),_p(4)),l1(e)&&(e=y5(t,e),t.l||v5(t,e)),t.u&&A0("Patches").M(n[Ps].t,e,t.u,t.s)):e=y5(t,n,[]),g5(t),t.u&&t.v(t.u,t.s),e!==fDe?e:void 0}function y5(e,t,n){if(kte(t))return t;var r=t[Ps];if(!r)return oE(t,function(a,u){return Xme(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return v5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ate(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),oE(s,function(a,u){return Xme(e,r,i,a,u,n,o)}),v5(e,i,!1),n&&e.u&&A0("Patches").N(r,n,e.u,e.s)}return r.o}function Xme(e,t,n,r,i,s,o){if(Bb(i)){var a=y5(e,i,s&&t&&t.i!==3&&!W2(t.R,r)?s.concat(r):void 0);if(lDe(n,r,a),!Bb(a))return;e.m=!1}else o&&n.add(i);if(l1(i)&&!kte(i)){if(!e.h.D&&e._<1)return;y5(e,i),t&&t.A.l||v5(e,i)}}function v5(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Ite(t,n)}function ZV(e,t){var n=e[Ps];return(n?Z_(n):e)[t]}function Qme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xv(e){e.P||(e.P=!0,e.l&&Xv(e.l))}function eH(e){e.o||(e.o=Ate(e.t))}function mY(e,t,n){var r=Tte(t)?A0("MapSet").F(t,n):Cte(t)?A0("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:hY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=nP;o&&(u=[a],l=lD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):A0("ES5").J(t,n);return(n?n.A:hY()).p.push(r),r}function lAt(e){return Bb(e)||_p(22,e),function t(n){if(!l1(n))return n;var r,i=n[Ps],s=aI(n);if(i){if(!i.P&&(i.i<4||!A0("ES5").K(i)))return i.t;i.I=!0,r=Jme(n,s),i.I=!1}else r=Jme(n,s);return oE(r,function(o,a){i&&sAt(i.t,o)===a||lDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Jme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ate(e)}function cAt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ps];return nP.get(u,s)},set:function(u){var l=this[Ps];nP.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ps];if(!a.P)switch(a.i){case 5:r(a)&&Xv(a);break;case 4:n(a)&&Xv(a)}}}function n(s){for(var o=s.t,a=s.k,u=G2(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ps){var f=o[c];if(f===void 0&&!W2(o,c))return!0;var d=a[c],h=d&&d[Ps];if(h?h.t!==f:!cDe(d,f))return!0}}var p=!!o[Ps];return u.length!==G2(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};aAt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=dDe(f);delete p[Ps];for(var m=G2(p),g=0;g<m.length;g++){var v=m[g];p[v]=e(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:hY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ps,{value:l,writable:!0}),u},S:function(s,o,a){a?Bb(o)&&o[Ps].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ps];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)oE(d,function(w){w!==Ps&&(f[w]!==void 0||W2(f,w)?h[w]||u(d[w]):(h[w]=!0,Xv(c)))}),oE(f,function(w){d[w]!==void 0||W2(d,w)||(h[w]=!1,Xv(c))});else if(p===5){if(r(c)&&(Xv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var v=Math.min(d.length,f.length),b=0;b<v;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Zme,tP,Rte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",fAt=typeof Map<"u",dAt=typeof Set<"u",e0e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",fDe=Rte?Symbol.for("immer-nothing"):((Zme={})["immer-nothing"]=!0,Zme),t0e=Rte?Symbol.for("immer-draftable"):"__$immer_draftable",Ps=Rte?Symbol.for("immer-state"):"__$immer_state",hAt=""+Object.prototype.constructor,G2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,dDe=Object.getOwnPropertyDescriptors||function(e){var t={};return G2(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},gY={},nP={get:function(e,t){if(t===Ps)return e;var n=Z_(e);if(!W2(n,t))return function(i,s,o){var a,u=Qme(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!l1(r)?r:r===ZV(e.t,t)?(eH(e),e.o[t]=mY(e.A.h,r,e)):r},has:function(e,t){return t in Z_(e)},ownKeys:function(e){return Reflect.ownKeys(Z_(e))},set:function(e,t,n){var r=Qme(Z_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ZV(Z_(e),t),s=i==null?void 0:i[Ps];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(cDe(n,i)&&(n!==void 0||W2(e.t,t)))return!0;eH(e),Xv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return ZV(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,eH(e),Xv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Z_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_p(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_p(12)}},lD={};oE(nP,function(e,t){lD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),lD.deleteProperty=function(e,t){return lD.set.call(this,e,t,void 0)},lD.set=function(e,t,n){return nP.set.call(this,e[0],t,n,e[0])};var pAt=function(){function e(n){var r=this;this.O=e0e,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[g,E].concat(b))})}}var l;if(typeof s!="function"&&_p(6),o!==void 0&&typeof o!="function"&&_p(7),l1(i)){var c=Kme(r),f=mY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?g5(c):pY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return QV(c,o),JV(m,c)},function(m){throw g5(c),m}):(QV(c,o),JV(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===fDe&&(l=void 0),r.D&&Ite(l,!0),o){var h=[],p=[];A0("Patches").M(i,l,h,p),o(h,p)}return l}_p(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){l1(n)||_p(8),Bb(n)&&(n=lAt(n));var r=Kme(this),i=mY(this,n,void 0);return i[Ps].C=!0,pY(r),i},t.finishDraft=function(n,r){var i=n&&n[Ps],s=i.A;return QV(s,r),JV(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!e0e&&_p(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=A0("Patches").$;return Bb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),dd=new pAt,hDe=dd.produce;dd.produceWithPatches.bind(dd);dd.setAutoFreeze.bind(dd);dd.setUseProxies.bind(dd);dd.applyPatches.bind(dd);dd.createDraft.bind(dd);dd.finishDraft.bind(dd);function rP(e){"@babel/helpers - typeof";return rP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rP(e)}function mAt(e,t){if(rP(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gAt(e){var t=mAt(e,"string");return rP(t)=="symbol"?t:t+""}function yAt(e,t,n){return(t=gAt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n0e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n0e(Object(n),!0).forEach(function(r){yAt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n0e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ku(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i0e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),tH=function(){return Math.random().toString(36).substring(7).split("").join(".")},b5={INIT:"@@redux/INIT"+tH(),REPLACE:"@@redux/REPLACE"+tH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tH()}};function vAt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function pDe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ku(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ku(1));return n(pDe)(e,t)}if(typeof e!="function")throw new Error(Ku(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ku(3));return s}function f(m){if(typeof m!="function")throw new Error(Ku(4));if(u)throw new Error(Ku(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Ku(6));g=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!vAt(m))throw new Error(Ku(7));if(typeof m.type>"u")throw new Error(Ku(8));if(u)throw new Error(Ku(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,v=0;v<g.length;v++){var b=g[v];b()}return m}function h(m){if(typeof m!="function")throw new Error(Ku(10));i=m,d({type:b5.REPLACE})}function p(){var m,g=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ku(11));function w(){b.next&&b.next(c())}w();var E=g(w);return{unsubscribe:E}}},m[i0e]=function(){return this},m}return d({type:b5.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[i0e]=p,r}function bAt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:b5.INIT});if(typeof r>"u")throw new Error(Ku(12));if(typeof n(void 0,{type:b5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ku(13))})}function xAt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{bAt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Ku(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function x5(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function _At(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ku(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=x5.apply(void 0,a)(i.dispatch),r0e(r0e({},i),{},{dispatch:s})}}}function mDe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var yY=mDe();yY.withExtraArgument=mDe;var gDe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),N3=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},aE=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},wAt=Object.defineProperty,EAt=Object.defineProperties,SAt=Object.getOwnPropertyDescriptors,s0e=Object.getOwnPropertySymbols,TAt=Object.prototype.hasOwnProperty,CAt=Object.prototype.propertyIsEnumerable,o0e=function(e,t,n){return t in e?wAt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},yb=function(e,t){for(var n in t||(t={}))TAt.call(t,n)&&o0e(e,n,t[n]);if(s0e)for(var r=0,i=s0e(t);r<i.length;r++){var n=i[r];CAt.call(t,n)&&o0e(e,n,t[n])}return e},nH=function(e,t){return EAt(e,SAt(t))},P3=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},AAt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?x5:x5.apply(null,arguments)};function yDe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var IAt=function(e){return e&&typeof e.match=="function"};function I0(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return yb(yb({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function kAt(e){return yDe(e)&&"type"in e}var RAt=function(e){gDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,aE([void 0],n[0].concat(this)))):new(t.bind.apply(t,aE([void 0],n.concat(this))))},t}(Array),DAt=function(e){gDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,aE([void 0],n[0].concat(this)))):new(t.bind.apply(t,aE([void 0],n.concat(this))))},t}(Array);function vY(e){return l1(e)?hDe(e,function(){}):e}function NAt(e){return typeof e=="boolean"}function PAt(){return function(t){return OAt(t)}}function OAt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new RAt;return n&&(NAt(n)?r.push(yY):r.push(yY.withExtraArgument(n.extraArgument))),r}function MAt(e){var t=PAt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(yDe(i))h=xAt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=_At.apply(void 0,p),g=x5;u&&(g=AAt(yb({trace:!1},typeof u=="object"&&u)));var v=new DAt(m),b=v;Array.isArray(d)?b=aE([m],d):typeof d=="function"&&(b=d(v));var w=g.apply(void 0,b);return pDe(h,c,w)}function vDe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function LAt(e){return typeof e=="function"}function $At(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?vDe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(LAt(e))u=function(){return vY(e())};else{var l=vY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=aE([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Bb(p)){var g=p,v=m(g,d);return v===void 0?p:v}else{if(l1(p))return hDe(p,function(b){return m(b,d)});var v=m(p,d);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},f)}return c.getInitialState=u,c}function FAt(e,t){return e+"/"+t}function BAt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:vY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=FAt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?I0(d,p):I0(d)});function u(){var c=typeof e.extraReducers=="function"?vDe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,v=yb(yb({},d),o);return $At(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,T=p;E<T.length;E++){var C=T[E];b.addMatcher(C.matcher,C.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var jAt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bDe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=jAt[Math.random()*64|0];return t},UAt=["name","message","stack","code"],rH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),a0e=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),zAt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=UAt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=I0(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:nH(yb({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=I0(t+"/pending",function(l,c,f){return{payload:void 0,meta:nH(yb({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=I0(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||zAt)(l||"Rejected"),meta:nH(yb({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):bDe(),p=new a,m;function g(b){m=b,p.abort()}var v=function(){return P3(this,null,function(){var b,w,E,T,C,I,R;return N3(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),T=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),HAt(T)?[4,T]:[3,2];case 1:T=N.sent(),N.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(O,L){return p.signal.addEventListener("abort",function(){return L({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(O,L){return new rH(O,L)},fulfillWithValue:function(O,L){return new a0e(O,L)}})).then(function(O){if(O instanceof rH)throw O;return O instanceof a0e?i(O.payload,h,l,O.meta):i(O,h,l)})])];case 3:return E=N.sent(),[3,5];case 4:return I=N.sent(),E=I instanceof rH?o(null,h,l,I.payload,I.meta):o(I,h,l),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||c(E),[2,E]}})})}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap:function(){return v.then(VAt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function VAt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function HAt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var qAt=function(e,t){return IAt(e)?e.match(t):e(t)};function u0e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return qAt(r,n)})}}var Dte=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},bY=function(){},xDe=function(e,t){return t===void 0&&(t=bY),e.catch(t),e},_De=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Y2=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},WAt="task",wDe="listener",EDe="completed",Nte="cancelled",GAt="task-"+Nte,YAt="task-"+EDe,SDe=wDe+"-"+Nte,KAt=wDe+"-"+EDe,q9=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=WAt+" "+Nte+" (reason: "+t+")"}return e}(),K2=function(e){if(e.aborted)throw new q9(e.reason)};function TDe(e,t){var n=bY;return new Promise(function(r,i){var s=function(){return i(new q9(e.reason))};if(e.aborted){s();return}n=_De(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=bY})}var XAt=function(e,t){return P3(void 0,null,function(){var n,r;return N3(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof q9?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},_5=function(e){return function(t){return xDe(TDe(e,t).then(function(n){return K2(e),n}))}},CDe=function(e){var t=_5(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},QAt=Object.assign,l0e={},O3="listenerMiddleware",JAt=function(e,t){var n=function(r){return _De(e,function(){return Y2(r,e.reason)})};return function(r,i){Dte(r,"taskExecutor");var s=new AbortController;n(s);var o=XAt(function(){return P3(void 0,null,function(){var a;return N3(this,function(u){switch(u.label){case 0:return K2(e),K2(s.signal),[4,r({pause:_5(s.signal),delay:CDe(s.signal),signal:s.signal})];case 1:return a=u.sent(),K2(s.signal),[2,a]}})})},function(){return Y2(s,YAt)});return i!=null&&i.autoJoin&&t.push(o),{result:_5(e)(o),cancel:function(){Y2(s,GAt)}}}},ZAt=function(e,t){var n=function(r,i){return P3(void 0,null,function(){var s,o,a,u;return N3(this,function(l){switch(l.label){case 0:K2(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,TDe(t,Promise.race(a))];case 2:return u=l.sent(),K2(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return xDe(n(r,i))}},ADe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=I0(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Dte(s,"options.listener"),{predicate:i,type:t,effect:s}},eIt=function(e){var t=ADe(e),n=t.type,r=t.predicate,i=t.effect,s=bDe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},xY=function(e){e.pending.forEach(function(t){Y2(t,SDe)})},tIt=function(e){return function(){e.forEach(xY),e.clear()}},c0e=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},nIt=I0(O3+"/add"),rIt=I0(O3+"/removeAll"),iIt=I0(O3+"/remove"),sIt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,aE([O3+"/error"],e))};function oIt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?sIt:i;Dte(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&xY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=eIt(h)),o(p)},l=function(h){var p=ADe(h),m=p.type,g=p.effect,v=p.predicate,b=a(function(w){var E=typeof m=="string"?w.type===m:w.predicate===v;return E&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&xY(b)),!!b},c=function(h,p,m,g){return P3(t,null,function(){var v,b,w,E;return N3(this,function(T){switch(T.label){case 0:v=new AbortController,b=ZAt(u,v.signal),w=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(p,QAt({},m,{getOriginalState:g,condition:function(C,I){return b(C,I).then(Boolean)},take:b,delay:CDe(v.signal),pause:_5(v.signal),extra:r,signal:v.signal,fork:JAt(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,I,R){C!==v&&(Y2(C,SDe),R.delete(C))})}})))];case 2:return T.sent(),[3,6];case 3:return E=T.sent(),E instanceof q9||c0e(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return T.sent(),Y2(v,KAt),h.pending.delete(v),[7];case 6:return[2]}})})},f=tIt(n),d=function(h){return function(p){return function(m){if(!kAt(m))return p(m);if(nIt.match(m))return u(m.payload);if(rIt.match(m)){f();return}if(iIt.match(m))return l(m.payload);var g=h.getState(),v=function(){if(g===l0e)throw new Error(O3+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),T=0,C=E;T<C.length;T++){var I=C[T],R=!1;try{R=I.predicate(m,w,g)}catch(N){R=!1,c0e(s,N,{raisedBy:"predicate"})}R&&c(I,m,h,v)}}finally{g=l0e}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var f0e;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);cAt();function aIt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let A6;const uIt=new Uint8Array(16);function lIt(){if(!A6&&(A6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!A6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return A6(uIt)}const uu=[];for(let e=0;e<256;++e)uu.push((e+256).toString(16).slice(1));function cIt(e,t=0){return(uu[e[t+0]]+uu[e[t+1]]+uu[e[t+2]]+uu[e[t+3]]+"-"+uu[e[t+4]]+uu[e[t+5]]+"-"+uu[e[t+6]]+uu[e[t+7]]+"-"+uu[e[t+8]]+uu[e[t+9]]+"-"+uu[e[t+10]]+uu[e[t+11]]+uu[e[t+12]]+uu[e[t+13]]+uu[e[t+14]]+uu[e[t+15]]).toLowerCase()}const fIt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),d0e={randomUUID:fIt};function h0e(e,t,n){if(d0e.randomUUID&&!e)return d0e.randomUUID();e=e||{};const r=e.random||(e.rng||lIt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cIt(r)}class k0{static get(){let t=h0e();for(;this.ids.has(t);)t=h0e();return this.ids.set(t,!0),t}}k0.ids=new Map;function Mp(e){return"parent"in e}function dIt(e){return!Mp(e)}function hIt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:k0.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:k0.get(),createdOn:Date.now(),val:r}]:[];return{id:k0.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function pIt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:k0.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:k0.get(),createdOn:Date.now(),val:s}]:[];return{id:k0.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function io(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=EIt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function uE(e){return!!e&&!!e[hd]}function jb(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===SIt}(e)||Array.isArray(e)||!!e[nN]||!!(!((t=e.constructor)===null||t===void 0)&&t[nN])||W9(e)||G9(e))}function FC(e,t,n){n===void 0&&(n=!1),Ub(e)===0?(n?Object.keys:Fte)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ub(e){var t=e[hd];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:W9(e)?2:G9(e)?3:0}function iP(e,t){return Ub(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u$(e,t){return Ub(e)===2?e.get(t):e[t]}function IDe(e,t,n){var r=Ub(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function mIt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function W9(e){return _It&&e instanceof Map}function G9(e){return wIt&&e instanceof Set}function ew(e){return e.o||e.t}function Pte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=TIt(e);delete t[hd];for(var n=Fte(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ote(e,t){return t===void 0&&(t=!1),Mte(e)||uE(e)||!jb(e)||(Ub(e)>1&&(e.set=e.add=e.clear=e.delete=gIt),Object.freeze(e),t&&FC(e,function(n,r){return Ote(r,!0)},!0)),e}function gIt(){io(2)}function Mte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function R0(e){var t=SY[e];return t||io(18,e),t}function yIt(e,t){SY[e]||(SY[e]=t)}function p0e(){return{}.NODE_ENV==="production"||BC||io(0),BC}function iH(e,t){t&&(R0("Patches"),e.u=[],e.s=[],e.v=t)}function w5(e){_Y(e),e.p.forEach(vIt),e.p=null}function _Y(e){e===BC&&(BC=e.l)}function m0e(e){return BC={p:[],l:BC,h:e,m:!0,_:0}}function vIt(e){var t=e[hd];t.i===0||t.i===1?t.j():t.O=!0}function sH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||R0("ES5").S(t,e,r),r?(n[hd].P&&(w5(t),io(4)),jb(e)&&(e=E5(t,e),t.l||S5(t,e)),t.u&&R0("Patches").M(n[hd].t,e,t.u,t.s)):e=E5(t,n,[]),w5(t),t.u&&t.v(t.u,t.s),e!==$te?e:void 0}function E5(e,t,n){if(Mte(t))return t;var r=t[hd];if(!r)return FC(t,function(s,o){return g0e(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return S5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Pte(r.k):r.o;FC(r.i===3?new Set(i):i,function(s,o){return g0e(e,r,i,s,o,n)}),S5(e,i,!1),n&&e.u&&R0("Patches").R(r,n,e.u,e.s)}return r.o}function g0e(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&io(5),uE(i)){var o=E5(e,i,s&&t&&t.i!==3&&!iP(t.D,r)?s.concat(r):void 0);if(IDe(n,r,o),!uE(o))return;e.m=!1}if(jb(i)&&!Mte(i)){if(!e.h.F&&e._<1)return;E5(e,i),t&&t.A.l||S5(e,i)}}function S5(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Ote(t,n)}function oH(e,t){var n=e[hd];return(n?ew(n):e)[t]}function y0e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function wY(e){e.P||(e.P=!0,e.l&&wY(e.l))}function aH(e){e.o||(e.o=Pte(e.t))}function EY(e,t,n){var r=W9(t)?R0("MapSet").N(t,n):G9(t)?R0("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:p0e(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=TY;o&&(u=[a],l=cD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):R0("ES5").J(t,n);return(n?n.A:p0e()).p.push(r),r}function bIt(e){return uE(e)||io(22,e),function t(n){if(!jb(n))return n;var r,i=n[hd],s=Ub(n);if(i){if(!i.P&&(i.i<4||!R0("ES5").K(i)))return i.t;i.I=!0,r=v0e(n,s),i.I=!1}else r=v0e(n,s);return FC(r,function(o,a){i&&u$(i.t,o)===a||IDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function v0e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Pte(e)}function xIt(){function e(r){if(!jb(r))return r;if(Array.isArray(r))return r.map(e);if(W9(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(G9(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return iP(r,nN)&&(i[nN]=r[nN]),i}function t(r){return uE(r)?e(r):r}var n="add";yIt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Ub(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||io(24),typeof u=="function"&&f==="prototype"&&io(24),typeof(u=u$(u,f))!="object"&&io(15,o.join("/"))}var d=Ub(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:io(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:io(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;FC(a.D,function(h,p){var m=u$(f,h),g=u$(d,h),v=p?iP(f,h)?"replace":n:"remove";if(m!==g||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:g}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var v=u.concat([g]);l.push({op:"replace",path:v,value:t(h[g])}),c.push({op:"replace",path:v,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===$te?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var b0e,BC,Lte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_It=typeof Map<"u",wIt=typeof Set<"u",x0e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$te=Lte?Symbol.for("immer-nothing"):((b0e={})["immer-nothing"]=!0,b0e),nN=Lte?Symbol.for("immer-draftable"):"__$immer_draftable",hd=Lte?Symbol.for("immer-state"):"__$immer_state",EIt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},SIt=""+Object.prototype.constructor,Fte=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,TIt=Object.getOwnPropertyDescriptors||function(e){var t={};return Fte(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},SY={},TY={get:function(e,t){if(t===hd)return e;var n=ew(e);if(!iP(n,t))return function(i,s,o){var a,u=y0e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!jb(r)?r:r===oH(e.t,t)?(aH(e),e.o[t]=EY(e.A.h,r,e)):r},has:function(e,t){return t in ew(e)},ownKeys:function(e){return Reflect.ownKeys(ew(e))},set:function(e,t,n){var r=y0e(ew(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=oH(ew(e),t),s=i==null?void 0:i[hd];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(mIt(n,i)&&(n!==void 0||iP(e.t,t)))return!0;aH(e),wY(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return oH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,aH(e),wY(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ew(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){io(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){io(12)}},cD={};FC(TY,function(e,t){cD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cD.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&io(13),cD.set.call(this,e,t,void 0)},cD.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&io(14),TY.set.call(this,e[0],t,n,e[0])};var CIt=function(){function e(n){var r=this;this.g=x0e,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[g,E].concat(b))})}}var l;if(typeof s!="function"&&io(6),o!==void 0&&typeof o!="function"&&io(7),jb(i)){var c=m0e(r),f=EY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?w5(c):_Y(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return iH(c,o),sH(m,c)},function(m){throw w5(c),m}):(iH(c,o),sH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===$te&&(l=void 0),r.F&&Ote(l,!0),o){var h=[],p=[];R0("Patches").M(i,l,h,p),o(h,p)}return l}io(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){jb(n)||io(8),uE(n)&&(n=bIt(n));var r=m0e(this),i=EY(this,n,void 0);return i[hd].C=!0,_Y(r),i},t.finishDraft=function(n,r){var i=n&&n[hd];({}).NODE_ENV!=="production"&&(i&&i.C||io(9),i.I&&io(10));var s=i.A;return iH(s,r),sH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!x0e&&io(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=R0("Patches").$;return uE(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),pd=new CIt,AIt=pd.produce;pd.produceWithPatches.bind(pd);pd.setAutoFreeze.bind(pd);pd.setUseProxies.bind(pd);pd.applyPatches.bind(pd);pd.createDraft.bind(pd);pd.finishDraft.bind(pd);function IIt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=hIt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return BAt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:k0.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:k0.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function kIt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=IIt(e),s=oIt();s.startListening({matcher:u0e(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=u0e(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=MAt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:k0.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var RIt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DIt=Object.prototype.hasOwnProperty;function CY(e,t){return DIt.call(e,t)}function AY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)CY(e,i)&&r.push(i);return r}function Yc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function IY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function tw(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function kDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function kY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(kY(e[t]))return!0}else if(typeof e=="object"){for(var r=AY(e),i=r.length,s=0;s<i;s++)if(kY(e[r[s]]))return!0}}return!1}function _0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var RDe=function(e){RIt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,_0e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=_0e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),to=RDe,NIt=Yc,S2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=T5(n,this.path);r&&(r=Yc(r));var i=jw(n,{op:"remove",path:this.from}).removed;return jw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=T5(n,this.from);return jw(n,{op:"add",path:this.path,value:Yc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:sP(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},PIt={add:function(e,t,n){return IY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:S2.move,copy:S2.copy,test:S2.test,_get:S2._get};function T5(e,t){if(t=="")return e;var n={op:"_get",path:t};return jw(e,n),n.value}function jw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):C5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=T5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=sP(e,t.value),o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Yc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=C5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=kDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!IY(h))throw new to("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);IY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new to("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=PIt[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=S2[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new to("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Y9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=jw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function OIt(e,t,n){var r=jw(e,t);if(r.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function C5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new to("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(S2[e.op]){if(typeof e.path!="string")throw new to("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new to('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new to("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&kY(e.value))throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new to("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new to("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=DDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new to("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function DDe(e,t,n){try{if(!Array.isArray(e))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Y9(Yc(t),Yc(e),n||!0);else{n=n||C5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof to)return i;throw i}}function sP(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!sP(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!sP(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const MIt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:to,_areEquals:sP,applyOperation:jw,applyPatch:Y9,applyReducer:OIt,deepClone:NIt,getValueByPointer:T5,validate:DDe,validator:C5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Bte=new WeakMap,LIt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),$It=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function FIt(e){return Bte.get(e)}function BIt(e,t){return e.observers.get(t)}function jIt(e,t){e.observers.delete(t.callback)}function UIt(e,t){t.unobserve()}function zIt(e,t){var n=[],r,i=FIt(e);if(!i)i=new LIt(e),Bte.set(e,i);else{var s=BIt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Yc(e),t){r.callback=t,r.next=null;var o=function(){RY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){RY(r),clearTimeout(r.next),jIt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new $It(t,r)),r}function RY(e,t){t===void 0&&(t=!1);var n=Bte.get(e.object);jte(n.value,e.object,e.patches,"",t),e.patches.length&&Y9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=AY(t),o=AY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(CY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jte(c,f,n,r+"/"+tw(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+tw(l),value:Yc(c)}),n.push({op:"replace",path:r+"/"+tw(l),value:Yc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+tw(l),value:Yc(c)}),n.push({op:"remove",path:r+"/"+tw(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!CY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+tw(l),value:Yc(t[l])})}}}function NDe(e,t,n){n===void 0&&(n=!1);var r=[];return jte(e,t,r,"",n),r}const VIt=Object.freeze(Object.defineProperty({__proto__:null,compare:NDe,generate:RY,observe:zIt,unobserve:UIt},Symbol.toStringTag,{value:"Module"}));Object.assign({},MIt,VIt,{JsonPatchError:RDe,deepClone:Yc,escapePathComponent:tw,unescapePathComponent:kDe});var fD=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(fD||{});function l$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=PDe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=l$(i,t);return Y9(a,Yc(o),!0,!1).newDocument}function HIt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function uI({registry:e,initialState:t}){let n=!1;const r=aIt(),i=kIt(t);function s(c){return i.backend.nodes[c]}r.listen(fD.TRAVERSAL_START,()=>{n=!0}),r.listen(fD.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return l$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const v=l$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const b=NDe(v,f);if(HIt(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=pIt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=l$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(fD.TRAVERSAL_START);const f=PDe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);WIt(p,m)?Mp(p)&&d.push(...p.sideEffects.undo):Mp(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(fD.TRAVERSAL_END)},undo(){const{current:c}=i;return Mp(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return ODe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function qIt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Mp(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Mp(r)&&(r=n[r.parent]),Mp(i)&&(i=n[i.parent]);return r.id}function PDe(e,t,n){const r=qIt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Mp(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Mp(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function WIt(e,t){if(Mp(e)&&e.parent===t.id)return!0;if(Mp(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function ODe(e,t){return{...e,children:e.children.map(n=>ODe(t[n],t)),name:`${e.label}`}}xIt();function GIt(e){return e.length===2?AIt(e):e}class kx{static create(){return new kx}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:GIt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),I0(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const w0e=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},lI=e=>{const t=P.useRef(null),n=w0e(e),[r,i]=P.useState(0),[s,o]=P.useState(0);P.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=w0e({...n,width:n.width||r,height:n.height||s});return[t,a]},YIt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:lI},Symbol.toStringTag,{value:"Module"})),KIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function XIt({parameters:e,setAnswer:t}){const[n,r]=lI(KIt),[i,s]=P.useState(100),[o,a]=P.useState(100),[u,l]=P.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=P.useMemo(()=>{const p=kx.create(),m=p.register("click",(v,b)=>(v.clickX=b.clickX,v.clickY=b.clickY,v.distance=b.distance,v)),g=uI({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=P.useCallback(p=>{const m=si("#movingCircle"),g=si("#clickAccuracySvg"),v=DF(p,g.node()),b=[+m.attr("cx"),+m.attr("cy")],w=`${Math.round(Math.sqrt((v[0]-b[0])**2+(v[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+w,clickX:v[0],clickY:v[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:w}})},[f,t,c,d]);return P.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,v=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;si(n.current).select("circle").transition().duration(v).ease(iwt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:S.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[S.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),S.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),S.jsxs(je,{children:["Adjust speed (px/s):",S.jsx(DB,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const QIt=Object.freeze(Object.defineProperty({__proto__:null,default:XIt},Symbol.toStringTag,{value:"Module"}));function Ute({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?D3("%B"):Tx(".2s"))(c),[s]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?S.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>S.jsxs("g",{transform:`translate(${f}, ${n})`,children:[S.jsx("line",{y2:"6",stroke:"currentColor"}),o?S.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,S.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:S.jsx(ma,{children:S.jsx(ss,{withinPortal:!0,label:c,children:S.jsx(lt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const JIt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Ute},Symbol.toStringTag,{value:"Module"}));function MDe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>S.jsxs("g",{transform:`translate(${n}, ${l})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),s?S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,S.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:S.jsx("foreignObject",{width:a,height:20,children:S.jsx(Yr,{style:{width:"100%",height:"100%"},justify:"right",children:S.jsx(lt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const ZIt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:MDe},Symbol.toStringTag,{value:"Module"})),Ud={top:15,left:100,right:50,bottom:50};function DY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=td(),o=P.useMemo(()=>s-Ud.left-Ud.right,[s]),a=P.useMemo(()=>i-Ud.top-Ud.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ax(j9).domain(d)},[n,t.category]),l=P.useMemo(()=>e?ef([Ud.left,o+Ud.left]).domain([0,Uy(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?iI([Ud.top,a+Ud.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:S.jsxs("g",{children:[S.jsx("rect",{x:Ud.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Ud.left},h),S.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?S.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S.jsx(Ute,{xScale:l,yRange:c.range(),vertPosition:a+Ud.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?S.jsx(MDe,{yScale:c,horizontalPosition:Ud.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):S.jsx(df,{})}const ekt=Object.freeze(Object.defineProperty({__proto__:null,Bar:DY,default:DY},Symbol.toStringTag,{value:"Module"})),pi=Array.isArray;function tf(e){return e!=null?pi(e)?e:[e]:[]}function tkt(e=0,t=1/0){return`${E0e(e)} < row_number() && row_number() <= ${E0e(t)}`}function E0e(e){return e<0?`count() + ${e}`:e}class LDe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(tkt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,tf(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function gr(e){throw Error(e)}function Zl(e){return typeof e=="number"}function Es(e){return typeof e=="function"}function K9(e,t){const n=Array(e);if(Es(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let nkt=class extends LDe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){gr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){gr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){gr("Not implemented")}getter(t){gr("Not implemented")}objects(t){gr("Not implemented")}object(t){gr("Not implemented")}[Symbol.iterator](){gr("Not implemented")}print(t={}){Zl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=K9(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},rkt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},ikt=function(e){return e&&Es(e.get)?e:new rkt(e)};function c1(e){return e instanceof Date}function hl(e){return e===Object(e)}function A5(e){return e instanceof RegExp}function Iu(e){return typeof e=="string"}function skt(e,t){const n=r=>gr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?S0e(e.entries(),t):c1(e)?n("Date"):A5(e)?n("RegExp"):Iu(e)?n():pi(e)?okt(e,t):Es(e[Symbol.iterator])?akt(e,t):hl(e)?S0e(Object.entries(e),t):n()}function S0e(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function okt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function akt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:ukt}=Object.prototype;function Vp(e,t){return ukt.call(e,t)}function xd(e){return e?new T0e({...e.data()},e.columnNames()):new T0e}class T0e{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Vp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ci=void 0,lkt=Object.getPrototypeOf(Int8Array);function M3(e){return e instanceof lkt}function Cw(e){return pi(e)||M3(e)}function Ap(e){return e!=null&&e===e}const pR=e=>Cw(e)||Iu(e),ckt={compact:e=>Cw(e)?e.filter(t=>Ap(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>pR(e)?e.includes(t,n):!1,indexof:(e,t)=>pR(e)?e.indexOf(t):-1,join:(e,t)=>Cw(e)?e.join(t):ci,lastindexof:(e,t)=>pR(e)?e.lastIndexOf(t):-1,length:e=>pR(e)?e.length:0,pluck:(e,t)=>Cw(e)?e.map(n=>Ap(n)?n[t]:ci):ci,reverse:e=>Cw(e)?e.slice().reverse():Iu(e)?e.split("").reverse().join(""):ci,slice:(e,t,n)=>pR(e)?e.slice(t,n):ci};function fkt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function c$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Bm=e=>(e<10?"0":"")+e,dkt=e=>e<0?"-"+c$(-e,6):e>9999?"+"+c$(e,6):c$(e,4);function $De(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return dkt(e)+"-"+Bm(t+1)+"-"+Bm(n)+(!u||o?"T"+Bm(r)+":"+Bm(i)+":"+Bm(s)+"."+c$(o,3)+l:s?"T"+Bm(r)+":"+Bm(i)+":"+Bm(s)+l:i||r||!a?"T"+Bm(r)+":"+Bm(i)+l:"")}function FDe(e,t){return isNaN(e)?"Invalid Date":$De(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function X9(e,t){return isNaN(e)?"Invalid Date":$De(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const hkt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function pkt(e){return e.match(hkt)&&!isNaN(Date.parse(e))}function mkt(e,t=Date.parse){return pkt(e)?t(e):e}const BDe=6e4,jDe=864e5,UDe=6048e5,ro=new Date,so=new Date,Co=e=>(ro.setTime(typeof e=="string"?mkt(e):e),ro);function gkt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function ykt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function vkt(e){so.setTime(+e),so.setHours(0,0,0,0),ro.setTime(+so),ro.setMonth(0),ro.setDate(1);const t=(so.getTimezoneOffset()-ro.getTimezoneOffset())*BDe;return Math.floor(1+(so-ro-t)/jDe)}function bkt(e){so.setTime(+e),so.setUTCHours(0,0,0,0);const t=Date.UTC(so.getUTCFullYear(),0,1);return Math.floor(1+(so-t)/jDe)}function xkt(e,t){const n=t||0;so.setTime(+e),so.setDate(so.getDate()-(so.getDay()+7-n)%7),so.setHours(0,0,0,0),ro.setTime(+e),ro.setMonth(0),ro.setDate(1),ro.setDate(1-(ro.getDay()+7-n)%7),ro.setHours(0,0,0,0);const r=(so.getTimezoneOffset()-ro.getTimezoneOffset())*BDe;return Math.floor((1+(so-ro)-r)/UDe)}function _kt(e,t){const n=t||0;return so.setTime(+e),so.setUTCDate(so.getUTCDate()-(so.getUTCDay()+7-n)%7),so.setUTCHours(0,0,0,0),ro.setTime(+e),ro.setUTCMonth(0),ro.setUTCDate(1),ro.setUTCDate(1-(ro.getUTCDay()+7-n)%7),ro.setUTCHours(0,0,0,0),Math.floor((1+(so-ro))/UDe)}const wkt={format_date:(e,t)=>FDe(Co(e),!t),format_utcdate:(e,t)=>X9(Co(e),!t),timestamp:e=>+Co(e),year:e=>Co(e).getFullYear(),quarter:e=>Math.floor(Co(e).getMonth()/3),month:e=>Co(e).getMonth(),date:e=>Co(e).getDate(),dayofweek:e=>Co(e).getDay(),hours:e=>Co(e).getHours(),minutes:e=>Co(e).getMinutes(),seconds:e=>Co(e).getSeconds(),milliseconds:e=>Co(e).getMilliseconds(),utcyear:e=>Co(e).getUTCFullYear(),utcquarter:e=>Math.floor(Co(e).getUTCMonth()/3),utcmonth:e=>Co(e).getUTCMonth(),utcdate:e=>Co(e).getUTCDate(),utcdayofweek:e=>Co(e).getUTCDay(),utchours:e=>Co(e).getUTCHours(),utcminutes:e=>Co(e).getUTCMinutes(),utcseconds:e=>Co(e).getUTCSeconds(),utcmilliseconds:e=>Co(e).getUTCMilliseconds(),datetime:gkt,dayofyear:vkt,week:xkt,utcdatetime:ykt,utcdayofyear:bkt,utcweek:_kt,now:Date.now};function zte(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:c1(e)||c1(t)?+e==+t:A5(e)&&A5(t)?e+""==t+"":hl(e)&&hl(t)?Ekt(e,t):!1}function Ekt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return C0e(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!C0e(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!zte(e[o],t[o]))return!1}return!0}function C0e(e,t,n=zte){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Skt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Tkt=Math.random;function cI(){return Tkt()}const Ckt={random:cI,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Vte(e){return e instanceof Map}function Akt(e){return e instanceof Set}function f$(e){return Vte(e)||Akt(e)}function uH(e){return Array.from(e)}const Ikt={has:(e,t)=>f$(e)?e.has(t):e!=null?Vp(e,t):!1,keys:e=>Vte(e)?uH(e.keys()):e!=null?Object.keys(e):[],values:e=>f$(e)?uH(e.values()):e!=null?Object.values(e):[],entries:e=>f$(e)?uH(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ci};function kkt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Vp(t,e))return t[e];return n!==void 0?n:e}function Rkt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Dkt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},T2={bin:fkt,equal:zte,recode:kkt,sequence:Rkt,...ckt,...wkt,...Skt,...Ckt,...Ikt,...Dkt};function oP(e){return typeof e=="bigint"}function W0(e){return e===void 0?e+"":oP(e)?e+"n":JSON.stringify(e)}function ur(e,t=[],n=[]){return new Nkt(e,tf(t),tf(n))}let Nkt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${W0(n)}]`),...this.params.map(W0)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const zDe=e=>ur("any",e),VDe=()=>ur("count"),HDe=e=>ur("array_agg",e),qDe=e=>ur("array_agg_distinct",e),WDe=(e,t)=>ur("map_agg",[e,t]),GDe=(e,t)=>ur("object_agg",[e,t]),YDe=(e,t)=>ur("entries_agg",[e,t]);({...T2});function Pkt(e,t){e=f$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Okt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Mkt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Lkt(e,t,n,r){const i=r==="map"||r===!0?WDe:r==="entries"?YDe:r==="object"?GDe:gr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Pkt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:HDe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const $kt="ArrayPattern",Fkt="ArrowFunctionExpression",Bkt="FunctionExpression",vb="Identifier",fI="Literal",KDe="MemberExpression",jkt="ObjectExpression",XDe="ObjectPattern",QDe="Property",L3="Column",Ukt="Constant",zkt="Dictionary",Vkt="Function",Hkt="Parameter",JDe="Op",cs=(e,t)=>{const n=qkt[e.type];return n?n(e,t):gr(`Unsupported expression construct: ${e.type}`)},lH=(e,t)=>"("+cs(e.left,t)+" "+e.operator+" "+cs(e.right,t)+")",cH=(e,t)=>"("+Wm(e.params,t)+")=>"+cs(e.body,t),A0e=(e,t)=>cs(e.callee,t)+"("+Wm(e.arguments,t)+")",Wm=(e,t,n=",")=>e.map(r=>cs(r,t)).join(n),ZDe=e=>e.computed?`[${W0(e.name)}]`:`.${e.name}`,I0e=(e,t,n)=>{const r=e.table||"";return`data${r}${ZDe(e)}.${n}(${t.index}${r})`},qkt={Constant:e=>e.raw,Column:(e,t)=>I0e(e,t,"get"),Dictionary:(e,t)=>I0e(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${ZDe(e)}`,Op:(e,t)=>`op(${W0(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+cs(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=cs(e.object,t),i=cs(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:A0e,NewExpression:(e,t)=>"new "+A0e(e,t),ArrayExpression:(e,t)=>"["+Wm(e.elements,t)+"]",AssignmentExpression:lH,BinaryExpression:lH,LogicalExpression:lH,UnaryExpression:(e,t)=>"("+e.operator+cs(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+cs(e.test,t)+"?"+cs(e.consequent,t)+":"+cs(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Wm(e.properties,t)+"})",Property:(e,t)=>{const n=cs(e.key,t);return(e.computed?`[${n}]`:n)+":"+cs(e.value,t)},ArrowFunctionExpression:cH,FunctionExpression:cH,FunctionDeclaration:cH,ArrayPattern:(e,t)=>"["+Wm(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Wm(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Wm(e.declarations,t,","),VariableDeclarator:(e,t)=>cs(e.id,t)+"="+cs(e.init,t),SpreadElement:(e,t)=>"..."+cs(e.argument,t),BlockStatement:(e,t)=>"{"+Wm(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>cs(e.expression,t),IfStatement:(e,t)=>"if ("+cs(e.test,t)+")"+cs(e.consequent,t)+(e.alternate?" else "+cs(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+cs(e.discriminant,t)+") {"+Wm(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+cs(e.test,t):"default")+": "+Wm(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+cs(e.argument,t),Program:(e,t)=>cs(e.body[0],t)};function I5(e,t={index:"row"}){return cs(e,t)}function Wkt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function jC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:c1(e)?+e:pi(e)||M3(e)?`[${e.map(jC)}]`:A5(e)?e+"":Gkt(e)}function Gkt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${jC(e[r])}`;return t+="}",t}function k5(e,t){const n=e.length;return n===1?(r,i)=>jC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=jC(a)}return s}}function Ykt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=jC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=jC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function hy(){}function Kkt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ia(e){return e.init=e.init||hy,e.add=e.add||hy,e.rem=e.rem||hy,e}function k0e(e,t){return e.product_v=!1,e.product=t}const eNe={count:{create:()=>ia({value:e=>e.count}),param:[]},array_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ia({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ci}),param:[1]},valid:{create:()=>ia({value:e=>e.valid}),param:[1]},invalid:{create:()=>ia({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Ykt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ia({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ia({value:e=>{let t=ci,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ci,add:(e,t)=>oP(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>k0e(e,1),value:e=>e.valid?e.product_v?k0e(e,Kkt(e.list.values())):e.product:void 0,add:(e,t)=>oP(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ci,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ia({value:e=>e.valid?e.mean:ci}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ci,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ia({value:e=>e.valid>1?e.dev/e.valid:ci}),param:[1],req:["variance"]},stdev:{create:()=>ia({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ci}),param:[1],req:["variance"]},stdevp:{create:()=>ia({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ci}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ci,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ci)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ci,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ci)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ia({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ia({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ci,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ia({value:e=>e.valid>1?e.cov/e.valid:ci}),param:[2],req:["covariance"]},corr:{create:()=>ia({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ci}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ia({value:i=>Wkt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},R0e={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},D0e={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},tNe={row_number:{create(){return{init:hy,value:e=>e.index+1}},param:[]},rank:R0e,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=R0e.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:D0e,ntile:{create(e){e=+e,e>0||gr("ntile num must be greater than zero.");const{init:t,value:n}=D0e.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ci){return e=+e||1,{init:hy,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ci){return e=+e||1,{init:hy,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:hy,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:hy,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||gr("nth_value nth must be greater than zero."),{init:hy,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ci}}},param:[1,1]},fill_down:{create(e=ci){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Ap(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ci){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Xkt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Xkt(e,t,n){for(const r=e.size;n<r;++n)if(Ap(e.value(n,t)))return n;return-1}function Hte(e){return Vp(eNe,e)}function qte(e){return Vp(tNe,e)}function nNe(e){return Vp(T2,e)||e==="row_object"}function rNe(e){return Hte(e)&&eNe[e]}function iNe(e){return qte(e)&&tNe[e]}function mR(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Wte={escape:(e,t,n)=>mR(e,t,n),expr:(e,t)=>mR(`(row,data,op)=>${e}`,T2,t),expr2:(e,t)=>mR(`(row0,data0,row,data)=>${e}`,T2,t),join:(e,t)=>mR(`(row1,data1,row2,data2)=>${e}`,T2,t),param:(e,t)=>mR(e,T2,t)},Qkt={"==":1,"!=":1,"===":1,"!==":1};function sNe(e,t,n=0,r,i){if(e.type=L3,e.name=t,e.table=n,i&&r&&Es(r.keyFor)){const s=Qkt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===fI&&Jkt(i,e,s,r.keyFor(s.value))}return e}function Jkt(e,t,n,r){return r<0?(e.type=fI,e.value=!1,e.raw="false"):(t.type=zkt,n.value=r,n.raw=r+""),!0}function Q9(e){return pi(e)?e:Vte(e)?e.entries():e?Object.entries(e):[]}const oNe="row_object";function aNe(e,t){e.type=jkt;const n=e.properties=[];for(const r of Q9(t)){const[i,s]=pi(r)?r:[r,r];n.push({type:QDe,key:{type:fI,raw:W0(s)},value:sNe({computed:!0},i)})}return e}function uNe(e){return I5(aNe({},e))}function lNe(e){return Wte.expr(uNe(e))}const Zkt=new TextDecoder("utf-8"),NY=e=>Zkt.decode(e),eRt=new TextEncoder,Gte=e=>eRt.encode(e),tRt=e=>typeof e=="boolean",$c=e=>typeof e=="function",Rx=e=>e!=null&&Object(e)===e,J9=e=>Rx(e)&&$c(e.then),Yte=e=>Rx(e)&&$c(e[Symbol.iterator]),Z9=e=>Rx(e)&&$c(e[Symbol.asyncIterator]),nRt=e=>Rx(e)&&"done"in e&&"value"in e,cNe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,rRt=e=>Rx(e)&&$c(e.abort)&&$c(e.getWriter)&&!cNe(e),iRt=e=>Rx(e)&&$c(e.end)&&$c(e.write)&&tRt(e.writable)&&!cNe(e),sRt=e=>Rx(e)&&$c(e.clear)&&$c(e.bytes)&&$c(e.position)&&$c(e.setPosition)&&$c(e.capacity)&&$c(e.getBufferIdentifier)&&$c(e.createLong),Kte=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function oRt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function R5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function G0(e,t){const n=oRt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?R5(o,s,a):o=s;break}R5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Na(e,t){let n=nRt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Gte(n)),n instanceof ArrayBuffer?new e(n):n instanceof Kte?new e(n):sRt(n)?Na(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const gR=e=>Na(Int32Array,e),Li=e=>Na(Uint8Array,e),PY=e=>(e.next(),e);function*aRt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Kte?n(t):Yte(t)?t:n(t);return yield*PY(function*(i){let s=null;do s=i.next(yield Na(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const uRt=e=>aRt(Uint8Array,e);function fNe(e,t){return mw(this,arguments,function*(){if(J9(t))return yield Hr(yield Hr(yield*KU(ND(fNe(e,yield Hr(t))))));const r=function(o){return mw(this,arguments,function*(){yield yield Hr(yield Hr(o))})},i=function(o){return mw(this,arguments,function*(){yield Hr(yield*KU(ND(PY(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Kte?r(t):Yte(t)?i(t):Z9(t)?t:r(t);return yield Hr(yield*KU(ND(PY(function(o){return mw(this,arguments,function*(){let a=null;do a=yield Hr(o.next(yield yield Hr(Na(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Hr(new e)})}const lRt=e=>fNe(Uint8Array,e);function dNe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function cRt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const N0e={fromIterable(e){return I6(fRt(e))},fromAsyncIterable(e){return I6(dRt(e))},fromDOMStream(e){return I6(hRt(e))},fromNodeStream(e){return I6(mRt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},I6=e=>(e.next(),e);function*fRt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?G0(r,o)[0]:([i,r,a]=G0(r,o),i)}({cmd:s,size:o}=yield null);const l=uRt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function dRt(e){return mw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?G0(i,a)[0]:([s,i,u]=G0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=lRt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.next()):yield Hr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Hr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Hr(c.return(new Uint8Array(0))))}return yield Hr(null)})}function hRt(e){return mw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?G0(i,a)[0]:([s,i,u]=G0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=new pRt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.read()):yield Hr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Li(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Hr(c.cancel(f)))}finally{r===!1?yield Hr(c.cancel()):e.locked&&c.releaseLock()}return yield Hr(null)})}class pRt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return gy(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return gy(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Li(n)),n})}}const fH=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function mRt(e){return mw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?G0(l,a)[0]:([c,l,u]=G0(l,a),c)}if({cmd:o,size:a}=yield yield Hr(null),e.isTTY)return yield yield Hr(new Uint8Array(0)),yield Hr(null);try{n[0]=fH(e,"end"),n[1]=fH(e,"error");do{if(n[2]=fH(e,"readable"),[r,s]=yield Hr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Li(e.read(a-u)),c.byteLength<a-u&&(c=Li(e.read()))):c=Li(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Hr(f()));while(a<u)}while(!i)}finally{yield Hr(d(n,r==="error"?s:null))}return yield Hr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[v,b]of h)e.off(v,b);try{const v=e.destroy;v&&v.call(e,p),p=void 0}catch(v){p=v||p}finally{p!=null?g(p):m()}})}})}var zl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(zl||(zl={}));var nf;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(nf||(nf={}));var _u;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(_u||(_u={}));var Y0;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Y0||(Y0={}));var Pn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Pn||(Pn={}));var K0;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(K0||(K0={}));var Oa;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Oa||(Oa={}));var we;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(we||(we={}));var uy;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(uy||(uy={}));const gRt=void 0;function lE(e){if(e===null)return"null";if(e===gRt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>lE(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const yRt=Symbol.for("isArrowBigNum");function sm(e,...t){return t.length===0?Object.setPrototypeOf(Na(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}sm.prototype[yRt]=!0;sm.prototype.toJSON=function(){return`"${uP(this)}"`};sm.prototype.valueOf=function(){return hNe(this)};sm.prototype.toString=function(){return uP(this)};sm.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return hNe(this);case"string":return uP(this);case"default":return vRt(this)}return uP(this)};function X2(...e){return sm.apply(this,e)}function Q2(...e){return sm.apply(this,e)}function aP(...e){return sm.apply(this,e)}Object.setPrototypeOf(X2.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Q2.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(aP.prototype,Object.create(Uint32Array.prototype));Object.assign(X2.prototype,sm.prototype,{constructor:X2,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Q2.prototype,sm.prototype,{constructor:Q2,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(aP.prototype,sm.prototype,{constructor:aP,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function hNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const uP=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return dH(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return dH(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${dH(t)}`},vRt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:uP(e);function dH(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Xte{static new(t,n){switch(n){case!0:return new X2(t);case!1:return new Q2(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new X2(t)}return t.byteLength===16?new aP(t):new Q2(t)}static signed(t){return new X2(t)}static unsigned(t){return new Q2(t)}static decimal(t){return new aP(t)}constructor(t,n){return Xte.new(t,n)}}function Hp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var pNe,mNe,gNe,yNe,vNe,bNe,xNe,_Ne,wNe,ENe,SNe,TNe,CNe,ANe,INe,kNe,RNe,DNe,NNe,PNe;class or{static isNull(t){return(t==null?void 0:t.typeId)===we.Null}static isInt(t){return(t==null?void 0:t.typeId)===we.Int}static isFloat(t){return(t==null?void 0:t.typeId)===we.Float}static isBinary(t){return(t==null?void 0:t.typeId)===we.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===we.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===we.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===we.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===we.Date}static isTime(t){return(t==null?void 0:t.typeId)===we.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===we.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===we.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===we.Duration}static isList(t){return(t==null?void 0:t.typeId)===we.List}static isStruct(t){return(t==null?void 0:t.typeId)===we.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===we.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===we.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===we.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===we.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===we.Dictionary}static isDenseUnion(t){return or.isUnion(t)&&t.mode===nf.Dense}static isSparseUnion(t){return or.isUnion(t)&&t.mode===nf.Sparse}get typeId(){return we.NONE}}pNe=Symbol.toStringTag;or[pNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(or.prototype);let f1=class extends or{toString(){return"Null"}get typeId(){return we.Null}};mNe=Symbol.toStringTag;f1[mNe]=(e=>e[Symbol.toStringTag]="Null")(f1.prototype);class ec extends or{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return we.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}gNe=Symbol.toStringTag;ec[gNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ec.prototype);class Qte extends ec{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Jte extends ec{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class zb extends ec{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Zte extends ec{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ene extends ec{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class tne extends ec{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class nne extends ec{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class rne extends ec{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Qte.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Jte.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(zb.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Zte.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ene.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(tne.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(nne.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(rne.prototype,"ArrayType",{value:BigUint64Array});class Vb extends or{constructor(t){super(),this.precision=t}get typeId(){return we.Float}get ArrayType(){switch(this.precision){case _u.HALF:return Uint16Array;case _u.SINGLE:return Float32Array;case _u.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}yNe=Symbol.toStringTag;Vb[yNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Vb.prototype);class ONe extends Vb{constructor(){super(_u.HALF)}}class ine extends Vb{constructor(){super(_u.SINGLE)}}class sne extends Vb{constructor(){super(_u.DOUBLE)}}Object.defineProperty(ONe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ine.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(sne.prototype,"ArrayType",{value:Float64Array});let lP=class extends or{constructor(){super()}get typeId(){return we.Binary}toString(){return"Binary"}};vNe=Symbol.toStringTag;lP[vNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(lP.prototype);let UC=class extends or{constructor(){super()}get typeId(){return we.Utf8}toString(){return"Utf8"}};bNe=Symbol.toStringTag;UC[bNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(UC.prototype);let cP=class extends or{constructor(){super()}get typeId(){return we.Bool}toString(){return"Bool"}};xNe=Symbol.toStringTag;cP[xNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(cP.prototype);let D5=class extends or{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return we.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};_Ne=Symbol.toStringTag;D5[_Ne]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(D5.prototype);class zC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Date}toString(){return`Date${(this.unit+1)*32}<${Y0[this.unit]}>`}}wNe=Symbol.toStringTag;zC[wNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(zC.prototype);class bRt extends zC{constructor(){super(Y0.DAY)}}class xRt extends zC{constructor(){super(Y0.MILLISECOND)}}class d1 extends or{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return we.Time}toString(){return`Time${this.bitWidth}<${Pn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}ENe=Symbol.toStringTag;d1[ENe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(d1.prototype);class _Rt extends d1{constructor(){super(Pn.SECOND,32)}}class wRt extends d1{constructor(){super(Pn.MILLISECOND,32)}}class ERt extends d1{constructor(){super(Pn.MICROSECOND,64)}}class SRt extends d1{constructor(){super(Pn.NANOSECOND,64)}}class N5 extends or{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return we.Timestamp}toString(){return`Timestamp<${Pn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}SNe=Symbol.toStringTag;N5[SNe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(N5.prototype);class VC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Interval}toString(){return`Interval<${K0[this.unit]}>`}}TNe=Symbol.toStringTag;VC[TNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(VC.prototype);class TRt extends VC{constructor(){super(K0.DAY_TIME)}}class CRt extends VC{constructor(){super(K0.YEAR_MONTH)}}let P5=class extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Duration}toString(){return`Duration<${Pn[this.unit]}>`}};CNe=Symbol.toStringTag;P5[CNe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(P5.prototype);let HC=class extends or{constructor(t){super(),this.children=[t]}get typeId(){return we.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};ANe=Symbol.toStringTag;HC[ANe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(HC.prototype);class tl extends or{constructor(t){super(),this.children=t}get typeId(){return we.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}INe=Symbol.toStringTag;tl[INe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(tl.prototype);class fP extends or{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return we.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}kNe=Symbol.toStringTag;fP[kNe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(fP.prototype);let O5=class extends or{constructor(t){super(),this.byteWidth=t}get typeId(){return we.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};RNe=Symbol.toStringTag;O5[RNe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(O5.prototype);let qC=class extends or{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return we.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};DNe=Symbol.toStringTag;qC[DNe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(qC.prototype);class dP extends or{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return we.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}NNe=Symbol.toStringTag;dP[NNe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(dP.prototype);const ARt=(e=>()=>++e)(-1);class Hb extends or{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?ARt():Hp(r)}get typeId(){return we.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}PNe=Symbol.toStringTag;Hb[PNe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Hb.prototype);function Xm(e){const t=e;switch(e.typeId){case we.Decimal:return e.bitWidth/32;case we.Timestamp:return 2;case we.Date:return 1+t.unit;case we.Interval:return 1+t.unit;case we.FixedSizeList:return t.listSize;case we.FixedSizeBinary:return t.byteWidth;default:return 1}}class vr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return IRt(this,t,n)}getVisitFnByTypeId(t,n=!0){return h2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function IRt(e,t,n=!0){return typeof t=="number"?h2(e,t,n):typeof t=="string"&&t in we?h2(e,we[t],n):t&&t instanceof or?h2(e,P0e(t),n):t!=null&&t.type&&t.type instanceof or?h2(e,P0e(t.type),n):h2(e,we.NONE,n)}function h2(e,t,n=!0){let r=null;switch(t){case we.Null:r=e.visitNull;break;case we.Bool:r=e.visitBool;break;case we.Int:r=e.visitInt;break;case we.Int8:r=e.visitInt8||e.visitInt;break;case we.Int16:r=e.visitInt16||e.visitInt;break;case we.Int32:r=e.visitInt32||e.visitInt;break;case we.Int64:r=e.visitInt64||e.visitInt;break;case we.Uint8:r=e.visitUint8||e.visitInt;break;case we.Uint16:r=e.visitUint16||e.visitInt;break;case we.Uint32:r=e.visitUint32||e.visitInt;break;case we.Uint64:r=e.visitUint64||e.visitInt;break;case we.Float:r=e.visitFloat;break;case we.Float16:r=e.visitFloat16||e.visitFloat;break;case we.Float32:r=e.visitFloat32||e.visitFloat;break;case we.Float64:r=e.visitFloat64||e.visitFloat;break;case we.Utf8:r=e.visitUtf8;break;case we.Binary:r=e.visitBinary;break;case we.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case we.Date:r=e.visitDate;break;case we.DateDay:r=e.visitDateDay||e.visitDate;break;case we.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case we.Timestamp:r=e.visitTimestamp;break;case we.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case we.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case we.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case we.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case we.Time:r=e.visitTime;break;case we.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case we.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case we.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case we.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case we.Decimal:r=e.visitDecimal;break;case we.List:r=e.visitList;break;case we.Struct:r=e.visitStruct;break;case we.Union:r=e.visitUnion;break;case we.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case we.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case we.Dictionary:r=e.visitDictionary;break;case we.Interval:r=e.visitInterval;break;case we.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case we.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case we.Duration:r=e.visitDuration;break;case we.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case we.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case we.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case we.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case we.FixedSizeList:r=e.visitFixedSizeList;break;case we.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${we[t]}'`)}function P0e(e){switch(e.typeId){case we.Null:return we.Null;case we.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?we.Int8:we.Uint8;case 16:return n?we.Int16:we.Uint16;case 32:return n?we.Int32:we.Uint32;case 64:return n?we.Int64:we.Uint64}return we.Int}case we.Float:switch(e.precision){case _u.HALF:return we.Float16;case _u.SINGLE:return we.Float32;case _u.DOUBLE:return we.Float64}return we.Float;case we.Binary:return we.Binary;case we.Utf8:return we.Utf8;case we.Bool:return we.Bool;case we.Decimal:return we.Decimal;case we.Time:switch(e.unit){case Pn.SECOND:return we.TimeSecond;case Pn.MILLISECOND:return we.TimeMillisecond;case Pn.MICROSECOND:return we.TimeMicrosecond;case Pn.NANOSECOND:return we.TimeNanosecond}return we.Time;case we.Timestamp:switch(e.unit){case Pn.SECOND:return we.TimestampSecond;case Pn.MILLISECOND:return we.TimestampMillisecond;case Pn.MICROSECOND:return we.TimestampMicrosecond;case Pn.NANOSECOND:return we.TimestampNanosecond}return we.Timestamp;case we.Date:switch(e.unit){case Y0.DAY:return we.DateDay;case Y0.MILLISECOND:return we.DateMillisecond}return we.Date;case we.Interval:switch(e.unit){case K0.DAY_TIME:return we.IntervalDayTime;case K0.YEAR_MONTH:return we.IntervalYearMonth}return we.Interval;case we.Duration:switch(e.unit){case Pn.SECOND:return we.DurationSecond;case Pn.MILLISECOND:return we.DurationMillisecond;case Pn.MICROSECOND:return we.DurationMicrosecond;case Pn.NANOSECOND:return we.DurationNanosecond}return we.Duration;case we.Map:return we.Map;case we.List:return we.List;case we.Struct:return we.Struct;case we.Union:switch(e.mode){case nf.Dense:return we.DenseUnion;case nf.Sparse:return we.SparseUnion}return we.Union;case we.FixedSizeBinary:return we.FixedSizeBinary;case we.FixedSizeList:return we.FixedSizeList;case we.Dictionary:return we.Dictionary}throw new Error(`Unrecognized type '${we[e.typeId]}'`)}vr.prototype.visitInt8=null;vr.prototype.visitInt16=null;vr.prototype.visitInt32=null;vr.prototype.visitInt64=null;vr.prototype.visitUint8=null;vr.prototype.visitUint16=null;vr.prototype.visitUint32=null;vr.prototype.visitUint64=null;vr.prototype.visitFloat16=null;vr.prototype.visitFloat32=null;vr.prototype.visitFloat64=null;vr.prototype.visitDateDay=null;vr.prototype.visitDateMillisecond=null;vr.prototype.visitTimestampSecond=null;vr.prototype.visitTimestampMillisecond=null;vr.prototype.visitTimestampMicrosecond=null;vr.prototype.visitTimestampNanosecond=null;vr.prototype.visitTimeSecond=null;vr.prototype.visitTimeMillisecond=null;vr.prototype.visitTimeMicrosecond=null;vr.prototype.visitTimeNanosecond=null;vr.prototype.visitDenseUnion=null;vr.prototype.visitSparseUnion=null;vr.prototype.visitIntervalDayTime=null;vr.prototype.visitIntervalYearMonth=null;vr.prototype.visitDuration=null;vr.prototype.visitDurationSecond=null;vr.prototype.visitDurationMillisecond=null;vr.prototype.visitDurationMicrosecond=null;vr.prototype.visitDurationNanosecond=null;const MNe=new Float64Array(1),zT=new Uint32Array(MNe.buffer);function LNe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function $Ne(e){if(e!==e)return 32256;MNe[0]=e;const t=(zT[1]&2147483648)>>16&65535;let n=zT[1]&2146435072,r=0;return n>=1089470464?zT[0]>0?n=31744:(n=(n&2080374784)>>16,r=(zT[1]&1048575)>>10):n<=1056964608?(r=1048576+(zT[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(zT[1]&1048575)+512>>10),t|n|r&65535}class Fn extends vr{}function Gn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const kRt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},one=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},RRt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},DRt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},FNe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},NRt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},I1=({values:e},t,n)=>{e[t]=n},ane=({values:e},t,n)=>{e[t]=n},BNe=({values:e},t,n)=>{e[t]=$Ne(n)},PRt=(e,t,n)=>{switch(e.type.precision){case _u.HALF:return BNe(e,t,n);case _u.SINGLE:case _u.DOUBLE:return ane(e,t,n)}},une=({values:e},t,n)=>{kRt(e,t,n.valueOf())},lne=({values:e},t,n)=>{one(e,t*2,n.valueOf())},jNe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},ORt=({values:e,valueOffsets:t},n,r)=>FNe(e,t,n,r),MRt=({values:e,valueOffsets:t},n,r)=>{FNe(e,t,n,Gte(r))},UNe=(e,t,n)=>{e.type.unit===Y0.DAY?une(e,t,n):lne(e,t,n)},cne=({values:e},t,n)=>one(e,t*2,n/1e3),fne=({values:e},t,n)=>one(e,t*2,n),dne=({values:e},t,n)=>RRt(e,t*2,n),hne=({values:e},t,n)=>DRt(e,t*2,n),zNe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return cne(e,t,n);case Pn.MILLISECOND:return fne(e,t,n);case Pn.MICROSECOND:return dne(e,t,n);case Pn.NANOSECOND:return hne(e,t,n)}},pne=({values:e},t,n)=>{e[t]=n},mne=({values:e},t,n)=>{e[t]=n},gne=({values:e},t,n)=>{e[t]=n},yne=({values:e},t,n)=>{e[t]=n},VNe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return pne(e,t,n);case Pn.MILLISECOND:return mne(e,t,n);case Pn.MICROSECOND:return gne(e,t,n);case Pn.NANOSECOND:return yne(e,t,n)}},HNe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},LRt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=fh.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},$Rt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=fh.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},FRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),BRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),jRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),URt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),zRt=(e,t,n)=>{const r=e.type.children.map(s=>fh.getVisitFn(s.type)),i=n instanceof Map?jRt(t,n):n instanceof mi?BRt(t,n):Array.isArray(n)?FRt(t,n):URt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},VRt=(e,t,n)=>{e.type.mode===nf.Dense?qNe(e,t,n):WNe(e,t,n)},qNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];fh.visit(i,e.valueOffsets[t],n)},WNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];fh.visit(i,t,n)},HRt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},GNe=(e,t,n)=>{e.type.unit===K0.DAY_TIME?vne(e,t,n):bne(e,t,n)},vne=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},bne=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},xne=({values:e},t,n)=>{e[t]=n},_ne=({values:e},t,n)=>{e[t]=n},wne=({values:e},t,n)=>{e[t]=n},Ene=({values:e},t,n)=>{e[t]=n},YNe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return xne(e,t,n);case Pn.MILLISECOND:return _ne(e,t,n);case Pn.MICROSECOND:return wne(e,t,n);case Pn.NANOSECOND:return Ene(e,t,n)}},qRt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=fh.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Fn.prototype.visitBool=Gn(NRt);Fn.prototype.visitInt=Gn(I1);Fn.prototype.visitInt8=Gn(I1);Fn.prototype.visitInt16=Gn(I1);Fn.prototype.visitInt32=Gn(I1);Fn.prototype.visitInt64=Gn(I1);Fn.prototype.visitUint8=Gn(I1);Fn.prototype.visitUint16=Gn(I1);Fn.prototype.visitUint32=Gn(I1);Fn.prototype.visitUint64=Gn(I1);Fn.prototype.visitFloat=Gn(PRt);Fn.prototype.visitFloat16=Gn(BNe);Fn.prototype.visitFloat32=Gn(ane);Fn.prototype.visitFloat64=Gn(ane);Fn.prototype.visitUtf8=Gn(MRt);Fn.prototype.visitBinary=Gn(ORt);Fn.prototype.visitFixedSizeBinary=Gn(jNe);Fn.prototype.visitDate=Gn(UNe);Fn.prototype.visitDateDay=Gn(une);Fn.prototype.visitDateMillisecond=Gn(lne);Fn.prototype.visitTimestamp=Gn(zNe);Fn.prototype.visitTimestampSecond=Gn(cne);Fn.prototype.visitTimestampMillisecond=Gn(fne);Fn.prototype.visitTimestampMicrosecond=Gn(dne);Fn.prototype.visitTimestampNanosecond=Gn(hne);Fn.prototype.visitTime=Gn(VNe);Fn.prototype.visitTimeSecond=Gn(pne);Fn.prototype.visitTimeMillisecond=Gn(mne);Fn.prototype.visitTimeMicrosecond=Gn(gne);Fn.prototype.visitTimeNanosecond=Gn(yne);Fn.prototype.visitDecimal=Gn(HNe);Fn.prototype.visitList=Gn(LRt);Fn.prototype.visitStruct=Gn(zRt);Fn.prototype.visitUnion=Gn(VRt);Fn.prototype.visitDenseUnion=Gn(qNe);Fn.prototype.visitSparseUnion=Gn(WNe);Fn.prototype.visitDictionary=Gn(HRt);Fn.prototype.visitInterval=Gn(GNe);Fn.prototype.visitIntervalDayTime=Gn(vne);Fn.prototype.visitIntervalYearMonth=Gn(bne);Fn.prototype.visitDuration=Gn(YNe);Fn.prototype.visitDurationSecond=Gn(xne);Fn.prototype.visitDurationMillisecond=Gn(_ne);Fn.prototype.visitDurationMicrosecond=Gn(wne);Fn.prototype.visitDurationNanosecond=Gn(Ene);Fn.prototype.visitFixedSizeList=Gn(qRt);Fn.prototype.visitMap=Gn($Rt);const fh=new Fn,dp=Symbol.for("parent"),J2=Symbol.for("rowIndex");class Sne{constructor(t,n){return this[dp]=t,this[J2]=n,new Proxy(this,new GRt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[J2],n=this[dp],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=rf.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${lE(t)}: ${lE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new WRt(this[dp],this[J2])}}class WRt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,rf.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Sne.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[dp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[J2]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class GRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[dp].type.children.map(n=>n.name)}has(t,n){return t[dp].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[dp].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[dp].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=rf.visit(t[dp].children[r],t[J2]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[dp].type.children.findIndex(s=>s.name===n);return i!==-1?(fh.visit(t[dp].children[i],t[J2],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class On extends vr{}function Bn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const YRt=(e,t)=>864e5*e[t],Tne=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),KRt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,XRt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,KNe=e=>new Date(e),QRt=(e,t)=>KNe(YRt(e,t)),JRt=(e,t)=>KNe(Tne(e,t)),ZRt=(e,t)=>null,XNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},eDt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},QNe=({values:e},t)=>QRt(e,t),JNe=({values:e},t)=>JRt(e,t*2),Dx=({stride:e,values:t},n)=>t[e*n],tDt=({stride:e,values:t},n)=>LNe(t[e*n]),ZNe=({values:e},t)=>e[t],nDt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),rDt=({values:e,valueOffsets:t},n)=>XNe(e,t,n),iDt=({values:e,valueOffsets:t},n)=>{const r=XNe(e,t,n);return r!==null?NY(r):null},sDt=({values:e},t)=>e[t],oDt=({type:e,values:t},n)=>e.precision!==_u.HALF?t[n]:LNe(t[n]),aDt=(e,t)=>e.type.unit===Y0.DAY?QNe(e,t):JNe(e,t),ePe=({values:e},t)=>1e3*Tne(e,t*2),tPe=({values:e},t)=>Tne(e,t*2),nPe=({values:e},t)=>KRt(e,t*2),rPe=({values:e},t)=>XRt(e,t*2),uDt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return ePe(e,t);case Pn.MILLISECOND:return tPe(e,t);case Pn.MICROSECOND:return nPe(e,t);case Pn.NANOSECOND:return rPe(e,t)}},iPe=({values:e},t)=>e[t],sPe=({values:e},t)=>e[t],oPe=({values:e},t)=>e[t],aPe=({values:e},t)=>e[t],lDt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return iPe(e,t);case Pn.MILLISECOND:return sPe(e,t);case Pn.MICROSECOND:return oPe(e,t);case Pn.NANOSECOND:return aPe(e,t)}},cDt=({values:e,stride:t},n)=>Xte.decimal(e.subarray(t*n,t*(n+1))),fDt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mi([u])},dDt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new ej(o.slice(i,s-i))},hDt=(e,t)=>new Sne(e,t),pDt=(e,t)=>e.type.mode===nf.Dense?uPe(e,t):lPe(e,t),uPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return rf.visit(r,e.valueOffsets[t])},lPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return rf.visit(r,t)},mDt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},gDt=(e,t)=>e.type.unit===K0.DAY_TIME?cPe(e,t):fPe(e,t),cPe=({values:e},t)=>e.subarray(2*t,2*(t+1)),fPe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},dPe=({values:e},t)=>e[t],hPe=({values:e},t)=>e[t],pPe=({values:e},t)=>e[t],mPe=({values:e},t)=>e[t],yDt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return dPe(e,t);case Pn.MILLISECOND:return hPe(e,t);case Pn.MICROSECOND:return pPe(e,t);case Pn.NANOSECOND:return mPe(e,t)}},vDt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mi([s])};On.prototype.visitNull=Bn(ZRt);On.prototype.visitBool=Bn(eDt);On.prototype.visitInt=Bn(sDt);On.prototype.visitInt8=Bn(Dx);On.prototype.visitInt16=Bn(Dx);On.prototype.visitInt32=Bn(Dx);On.prototype.visitInt64=Bn(ZNe);On.prototype.visitUint8=Bn(Dx);On.prototype.visitUint16=Bn(Dx);On.prototype.visitUint32=Bn(Dx);On.prototype.visitUint64=Bn(ZNe);On.prototype.visitFloat=Bn(oDt);On.prototype.visitFloat16=Bn(tDt);On.prototype.visitFloat32=Bn(Dx);On.prototype.visitFloat64=Bn(Dx);On.prototype.visitUtf8=Bn(iDt);On.prototype.visitBinary=Bn(rDt);On.prototype.visitFixedSizeBinary=Bn(nDt);On.prototype.visitDate=Bn(aDt);On.prototype.visitDateDay=Bn(QNe);On.prototype.visitDateMillisecond=Bn(JNe);On.prototype.visitTimestamp=Bn(uDt);On.prototype.visitTimestampSecond=Bn(ePe);On.prototype.visitTimestampMillisecond=Bn(tPe);On.prototype.visitTimestampMicrosecond=Bn(nPe);On.prototype.visitTimestampNanosecond=Bn(rPe);On.prototype.visitTime=Bn(lDt);On.prototype.visitTimeSecond=Bn(iPe);On.prototype.visitTimeMillisecond=Bn(sPe);On.prototype.visitTimeMicrosecond=Bn(oPe);On.prototype.visitTimeNanosecond=Bn(aPe);On.prototype.visitDecimal=Bn(cDt);On.prototype.visitList=Bn(fDt);On.prototype.visitStruct=Bn(hDt);On.prototype.visitUnion=Bn(pDt);On.prototype.visitDenseUnion=Bn(uPe);On.prototype.visitSparseUnion=Bn(lPe);On.prototype.visitDictionary=Bn(mDt);On.prototype.visitInterval=Bn(gDt);On.prototype.visitIntervalDayTime=Bn(cPe);On.prototype.visitIntervalYearMonth=Bn(fPe);On.prototype.visitDuration=Bn(yDt);On.prototype.visitDurationSecond=Bn(dPe);On.prototype.visitDurationMillisecond=Bn(hPe);On.prototype.visitDurationMicrosecond=Bn(pPe);On.prototype.visitDurationNanosecond=Bn(mPe);On.prototype.visitFixedSizeList=Bn(vDt);On.prototype.visitMap=Bn(dDt);const rf=new On,wp=Symbol.for("keys"),Z2=Symbol.for("vals");class ej{constructor(t){return this[wp]=new mi([t.children[0]]).memoize(),this[Z2]=t.children[1],new Proxy(this,new xDt)}[Symbol.iterator](){return new bDt(this[wp],this[Z2])}get size(){return this[wp].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[wp],n=this[Z2],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=rf.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${lE(t)}: ${lE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class bDt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),rf.visit(this.vals,t)]})}}class xDt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[wp].toArray().map(String)}has(t,n){return t[wp].includes(n)}getOwnPropertyDescriptor(t,n){if(t[wp].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[wp].indexOf(n);if(r!==-1){const i=rf.visit(Reflect.get(t,Z2),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[wp].indexOf(n);return i!==-1?(fh.visit(Reflect.get(t,Z2),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(ej.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[wp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Z2]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let O0e;function gPe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(O0e=s,s=o,o=O0e),o>i&&(o=i),r?r(e,s,o):[s,o]}const M0e=e=>e!==e;function dI(e){if(typeof e!=="object"||e===null)return M0e(e)?M0e:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?cRt(e,n):!1:e instanceof Map?wDt(e):Array.isArray(e)?_Dt(e):e instanceof mi?EDt(e):SDt(e,!0)}function _Dt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dI(e[n]);return tj(t)}function wDt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=dI(r);return tj(n)}function EDt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dI(e.get(n));return tj(t)}function SDt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=dI(e[n[i]]);return tj(r,n)}function tj(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return TDt(e,n);case Map:return L0e(e,n,n.keys());case ej:case Sne:case Object:case void 0:return L0e(e,n,t||Object.keys(n))}return n instanceof mi?CDt(e,n):!1}}function TDt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function CDt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function L0e(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function yPe(e,t,n,r){return(n&1<<r)!==0}function ADt(e,t,n,r){return(n&1<<r)>>r}function M5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):vPe(new Cne(n,e,t,null,yPe)).subarray(0,r)),i}return n}function vPe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Cne{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function OY(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new Cne(e,t,n-t,e,ADt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return OY(e,t,i)+OY(e,r,n)+IDt(e,i>>3,r-i>>3)}function IDt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=hH(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=hH(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=hH(s.getUint8(i)),i+=1;return r}function hH(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const kDt=-1;class Mi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return or.isSparseUnion(t)?this.children.some(n=>n.nullable):or.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(or.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=kDt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-OY(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Mi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Xm(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(or.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===nf.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(or.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===nf.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(M5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Mi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===we.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(M5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[uy.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[uy.TYPE])&&(o[uy.TYPE]=s.subarray(t,t+n)),(s=o[uy.OFFSET])&&(o[uy.OFFSET]=s.subarray(t,t+n+1))||(s=o[uy.DATA])&&(o[uy.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Mi.prototype.children=Object.freeze([]);class rN extends vr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Mi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.data),s=Li(t.nullBitmap),o=gR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.data),s=Li(t.nullBitmap),o=gR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Li(t.nullBitmap),o=gR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Li(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Na(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(or.isSparseUnion(n))return new Mi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=gR(t.valueOffsets);return new Mi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.indices.ArrayType,t.data),{["dictionary"]:o=new mi([new rN().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Na(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new rN().visit({type:n.valueType})}=t,s=Li(t.nullBitmap),{["length"]:o=i.length/Xm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new rN().visit({type:n.childType})}=t,s=Li(t.nullBitmap),o=gR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}}const RDt=new rN;function Ju(e){return RDt.visit(e)}class $0e{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function bPe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function xPe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function _Pe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Ane(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Ine(e,t){return e.getValid(t)}function eC(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Ane(r,this._offsets,n,t)}}function wPe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Ane(s,this._offsets,r,n);return t=void 0,o}}function EPe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Ane(s,this._offsets,i,n);return t=void 0,o}}class Mn extends vr{}function DDt(e,t){return t===null&&e.length>0?0:-1}function NDt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Cne(n,e.offset+(t||0),e.length,n,yPe)){if(!i)return r;++r}return-1}function er(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case we.Union:break;case we.Dictionary:break;default:return NDt(e,n)}const r=rf.getVisitFn(e),i=dI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function SPe(e,t,n){const r=rf.getVisitFn(e),i=dI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Mn.prototype.visitNull=DDt;Mn.prototype.visitBool=er;Mn.prototype.visitInt=er;Mn.prototype.visitInt8=er;Mn.prototype.visitInt16=er;Mn.prototype.visitInt32=er;Mn.prototype.visitInt64=er;Mn.prototype.visitUint8=er;Mn.prototype.visitUint16=er;Mn.prototype.visitUint32=er;Mn.prototype.visitUint64=er;Mn.prototype.visitFloat=er;Mn.prototype.visitFloat16=er;Mn.prototype.visitFloat32=er;Mn.prototype.visitFloat64=er;Mn.prototype.visitUtf8=er;Mn.prototype.visitBinary=er;Mn.prototype.visitFixedSizeBinary=er;Mn.prototype.visitDate=er;Mn.prototype.visitDateDay=er;Mn.prototype.visitDateMillisecond=er;Mn.prototype.visitTimestamp=er;Mn.prototype.visitTimestampSecond=er;Mn.prototype.visitTimestampMillisecond=er;Mn.prototype.visitTimestampMicrosecond=er;Mn.prototype.visitTimestampNanosecond=er;Mn.prototype.visitTime=er;Mn.prototype.visitTimeSecond=er;Mn.prototype.visitTimeMillisecond=er;Mn.prototype.visitTimeMicrosecond=er;Mn.prototype.visitTimeNanosecond=er;Mn.prototype.visitDecimal=er;Mn.prototype.visitList=er;Mn.prototype.visitStruct=er;Mn.prototype.visitUnion=er;Mn.prototype.visitDenseUnion=SPe;Mn.prototype.visitSparseUnion=SPe;Mn.prototype.visitDictionary=er;Mn.prototype.visitInterval=er;Mn.prototype.visitIntervalDayTime=er;Mn.prototype.visitIntervalYearMonth=er;Mn.prototype.visitDuration=er;Mn.prototype.visitDurationSecond=er;Mn.prototype.visitDurationMillisecond=er;Mn.prototype.visitDurationMicrosecond=er;Mn.prototype.visitDurationNanosecond=er;Mn.prototype.visitFixedSizeList=er;Mn.prototype.visitMap=er;const L5=new Mn;class Ln extends vr{}function jn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===we.Timestamp||t instanceof ec&&t.bitWidth!==64||t instanceof d1&&t.bitWidth!==64||t instanceof Vb&&t.precision!==_u.HALF))return new $0e(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new $0e(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new PDt(o)})}class PDt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Ln.prototype.visitNull=jn;Ln.prototype.visitBool=jn;Ln.prototype.visitInt=jn;Ln.prototype.visitInt8=jn;Ln.prototype.visitInt16=jn;Ln.prototype.visitInt32=jn;Ln.prototype.visitInt64=jn;Ln.prototype.visitUint8=jn;Ln.prototype.visitUint16=jn;Ln.prototype.visitUint32=jn;Ln.prototype.visitUint64=jn;Ln.prototype.visitFloat=jn;Ln.prototype.visitFloat16=jn;Ln.prototype.visitFloat32=jn;Ln.prototype.visitFloat64=jn;Ln.prototype.visitUtf8=jn;Ln.prototype.visitBinary=jn;Ln.prototype.visitFixedSizeBinary=jn;Ln.prototype.visitDate=jn;Ln.prototype.visitDateDay=jn;Ln.prototype.visitDateMillisecond=jn;Ln.prototype.visitTimestamp=jn;Ln.prototype.visitTimestampSecond=jn;Ln.prototype.visitTimestampMillisecond=jn;Ln.prototype.visitTimestampMicrosecond=jn;Ln.prototype.visitTimestampNanosecond=jn;Ln.prototype.visitTime=jn;Ln.prototype.visitTimeSecond=jn;Ln.prototype.visitTimeMillisecond=jn;Ln.prototype.visitTimeMicrosecond=jn;Ln.prototype.visitTimeNanosecond=jn;Ln.prototype.visitDecimal=jn;Ln.prototype.visitList=jn;Ln.prototype.visitStruct=jn;Ln.prototype.visitUnion=jn;Ln.prototype.visitDenseUnion=jn;Ln.prototype.visitSparseUnion=jn;Ln.prototype.visitDictionary=jn;Ln.prototype.visitInterval=jn;Ln.prototype.visitIntervalDayTime=jn;Ln.prototype.visitIntervalYearMonth=jn;Ln.prototype.visitDuration=jn;Ln.prototype.visitDurationSecond=jn;Ln.prototype.visitDurationMillisecond=jn;Ln.prototype.visitDurationMicrosecond=jn;Ln.prototype.visitDurationNanosecond=jn;Ln.prototype.visitFixedSizeList=jn;Ln.prototype.visitMap=jn;const kne=new Ln,ODt=(e,t)=>e+t;class Nx extends vr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Pn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+X0.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+X0.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const MDt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),LDt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),$Dt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=X0.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},FDt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=X0.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},BDt=(e,t)=>e.type.mode===nf.Dense?TPe(e,t):CPe(e,t),TPe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+X0.visit(t[s],r[i])},CPe=({children:e},t)=>4+X0.visitMany(e,e.map(()=>t)).reduce(ODt,0);Nx.prototype.visitUtf8=MDt;Nx.prototype.visitBinary=LDt;Nx.prototype.visitList=$Dt;Nx.prototype.visitFixedSizeList=FDt;Nx.prototype.visitUnion=BDt;Nx.prototype.visitDenseUnion=TPe;Nx.prototype.visitSparseUnion=CPe;const X0=new Nx;var APe;const IPe={},kPe={};class mi{constructor(t){var n,r,i;const s=t[0]instanceof mi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Mi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=IPe[o.typeId],f=s[0];this.isValid=d=>Ine(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,kPe[o.typeId]),this._offsets=xPe(s);break}this.data=s,this.type=o,this.stride=Xm(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return bPe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${we[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return kne.visit(this)}concat(...t){return new mi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mi(gPe(this,t,n,({data:r,_offsets:i},s,o)=>_Pe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case we.Int:case we.Float:case we.Decimal:case we.Time:case we.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return or.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(or.isDictionary(this.type)){const t=new $5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return new $5(this)}unmemoize(){if(or.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return this}}APe=Symbol.toStringTag;mi[APe]=(e=>{e.type=or.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(we).map(n=>we[n]).filter(n=>typeof n=="number"&&n!==we.NONE);for(const n of t){const r=rf.getVisitFnByTypeId(n),i=fh.getVisitFnByTypeId(n),s=L5.getVisitFnByTypeId(n),o=X0.getVisitFnByTypeId(n);IPe[n]={get:r,set:i,indexOf:s,byteLength:o},kPe[n]=Object.create(e,{isValid:{value:eC(Ine)},get:{value:eC(rf.getVisitFnByTypeId(n))},set:{value:wPe(fh.getVisitFnByTypeId(n))},indexOf:{value:EPe(L5.getVisitFnByTypeId(n))},getByteLength:{value:eC(X0.getVisitFnByTypeId(n))}})}return"Vector"})(mi.prototype);class $5 extends mi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new $5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function jDt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${UDt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function UDt(e){return typeof e!="bigint"?lE(e):`${lE(e)}n`}const pH=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,zDt=(e,t=0)=>e.length>=t?e.subarray(0,t):R5(new e.constructor(t),e,0);class nj{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?pH(r*1,this.BYTES_PER_ELEMENT):pH(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=pH(t*this.stride,this.BYTES_PER_ELEMENT);const n=zDt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=R5(new this.ArrayType(t),this.buffer)}}nj.prototype.offset=0;class $3 extends nj{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class RPe extends $3{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class DPe extends $3{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let hf=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Xm(t),this._nulls=new RPe,n&&n.length>0&&(this._isValid=jDt(n))}toVector(){return new mi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Ju({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};hf.prototype.length=1;hf.prototype.stride=1;hf.prototype.children=null;hf.prototype.finished=!1;hf.prototype.nullValues=null;hf.prototype._isValid=()=>!0;class k1 extends hf{constructor(t){super(t),this._values=new $3(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class rj extends hf{constructor(t){super(t),this._pendingLength=0,this._offsets=new DPe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof ej?n[wp].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class MY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const mH=2,s0=4,_y=4,Xi=4,Fv=new Int32Array(2),F0e=new Float32Array(Fv.buffer),B0e=new Float64Array(Fv.buffer),k6=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var LY;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(LY||(LY={}));let F5=class NPe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new NPe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Fv[0]=this.readInt32(t),F0e[0]}readFloat64(t){return Fv[k6?0:1]=this.readInt32(t),Fv[k6?1:0]=this.readInt32(t+4),B0e[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){F0e[0]=n,this.writeInt32(t,Fv[0])}writeFloat64(t,n){B0e[0]=n,this.writeInt32(t,Fv[k6?0:1]),this.writeInt32(t+4,Fv[k6?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+s0+_y)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<_y;n++)t+=String.fromCharCode(this.readInt8(this.position_+s0+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=s0;const i=this.bytes_.subarray(t,t+r);return n===LY.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+s0}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=_y)throw new Error("FlatBuffers: file identifier must be length "+_y);for(let n=0;n<_y;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+s0+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},PPe=class OPe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=F5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=OPe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=F5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(s0,0),this.writeInt32(this.offset()-t+s0)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*mH;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=mH;l<s;l+=mH)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Xi:0;if(n){const s=n;if(this.prep(this.minalign,s0+_y+i),s.length!=_y)throw new TypeError("FlatBuffers: file identifier must be length "+_y);for(let o=_y-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,s0+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(s0,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class sa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Xi),(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return sa.startKeyValue(t),sa.addKey(t,n),sa.addValue(t,r),sa.endKeyValue(t)}}var WC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(WC||(WC={}));var GC;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(GC||(GC={}));var B5;(function(e){e[e.DenseArray=0]="DenseArray"})(B5||(B5={}));class Wf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Wf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Xi),(n||new Wf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Wf.startInt(t),Wf.addBitWidth(t,n),Wf.addIsSigned(t,r),Wf.endInt(t)}}class wy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new wy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Xi),(n||new wy).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Wf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):B5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,B5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Aw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Aw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Xi),(n||new Aw).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Aw.startBinary(t),Aw.endBinary(t)}}class Iw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Xi),(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Iw.startBool(t),Iw.endBool(t)}}var j5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(j5||(j5={}));let d$=class p2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new p2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Xi),(n||new p2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,j5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return p2.startDate(t),p2.addUnit(t,n),p2.endDate(t)}};class Fc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Xi),(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Fc.startDecimal(t),Fc.addPrecision(t,n),Fc.addScale(t,r),Fc.addBitWidth(t,i),Fc.endDecimal(t)}}var qb;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(qb||(qb={}));class o0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Xi),(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qb.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,qb.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return o0.startDuration(t),o0.addUnit(t,n),o0.endDuration(t)}}class a0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Xi),(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return a0.startFixedSizeBinary(t),a0.addByteWidth(t,n),a0.endFixedSizeBinary(t)}}class u0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Xi),(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return u0.startFixedSizeList(t),u0.addListSize(t,n),u0.endFixedSizeList(t)}}var U5;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(U5||(U5={}));class l0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new l0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Xi),(n||new l0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U5.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,U5.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return l0.startFloatingPoint(t),l0.addPrecision(t,n),l0.endFloatingPoint(t)}}var z5;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(z5||(z5={}));class c0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new c0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Xi),(n||new c0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z5.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,z5.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return c0.startInterval(t),c0.addUnit(t,n),c0.endInterval(t)}}class kw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new kw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Xi),(n||new kw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return kw.startList(t),kw.endList(t)}}let h$=class m2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new m2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Xi),(n||new m2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return m2.startMap(t),m2.addKeysSorted(t,n),m2.endMap(t)}};class Rw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Rw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Xi),(n||new Rw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Rw.startNull(t),Rw.endNull(t)}}class Dw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Dw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Xi),(n||new Dw).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Dw.startStruct_(t),Dw.endStruct_(t)}}let dD=class nw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new nw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Xi),(n||new nw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qb.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,qb.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return nw.startTime(t),nw.addUnit(t,n),nw.addBitWidth(t,r),nw.endTime(t)}};class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Xi),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qb.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,qb.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Jd.startTimestamp(t),Jd.addUnit(t,n),Jd.addTimezone(t,r),Jd.endTimestamp(t)}}var V5;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(V5||(V5={}));let rw=class iw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new iw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Xi),(n||new iw).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):V5.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,V5.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return iw.startUnion(t),iw.addMode(t,n),iw.addTypeIds(t,r),iw.endUnion(t)}};class Nw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Nw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Xi),(n||new Nw).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Nw.startUtf8(t),Nw.endUtf8(t)}}var Ds;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ds||(Ds={}));let Gd=class p${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new p$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Xi),(n||new p$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ds.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new wy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new p$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ds.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Gm=class ay{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ay).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Xi),(n||new ay).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GC.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Gd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,GC.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return ay.startSchema(t),ay.addEndianness(t,n),ay.addFields(t,r),ay.addCustomMetadata(t,i),ay.addFeatures(t,s),ay.endSchema(t)}};class zf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Xi),(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Gm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new MY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new MY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,WC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ri{constructor(t=[],n,r,i=zl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=FY(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ri(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ri(n,this.metadata)}assign(...t){const n=t[0]instanceof Ri?t[0]:Array.isArray(t[0])?new Ri(t[0]):new Ri(t),r=[...this.fields],i=R6(R6(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:R6(R6(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=FY(s,new Map);return new Ri([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ri.prototype.fields=null;Ri.prototype.metadata=null;Ri.prototype.dictionaries=null;let Wi=class $Y{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new $Y(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],$Y.new(n,r,i,s)}};Wi.prototype.type=null;Wi.prototype.name=null;Wi.prototype.nullable=null;Wi.prototype.metadata=null;function R6(e,t){return new Map([...e||new Map,...t||new Map])}function FY(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(or.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&FY(s.children,t)}return t}var VDt=PPe,HDt=F5;class BY{static decode(t){t=new HDt(Li(t));const n=zf.getRootAsFooter(t),r=Ri.decode(n.schema(),new Map,n.version());return new qDt(r,n)}static encode(t){const n=new VDt,r=Ri.encode(n,t.schema);zf.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Wb.encode(n,o);const i=n.endVector();zf.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Wb.encode(n,o);const s=n.endVector();return zf.startFooter(n),zf.addSchema(n,r),zf.addVersion(n,zl.V5),zf.addRecordBatches(n,i),zf.addDictionaries(n,s),zf.finishFooterBuffer(n,zf.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=zl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class qDt extends BY{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Wb.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Wb.decode(n)}return null}}class Wb{static decode(t){return new Wb(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return MY.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Hp(r),this.bodyLength=Hp(n)}}const D6=Object.freeze({done:!0,value:void 0});class MPe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class WDt extends MPe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return gy(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(D6);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return N0e.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return N0e.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return gy(this,void 0,void 0,function*(){return yield this.abort(t),D6})}return(t){return gy(this,void 0,void 0,function*(){return yield this.close(),D6})}read(t){return gy(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return gy(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(D6)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class gH extends WDt{write(t){if((t=Li(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?NY(this.toUint8Array(!0)):this.toUint8Array(!1).then(NY)}toUint8Array(t=!1){return t?G0(this._values)[0]:gy(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=ND(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return G0(o,a)[0]})}}class LPe extends rj{constructor(t){super(t),this._values=new nj(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Li(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class GDt extends hf{constructor(t){super(t),this._values=new RPe}setValue(t,n){this._values.set(t,+n)}}class ij extends k1{}ij.prototype._setValue=UNe;class $Pe extends ij{}$Pe.prototype._setValue=une;class FPe extends ij{}FPe.prototype._setValue=lne;class BPe extends k1{}BPe.prototype._setValue=HNe;class YDt extends hf{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Hb(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=H5({type:this.type.indices,nullValues:n}),this.dictionary=H5({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class jPe extends k1{}jPe.prototype._setValue=jNe;class KDt extends hf{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new qC(this.type.listSize,new Wi(n,t.type,!0)),r}}class sj extends k1{setValue(t,n){this._values.set(t,n)}}class XDt extends sj{setValue(t,n){super.setValue(t,$Ne(n))}}class QDt extends sj{}class JDt extends sj{}class oj extends k1{}oj.prototype._setValue=GNe;class UPe extends oj{}UPe.prototype._setValue=vne;class zPe extends oj{}zPe.prototype._setValue=bne;class hI extends k1{}hI.prototype._setValue=YNe;class VPe extends hI{}VPe.prototype._setValue=xne;class HPe extends hI{}HPe.prototype._setValue=_ne;class qPe extends hI{}qPe.prototype._setValue=wne;class WPe extends hI{}WPe.prototype._setValue=Ene;class R1 extends k1{setValue(t,n){this._values.set(t,n)}}class ZDt extends R1{}class eNt extends R1{}class tNt extends R1{}class nNt extends R1{}class rNt extends R1{}class iNt extends R1{}class sNt extends R1{}class oNt extends R1{}class aNt extends rj{constructor(t){super(t),this._offsets=new DPe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new HC(new Wi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class uNt extends rj{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new dP(new Wi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class lNt extends hf{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class cNt extends hf{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new tl([...this.type.children,new Wi(n,t.type,!0)]),r}}class pI extends k1{}pI.prototype._setValue=zNe;class GPe extends pI{}GPe.prototype._setValue=cne;class YPe extends pI{}YPe.prototype._setValue=fne;class KPe extends pI{}KPe.prototype._setValue=dne;class XPe extends pI{}XPe.prototype._setValue=hne;class mI extends k1{}mI.prototype._setValue=VNe;class QPe extends mI{}QPe.prototype._setValue=pne;class JPe extends mI{}JPe.prototype._setValue=mne;class ZPe extends mI{}ZPe.prototype._setValue=gne;class e3e extends mI{}e3e.prototype._setValue=yne;class Rne extends hf{constructor(t){super(t),this._typeIds=new $3(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Wi(n,t.type)];return this.type=new fP(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class fNt extends Rne{}class dNt extends Rne{constructor(t){super(t),this._offsets=new $3(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class t3e extends rj{constructor(t){super(t),this._values=new nj(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Gte(n))}_flushPending(t,n){}}t3e.prototype._flushPending=LPe.prototype._flushPending;class hNt extends vr{visitNull(){return lNt}visitBool(){return GDt}visitInt(){return R1}visitInt8(){return ZDt}visitInt16(){return eNt}visitInt32(){return tNt}visitInt64(){return nNt}visitUint8(){return rNt}visitUint16(){return iNt}visitUint32(){return sNt}visitUint64(){return oNt}visitFloat(){return sj}visitFloat16(){return XDt}visitFloat32(){return QDt}visitFloat64(){return JDt}visitUtf8(){return t3e}visitBinary(){return LPe}visitFixedSizeBinary(){return jPe}visitDate(){return ij}visitDateDay(){return $Pe}visitDateMillisecond(){return FPe}visitTimestamp(){return pI}visitTimestampSecond(){return GPe}visitTimestampMillisecond(){return YPe}visitTimestampMicrosecond(){return KPe}visitTimestampNanosecond(){return XPe}visitTime(){return mI}visitTimeSecond(){return QPe}visitTimeMillisecond(){return JPe}visitTimeMicrosecond(){return ZPe}visitTimeNanosecond(){return e3e}visitDecimal(){return BPe}visitList(){return aNt}visitStruct(){return cNt}visitUnion(){return Rne}visitDenseUnion(){return dNt}visitSparseUnion(){return fNt}visitDictionary(){return YDt}visitInterval(){return oj}visitIntervalDayTime(){return UPe}visitIntervalYearMonth(){return zPe}visitDuration(){return hI}visitDurationSecond(){return VPe}visitDurationMillisecond(){return HPe}visitDurationMicrosecond(){return qPe}visistDurationNanosecond(){return WPe}visitFixedSizeList(){return KDt}visitMap(){return uNt}}const pNt=new hNt;class $n extends vr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function rc(e,t){return t instanceof e.constructor}function F3(e,t){return e===t||rc(e,t)}function D1(e,t){return e===t||rc(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function aj(e,t){return e===t||rc(e,t)&&e.precision===t.precision}function mNt(e,t){return e===t||rc(e,t)&&e.byteWidth===t.byteWidth}function Dne(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function B3(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function j3(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function gNt(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&Gb.compareManyFields(e.children,t.children)}function yNt(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&Gb.compareManyFields(e.children,t.children)}function Nne(e,t){return e===t||rc(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Gb.compareManyFields(e.children,t.children)}function vNt(e,t){return e===t||rc(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Gb.visit(e.indices,t.indices)&&Gb.visit(e.dictionary,t.dictionary)}function Pne(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function U3(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function bNt(e,t){return e===t||rc(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Gb.compareManyFields(e.children,t.children)}function xNt(e,t){return e===t||rc(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Gb.compareManyFields(e.children,t.children)}$n.prototype.visitNull=F3;$n.prototype.visitBool=F3;$n.prototype.visitInt=D1;$n.prototype.visitInt8=D1;$n.prototype.visitInt16=D1;$n.prototype.visitInt32=D1;$n.prototype.visitInt64=D1;$n.prototype.visitUint8=D1;$n.prototype.visitUint16=D1;$n.prototype.visitUint32=D1;$n.prototype.visitUint64=D1;$n.prototype.visitFloat=aj;$n.prototype.visitFloat16=aj;$n.prototype.visitFloat32=aj;$n.prototype.visitFloat64=aj;$n.prototype.visitUtf8=F3;$n.prototype.visitBinary=F3;$n.prototype.visitFixedSizeBinary=mNt;$n.prototype.visitDate=Dne;$n.prototype.visitDateDay=Dne;$n.prototype.visitDateMillisecond=Dne;$n.prototype.visitTimestamp=B3;$n.prototype.visitTimestampSecond=B3;$n.prototype.visitTimestampMillisecond=B3;$n.prototype.visitTimestampMicrosecond=B3;$n.prototype.visitTimestampNanosecond=B3;$n.prototype.visitTime=j3;$n.prototype.visitTimeSecond=j3;$n.prototype.visitTimeMillisecond=j3;$n.prototype.visitTimeMicrosecond=j3;$n.prototype.visitTimeNanosecond=j3;$n.prototype.visitDecimal=F3;$n.prototype.visitList=gNt;$n.prototype.visitStruct=yNt;$n.prototype.visitUnion=Nne;$n.prototype.visitDenseUnion=Nne;$n.prototype.visitSparseUnion=Nne;$n.prototype.visitDictionary=vNt;$n.prototype.visitInterval=Pne;$n.prototype.visitIntervalDayTime=Pne;$n.prototype.visitIntervalYearMonth=Pne;$n.prototype.visitDuration=U3;$n.prototype.visitDurationSecond=U3;$n.prototype.visitDurationMillisecond=U3;$n.prototype.visitDurationMicrosecond=U3;$n.prototype.visitDurationNanosecond=U3;$n.prototype.visitFixedSizeList=bNt;$n.prototype.visitMap=xNt;const Gb=new $n;function jY(e,t){return Gb.compareSchemas(e,t)}function H5(e){const t=e.type,n=new(pNt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(H5(Object.assign(Object.assign({},l),{type:u})))}}return n}function yH(e,t){return _Nt(e,t.map(n=>n.data.concat()))}function _Nt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=wNt(n,o,c,t,i),o>0&&(r[s++]=Ju({type:new tl(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Gf(e,f))]}function wNt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ju({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var n3e;class zc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ri([]),this._offsets=[0],this;let i,s;t[0]instanceof Ri&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Gf)return[u];if(u instanceof zc)return u.batches;if(u instanceof Mi){if(u.type instanceof tl)return[new Gf(new Ri(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mi([u[h]])),f=new Ri(l.map((h,p)=>new Wi(String(h),c[p].type))),[,d]=yH(f,c);return d.length===0?[new Gf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ri([]),!(i instanceof Ri))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Gf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!jY(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??xPe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=bPe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?kne.visit(new mi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new zc(n,r.map(i=>new Gf(n,i)))}slice(t,n){const r=this.schema;[t,n]=gPe({length:this.numRows},t,n);const i=_Pe(this.data,this._offsets,t,n);return new zc(r,i.map(s=>new Gf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ju({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mi([Ju({type:new f1,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=yH(r,a)}return new zc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new zc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new zc(...yH(s,o))}}n3e=Symbol.toStringTag;zc[n3e]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=eC(Ine),e.get=eC(rf.getVisitFn(we.Struct)),e.set=wPe(fh.getVisitFn(we.Struct)),e.indexOf=EPe(L5.getVisitFn(we.Struct)),e.getByteLength=eC(X0.getVisitFn(we.Struct)),"Table"))(zc.prototype);var r3e;let Gf=class hD{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ri))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ju({nullCount:0,type:new tl(this.schema.fields),children:this.schema.fields.map(n=>Ju({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=j0e(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Wi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ri(r),a=Ju({type:new tl(r),length:s,children:i,nullCount:0});[this.schema,this.data]=j0e(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=i3e(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return rf.visit(this.data,t)}set(t,n){return fh.visit(this.data,t,n)}indexOf(t,n){return L5.visit(this.data,t,n)}getByteLength(t){return X0.visit(this.data,t)}[Symbol.iterator](){return kne.visit(new mi([this.data]))}toArray(){return[...this]}concat(...t){return new zc(this.schema,[this,...t])}slice(t,n){const[r]=new mi([this.data]).slice(t,n).data;return new hD(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mi([Ju({type:new f1,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ri(s,new Map(this.schema.metadata)),i=Ju({type:new tl(s),children:o})}return new hD(r,i)}select(t){const n=this.schema.select(t),r=new tl(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new hD(n,Ju({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ju({type:new tl(n.fields),length:this.numRows,children:r});return new hD(n,i)}};r3e=Symbol.toStringTag;Gf[r3e]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Gf.prototype);function j0e(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ju({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ju({type:new tl(i),length:n,children:s})]}function i3e(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])i3e(a.children,l==null?void 0:l.children,n);if(or.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class ENt extends Gf{constructor(t){const n=t.fields.map(i=>Ju({type:i.type})),r=Ju({type:new tl(t.fields),nullCount:0,children:n});super(t,r)}}var q5;(function(e){e[e.BUFFER=0]="BUFFER"})(q5||(q5={}));var W5;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(W5||(W5={}));class Bv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Bv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Xi),(n||new Bv).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):W5.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):q5.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,W5.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,q5.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Bv.startBodyCompression(t),Bv.addCodec(t,n),Bv.addMethod(t,r),Bv.endBodyCompression(t)}}let s3e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},o3e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},ly=class UY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new UY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Xi),(n||new UY).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new o3e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new s3e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Bv).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},g2=class zY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new zY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Xi),(n||new zY).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ly).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var G5;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(G5||(G5={}));let Cv=class Um{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Um).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Xi),(n||new Um).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):G5.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,WC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,G5.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Um.startMessage(t),Um.addVersion(t,n),Um.addHeaderType(t,r),Um.addHeader(t,i),Um.addBodyLength(t,s),Um.addCustomMetadata(t,o),Um.endMessage(t)}};class SNt extends vr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Rw.startNull(n),Rw.endNull(n)}visitInt(t,n){return Wf.startInt(n),Wf.addBitWidth(n,t.bitWidth),Wf.addIsSigned(n,t.isSigned),Wf.endInt(n)}visitFloat(t,n){return l0.startFloatingPoint(n),l0.addPrecision(n,t.precision),l0.endFloatingPoint(n)}visitBinary(t,n){return Aw.startBinary(n),Aw.endBinary(n)}visitBool(t,n){return Iw.startBool(n),Iw.endBool(n)}visitUtf8(t,n){return Nw.startUtf8(n),Nw.endUtf8(n)}visitDecimal(t,n){return Fc.startDecimal(n),Fc.addScale(n,t.scale),Fc.addPrecision(n,t.precision),Fc.addBitWidth(n,t.bitWidth),Fc.endDecimal(n)}visitDate(t,n){return d$.startDate(n),d$.addUnit(n,t.unit),d$.endDate(n)}visitTime(t,n){return dD.startTime(n),dD.addUnit(n,t.unit),dD.addBitWidth(n,t.bitWidth),dD.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Jd.startTimestamp(n),Jd.addUnit(n,t.unit),r!==void 0&&Jd.addTimezone(n,r),Jd.endTimestamp(n)}visitInterval(t,n){return c0.startInterval(n),c0.addUnit(n,t.unit),c0.endInterval(n)}visitDuration(t,n){return o0.startDuration(n),o0.addUnit(n,t.unit),o0.endDuration(n)}visitList(t,n){return kw.startList(n),kw.endList(n)}visitStruct(t,n){return Dw.startStruct_(n),Dw.endStruct_(n)}visitUnion(t,n){rw.startTypeIdsVector(n,t.typeIds.length);const r=rw.createTypeIdsVector(n,t.typeIds);return rw.startUnion(n),rw.addMode(n,t.mode),rw.addTypeIds(n,r),rw.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return wy.startDictionaryEncoding(n),wy.addId(n,BigInt(t.id)),wy.addIsOrdered(n,t.isOrdered),r!==void 0&&wy.addIndexType(n,r),wy.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return a0.startFixedSizeBinary(n),a0.addByteWidth(n,t.byteWidth),a0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return u0.startFixedSizeList(n),u0.addListSize(n,t.listSize),u0.endFixedSizeList(n)}visitMap(t,n){return h$.startMap(n),h$.addKeysSorted(n,t.keysSorted),h$.endMap(n)}}const vH=new SNt;function TNt(e,t=new Map){return new Ri(ANt(e,t),m$(e.metadata),t)}function a3e(e){return new md(e.count,u3e(e.columns),l3e(e.columns))}function CNt(e){return new Q0(a3e(e.data),e.id,e.isDelta)}function ANt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Wi.fromJSON(n,t))}function U0e(e,t){return(e.children||[]).filter(Boolean).map(n=>Wi.fromJSON(n,t))}function u3e(e){return(e||[]).reduce((t,n)=>[...t,new Yb(n.count,INt(n.VALIDITY)),...u3e(n.children)],[])}function l3e(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new y0(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new y0(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new y0(t.length,i.OFFSET.length)),i.DATA&&t.push(new y0(t.length,i.DATA.length)),t=l3e(i.children,t)}return t}function INt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function kNt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=V0e(e,U0e(e,t)),i=new Wi(e.name,o,e.nullable,m$(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?z0e(r):new zb,a=new Hb(t.get(n),r,n,s.isOrdered),i=new Wi(e.name,a,e.nullable,m$(e.metadata))):(r=(r=s.indexType)?z0e(r):new zb,t.set(n,o=V0e(e,U0e(e,t))),a=new Hb(o,r,n,s.isOrdered),i=new Wi(e.name,a,e.nullable,m$(e.metadata))),i||null}function m$(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function z0e(e){return new ec(e.isSigned,e.bitWidth)}function V0e(e,t){const n=e.type.name;switch(n){case"NONE":return new f1;case"null":return new f1;case"binary":return new lP;case"utf8":return new UC;case"bool":return new cP;case"list":return new HC((t||[])[0]);case"struct":return new tl(t||[]);case"struct_":return new tl(t||[])}switch(n){case"int":{const r=e.type;return new ec(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Vb(_u[r.precision])}case"decimal":{const r=e.type;return new D5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new zC(Y0[r.unit])}case"time":{const r=e.type;return new d1(Pn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new N5(Pn[r.unit],r.timezone)}case"interval":{const r=e.type;return new VC(K0[r.unit])}case"duration":{const r=e.type;return new P5(Pn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new fP(nf[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new O5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new qC(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new dP((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var RNt=PPe,DNt=F5;class f0{static fromJSON(t,n){const r=new f0(0,zl.V5,n);return r._createHeader=NNt(t,n),r}static decode(t){t=new DNt(Li(t));const n=Cv.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new f0(r,i,s);return o._createHeader=PNt(n,s),o}static encode(t){const n=new RNt;let r=-1;return t.isSchema()?r=Ri.encode(n,t.header()):t.isRecordBatch()?r=md.encode(n,t.header()):t.isDictionaryBatch()&&(r=Q0.encode(n,t.header())),Cv.startMessage(n),Cv.addVersion(n,zl.V5),Cv.addHeader(n,r),Cv.addHeaderType(n,t.headerType),Cv.addBodyLength(n,BigInt(t.bodyLength)),Cv.finishMessageBuffer(n,Cv.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ri)return new f0(0,zl.V5,Oa.Schema,t);if(t instanceof md)return new f0(n,zl.V5,Oa.RecordBatch,t);if(t instanceof Q0)return new f0(n,zl.V5,Oa.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Oa.Schema}isRecordBatch(){return this.headerType===Oa.RecordBatch}isDictionaryBatch(){return this.headerType===Oa.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Hp(t)}}class md{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Hp(t)}}class Q0{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Hp(n)}}class y0{constructor(t,n){this.offset=Hp(t),this.length=Hp(n)}}class Yb{constructor(t,n){this.length=Hp(t),this.nullCount=Hp(n)}}function NNt(e,t){return()=>{switch(t){case Oa.Schema:return Ri.fromJSON(e);case Oa.RecordBatch:return md.fromJSON(e);case Oa.DictionaryBatch:return Q0.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Oa[t]}, type: ${t} }`)}}function PNt(e,t){return()=>{switch(t){case Oa.Schema:return Ri.decode(e.header(new Gm),new Map,e.version());case Oa.RecordBatch:return md.decode(e.header(new ly),e.version());case Oa.DictionaryBatch:return Q0.decode(e.header(new g2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Oa[t]}, type: ${t} }`)}}Wi.encode=HNt;Wi.decode=zNt;Wi.fromJSON=kNt;Ri.encode=VNt;Ri.decode=ONt;Ri.fromJSON=TNt;md.encode=qNt;md.decode=MNt;md.fromJSON=a3e;Q0.encode=WNt;Q0.decode=LNt;Q0.fromJSON=CNt;Yb.encode=GNt;Yb.decode=FNt;y0.encode=YNt;y0.decode=$Nt;function ONt(e,t=new Map,n=zl.V5){const r=UNt(e,t);return new Ri(r,g$(e),t,n)}function MNt(e,t=zl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new md(e.length(),BNt(e),jNt(e,t))}function LNt(e,t=zl.V5){return new Q0(md.decode(e.data(),t),e.id(),e.isDelta())}function $Nt(e){return new y0(e.offset(),e.length())}function FNt(e){return new Yb(e.length(),e.nullCount())}function BNt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Yb.decode(n));return t}function jNt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<zl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=y0.decode(r));return n}function UNt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Wi.decode(r,t));return n}function H0e(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Wi.decode(r,t));return n}function zNt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=W0e(e,H0e(e,t)),r=new Wi(e.name(),i,e.nullable(),g$(e))):t.has(n=Hp(a.id()))?(s=(s=a.indexType())?q0e(s):new zb,o=new Hb(t.get(n),s,n,a.isOrdered()),r=new Wi(e.name(),o,e.nullable(),g$(e))):(s=(s=a.indexType())?q0e(s):new zb,t.set(n,i=W0e(e,H0e(e,t))),o=new Hb(i,s,n,a.isOrdered()),r=new Wi(e.name(),o,e.nullable(),g$(e))),r||null}function g$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function q0e(e){return new ec(e.isSigned(),e.bitWidth())}function W0e(e,t){const n=e.typeType();switch(n){case Ds.NONE:return new f1;case Ds.Null:return new f1;case Ds.Binary:return new lP;case Ds.Utf8:return new UC;case Ds.Bool:return new cP;case Ds.List:return new HC((t||[])[0]);case Ds.Struct_:return new tl(t||[])}switch(n){case Ds.Int:{const r=e.type(new Wf);return new ec(r.isSigned(),r.bitWidth())}case Ds.FloatingPoint:{const r=e.type(new l0);return new Vb(r.precision())}case Ds.Decimal:{const r=e.type(new Fc);return new D5(r.scale(),r.precision(),r.bitWidth())}case Ds.Date:{const r=e.type(new d$);return new zC(r.unit())}case Ds.Time:{const r=e.type(new dD);return new d1(r.unit(),r.bitWidth())}case Ds.Timestamp:{const r=e.type(new Jd);return new N5(r.unit(),r.timezone())}case Ds.Interval:{const r=e.type(new c0);return new VC(r.unit())}case Ds.Duration:{const r=e.type(new o0);return new P5(r.unit())}case Ds.Union:{const r=e.type(new rw);return new fP(r.mode(),r.typeIdsArray()||[],t||[])}case Ds.FixedSizeBinary:{const r=e.type(new a0);return new O5(r.byteWidth())}case Ds.FixedSizeList:{const r=e.type(new u0);return new qC(r.listSize(),(t||[])[0])}case Ds.Map:{const r=e.type(new h$);return new dP((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ds[n]}" (${n})`)}function VNt(e,t){const n=t.fields.map(s=>Wi.encode(e,s));Gm.startFieldsVector(e,n.length);const r=Gm.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Gm.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return sa.startKeyValue(e),sa.addKey(e,a),sa.addValue(e,u),sa.endKeyValue(e)})):-1;return Gm.startSchema(e),Gm.addFields(e,r),Gm.addEndianness(e,KNt?GC.Little:GC.Big),i!==-1&&Gm.addCustomMetadata(e,i),Gm.endSchema(e)}function HNt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;or.isDictionary(s)?(o=s.dictionary.typeId,i=vH.visit(s,e),r=vH.visit(s.dictionary,e)):r=vH.visit(s,e);const a=(s.children||[]).map(c=>Wi.encode(e,c)),u=Gd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Gd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return sa.startKeyValue(e),sa.addKey(e,d),sa.addValue(e,h),sa.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Gd.startField(e),Gd.addType(e,r),Gd.addTypeType(e,o),Gd.addChildren(e,u),Gd.addNullable(e,!!t.nullable),n!==-1&&Gd.addName(e,n),i!==-1&&Gd.addDictionary(e,i),l!==-1&&Gd.addCustomMetadata(e,l),Gd.endField(e)}function qNt(e,t){const n=t.nodes||[],r=t.buffers||[];ly.startNodesVector(e,n.length);for(const o of n.slice().reverse())Yb.encode(e,o);const i=e.endVector();ly.startBuffersVector(e,r.length);for(const o of r.slice().reverse())y0.encode(e,o);const s=e.endVector();return ly.startRecordBatch(e),ly.addLength(e,BigInt(t.length)),ly.addNodes(e,i),ly.addBuffers(e,s),ly.endRecordBatch(e)}function WNt(e,t){const n=md.encode(e,t.data);return g2.startDictionaryBatch(e),g2.addId(e,BigInt(t.id)),g2.addIsDelta(e,t.isDelta),g2.addData(e,n),g2.endDictionaryBatch(e)}function GNt(e,t){return o3e.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function YNt(e,t){return s3e.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const KNt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),VY="ARROW1",One=new Uint8Array(VY.length);for(let e=0;e<VY.length;e+=1)One[e]=VY.codePointAt(e);One.length;class Ro extends vr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Gf?s.data.children:s.data),r=new Ro;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mi)return this.visitMany(t.data),this;const{type:n}=t;if(!or.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(or.isUnion(n))this.nodes.push(new Yb(r,0));else{const{nullCount:i}=t;or.isNull(n)||Lp.call(this,i<=0?new Uint8Array(0):M5(t.offset,r,t.nullBitmap)),this.nodes.push(new Yb(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Lp(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new y0(this._byteLength,t)),this._byteLength+=t,this}function XNt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Lp.call(this,i),n.mode===nf.Sparse)return HY.call(this,e);if(n.mode===nf.Dense){if(e.offset<=0)return Lp.call(this,s),HY.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Lp.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function QNt(e){let t;return e.nullCount>=e.length?Lp.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Lp.call(this,M5(e.offset,e.length,t)):Lp.call(this,vPe(e.values))}function N1(e){return Lp.call(this,e.values.subarray(0,e.length*e.stride))}function c3e(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Lp.call(this,dNe(-i,t+1,r)),Lp.call(this,n.subarray(i,i+o)),this}function Mne(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Lp.call(this,dNe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function HY(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ro.prototype.visitBool=QNt;Ro.prototype.visitInt=N1;Ro.prototype.visitFloat=N1;Ro.prototype.visitUtf8=c3e;Ro.prototype.visitBinary=c3e;Ro.prototype.visitFixedSizeBinary=N1;Ro.prototype.visitDate=N1;Ro.prototype.visitTimestamp=N1;Ro.prototype.visitTime=N1;Ro.prototype.visitDecimal=N1;Ro.prototype.visitList=Mne;Ro.prototype.visitStruct=HY;Ro.prototype.visitUnion=XNt;Ro.prototype.visitInterval=N1;Ro.prototype.visitDuration=N1;Ro.prototype.visitFixedSizeList=Mne;Ro.prototype.visitMap=Mne;class f3e extends MPe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new gH,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Rx(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return J9(t)?t.then(n=>this.writeAll(n)):Z9(t)?Bne(this,t):Fne(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof gH?this._sink=t:(this._sink=new gH,t&&rRt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&iRt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!jY(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof zc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Gf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!jY(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Gf?t instanceof ENt||this._writeRecordBatch(t):t instanceof zc?this.writeAll(t.batches):Yte(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=f0.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Oa.RecordBatch?this._recordBatchBlocks.push(new Wb(a,t.bodyLength,this._position)):t.headerType===Oa.DictionaryBatch&&this._dictionaryBlocks.push(new Wb(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Li(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(f0.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(One)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ro.assemble(t),o=new md(t.numRows,r,i),a=f0.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ro.assemble(new mi([t])),u=new md(t.length,s,o),l=new Q0(u,n,r),c=f0.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Lne extends f3e{static writeAll(t,n){const r=new Lne(n);return J9(t)?t.then(i=>r.writeAll(i)):Z9(t)?Bne(r,t):Fne(r,t)}}class $ne extends f3e{static writeAll(t){const n=new $ne;return J9(t)?t.then(r=>n.writeAll(r)):Z9(t)?Bne(n,t):Fne(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=BY.encode(new BY(t,zl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Fne(e,t){let n=t;t instanceof zc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Bne(e,t){var n,r,i,s,o,a,u;return gy(this,void 0,void 0,function*(){try{for(n=!0,r=ND(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function JNt(e,t="stream"){return(t==="stream"?Lne:$ne).writeAll(e).toUint8Array(!0)}function jne(e,t=1){return(e*t+63&-64||64)/t}function Kb(e,t,n=e.BYTES_PER_ELEMENT){return new e(jne(t,n))}function Une(e){return e instanceof Mi?e:new Mi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ZNt(e){return new mi([Une(e)])}const zne=new TextEncoder;function ePt(e,t,n){const r=zne.encode(n);return e.set(r,t),r.length}function tPt(e,t,n){return zne.encodeInto(n,e.subarray(t)).written}const nPt=zne.encodeInto?tPt:ePt;function G0e(e,t){const n=Kb(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function rPt(e,t){const n=Kb(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function iPt(e,t){const n=Kb(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function sPt(e,t){const n=Kb(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function oPt(e){const t=H5({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function aPt(e,t,n){const r=Kb(Int32Array,t+1),i=Kb(Uint8Array,3*n);let s=0;return{set(o,a){s+=nPt(i,s,o),r[a+1]=s},data:()=>{const o=jne(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function uPt(e,t){const n=[],r=Kb(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:lPt(e.dictionary,n,o)})}}function lPt(e,t,n){const r=aPt(e,t.length,n);return t.forEach(r.set),ZNt(r.data())}function cPt(e,t){const n=Kb(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function fPt(e,t,n=!0){let r;switch(e.typeId){case we.Int:r=e.bitWidth<64?G0e:null;break;case we.Float:r=e.precision>0?G0e:null;break;case we.Dictionary:r=e.dictionary.typeId===we.Utf8&&e.indices.typeId===we.Int&&e.indices.bitWidth<64?uPt:null;break;case we.Bool:r=rPt;break;case we.Date:r=e.unit?sPt:iPt;break}return r==null?oPt(e):n?cPt(r(e,t),t):r(e,t)}function dPt(e,t){const n=e.length,r=jne(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Une({type:t,length:n,buffers:[null,i]})}function d3e(e,t,n,r,i=!0){const s=fPt(r,e,i);return t(n,s.set),Une(s.data())}function Vne(e){if(e instanceof or||e==null)return e;switch(e){case we.Binary:return new lP;case we.Bool:return new cP;case we.DateDay:return new bRt;case we.DateMillisecond:case we.Date:return new xRt;case we.Dictionary:return new Hb(new UC,new zb);case we.Float16:return new ONe;case we.Float32:return new ine;case we.Float64:case we.Float:return new sne;case we.Int8:return new Qte;case we.Int16:return new Jte;case we.Int32:case we.Int:return new zb;case we.Int64:return new Zte;case we.IntervalDayTime:return new TRt;case we.Interval:case we.IntervalYearMonth:return new CRt;case we.Null:return new f1;case we.TimeMicrosecond:return new ERt;case we.TimeMillisecond:case we.Time:return new wRt;case we.TimeNanosecond:return new SRt;case we.TimeSecond:return new _Rt;case we.Uint8:return new ene;case we.Uint16:return new tne;case we.Uint32:return new nne;case we.Uint64:return new rne;case we.Utf8:return new UC;default:gr(`Unsupported type code: ${W0(e)}. Use a data type constructor instead?`)}}function hPt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function h3e(e,t){const n=qY();return e(t,n.add),n}function qY(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(c1(t))++e.dates,hPt(t)&&++e.utcdays;else if(Cw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=qY());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=qY())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Vne(pPt(e))}};return e}function pPt(e){const t=e.count-e.nulls;if(t===0)return we.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?we.Float64:n<128?we.Int8:n<32768?we.Int16:we.Int32:n>=2**32?we.Float64:n<256?we.Uint8:n<65536?we.Uint16:we.Uint32}else{if(e.nums===t)return we.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?we.Int64:gr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?we.Uint64:gr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return we.Bool;if(e.utcdays===t)return we.DateDay;if(e.dates===t)return we.DateMillisecond;if(e.arrays===t){const n=Wi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new qC(e.minlen,n):new HC(n)}else if(e.structs===t){const n=e.struct_prof;return new tl(Object.keys(n).map(r=>Wi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return we.Dictionary;gr("Type inference failure")}}}}function mPt(e,t,n,r,i,s=!0){if(i=Vne(i),!i){const o=h3e(r,t);s=o.nulls>0,i=o.type()}return d3e(n,r,t,i,s)}function gPt(e,t,n,r,i,s=!0){i=Vne(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=yPt(o);if(u&&a&&Y0e(u.type,i))return u;const l=o.data;if(M3(l)){const c=vPt(l);if(a&&c&&Y0e(c,i))return dPt(l,c);i=i||c,s=!1}if(!i){const c=h3e(r,o);s=c.nulls>0,i=c.type()}return d3e(n,r,o,i,s)}function yPt(e){return e instanceof mi?e:e.vector instanceof mi?e.vector:null}function vPt(e){const n={Float32Array:ine,Float64Array:sne,Int8Array:Qte,Int16Array:Jte,Int32Array:zb,Uint8Array:ene,Uint16Array:tne,Uint32Array:nne,BigInt64Array:Zte,BigUint64Array:rne}[e.constructor.name];return n?new n:null}function Y0e(e,t){return!e||!t?!0:e.compareTo(t)}function bPt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function xPt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Cw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const _Pt=()=>gr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function wPt(){try{return zc}catch{_Pt()}}function p3e(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=EPt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&gr("Column length mismatch"),a[l]=c});const u=wPt();return new u(a)}function EPt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Es(n)?n(e):pi(n)?n:null;if(pi(e))return{dataFrom:mPt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:bPt(e,r,i)};if(SPt(e))return{dataFrom:gPt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:xPt(e,r,i)};gr("Unsupported input data type")}function SPt(e){return e&&Es(e.reify)}function TPt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return JNt(p3e(e,r),n)}function CPt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function APt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&c1(u))++i,CPt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function uj(e,t){return Es(t)?t(e):t||e.columnNames()}function m3e(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=APt(IPt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function IPt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Hne(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function kPt(e,t={}){const n=uj(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":c1(l)?X9(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Hne(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function g3e(e,t={}){if(Es(t))return t(e)+"";const n=typeof e;if(n==="object"){if(c1(e))return t.utc?X9(e):FDe(e);{const r=JSON.stringify(e,(s,o)=>M3(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function lj(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function RPt(e,t={}){const n=uj(e,t.columns),{align:r,format:i}=m3e(e,n,t),s=DPt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(g3e(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,v)=>{const b=v?a(r[g]):"",w=s[m]&&s[m](g,d,f)||"",E=(b?`text-align: ${b};`+(w?" ":""):"")+w;return`<${m}${E?` style="${E}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Hne(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function DPt(e){return lj(e.style,t=>Es(t)?t:()=>t)}function NPt(e,t=!0,n=!1){return e===void 0||e?t:n}const PPt=e=>c1(e)?X9(e,!0):e;function OPt(e,t={}){const n=NPt(t.schema),r=t.format||{},i=uj(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||PPt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function MPt(e,t={}){const n=uj(e,t.columns),{align:r,format:i}=m3e(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Hne(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(g3e(u,i[l]))+"|"}}),a+`
`}function y3e(e,t){for(const[n,r]of Q9(t))e.set(n,r);return e}function LPt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function h1(e,t,n=new Map){return t=Zl(t)?e.columnName(t):t,Iu(t)?n.set(t,t):pi(t)?t.forEach(r=>h1(e,r,n)):Es(t)?h1(e,t(e),n):hl(t)?y3e(n,t):gr(`Invalid column selection: ${W0(t)}`),n}function cj(e,t){return e.toObject=t,e}function v3e(e){return pi(e)?e.map(v3e):e&&e.toObject?e.toObject():e}function YC(){return cj(e=>e.columnNames(),()=>({all:[]}))}function b3e(...e){return e=e.flat(),cj(t=>{const n=h1(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:v3e(e)}))}function $Pt(e,t){return cj(n=>{let r=Zl(e)?e:n.columnIndex(e),i=Zl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function FPt(e){return Iu(e)&&(e=RegExp(LPt(e))),cj(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function BPt(e){return M3(e.data)?e.data.constructor:Array}class Ey extends nkt{static from(t,n){return new Ey(skt(t,n),n)}static new(t,n){if(t instanceof Ey)return t;const r={},i=[];for(const[s,o]of Q9(t))r[s]=o,i.push(s);return new Ey(r,n||i)}constructor(t,n,r,i,s,o){lj(t,ikt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Ey(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Okt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=xd(r).groupby(r.groups());return t.forEach(s=>{s=Ey.new(s),s.numRows()!==n&&gr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):gr(`Unrecognized column: ${t}`)}object(t=0){return K0e(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=h1(this,t.columns||YC()),o=lNe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Lkt(this,u,a,n)}return a}*[Symbol.iterator](){const t=K0e(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(BPt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Mkt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return p3e(this,t)}toArrowBuffer(t){return TPt(this,t)}toCSV(t){return kPt(this,t)}toHTML(t){return RPt(this,t)}toJSON(t){return OPt(this,t)}toMarkdown(t){return MPt(this,t)}}function K0e(e){let t=e._builder;if(!t){const n=lNe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class jPt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ii(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=UPt[e.type];s&&s(e,t,n)}const N6=(e,t,n)=>{ii(e.argument,t,n,e)},bH=(e,t,n)=>{ii(e.left,t,n,e),ii(e.right,t,n,e)},X0e=(e,t,n)=>{ii(e.test,t,n,e),ii(e.consequent,t,n,e),e.alternate&&ii(e.alternate,t,n,e)},xH=(e,t,n)=>{Ym(e.params,t,n,e),ii(e.body,t,n,e)},Q0e=(e,t,n)=>{ii(e.callee,t,n,e),Ym(e.arguments,t,n,e)},Ym=(e,t,n,r)=>{e.forEach(i=>ii(i,t,n,r))},UPt={TemplateLiteral:(e,t,n)=>{Ym(e.expressions,t,n,e),Ym(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ii(e.object,t,n,e),ii(e.property,t,n,e)},CallExpression:Q0e,NewExpression:Q0e,ArrayExpression:(e,t,n)=>{Ym(e.elements,t,n,e)},AssignmentExpression:bH,AwaitExpression:N6,BinaryExpression:bH,LogicalExpression:bH,UnaryExpression:N6,UpdateExpression:N6,ConditionalExpression:X0e,ObjectExpression:(e,t,n)=>{Ym(e.properties,t,n,e)},Property:(e,t,n)=>{ii(e.key,t,n,e),ii(e.value,t,n,e)},ArrowFunctionExpression:xH,FunctionExpression:xH,FunctionDeclaration:xH,VariableDeclaration:(e,t,n)=>{Ym(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ii(e.id,t,n,e),ii(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ii(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Ym(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ii(e.expression,t,n,e)},IfStatement:X0e,ForStatement:(e,t,n)=>{ii(e.init,t,n,e),ii(e.test,t,n,e),ii(e.update,t,n,e),ii(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ii(e.test,t,n,e),ii(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ii(e.body,t,n,e),ii(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ii(e.discriminant,t,n,e),Ym(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ii(e.test,t,n,e),Ym(e.consequent,t,n,e)},ReturnStatement:N6,Program:(e,t,n)=>{ii(e.body[0],t,n,e)}};function x3e(e){delete e.start,delete e.end,delete e.optional}function J0e(e){x3e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function zPt(e){return ii(e,null,{Column:J0e,Constant:J0e,Default:x3e}),e}function aa(e,t){return t&&t.type===e}function VPt(e){return aa(Bkt,e)||aa(Fkt,e)}function HPt(e){return Es(e)?e:()=>e}const qPt="Escaped functions are not valid as rollup or pivot values.";function WPt(e,t,n){e.aggronly&&gr(qPt);const r="(row,data)=>fn("+uNe(e.table.columnNames())+",$)";return{escape:Wte.escape(r,HPt(t.expr),n)}}var GPt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],_3e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],YPt="-----------------------------------------------------------------------------------------------------------------------------------------------------",w3e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",_H={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},wH="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",KPt={5:wH,"5module":wH+" export import",6:wH+" const class extends export import super"},XPt=/^in(stanceof)?$/,QPt=new RegExp("["+w3e+"]"),JPt=new RegExp("["+w3e+YPt+"]");function WY(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function p1(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&QPt.test(String.fromCharCode(e)):t===!1?!1:WY(e,_3e)}function KC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&JPt.test(String.fromCharCode(e)):t===!1?!1:WY(e,_3e)||WY(e,GPt)}var li=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function zd(e,t){return new li(e,{beforeExpr:!0,binop:t})}var Vd={beforeExpr:!0},Nc={startsExpr:!0},qne={};function zr(e,t){return t===void 0&&(t={}),t.keyword=e,qne[e]=new li(e,t)}var le={num:new li("num",Nc),regexp:new li("regexp",Nc),string:new li("string",Nc),name:new li("name",Nc),privateId:new li("privateId",Nc),eof:new li("eof"),bracketL:new li("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new li("]"),braceL:new li("{",{beforeExpr:!0,startsExpr:!0}),braceR:new li("}"),parenL:new li("(",{beforeExpr:!0,startsExpr:!0}),parenR:new li(")"),comma:new li(",",Vd),semi:new li(";",Vd),colon:new li(":",Vd),dot:new li("."),question:new li("?",Vd),questionDot:new li("?."),arrow:new li("=>",Vd),template:new li("template"),invalidTemplate:new li("invalidTemplate"),ellipsis:new li("...",Vd),backQuote:new li("`",Nc),dollarBraceL:new li("${",{beforeExpr:!0,startsExpr:!0}),eq:new li("=",{beforeExpr:!0,isAssign:!0}),assign:new li("_=",{beforeExpr:!0,isAssign:!0}),incDec:new li("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new li("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:zd("||",1),logicalAND:zd("&&",2),bitwiseOR:zd("|",3),bitwiseXOR:zd("^",4),bitwiseAND:zd("&",5),equality:zd("==/!=/===/!==",6),relational:zd("</>/<=/>=",7),bitShift:zd("<</>>/>>>",8),plusMin:new li("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:zd("%",10),star:zd("*",10),slash:zd("/",10),starstar:new li("**",{beforeExpr:!0}),coalesce:zd("??",1),_break:zr("break"),_case:zr("case",Vd),_catch:zr("catch"),_continue:zr("continue"),_debugger:zr("debugger"),_default:zr("default",Vd),_do:zr("do",{isLoop:!0,beforeExpr:!0}),_else:zr("else",Vd),_finally:zr("finally"),_for:zr("for",{isLoop:!0}),_function:zr("function",Nc),_if:zr("if"),_return:zr("return",Vd),_switch:zr("switch"),_throw:zr("throw",Vd),_try:zr("try"),_var:zr("var"),_const:zr("const"),_while:zr("while",{isLoop:!0}),_with:zr("with"),_new:zr("new",{beforeExpr:!0,startsExpr:!0}),_this:zr("this",Nc),_super:zr("super",Nc),_class:zr("class",Nc),_extends:zr("extends",Vd),_export:zr("export"),_import:zr("import",Nc),_null:zr("null",Nc),_true:zr("true",Nc),_false:zr("false",Nc),_in:zr("in",{beforeExpr:!0,binop:7}),_instanceof:zr("instanceof",{beforeExpr:!0,binop:7}),_typeof:zr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:zr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:zr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ih=/\r\n?|\n|\u2028|\u2029/,ZPt=new RegExp(Ih.source,"g");function gI(e){return e===10||e===13||e===8232||e===8233}function E3e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(gI(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var S3e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Zd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,T3e=Object.prototype,e3t=T3e.hasOwnProperty,t3t=T3e.toString,z3=Object.hasOwn||function(e,t){return e3t.call(e,t)},Z0e=Array.isArray||function(e){return t3t.call(e)==="[object Array]"},ege=Object.create(null);function tb(e){return ege[e]||(ege[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Xb(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var n3t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,hP=function(t,n){this.line=t,this.column=n};hP.prototype.offset=function(t){return new hP(this.line,this.column+t)};var fj=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function C3e(e,t){for(var n=1,r=0;;){var i=E3e(e,r,t);if(i<0)return new hP(n,t-r);++n,r=i}}var GY={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},tge=!1;function r3t(e){var t={};for(var n in GY)t[n]=e&&z3(e,n)?e[n]:GY[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!tge&&typeof console=="object"&&console.warn&&(tge=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Z0e(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Z0e(t.onComment)&&(t.onComment=i3t(t,t.onComment)),t}function i3t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new fj(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var pP=1,yI=2,Wne=4,A3e=8,I3e=16,k3e=32,Gne=64,R3e=128,V3=256,Yne=pP|yI|V3;function Kne(e,t){return yI|(e?Wne:0)|(t?A3e:0)}var Y5=0,Xne=1,P1=2,D3e=3,N3e=4,P3e=5,ga=function(t,n,r){this.options=t=r3t(t),this.sourceFile=t.sourceFile,this.keywords=tb(KPt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=_H[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=tb(i);var s=(i?i+" ":"")+_H.strict;this.reservedWordsStrict=tb(s),this.reservedWordsStrictBind=tb(s+" "+_H.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ih).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=le.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(pP),this.regexpState=null,this.privateNameStack=[]},cg={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ga.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};cg.inFunction.get=function(){return(this.currentVarScope().flags&yI)>0};cg.inGenerator.get=function(){return(this.currentVarScope().flags&A3e)>0&&!this.currentVarScope().inClassFieldInit};cg.inAsync.get=function(){return(this.currentVarScope().flags&Wne)>0&&!this.currentVarScope().inClassFieldInit};cg.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&V3)return!1;if(t.flags&yI)return(t.flags&Wne)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};cg.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Gne)>0||n||this.options.allowSuperOutsideMethod};cg.allowDirectSuper.get=function(){return(this.currentThisScope().flags&R3e)>0};cg.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};cg.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(yI|V3))>0||n};cg.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&V3)>0};ga.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ga.parse=function(t,n){return new this(n,t).parse()};ga.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ga.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ga.prototype,cg);var ic=ga.prototype,s3t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ic.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Zd.lastIndex=e,e+=Zd.exec(this.input)[0].length;var t=s3t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Zd.lastIndex=e+t[0].length;var n=Zd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Ih.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Zd.lastIndex=e,e+=Zd.exec(this.input)[0].length,this.input[e]===";"&&e++}};ic.eat=function(e){return this.type===e?(this.next(),!0):!1};ic.isContextual=function(e){return this.type===le.name&&this.value===e&&!this.containsEsc};ic.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ic.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ic.canInsertSemicolon=function(){return this.type===le.eof||this.type===le.braceR||Ih.test(this.input.slice(this.lastTokEnd,this.start))};ic.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ic.semicolon=function(){!this.eat(le.semi)&&!this.insertSemicolon()&&this.unexpected()};ic.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ic.expect=function(e){this.eat(e)||this.unexpected()};ic.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var dj=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ic.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ic.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ic.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ic.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var yn=ga.prototype;yn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==le.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Qne={kind:"loop"},o3t={kind:"switch"};yn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Zd.lastIndex=this.pos;var t=Zd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(p1(r,!0)){for(var i=n+1;KC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!XPt.test(s))return!0}return!1};yn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Zd.lastIndex=this.pos;var e=Zd.exec(this.input),t=this.pos+e[0].length,n;return!Ih.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(KC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};yn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=le._var,s="let"),r){case le._break:case le._continue:return this.parseBreakContinueStatement(i,r.keyword);case le._debugger:return this.parseDebuggerStatement(i);case le._do:return this.parseDoStatement(i);case le._for:return this.parseForStatement(i);case le._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case le._class:return e&&this.unexpected(),this.parseClass(i,!0);case le._if:return this.parseIfStatement(i);case le._return:return this.parseReturnStatement(i);case le._switch:return this.parseSwitchStatement(i);case le._throw:return this.parseThrowStatement(i);case le._try:return this.parseTryStatement(i);case le._const:case le._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case le._while:return this.parseWhileStatement(i);case le._with:return this.parseWithStatement(i);case le.braceL:return this.parseBlock(!0,i);case le.semi:return this.parseEmptyStatement(i);case le._export:case le._import:if(this.options.ecmaVersion>10&&r===le._import){Zd.lastIndex=this.pos;var o=Zd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===le._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===le.name&&c.type==="Identifier"&&this.eat(le.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};yn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(le.semi)||this.insertSemicolon()?e.label=null:this.type!==le.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};yn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};yn.parseDoStatement=function(e){return this.next(),this.labels.push(Qne),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(le._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(le.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};yn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Qne),this.enterScope(0),this.expect(le.parenL),this.type===le.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===le._var||this.type===le._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new dj,u=this.parseExpression(t>-1?"await":!0,a);return this.type===le._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};yn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,iN|(n?0:YY),!1,t)};yn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(le._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};yn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(le.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};yn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(le.braceL),this.labels.push(o3t),this.enterScope(0);for(var t,n=!1;this.type!==le.braceR;)if(this.type===le._case||this.type===le._default){var r=this.type===le._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(le.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};yn.parseThrowStatement=function(e){return this.next(),Ih.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var a3t=[];yn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?k3e:0),this.checkLValPattern(e,t?N3e:P1),this.expect(le.parenR),e};yn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===le._catch){var t=this.startNode();this.next(),this.eat(le.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(le._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};yn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};yn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Qne),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};yn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};yn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};yn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===le._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};yn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};yn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(le.braceL),e&&this.enterScope(0);this.type!==le.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};yn.parseFor=function(e,t){return e.init=t,this.expect(le.semi),e.test=this.type===le.semi?null:this.parseExpression(),this.expect(le.semi),e.update=this.type===le.parenR?null:this.parseExpression(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};yn.parseForIn=function(e,t){var n=this.type===le._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};yn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(le.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===le._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(le.comma))break}return e};yn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Xne:P1,!1)};var iN=1,YY=2,O3e=4;yn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===le.star&&t&YY&&this.unexpected(),e.generator=this.eat(le.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&iN&&(e.id=t&O3e&&this.type!==le.name?null:this.parseIdent(),e.id&&!(t&YY)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Xne:P1:D3e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kne(e.async,e.generator)),t&iN||(e.id=this.type===le.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&iN?"FunctionDeclaration":"FunctionExpression")};yn.parseFunctionParams=function(e){this.expect(le.parenL),e.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};yn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(le.braceL);this.type!==le.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&u3t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};yn.parseClassElement=function(e){if(this.eat(le.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(le.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===le.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===le.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(le.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===le.parenL||o!=="method"||i||s){var l=!n.static&&K5(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};yn.isClassElementNameStart=function(){return this.type===le.name||this.type===le.privateId||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword};yn.parseClassElementName=function(e){this.type===le.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};yn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&K5(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};yn.parseClassField=function(e){if(K5(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&K5(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(le.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};yn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(V3|Gne);this.type!==le.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};yn.parseClassId=function(e,t){this.type===le.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,P1,!1)):(t===!0&&this.unexpected(),e.id=null)};yn.parseClassSuper=function(e){e.superClass=this.eat(le._extends)?this.parseExprSubscripts(null,!1):null};yn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};yn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];z3(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function u3t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function K5(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}yn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};yn.parseExport=function(e,t){if(this.next(),this.eat(le.star))return this.parseExportAllDeclaration(e,t);if(this.eat(le._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};yn.parseExportDeclaration=function(e){return this.parseStatement(null)};yn.parseExportDefaultDeclaration=function(){var e;if(this.type===le._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,iN|O3e,!1,e)}else if(this.type===le._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};yn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),z3(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};yn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};yn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};yn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};yn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};yn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(le.braceL);!this.eat(le.braceR);){if(n)n=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;t.push(this.parseExportSpecifier(e))}return t};yn.parseImport=function(e){return this.next(),this.type===le.string?(e.specifiers=a3t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===le.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};yn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,P1),this.finishNode(e,"ImportSpecifier")};yn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,P1),this.finishNode(e,"ImportDefaultSpecifier")};yn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,P1),this.finishNode(e,"ImportNamespaceSpecifier")};yn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===le.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(le.comma)))return e;if(this.type===le.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(le.braceL);!this.eat(le.braceR);){if(t)t=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;e.push(this.parseImportSpecifier())}return e};yn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===le.string){var e=this.parseLiteral(this.value);return n3t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};yn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};yn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var kh=ga.prototype;kh.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};kh.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};kh.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};kh.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==le.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};kh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case le.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(le.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case le.braceL:return this.parseObj(!0)}return this.parseIdent()};kh.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(le.comma),t&&this.type===le.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===le.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};kh.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};kh.parseBindingListItem=function(e){return e};kh.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(le.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};kh.checkLValSimple=function(e,t,n){t===void 0&&(t=Y5);var r=t!==Y5;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===P1&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(z3(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==P3e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};kh.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Y5),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};kh.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Y5),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var sp=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Os={b_stat:new sp("{",!1),b_expr:new sp("{",!0),b_tmpl:new sp("${",!1),p_stat:new sp("(",!1),p_expr:new sp("(",!0),q_tmpl:new sp("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new sp("function",!1),f_expr:new sp("function",!0),f_expr_gen:new sp("function",!0,!1,null,!0),f_gen:new sp("function",!1,!1,null,!0)},vI=ga.prototype;vI.initialContext=function(){return[Os.b_stat]};vI.curContext=function(){return this.context[this.context.length-1]};vI.braceIsBlock=function(e){var t=this.curContext();return t===Os.f_expr||t===Os.f_stat?!0:e===le.colon&&(t===Os.b_stat||t===Os.b_expr)?!t.isExpr:e===le._return||e===le.name&&this.exprAllowed?Ih.test(this.input.slice(this.lastTokEnd,this.start)):e===le._else||e===le.semi||e===le.eof||e===le.parenR||e===le.arrow?!0:e===le.braceL?t===Os.b_stat:e===le._var||e===le._const||e===le.name?!1:!this.exprAllowed};vI.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};vI.updateContext=function(e){var t,n=this.type;n.keyword&&e===le.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};vI.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};le.parenR.updateContext=le.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Os.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};le.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Os.b_stat:Os.b_expr),this.exprAllowed=!0};le.dollarBraceL.updateContext=function(){this.context.push(Os.b_tmpl),this.exprAllowed=!0};le.parenL.updateContext=function(e){var t=e===le._if||e===le._for||e===le._with||e===le._while;this.context.push(t?Os.p_stat:Os.p_expr),this.exprAllowed=!0};le.incDec.updateContext=function(){};le._function.updateContext=le._class.updateContext=function(e){e.beforeExpr&&e!==le._else&&!(e===le.semi&&this.curContext()!==Os.p_stat)&&!(e===le._return&&Ih.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===le.colon||e===le.braceL)&&this.curContext()===Os.b_stat)?this.context.push(Os.f_expr):this.context.push(Os.f_stat),this.exprAllowed=!1};le.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};le.backQuote.updateContext=function(){this.curContext()===Os.q_tmpl?this.context.pop():this.context.push(Os.q_tmpl),this.exprAllowed=!1};le.star.updateContext=function(e){if(e===le._function){var t=this.context.length-1;this.context[t]===Os.f_expr?this.context[t]=Os.f_expr_gen:this.context[t]=Os.f_gen}this.exprAllowed=!0};le.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==le.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Xn=ga.prototype;Xn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Xn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===le.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(le.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Xn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new dj,r=!0);var a=this.start,u=this.startLoc;(this.type===le.parenL||this.type===le.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===le.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===le.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Xn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(le.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(le.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Xn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Xn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==le._in)&&s>r){var o=this.type===le.logicalOR||this.type===le.logicalAND,a=this.type===le.coalesce;a&&(s=le.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===le.coalesce||a&&(this.type===le.logicalOR||this.type===le.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Xn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Xn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===le.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&M3e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===le.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==le._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(le.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function M3e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&M3e(e.expression)}Xn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Xn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Xn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(le.arrow)};Xn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Xn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(le.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(le.bracketL);if(l||u&&this.type!==le.parenL&&this.type!==le.backQuote||this.eat(le.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(le.bracketR)):this.type===le.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(le.parenL)){var f=new dj,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===le.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};Xn.parseExprAtom=function(e,t,n){this.type===le.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case le._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===le.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==le.dot&&this.type!==le.bracketL&&this.type!==le.parenL&&this.unexpected(),this.finishNode(r,"Super");case le._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case le.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(le._function))return this.overrideContext(Os.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(le.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===le.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(le.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case le.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case le.num:case le.string:return this.parseLiteral(this.value);case le._null:case le._true:case le._false:return r=this.startNode(),r.value=this.type===le._null?null:this.type===le._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case le.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case le.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(le.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case le.braceL:return this.overrideContext(Os.b_expr),this.parseObj(!1,e);case le._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case le._class:return this.parseClass(this.startNode(),!1);case le._new:return this.parseNew();case le.backQuote:return this.parseTemplate();case le._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Xn.parseExprAtomDefault=function(){this.unexpected()};Xn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===le.parenL&&!e)return this.parseDynamicImport(t);if(this.type===le.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Xn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(le.parenR)){var t=this.start;this.eat(le.comma)&&this.eat(le.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Xn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Xn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Xn.parseParenExpression=function(){this.expect(le.parenL);var e=this.parseExpression();return this.expect(le.parenR),e};Xn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Xn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new dj,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==le.parenR;)if(l?l=!1:this.expect(le.comma),s&&this.afterTrailingComma(le.parenR,!0)){c=!0;break}else if(this.type===le.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(le.parenR),e&&this.shouldParseArrow(u)&&this.eat(le.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,r);return v.expression=i,this.finishNode(v,"ParenthesizedExpression")}else return i};Xn.parseParenItem=function(e){return e};Xn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var l3t=[];Xn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===le.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(le.parenL)?e.arguments=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1):e.arguments=l3t,this.finishNode(e,"NewExpression")};Xn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===le.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===le.backQuote,this.finishNode(n,"TemplateElement")};Xn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===le.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(le.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(le.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Xn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===le.name||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===le.star)&&!Ih.test(this.input.slice(this.lastTokEnd,this.start))};Xn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(le.braceR);){if(r)r=!1;else if(this.expect(le.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(le.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Xn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(le.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===le.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(le.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(le.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Xn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Xn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===le.colon&&this.unexpected(),this.eat(le.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===le.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==le.comma&&this.type!==le.braceR&&this.type!==le.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===le.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Xn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(le.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(le.bracketR),e.key;e.computed=!1}return e.key=this.type===le.num||this.type===le.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Xn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Xn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kne(t,r.generator)|Gne|(n?R3e:0)),this.expect(le.parenL),r.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Xn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Kne(n,!1)|I3e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Xn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==le.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,P3e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Xn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Xn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Xne,t?null:n)}};Xn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(le.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===le.comma?o=null:this.type===le.ellipsis?(o=this.parseSpread(r),r&&this.type===le.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Xn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Xn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Xn.parseIdentNode=function(){var e=this.startNode();return this.type===le.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=le.name):this.unexpected(),e};Xn.parsePrivateIdent=function(){var e=this.startNode();return this.type===le.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Xn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===le.semi||this.canInsertSemicolon()||this.type!==le.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(le.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Xn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var X5=ga.prototype;X5.raise=function(e,t){var n=C3e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};X5.raiseRecoverable=X5.raise;X5.curPosition=function(){if(this.options.locations)return new hP(this.curLine,this.pos-this.lineStart)};var Px=ga.prototype,c3t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Px.enterScope=function(e){this.scopeStack.push(new c3t(e))};Px.exitScope=function(){this.scopeStack.pop()};Px.treatFunctionsAsVarInScope=function(e){return e.flags&yI||!this.inModule&&e.flags&pP};Px.declareName=function(e,t,n){var r=!1;if(t===P1){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&pP&&delete this.undefinedExports[e]}else if(t===N3e){var s=this.currentScope();s.lexical.push(e)}else if(t===D3e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&k3e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&pP&&delete this.undefinedExports[e],u.flags&Yne)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Px.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Px.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Px.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Yne)return t}};Px.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Yne&&!(t.flags&I3e))return t}};var hj=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new fj(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},H3=ga.prototype;H3.startNode=function(){return new hj(this,this.start,this.startLoc)};H3.startNodeAt=function(e,t){return new hj(this,e,t)};function L3e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}H3.finishNode=function(e,t){return L3e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};H3.finishNodeAt=function(e,t,n,r){return L3e.call(this,e,t,n,r)};H3.copyNode=function(e){var t=new hj(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var $3e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",F3e=$3e+" Extended_Pictographic",B3e=F3e,j3e=B3e+" EBase EComp EMod EPres ExtPict",U3e=j3e,f3t=U3e,d3t={9:$3e,10:F3e,11:B3e,12:j3e,13:U3e,14:f3t},h3t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",p3t={9:"",10:"",11:"",12:"",13:"",14:h3t},nge="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",z3e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",V3e=z3e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",H3e=V3e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",q3e=H3e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",W3e=q3e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",m3t=W3e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",g3t={9:z3e,10:V3e,11:H3e,12:q3e,13:W3e,14:m3t},G3e={};function y3t(e){var t=G3e[e]={binary:tb(d3t[e]+" "+nge),binaryOfStrings:tb(p3t[e]),nonBinary:{General_Category:tb(nge),Script:tb(g3t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var EH=0,rge=[9,10,11,12,13,14];EH<rge.length;EH+=1){var v3t=rge[EH];y3t(v3t)}var fn=ga.prototype,fg=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=G3e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};fg.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};fg.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};fg.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};fg.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};fg.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};fg.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};fg.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};fg.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};fg.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};fn.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};fn.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};fn.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};fn.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};fn.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};fn.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};fn.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};fn.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};fn.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};fn.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};fn.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};fn.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};fn.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};fn.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};fn.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};fn.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};fn.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Y3e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Y3e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}fn.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Y3e(n);)e.advance();return e.pos!==t};fn.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};fn.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};fn.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};fn.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Xb(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Xb(e.lastIntValue);return!0}return!1};fn.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),b3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function b3t(e){return p1(e,!0)||e===36||e===95}fn.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),x3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function x3t(e){return KC(e,!0)||e===36||e===95||e===8204||e===8205}fn.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};fn.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};fn.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};fn.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};fn.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};fn.regexp_eatZero=function(e){return e.current()===48&&!pj(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};fn.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};fn.regexp_eatControlLetter=function(e){var t=e.current();return K3e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function K3e(e){return e>=65&&e<=90||e>=97&&e<=122}fn.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&_3t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function _3t(e){return e>=0&&e<=1114111}fn.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};fn.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var X3e=0,m1=1,nh=2;fn.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(w3t(t))return e.lastIntValue=-1,e.advance(),m1;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===nh&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return X3e};function w3t(e){return e===100||e===68||e===115||e===83||e===119||e===87}fn.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),m1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return X3e};fn.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){z3(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};fn.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return m1;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return nh;e.raise("Invalid property name")};fn.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Q3e(t=e.current());)e.lastStringValue+=Xb(t),e.advance();return e.lastStringValue!==""};function Q3e(e){return K3e(e)||e===95}fn.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";E3t(t=e.current());)e.lastStringValue+=Xb(t),e.advance();return e.lastStringValue!==""};function E3t(e){return Q3e(e)||pj(e)}fn.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};fn.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===nh&&e.raise("Negated character class may contain strings"),!0}return!1};fn.regexp_classContents=function(e){return e.current()===93?m1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),m1)};fn.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};fn.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||eOe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};fn.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};fn.regexp_classSetExpression=function(e){var t=m1,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===nh&&(t=nh);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==nh&&(t=m1);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===nh&&(t=nh)}};fn.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};fn.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?m1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};fn.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===nh&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};fn.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};fn.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===nh&&(t=nh);return t};fn.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?m1:nh};fn.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&S3t(n)||T3t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function S3t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function T3t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}fn.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return C3t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function C3t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}fn.regexp_eatClassControlLetter=function(e){var t=e.current();return pj(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};fn.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};fn.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;pj(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function pj(e){return e>=48&&e<=57}fn.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;J3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+Z3e(n),e.advance();return e.pos!==t};function J3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Z3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}fn.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};fn.regexp_eatOctalDigit=function(e){var t=e.current();return eOe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function eOe(e){return e>=48&&e<=55}fn.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!J3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Z3e(i),e.advance()}return!0};var Jne=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new fj(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$r=ga.prototype;$r.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Jne(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$r.getToken=function(){return this.next(),new Jne(this)};typeof Symbol<"u"&&($r[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===le.eof,value:t}}}});$r.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(le.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};$r.readToken=function(e){return p1(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};$r.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};$r.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=E3e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};$r.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!gI(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};$r.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&S3e.test(String.fromCharCode(e)))++this.pos;else break e}}};$r.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};$r.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(le.ellipsis)):(++this.pos,this.finishToken(le.dot))};$r.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(le.assign,2):this.finishOp(le.slash,1)};$r.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?le.star:le.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=le.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(le.assign,n+1):this.finishOp(r,n)};$r.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(le.assign,3)}return this.finishOp(e===124?le.logicalOR:le.logicalAND,2)}return t===61?this.finishOp(le.assign,2):this.finishOp(e===124?le.bitwiseOR:le.bitwiseAND,1)};$r.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(le.assign,2):this.finishOp(le.bitwiseXOR,1)};$r.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ih.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(le.incDec,2):t===61?this.finishOp(le.assign,2):this.finishOp(le.plusMin,1)};$r.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(le.assign,n+1):this.finishOp(le.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(le.relational,n))};$r.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(le.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(le.arrow)):this.finishOp(e===61?le.eq:le.prefix,1)};$r.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(le.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(le.assign,3)}return this.finishOp(le.coalesce,2)}}return this.finishOp(le.question,1)};$r.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),p1(t,!0)||t===92))return this.finishToken(le.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Xb(t)+"'")};$r.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(le.parenL);case 41:return++this.pos,this.finishToken(le.parenR);case 59:return++this.pos,this.finishToken(le.semi);case 44:return++this.pos,this.finishToken(le.comma);case 91:return++this.pos,this.finishToken(le.bracketL);case 93:return++this.pos,this.finishToken(le.bracketR);case 123:return++this.pos,this.finishToken(le.braceL);case 125:return++this.pos,this.finishToken(le.braceR);case 58:return++this.pos,this.finishToken(le.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(le.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(le.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Xb(e)+"'")};$r.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};$r.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Ih.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new fg(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(le.regexp,{pattern:i,flags:o,value:u})};$r.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function A3t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function tOe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}$r.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=tOe(this.input.slice(t,this.pos)),++this.pos):p1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,n)};$r.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=tOe(this.input.slice(t,this.pos));return++this.pos,p1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),p1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=A3t(this.input.slice(t,this.pos),n);return this.finishToken(le.num,s)};$r.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};$r.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(gI(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(le.string,t)};var nOe={};$r.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===nOe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};$r.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw nOe;this.raise(e,t)};$r.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===le.template||this.type===le.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(le.dollarBraceL)):(++this.pos,this.finishToken(le.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(le.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(gI(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};$r.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(le.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$r.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Xb(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return gI(t)?"":String.fromCharCode(t)}};$r.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};$r.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(KC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?p1:KC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Xb(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};$r.readWord=function(){var e=this.readWord1(),t=le.name;return this.keywords.test(e)&&(t=qne[e]),this.finishToken(t,e)};var I3t="8.11.3";ga.acorn={Parser:ga,version:I3t,defaultOptions:GY,Position:hP,SourceLocation:fj,getLineInfo:C3e,Node:hj,TokenType:li,tokTypes:le,keywordTypes:qne,TokContext:sp,tokContexts:Os,isIdentifierChar:KC,isIdentifierStart:p1,Token:Jne,isNewLine:gI,lineBreak:Ih,lineBreakG:ZPt,nonASCIIwhitespace:S3e};function k3t(e,t){return ga.parse(e,t)}const Zne={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},R3t={ecmaVersion:11},ige="$",D3t="d",N3t="d1",P3t="d2",cu=e=>(t,n)=>n.error(t,e+" not allowed"),O3t=cu("Aggregate function"),M3t=cu("Window function"),L3t="Invalid argument",ere="Invalid column reference",$3t=ere+" (must be input to an aggregate function)",rOe="Invalid function call",F3t="Invalid member expression",B3t="Invalid operator parameter",j3t="Invalid param reference",U3t="Invalid variable reference",z3t="Variable not accessible in operator call",V3t="Unsupported variable declaration",H3t="Unsupported destructuring pattern",iOe="Table expressions do not support closures",sOe="Use aq.escape(fn) to use a function as-is (including closures)",q3t="use table.params({ name: value }) to define dynamic parameters",W3t="use aq.addFunction(name, fn) to add new op functions",G3t=`
Note: ${iOe}. ${sOe}, or ${q3t}.`,oOe=`
Note: ${iOe}. ${sOe}, or ${W3t}.`,Y3t=`The ${oNe} method is not valid in multi-table expressions.`;function K3t(e,t){const n=X3t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,VPt(r)?(J3t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=N3t),e.scope.add(e.tuple2=P3t),e.scope.add(e.$param=ige)):(e.scope.add(e.tuple=D3t),e.scope.add(e.$param=ige)),ii(r,e,tre),e.root}function X3t(e){try{const t=e.field?Q3t(e):pi(e)?W0(e):e;return k3t(`expr=(${t})`,R3t).body[0].expression.right}catch{gr(`Expression parse error: ${e+""}`)}}function Q3t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const tre={FunctionDeclaration:cu("Function definitions"),ForStatement:cu("For loops"),ForOfStatement:cu("For-of loops"),ForInStatement:cu("For-in loops"),WhileStatement:cu("While loops"),DoWhileStatement:cu("Do-while loops"),AwaitExpression:cu("Await expressions"),ArrowFunctionExpression:cu("Function definitions"),AssignmentExpression:cu("Assignments"),FunctionExpression:cu("Function definitions"),NewExpression:cu('Use of "new"'),UpdateExpression:cu("Update expressions"),VariableDeclarator(e,t){QY(e.id,t)},Identifier(e,t,n){lOe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,U3t,G3t)},CallExpression(e,t){const n=aOe(e.callee),r=rNe(n)||iNe(n);if(r){if((t.join||t.aggregate===!1)&&Hte(n)&&O3t(e,t),(t.join||t.window===!1)&&qte(n)&&M3t(e,t),t.$op=1,t.ast)XY(e,n,t),e.arguments.forEach(i=>ii(i,t,KY));else{const i=t.op(Z3t(t,r,n,e.arguments));Object.assign(e,{type:JDe,name:i.id})}return t.$op=0,!1}else nNe(n)?XY(e,n,t):t.error(e,rOe,oOe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!aa(vb,r))return;const{name:s}=r;if(uOe(e)&&aa(vb,i)&&Vp(Zne,i.name)){dOe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return sge(e,o,t,cOe,n);if(s===t.$param)return sge(e,o,t,tOt);t.paramsRef.has(s)?mP(e,t.paramsRef.get(s)):t.columnRef.has(s)?fOe(r,s,t,e):Vp(t.params,s)&&mP(r,s)}};function sge(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(aa(fI,s))a=s.value;else try{ii(s,n,tre,e),a=n.param(s)}catch{n.error(e,F3t)}return r(e,a,t,n,i),!1}const KY={...tre,VariableDeclarator:cu("Variable declaration in operator call"),Identifier(e,t,n){lOe(e,t,n)&&t.error(e,z3t)},CallExpression(e,t){const n=aOe(e.callee);nNe(n)?XY(e,n,t):t.error(e,rOe,oOe)}};function J3t(e,t){e.generator&&cu("Generator functions")(e,t),e.async&&cu("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(yR(t,n[0],"tuple1",i(1)),r>1&&yR(t,n[1],"tuple2",i(2)),r>2&&yR(t,n[2],"$param",s)):(yR(t,n[0],"tuple",i(0)),r>1&&yR(t,n[1],"$param",s))),t.root=e.body}function yR(e,t,n,r){aa(vb,t)?(e.scope.add(t.name),e[n]=t.name):aa(XDe,t)&&t.properties.forEach(i=>{const s=aa(vb,i.key)?i.key.name:aa(fI,i.key)?i.key.value:e.error(i,L3t);aa(vb,i.value)||e.error(i.value,H3t),r(i.value.name,s)})}function Z3t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ii(u,e,KY),i.push(e.field(u))):l<a?(ii(u,e,KY),s.push(e.param(u))):e.error(u,B3t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function aOe(e){return aa(vb,e)?e.name:aa(KDe,e)?uOe(e)?eOt(e.property.name):e.property.name:null}function uOe(e){return aa(vb,e.object)&&e.object.name==="Math"}function eOt(e){return e==="max"?"greatest":e==="min"?"least":e}function lOe(e,t,n){const{name:r}=e;if(!(aa(KDe,n)&&n.property===e)){if(!(aa(QDe,n)&&n.key===e))if(t.paramsRef.has(r))mP(e,t.paramsRef.get(r));else if(t.columnRef.has(r))fOe(e,r,t,n);else if(Vp(t.params,r))mP(e,r);else if(Vp(Zne,r))dOe(e,r);else return!0}}function cOe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,ere),r.aggronly&&!r.$op&&r.error(e,$3t),sNe(e,t,n,o,i)}function fOe(e,t,n,r){const[i,s]=n.columnRef.get(t);cOe(e,i,s,n,r)}function tOt(e,t,n,r){r.params&&!Vp(r.params,t)&&r.error(e,j3t),mP(e,t)}function mP(e,t){e.type=Hkt,e.name=t}function dOe(e,t){e.type=Ukt,e.name=t,e.raw=Zne[t]}function XY(e,t,n){if(t===oNe){const r=n.table;r||n.error(e,Y3t),aNe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Zl(s)?r.columnName(s):s;return r.column(o)||n.error(i,ere),o}):r.columnNames())}else e.callee={type:Vkt,name:t}}function QY(e,t){aa(vb,e)?t.scope.add(e.name):aa($kt,e)?e.elements.forEach(n=>QY(n,t)):aa(XDe,e)?e.properties.forEach(n=>QY(n.value,t)):t.error(e.id,V3t)}const nOt={[L3]:1,[JDe]:1};function sf(e,t={}){const n=t.generate||I5,r=t.compiler||Wte,i=iOt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=rOt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return aa(fI,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const v=g.escape||(t.ast?zPt(g):f(n(g),i));u.push(v),nOt[g.type]&&v!==g&&hl(v)&&(v.field=g.name)},error(m,g,v=""){const b=m.start-6,w=m.end-6,E=String(d.spec).slice(b,w);gr(`${g}: "${E}"${v}`)}};Object.assign(d,t,{params:i});for(const[m,g]of Q9(e))d.value(m+"",g.escape?WPt(d,g,i):K3t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function rOt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function iOt(e){return(e.table?SH(e.table):e.join?{...SH(e.join[1]),...SH(e.join[0])}:{})||{}}function SH(e){return e&&Es(e.params)?e.params():{}}const hOe="Expr",op="ExprList",pOe="ExprNumber",pD="ExprObject",C2="JoinKeys",Q5="JoinValues",Yd="Options",nre="OrderKeys",Nv="SelectionList",lw="TableRef",A2="TableRefList",sOt="Descending",oOt="Query",aOt="Selection",uOt="Verb",lOt="Window";function mj(e,t){return e&&e.expr?new oge({...e,...t}):new oge(t,e)}class oge{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Es(this.expr)?{func:!0}:{}}}}function cOt(e){return mj(e,{desc:!0})}function cE(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return mj(e,t?{expr:t,...r}:r)}function fOt(e,t,n){return mj(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function dOt(e){const t=n=>n;return t.toString=()=>e,t}function age(e,t){return t=t&&Es(t.query)?t.query():t,t&&Es(t.evaluate)?t.evaluate(null,e):e(t)}function mOe(e){return hl(e)&&(pi(e.all)||pi(e.matches)||pi(e.not)||pi(e.range))}function gP(e){return e&&Es(e.toObject)?e.toObject():Es(e)?{expr:String(e),func:!0}:pi(e)?e.map(gP):hl(e)?lj(e,t=>gP(t)):e}function rre(e){return pi(e)?e.map(rre):hl(e)?pi(e.verbs)?q3.from(e):pi(e.all)?YC():pi(e.range)?$Pt(...e.range):pi(e.match)?FPt(RegExp(...e.match)):pi(e.not)?b3e(e.not.map(gP)):hOt(e):e}function hOt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=cE(n):e.func===!0&&(t=n=dOt(n)),hl(e.window)){const{frame:r,peers:i}=e.window;t=n=fOt(n,r,i)}e.desc===!0&&(t=cOt(n))}return e===t?lj(e,r=>rre(r)):t}function pOt(e){return pi(e)?e.map(mOt):e}function mOt(e){const t=[];return tf(e).forEach(n=>{Zl(n)?t.push(n):Iu(n)?t.push(cE(n,null)):hl(n)&&n.expr||Es(n)?t.push(n):gr(`Invalid key value: ${n+""}`)}),t}function gOt(e){return pi(e)?e.map(yOt):e}function yOt(e,t){return t<2?tf(e):e}function vOt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(hl(r)&&!Es(r))for(const i in r)t.push(r[i]);else n=Zl(r)?r:Iu(r)?cE(n):Es(r)?n:gr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const bOt={[hOe]:bOe,[op]:XC,[pOe]:TOt,[pD]:Qb,[C2]:COt,[Q5]:AOt,[nre]:XC,[Nv]:EOt};function xOt(e,t,n){return t===lw?uge(e):t===A2?e.map(uge):gOe(gP(e),t,n)}function gOe(e,t,n){return t===Yd?e&&_Ot(e,n):bOt[t](e)}function _Ot(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?gOe(i,t[r]):i}return n}function wOt(e,t){return sf({expr:e},{...t,ast:!0}).exprs[0]}function ire(e){return{type:L3,name:e}}function yOe(e){return{type:L3,index:e}}function Qb(e,t){if(Iu(e))return wOt(e,t);if(e.expr){let n;if(e.field===!0?n=ire(e.expr):e.func===!0&&(n=Qb(e.expr,t)),n)return e.desc&&(n={type:sOt,expr:n}),e.window&&(n={type:lOt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Qb(e[n],t),as:n}))}function vOe(e){const t=aOt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:XC(e.not)}:e.range?{type:t,operator:"range",arguments:XC(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:gr("Invalid input")}function EOt(e){return tf(e).map(SOt).flat()}function SOt(e){return mOe(e)?vOe(e):Zl(e)?yOe(e):Iu(e)?ire(e):hl(e)?Object.keys(e).map(t=>({type:L3,name:t,as:e[t]})):gr("Invalid input")}function bOe(e){return mOe(e)?vOe(e):Zl(e)?yOe(e):Iu(e)?ire(e):hl(e)?Qb(e):gr("Invalid input")}function XC(e){return tf(e).map(bOe).flat()}function TOt(e){return Zl(e)?e:Qb(e)}function COt(e){return pi(e)?e.map(XC):Qb(e,{join:!0})}function AOt(e){return pi(e)?e.map((t,n)=>n<2?XC(t):Qb(t,{join:!0})):Qb(e,{join:!0})}function uge(e){return e&&Es(e.toAST)?e.toAST():e}class xOe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===C2?pOt(a):o===Q5?gOt(a):o===nre?vOt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=JY[t.verb],r=(n.schema||[]).map(({name:i})=>rre(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===lw?age(n,o):s===A2?o.map(a=>age(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=gP(this[n])}),t}toAST(){const t={type:uOt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=xOt(this[n],r,i)}),t}}function zi(e,t){return Object.assign((...n)=>new xOe(e,t,n),{schema:t})}const JY={count:zi("count",[{name:"options",type:Yd}]),derive:zi("derive",[{name:"values",type:pD},{name:"options",type:Yd,props:{before:Nv,after:Nv}}]),filter:zi("filter",[{name:"criteria",type:pD}]),groupby:zi("groupby",[{name:"keys",type:op}]),orderby:zi("orderby",[{name:"keys",type:nre}]),relocate:zi("relocate",[{name:"columns",type:Nv},{name:"options",type:Yd,props:{before:Nv,after:Nv}}]),rename:zi("rename",[{name:"columns",type:Nv}]),rollup:zi("rollup",[{name:"values",type:pD}]),sample:zi("sample",[{name:"size",type:pOe},{name:"options",type:Yd,props:{weight:hOe}}]),select:zi("select",[{name:"columns",type:Nv}]),ungroup:zi("ungroup"),unorder:zi("unorder"),reify:zi("reify"),dedupe:zi("dedupe",[{name:"keys",type:op,default:[]}]),impute:zi("impute",[{name:"values",type:pD},{name:"options",type:Yd,props:{expand:op}}]),fold:zi("fold",[{name:"values",type:op},{name:"options",type:Yd}]),pivot:zi("pivot",[{name:"keys",type:op},{name:"values",type:op},{name:"options",type:Yd}]),spread:zi("spread",[{name:"values",type:op},{name:"options",type:Yd}]),unroll:zi("unroll",[{name:"values",type:op},{name:"options",type:Yd,props:{drop:op}}]),lookup:zi("lookup",[{name:"table",type:lw},{name:"on",type:C2},{name:"values",type:op}]),join:zi("join",[{name:"table",type:lw},{name:"on",type:C2},{name:"values",type:Q5},{name:"options",type:Yd}]),cross:zi("cross",[{name:"table",type:lw},{name:"values",type:Q5},{name:"options",type:Yd}]),semijoin:zi("semijoin",[{name:"table",type:lw},{name:"on",type:C2}]),antijoin:zi("antijoin",[{name:"table",type:lw},{name:"on",type:C2}]),concat:zi("concat",[{name:"tables",type:A2}]),union:zi("union",[{name:"tables",type:A2}]),intersect:zi("intersect",[{name:"tables",type:A2}]),except:zi("except",[{name:"tables",type:A2}])};class q3 extends LDe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new q3(t.map(xOe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return lge(this,"toObject")}toJSON(){return this.toObject()}toAST(){return lge(this,"toAST",{type:oOt})}}function lge(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function IOt(e,t){return new q3(e._verbs.concat(t),e._params,e._table)}for(const e in JY){const t=JY[e];q3.prototype["__"+e]=function(n,...r){return IOt(n,t(...r))}}function bI(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function kOt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function sre(e,t){const n=xd();return t.forEach((r,i)=>{const s=Iu(r)?r:i;if(s){const o=e.column(i)||gr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function _Oe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||gr("relocate requires a before or after option."),i&&s&&gr("relocate accepts only one of the before or after options."),t=h1(e,t);const o=[...h1(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),sre(e,u)}function W3(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function ore(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ROt(e,t=0,n=e.length){let r=n?e[t++]:ci;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function DOt(e,t=0,n=e.length){let r=n?e[t++]:ci;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function P6(e){return oP(e)?e:+e}function NOt(e,t){const n=e.length;if(!n)return ci;if((t=+t)<=0||n<2)return P6(e[0]);if(t>=1)return P6(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=P6(e[i]);return oP(s)?s:s+(P6(e[i+1])-s)*(r-i)}class POt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:ROt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:DOt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(ore)),NOt(this._sorted,t)}}const J5=(e,t,n)=>bI(t,"{"+W3(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function OOt(e,t){const{ops:n,output:r}=MOt(e,t),i=e[0].fields,s=i.length,o=s===0?are:s===1?LOt:s===2?$Ot:gr("Unsupported field count: "+s);return new o(i,n,r,t)}function MOt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=rNe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class are extends jPt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new POt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class LOt extends are{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=J5(n,s,"add"),this._rem=J5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Ap(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Ap(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class $Ot extends are{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=J5(n,s,"add"),this._rem=J5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Ap(i)&&Ap(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Ap(i)&&Ap(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function JE(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=xI(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function xI(e,t,n){if(!t.length)return n;const r=wOe(t),i=e.groups(),s=i?i.size:1;return n=n||K9(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=SOe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=EOe(e,o);o.write(a,n,0)}),n}function wOe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(OOt(r[i],t));return n}function EOe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function SOe(e,t,n){const{keys:r,size:i}=n,s=K9(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function TOe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function COe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const cge=COe(ore);function FOt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?bI(["w","r","k"],"{"+W3(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,v,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=v,l=b,a=i.map(w=>w.init());for(let w=0;w<f;++w)r[w].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,v]=t,b=p.size,w=p.i0,E=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=v!=null?Math.min(b,m+Math.abs(v)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=cge.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=cge.right(o,o[p.i1-1])));for(let T=0;T<d;++T){const C=i[T],I=a[T];for(let R=w;R<p.i0;++R)C.rem(I,s[R],e);for(let R=E;R<p.i1;++R)C.add(I,s[R],e);C.write(I,u,l)}return h(p,u,l),u}};return p}const BOt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),jOt=e=>!!e.peers;function UOt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=iNe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function zOt(e,t,n,r={},i){const s=e.data(),o=VOt(i,s),a=o.length,u=bI(["r","d","op"],"{"+W3(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=HOt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function VOt(e,t){const n={};return e.forEach(r=>{const i=BOt(r),s=jOt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Hte(r.name)?a.push(r):u.push(UOt(r))}),Object.values(n).map(r=>FOt(t,r.frame,r.peers,r.winOps,wOe(r.aggOps,r.frame[0]!=null?-1:1)))}function HOt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function qOt(e){return qte(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function ure(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=xd(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=WOt(r),c=e.isGrouped()?e.groups().size:1,f=xI(e,u,K9(r.length,()=>Array(c)));return l.length?zOt(e,a,n,f,l):GOt(e,a,n,f),e.create(o)}function WOt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(qOt(s)?n:t).push(s)}return[t,n]}function GOt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function YOt(e,t,n={}){const r=ure(e,sf(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:_Oe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function KOt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const O6=2147483648,XOt=4294967295;class AOe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&O6>>>t}set(t){this._bits[t>>5]|=O6>>>t}clear(t){this._bits[t>>5]&=~(O6>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&XOt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=O6>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function QOt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new AOe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function JOt(e,t){const n=sf({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=ure(e,n,{drop:!0}).column("p");r=s=>i[s]}return QOt(e,r)}function IOe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=JE(e,r,n),l=xd(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(E=>{if(!a.has(E)){const T=l.add(E,[]);c.has(E)||(f.push(e.column(E)),d.push(T))}}),t.forEach(E=>{a.has(E)||(l.has(E)||l.add(E,[]),h.push(l.data[E]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,v=h.length,b=(E,T)=>{for(let C=0;C<g;++C)d[C].length=m+T,d[C].fill(f[C].get(E),m,m+T)},w=p?(E,T)=>{for(let C=0;C<T;++C)p[E+C]=C}:()=>{};if(v===1){const E=u[0],T=h[0];e.scan((C,I)=>{const R=tf(E(C,I)),N=Math.min(R.length,s);b(C,N);for(let O=0;O<N;++O)T[m+O]=R[O];w(m,N),m+=N})}else e.scan((E,T)=>{let C=0;const I=u.map(R=>{const N=tf(R(E,T));return C=Math.min(Math.max(C,N.length),s),N});b(E,C);for(let R=0;R<v;++R){const N=h[R],O=I[R];for(let L=0;L<C;++L)N[m+L]=O[L]}w(m,C),m+=C});return e.create(l.new())}function ZOt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=JE(e,r,n);return IOe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function qp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Zl(o)?t.columnName(o):o,Iu(o)?i.set(o,cE(o)):Es(o)?h1(t,o).forEach(s):hl(o)?y3e(i,o):gr(`Invalid ${e} value: ${o+""}`)};return tf(n).forEach(s),r.preparse&&r.preparse(i),sf(i,{table:t,...r})}function e4t(e,t,n){return ZOt(e,qp("fold",e,t),n)}function fge(e,t,n,r){const i=n&&n.length;return t4t(i?n4t(e,n,r):e,t,i)}function t4t(e,{names:t,exprs:n,ops:r},i){const s=JE(e,r,n),o=i?null:xd(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Ap(p)?p:d(h)})}),i?e:e.create(o)}function n4t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=k5(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=xd(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],v=f[m];e.scan(b=>v.push(g.get(b)))});const d=k5(o.map((p,m)=>g=>g[m])),h=bI("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((v,b)=>v*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),dge(r,n,(v,b)=>{a.has(d(v))||(h(v),g[p++]=b[0])}),c.groupby({...r,keys:g})}else dge(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function dge(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function lre(e,{names:t,exprs:n,ops:r}){const i=xd(),s=e.groups();return s&&TOe(i,s),r4t(t,n,s,xI(e,r),i),e.create(i.new())}function r4t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function i4t(e,t,n={}){if(t=sf(t,{table:e}),t.names.forEach(r=>e.column(r)?0:gr(`Invalid impute column ${W0(r)}`)),n.expand){const r={preparse:s4t,aggronly:!0},i=qp("impute",e,n.expand,r),s=lre(e.ungroup(),i);return fge(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return fge(e,t)}function s4t(e){e.forEach((t,n)=>t.field?e.set(n,qDe(t+"")):0)}function o4t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function kOe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function a4t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function u4t(e,t){const n=["i","a","j","b"];return bI(n,"{"+W3(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function l4t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=xd(),g=Array(p),v=Array(p);for(let E=0;E<r.length;++E)g[E]=m.add(r[E],[]),v[E]=i[E];const b=u4t(g,v);if((pi(n)?f4t:c4t)(b,n,o,c,a,f,l,h,u,d),s.left)for(let E=0;E<u;++E)l[E]||b(a[E],o,-1,c);if(s.right)for(let E=0;E<d;++E)h[E]||b(-1,o,f[E],c);return e.create(m.new())}function c4t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function f4t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,v,b,w=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,v=u,b=o):(f=i,d=n,h=u,p=o,m=r,g=t,v=a,b=s,w=(C,I,R,N)=>e(R,N,C,I));const E=a4t(b,m,g),T=p.length;for(let C=0;C<T;++C){const I=p[C],R=E.get(d(I,f));if(R){const N=R.length;for(let O=0;O<N;++O){const L=R[O];w(I,f,b[L],m),v[L]=1}h[C]=1}}}function Z5(e,t,n){const r=new Map;tf(n).forEach((s,o)=>{s=Zl(s)?t.columnName(s):s,Iu(s)?r.set(o,cE(s)):Es(s)||hl(s)&&s.expr?r.set(o,s):gr(`Invalid ${e} key value: ${s+""}`)});const i=sf(r,{table:t,aggregate:!1,window:!1});return k5(i.exprs,!0)}function d4t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function cre(e,t,n){if(n)Iu(n)?n=[n,n]:pi(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=d4t(e.columnNames(),t.columnNames());r.length||gr("Natural join requires shared column names."),n=[r,r]}return n}function ROe(e,t,n,r){return n.length!==r.length&&gr("Mismatched number of join keys"),[Z5("join",e,n),Z5("join",t,r)]}const h4t={aggregate:!1,window:!1},p4t={...h4t,index:1};function hge(e,t,n,r,i={}){n=cre(e,t,n);const s={join:[e,t]};let o;if(pi(n)){const[a,u]=n.map(tf);o=ROe(e,t,a,u),r||(r=m4t(e,a,u,i))}else o=sf({on:n},s).exprs[0],r||(r=[YC(),YC()]);return l4t(e,t,o,g4t(e,t,r,s,i&&i.suffix),i)}function m4t(e,t,n,r){const i=[];t.forEach((o,a)=>Iu(o)&&o===n[a]?i.push(o):0);const s=b3e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${W0(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,YC()]:[YC(),s]}function g4t(e,t,n,r,i=[]){if(pi(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=qp("join",e,n[0],r)),u--&&(o=qp("join",t,n[1],p4t)),u--&&(a=sf(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&pge(s.names,l,i[0]||"_1"),i[1]!==""&&pge(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return sf(n,r)}function pge(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function y4t(e,t,n,r={}){const i=new AOe(e.totalRows());return(pi(n)?v4t:b4t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function v4t(e,t,n,[r,i]){const s=kOe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function b4t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function mge(e,t,n,r){n=cre(e,t,n);const i=pi(n)?ROe(e,t,...n.map(tf)):sf({on:n},{join:[e,t]}).exprs[0];return y4t(e,t,i,r)}function x4t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=xd(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ci)));const l=kOe(t,r),c=bI(["lr","rr","data"],"{"+W3(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),JE(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function _4t(e,t,n,r){return n=cre(e,t,n),x4t(e,t,[Z5("lookup",e,n[0]),Z5("lookup",t,n[1])],qp("lookup",t,r))}const ZY=(e,t)=>e??t;function w4t(e,t,n,r={}){const{keys:i,keyColumn:s}=E4t(e,t,r),o=ZY(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>xI(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(S4t(n,a,e.groups(),u))}function E4t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=ZY(n.sort,!0),s=ZY(n.keySeparator,"_"),o=JE(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=xI(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function S4t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=xd(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&TOe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function T4t(e,t,n,r){return w4t(e,qp("fold",e,t),qp("fold",e,n,{preparse:C4t,aggronly:!0}),r)}function C4t(e){e.forEach((t,n)=>t.field?e.set(n,zDe(t+"")):0)}function A4t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),sre(e,h1(e,t,n))}function gge(e,t){return lre(e,sf(t,{table:e,aggronly:!0,window:!1}))}function I4t(e,t,n,r){return(t?r?R4t:k4t:r?N4t:D4t)(e.length,e,n,r)}function k4t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*cI()|0];return t}function R4t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=COe(ore).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*cI())];return t}function D4t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*cI();s<e&&(t[s|0]=n[i])}return t}function N4t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(cI())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function P4t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=cI()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function O4t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):I4t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&P4t(u),e.reify(u)}function M4t(e,t,n={}){return O4t(e,L4t(e,t),$4t(e,n.weight),n)}const DOe=e=>t=>e.get(t)||0;function L4t(e,t){return Zl(t)?()=>t:DOe(lre(e,sf({size:t},{table:e,window:!1})).column("size"))}function $4t(e,t){return t==null?null:(t=Zl(t)?e.columnName(t):t,DOe(Iu(t)?e.column(t):ure(e,sf({w:t},{table:e}),{drop:!0}).column("w")))}function F4t(e,t){return sre(e,h1(e,t))}function B4t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=JE(e,r,n),l=xd(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=j4t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function j4t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=tf(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ci));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function U4t(e,t,n){return B4t(e,qp("spread",e,t),n)}function z4t(e,t){return e.concat(t).dedupe()}function V4t(e,t,n){return IOe(e,qp("unroll",e,t),n&&n.drop?{...n,drop:qp("unroll",e,n.drop).names}:n)}function H4t(e,t){return e.create({groups:q4t(e,t)})}function q4t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=JE(e,r,n);const o=k5(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function W4t(e,t){return H4t(e,qp("groupby",e,t))}function G4t(e,t){return e.create({order:t})}const Y4t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function K4t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=sf(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([I5(p,{index:"a",op:o}),I5(p,{index:"b",op:a})])},window:!1}),l=xI(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Y4t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function X4t(e,t){return G4t(e,Q4t(e,t))}function Q4t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(hl(o)&&!Es(o))for(const a in o)i(o[a]);else i(Zl(o)?cE(s,e.columnName(o)):Iu(o)?cE(s):Es(o)?s:gr(`Invalid orderby field: ${s+""}`))}),K4t(e,r)}function J4t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=xd();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ci};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Z4t(e,t){const n=xd(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?SOe(e,t,r):[EOe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let v=0,b=0;v<a;++v)m.fill(g(o[v],d),b,b+=u[v+1])})}return e.create(n.new())}function e6t(e){return e.isGrouped()?e.create({groups:null}):e}function t6t(e){return e.isOrdered()?e.create({order:null}):e}const n6t={__antijoin:(e,t,n)=>mge(e,t,n,{anti:!0}),__count:(e,t={})=>gge(e,{[t.as||"count"]:VDe()}),__cross:(e,t,n,r)=>hge(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:J4t,__dedupe:kOt,__derive:YOt,__except:KOt,__filter:JOt,__fold:e4t,__impute:i4t,__intersect:o4t,__join:hge,__lookup:_4t,__pivot:T4t,__relocate:_Oe,__rename:A4t,__rollup:gge,__sample:M4t,__select:F4t,__semijoin:mge,__spread:U4t,__union:z4t,__unroll:V4t,__groupby:W4t,__orderby:X4t,__ungroup:e6t,__unorder:t6t,__reduce:Z4t};Object.assign(Ey.prototype,n6t);function NOe(e,t){return Ey.from(e,t)}function tC(e){return mj(e,{escape:!0,toString(){gr("Escaped values can not be serialized.")}})}Ey.prototype;var TH,yge;function r6t(){if(yge)return TH;yge=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof la=="object"&&la&&la.Object===Object&&la,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(T,C,I){var R,N,O,L,j,F,H=0,Q=!1,J=!1,ne=!0;if(typeof T!="function")throw new TypeError(e);C=E(C)||0,v(I)&&(Q=!!I.leading,J="maxWait"in I,O=J?h(E(I.maxWait)||0,C):O,ne="trailing"in I?!!I.trailing:ne);function Z(_e){var pe=R,Se=N;return R=N=void 0,H=_e,L=T.apply(Se,pe),L}function ie(_e){return H=_e,j=setTimeout(G,C),Q?Z(_e):L}function q(_e){var pe=_e-F,Se=_e-H,Le=C-pe;return J?p(Le,O-Se):Le}function U(_e){var pe=_e-F,Se=_e-H;return F===void 0||pe>=C||pe<0||J&&Se>=O}function G(){var _e=m();if(U(_e))return V(_e);j=setTimeout(G,q(_e))}function V(_e){return j=void 0,ne&&R?Z(_e):(R=N=void 0,L)}function Y(){j!==void 0&&clearTimeout(j),H=0,R=F=N=j=void 0}function ee(){return j===void 0?L:V(m())}function ae(){var _e=m(),pe=U(_e);if(R=arguments,N=this,F=_e,pe){if(j===void 0)return ie(F);if(J)return j=setTimeout(G,C),Z(F)}return j===void 0&&(j=setTimeout(G,C)),L}return ae.cancel=Y,ae.flush=ee,ae}function v(T){var C=typeof T;return!!T&&(C=="object"||C=="function")}function b(T){return!!T&&typeof T=="object"}function w(T){return typeof T=="symbol"||b(T)&&d.call(T)==n}function E(T){if(typeof T=="number")return T;if(w(T))return t;if(v(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=v(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var I=s.test(T);return I||o.test(T)?a(T.slice(2),I?2:8):i.test(T)?t:+T}return TH=g,TH}var i6t=r6t();const lp=vh(i6t);function POe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Tx(".2s"),[]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>S.jsxs("g",{transform:`translate(${n}, ${a})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),S.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const s6t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:POe},Symbol.toStringTag,{value:"Module"})),CH=15;function OOe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=si("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<CH&&Math.abs(t(g[r.y])-p[1])<CH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const v=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,v.length===0?"clear":"drag",v)}else{const g=Array.from(new Set([...s.ids,...m.map(v=>v[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),S.jsx("circle",{style:{cursor:l?"pointer":"default"},r:CH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const o6t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:OOe},Symbol.toStringTag,{value:"Module"})),Is={top:15,left:100,right:15,bottom:70};function eK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=td(),[c]=td(),[f]=td(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-Is.left-Is.right,[l]),m=P.useMemo(()=>u-Is.top-Is.bottom,[u]),g=P.useMemo(()=>{const O=Array.from(new Set(s.map(L=>L[i.category])));return Ax(j9).domain(O)},[s,i.category]),{xMin:v,yMin:b,xMax:w,yMax:E}=P.useMemo(()=>{const O=s.map(J=>+J[i.x]).filter(J=>J!==null),[L,j]=VN(O),F=s.map(J=>+J[i.y]).filter(J=>J!==null),[H,Q]=VN(F);return{xMin:L,xMax:j,yMin:H,yMax:Q}},[s,i.x,i.y]),T=P.useMemo(()=>{const O=w-v;return p<=0?null:i.dataType==="date"?gte([Is.left,p+Is.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ef([Is.left,p+Is.left]).domain([v-O/10,w+O/10]).nice()},[i.dataType,p,w,v]),C=P.useMemo(()=>{const O=E-b;return m<=0?null:ef([m+Is.top,Is.top]).domain([b-O/10,E+O/10]).nice()},[m,E,b]),I=P.useMemo(()=>{if(!T||!C)return()=>null;if(r==="Axis Selection"){const O=bke().extent([[Is.left,Is.top+m-5],[Is.left+p,Is.top+m+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],T,C,j.mode)}),L=xke().extent([[Is.left-5,Is.top],[Is.left+5,Is.top+m]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],T,C,j.mode)});return c.current&&f.current&&(si(f.current).call(L),si(c.current).call(O),t.hasBrush||(si(f.current).call(L.move,[C(E),C(b)]),si(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"drag"))),()=>{si(f.current).call(L.move,[C(E),C(b)]),si(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"clear")}}if(r==="Rectangular Selection"){const O=_ke().extent([[Is.left,Is.top],[Is.left+p,Is.top+m]]).on("brush",L=>{L.sourceEvent!==void 0&&n([[L.selection[0][0],L.selection[0][1]],[L.selection[1][0],L.selection[1][1]]],T,C,L.mode)}).on("end",L=>{L.selection===null&&L.sourceEvent!==void 0&&(si(a.current).call(O.move,null),e(null))});return si(a.current).call(O),()=>{si(a.current).call(O.move,null),n([[null,null],[null,null]],T,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[T(v),C(E)],[T(w),C(b)]],T,C,null),()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear")):r==="Paintbrush Selection"?()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,v,T,E,b,C]),R=P.useMemo(()=>o.length===0?null:new Set(o),[o]),N=P.useMemo(()=>!T||!C?null:s.map((O,L)=>{if(O[i.x]===null||O[i.y]===null)return null;const j=i.dataType==="date"?T(new Date(O[i.x])):T(O[i.x]);return S.jsx("circle",{opacity:R&&!R.has(O[i.ids])?.3:1,r:3,fill:R&&!R.has(O[i.ids])?"lightgray":g(O[i.category]),cx:j,cy:C(O[i.y])},L)}),[R,g,s,i.category,i.dataType,i.ids,i.x,i.y,T,C]);return P.useEffect(()=>{r==="Axis Selection"&&BIe(".handle").style("fill","darkgrey")},[t,r]),S.jsxs(uo,{children:[S.jsxs(Yr,{children:[S.jsx(gn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),I==null||I()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?S.jsx(IB,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:O=>h(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),S.jsxs(Yr,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[S.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&C?S.jsxs("g",{children:[S.jsx(POe,{yScale:C,label:i.y,horizontalPosition:Is.left,xRange:T.range()}),S.jsx(Ute,{xScale:T,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+Is.top,label:i.x,ticks:T.ticks(i.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:T(O)}))})]}):null,N,S.jsx("g",{id:"brushXRef",ref:c}),S.jsx("g",{id:"brushYRef",ref:f}),T&&C&&r==="Paintbrush Selection"?S.jsx(OOe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:T,yScale:C}):null]}),r==="Slider Selection"&&T&&C?S.jsxs(uo,{style:{flexGrow:1},gap:50,children:[S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.x}),S.jsx(yC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[T(O[0]),t.y1],[T(O[1]),t.y2]],T,C,"drag")},style:{width:"300px"},marks:T.ticks(5).map(O=>({value:O,label:O})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.y}),S.jsx(yC,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:O=>{n([[t.x1,C(O[1])],[t.x2,C(O[0])]],T,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(O=>({value:O,label:O})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const a6t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:eK,default:eK},Symbol.toStringTag,{value:"Module"}));function vge({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=P.useState(null),[s,o]=P.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});P.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=P.useState(null);P.useEffect(()=>{Kee(`./data/${e.dataset}.csv`).then(v=>{u(v)})},[e]);const l=P.useMemo(()=>a?NOe(a):null,[a]),{actions:c,trrack:f}=P.useMemo(()=>{const v=kx.create(),b=v.register("brush",(I,R)=>(I.all={brush:R},I)),w=v.register("brushMove",(I,R)=>(I.all={brush:R},I)),E=v.register("brushResize",(I,R)=>(I.all={brush:R},I)),T=v.register("brushClear",(I,R)=>(I.all={brush:R},I)),C=uI({registry:v,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:w,brushResize:E,clearBrush:T},trrack:C}},[]),d=P.useCallback((v,b)=>{v==="drag"?f.apply("Move Brush",c.brushMove(b)):v==="handle"&&f.apply("Brush",c.brush(b))},[c,f]),h=P.useMemo(()=>lp(d,100,{maxWait:100}),[d]),p=P.useCallback((v,b,w,E,T)=>{if(!b||!w)return;const C=b.invert(v[0][0]||s.x1),I=b.invert(v[1][0]||s.x2),R=w.invert(v[1][1]||s.y2),N=w.invert(v[0][1]||s.y1);let O=null;if(E==="clear")O=l;else if(T){const j=new Set(T);O=l.filter(tC(F=>j.has(F[e.ids])))}else e.brushType==="Axis Selection"?O=l.filter(tC(j=>new Date(j[e.x])>=new Date(C)&&new Date(j[e.x])<=new Date(I)&&j[e.y]>=R&&j[e.y]<=N)):O=l.filter(tC(j=>j[e.x]>=C&&j[e.x]<=I&&j[e.y]>=R&&j[e.y]<=N));const L={x1:v[0][0]||(s==null?void 0:s.x1)||0,x2:v[1][0]||(s==null?void 0:s.x2)||0,y1:v[0][1]||(s==null?void 0:s.y1)||0,y2:v[1][1]||(s==null?void 0:s.y2)||0,hasBrush:E!=="clear",ids:E!=="clear"?O==null?void 0:O.array("id"):[]};o(L),E==="drag"||E==="handle"?h(E,L):E==="clear"&&f.apply("Clear Brush",c.clearBrush(L)),i(O),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=P.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=P.useCallback(v=>{i(v)},[]);return a?S.jsxs(uo,{gap:"xs",children:[S.jsx(eK,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),S.jsx(DY,{data:a,parameters:e,barsTable:m})]}):S.jsx(df,{})}const u6t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:vge,default:vge},Symbol.toStringTag,{value:"Module"})),l6t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function MOe({data:e,xScale:t,yScale:n,height:r}){return S.jsx("g",{children:e.map((i,s)=>S.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const c6t=Object.freeze(Object.defineProperty({__proto__:null,Bars:MOe},Symbol.toStringTag,{value:"Module"}));function fre({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=ef().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(0,${a})`,children:[S.jsx("line",{x2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const f6t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:fre},Symbol.toStringTag,{value:"Module"}));function LOe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=iI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsx("g",{transform:`translate(${a}, 10)`,children:S.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const d6t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:LOe},Symbol.toStringTag,{value:"Module"})),h6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function p6t({parameters:e}){const[n,r]=lI(h6t),i=iI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=ef().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(LOe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(fre,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(MOe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const m6t=Object.freeze(Object.defineProperty({__proto__:null,default:p6t},Symbol.toStringTag,{value:"Module"}));function $Oe({data:e}){return S.jsx("g",{children:e.map(({bubble:t},n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const g6t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:$Oe},Symbol.toStringTag,{value:"Module"}));function dre({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const y6t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:dre},Symbol.toStringTag,{value:"Module"})),v6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},b6t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=ate().size([t-10,n-10]).padding(1.5),o=I3(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},x6t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function _6t({parameters:e}){const[t,n]=lI(v6t),r=b6t(e,n.width,n.height),i=x6t(r,e.selectedIndices);return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[S.jsx($Oe,{data:r}),S.jsx(dre,{positions:i})]})})})}const w6t=Object.freeze(Object.defineProperty({__proto__:null,default:_6t},Symbol.toStringTag,{value:"Module"}));function FOe({arcs:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const E6t=Object.freeze(Object.defineProperty({__proto__:null,Slices:FOe},Symbol.toStringTag,{value:"Module"}));function BOe({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("g",{transform:`translate(${t.centroid()})`,children:S.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const S6t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:BOe},Symbol.toStringTag,{value:"Module"})),T6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},C6t=LCt().value(e=>e.value),vR=150;function A6t({parameters:e}){const[t,n]=lI(T6t),r=C6t(e.data),i=r.map(o=>dY().innerRadius(0).outerRadius(vR).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>dY().outerRadius(vR+10).innerRadius(vR+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft+vR,n.marginTop+vR].join(",")})`,children:[S.jsx(FOe,{arcs:i}),S.jsx(BOe,{positions:s})]})})})}const I6t=Object.freeze(Object.defineProperty({__proto__:null,default:A6t},Symbol.toStringTag,{value:"Module"}));function jOe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=ef().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(${a}, 0)`,children:[S.jsx("line",{y2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const k6t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:jOe},Symbol.toStringTag,{value:"Module"}));function UOe({data:e,barWidth:t,yScale:n}){return S.jsx("g",{children:e.map((r,i)=>S.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const R6t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:UOe},Symbol.toStringTag,{value:"Module"})),D6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function N6t({parameters:e}){const[n,r]=lI(D6t),i=iI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=ef().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(w=>+w.value),g=p.reduce((w,E)=>Number(w)+Number(E))/100,v={};p.forEach((w,E)=>{v[String.fromCharCode(E+65)]=w/g});const b=[v];return iAt().keys(e.data.map(w=>w.name))(b)},l=(h,p,m)=>h.filter((v,b)=>p.includes(b)).map(v=>({x:m,y:s(v[0][1])+.5*(s(v[0][0])-s(v[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(jOe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:"translate(0, 0)",children:S.jsx(fre,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsxs("g",{transform:"translate(0, 0)",children:[S.jsx(UOe,{data:c,barWidth:f,yScale:s}),S.jsx(dre,{positions:d})]})]})})})}const P6t=Object.freeze(Object.defineProperty({__proto__:null,default:N6t},Symbol.toStringTag,{value:"Module"}));function bge({rankings:e}){return S.jsx("div",{style:{fontFamily:"sans-serif"},children:S.jsx("div",{children:e.map((t,n)=>S.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function O6t({parameters:e,setAnswer:t}){const n=Ah(),[r,i]=P.useState(""),{goToNextStep:s,isNextDisabled:o}=cIe(),a=P.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=P.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=P.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=P.useCallback(()=>{o||s()},[o,s]);P.useEffect(()=>{const h=zze([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),S.jsxs("div",{children:[S.jsxs(Xf,{children:[S.jsxs(Xf.Col,{span:2,children:[S.jsx(bge,{rankings:a==="r1"?e.data.r1:e.data.r2}),S.jsx(gn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?S.jsx(ace,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),S.jsxs(Xf.Col,{span:2,children:[S.jsx(bge,{rankings:a==="r1"?e.data.r2:e.data.r1}),S.jsx(gn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?S.jsx(ace,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&S.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const M6t=Object.freeze(Object.defineProperty({__proto__:null,default:O6t},Symbol.toStringTag,{value:"Module"})),L6t=P.createContext(null);function nl(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let G3=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const M6={decode:function(e,t){return nl(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function zOe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(zOe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function xge(e,t,n){const r=zOe(e,t||{});return n==null||n.appendChild(r),r}var $6t=Object.freeze({__proto__:null,createElement:xge,default:xge});const F6t={fetchBlob:function(e,t,n){return nl(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){nl(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>nl(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>nl(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class B6t extends G3{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return nl(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let tK=class nK extends G3{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-m<a)return;const C=T.clientX,I=T.clientY,R=C-d,N=I-h;if(p||Math.abs(R)>s||Math.abs(N)>s){const O=t.getBoundingClientRect(),{left:L,top:j}=O;p||(r==null||r(d-L,h-j),p=!0),n(R,N,C-L,I-j),d=C,h=I}},v=T=>{if(p){const C=T.clientX,I=T.clientY,R=t.getBoundingClientRect(),{left:N,top:O}=R;i==null||i(C-N,I-O)}l()},b=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||v(T)},w=T=>{p&&(T.stopPropagation(),T.preventDefault())},E=T=>{p&&T.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const T=Math.round(E*m);if(T>v){const R=Math.round(b*c*i),N=R+Math.round(w*c*i)||1;let O=c-R;n.barAlign==="top"?O=0:n.barAlign==="bottom"&&(O=l-N),r[g](v*(d+h),O,d,N,p),v=T,b=0,w=0}const C=Math.abs(s[E]||0),I=Math.abs(o[E]||0);C>b&&(b=C),I>w&&(w=I)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const v=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,v),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(nK.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,v=g+(n.barGap||g/2);c%v!=0&&(c=Math.floor(c/v)*v)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const v=g*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const T=Math.floor(v/l*E.length),C=Math.floor((v+b)/l*E.length);return E.slice(T,C)});this.renderSingleCanvas(w,n,b,i,v,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(f).length>nK.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return nl(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return nl(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};tK.MAX_CANVAS_WIDTH=8e3,tK.MAX_NODES=10;class j6t extends G3{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class _ge extends G3{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return nl(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return nl(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return nl(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const U6t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class yP extends B6t{static create(t){return new yP(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new _ge:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},U6t,t),this.timer=new j6t;const r=n?void 0:this.getMediaElement();this.renderer=new tK(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=M6.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=M6.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return nl(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield F6t.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof _ge&&(a.duration=o)}if(r)this.decodedData=M6.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield M6.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return nl(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return nl(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return nl(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return nl(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}yP.BasePlugin=class extends G3{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},yP.dom=$6t;function z6t(e){return yP.create(e)}function V6t(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const wge=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),H6t=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:wge(i),enabled:wge(s)}};function Ege(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=V6t(i)}return n}function q6t({container:e,plugins:t=[],onMount:n,...r}){const i=P.useRef(!1),[s,o]=P.useState({}),a=P.useRef([]),[u,l]=P.useState(null);return P.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Ege(s,t);a.current=Object.keys(f);const d=z6t({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),P.useEffect(()=>{if(u){const c=Ege(s,t),{disabled:f,enabled:d}=H6t(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function VOe({children:e,plugins:t=[],onMount:n,...r}){const i=q6t({plugins:t,onMount:n,...r});return fi.createElement(L6t.Provider,{value:i},e)}const HOe=({id:e="waveform",children:t})=>fi.createElement("div",{id:e},t);function AH(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class qOe{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}let W6t=class extends qOe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class G6t extends qOe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const Y6t=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class hre extends W6t{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new G6t,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new hre(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const v=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),v)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return AH(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return AH(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Y6t.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return AH(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function WOe({width:e=70,height:t=36}){const n=P.useRef(null),r=P.useRef(null),[i,s]=P.useState(!1);P.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(hre.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=P.useCallback(a=>{n.current=a,s(!0)},[]);return S.jsx(je,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:S.jsx(VOe,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:S.jsx(HOe,{id:"waveform",height:t})})})}function Sge({setAnswer:e}){return P.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),S.jsx(ma,{style:{height:"70%",width:"100%"},children:S.jsxs(uo,{children:[S.jsx(lt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),S.jsx(lt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),S.jsx(lt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),S.jsx(ma,{children:S.jsx(WOe,{height:200,width:400})})]})})}const K6t=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Sge,default:Sge},Symbol.toStringTag,{value:"Module"}));function X6t(){return S.jsx("div",{children:"test react file"})}const Q6t=Object.freeze(Object.defineProperty({__proto__:null,default:X6t},Symbol.toStringTag,{value:"Module"}));function J6t({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=P.useRef(null),o=10,a=P.useCallback(u=>{const l=si("#Circle"),c=si("#click_svg"),f=DF(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return S.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:S.jsx("svg",{id:"click_svg",width:400,height:400,children:S.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const Z6t=Object.freeze(Object.defineProperty({__proto__:null,default:J6t},Symbol.toStringTag,{value:"Module"}));function pre({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?D3("%B"):Tx(".2s"))(c),[s]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?S.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>S.jsxs("g",{transform:`translate(${f}, ${n})`,children:[S.jsx("line",{y2:"6",stroke:"currentColor"}),o?S.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,S.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:S.jsx(ma,{children:S.jsx(ss,{withinPortal:!0,label:c,children:S.jsx(lt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const eMt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:pre},Symbol.toStringTag,{value:"Module"}));function GOe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>S.jsxs("g",{transform:`translate(${n}, ${l})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),s?S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,S.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:S.jsx("foreignObject",{width:a,height:20,children:S.jsx(Yr,{style:{width:"100%",height:"100%"},justify:"right",children:S.jsx(lt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const tMt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:GOe},Symbol.toStringTag,{value:"Module"})),Hd={top:15,left:100,right:50,bottom:50};function rK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=td(),o=P.useMemo(()=>s-Hd.left-Hd.right,[s]),a=P.useMemo(()=>i-Hd.top-Hd.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ax(j9).domain(d)},[n,t.category]),l=P.useMemo(()=>e?ef([Hd.left,o+Hd.left]).domain([0,Uy(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?iI([Hd.top,a+Hd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:S.jsxs("g",{children:[S.jsx("rect",{x:Hd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Hd.left},h),S.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?S.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S.jsx(pre,{xScale:l,yRange:c.range(),vertPosition:a+Hd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?S.jsx(GOe,{yScale:c,horizontalPosition:Hd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):S.jsx(df,{})}const nMt=Object.freeze(Object.defineProperty({__proto__:null,Bar:rK,default:rK},Symbol.toStringTag,{value:"Module"}));function YOe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Tx(".2s"),[]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ma,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>S.jsxs("g",{transform:`translate(${n}, ${a})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),S.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const rMt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:YOe},Symbol.toStringTag,{value:"Module"})),IH=15;function KOe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=si("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<IH&&Math.abs(t(g[r.y])-p[1])<IH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const v=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,v.length===0?"clear":"drag",v)}else{const g=Array.from(new Set([...s.ids,...m.map(v=>v[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),S.jsx("circle",{style:{cursor:l?"pointer":"default"},r:IH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const iMt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:KOe},Symbol.toStringTag,{value:"Module"})),ks={top:15,left:100,right:15,bottom:70};function iK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=td(),[c]=td(),[f]=td(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-ks.left-ks.right,[l]),m=P.useMemo(()=>u-ks.top-ks.bottom,[u]),g=P.useMemo(()=>{const O=Array.from(new Set(s.map(L=>L[i.category])));return Ax(j9).domain(O)},[s,i.category]),{xMin:v,yMin:b,xMax:w,yMax:E}=P.useMemo(()=>{const O=s.map(J=>+J[i.x]).filter(J=>J!==null),[L,j]=VN(O),F=s.map(J=>+J[i.y]).filter(J=>J!==null),[H,Q]=VN(F);return{xMin:L,xMax:j,yMin:H,yMax:Q}},[s,i.x,i.y]),T=P.useMemo(()=>{const O=w-v;return p<=0?null:i.dataType==="date"?gte([ks.left,p+ks.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ef([ks.left,p+ks.left]).domain([v-O/10,w+O/10]).nice()},[i.dataType,p,w,v]),C=P.useMemo(()=>{const O=E-b;return m<=0?null:ef([m+ks.top,ks.top]).domain([b-O/10,E+O/10]).nice()},[m,E,b]),I=P.useMemo(()=>{if(!T||!C)return()=>null;if(r==="Axis Selection"){const O=bke().extent([[ks.left,ks.top+m-5],[ks.left+p,ks.top+m+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],T,C,j.mode)}),L=xke().extent([[ks.left-5,ks.top],[ks.left+5,ks.top+m]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],T,C,j.mode)});return c.current&&f.current&&(si(f.current).call(L),si(c.current).call(O),t.hasBrush||(si(f.current).call(L.move,[C(E),C(b)]),si(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"drag"))),()=>{si(f.current).call(L.move,[C(E),C(b)]),si(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"clear")}}if(r==="Rectangular Selection"){const O=_ke().extent([[ks.left,ks.top],[ks.left+p,ks.top+m]]).on("brush",L=>{L.sourceEvent!==void 0&&n([[L.selection[0][0],L.selection[0][1]],[L.selection[1][0],L.selection[1][1]]],T,C,L.mode)}).on("end",L=>{L.selection===null&&L.sourceEvent!==void 0&&(si(a.current).call(O.move,null),e(null))});return si(a.current).call(O),()=>{si(a.current).call(O.move,null),n([[null,null],[null,null]],T,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[T(v),C(E)],[T(w),C(b)]],T,C,null),()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear")):r==="Paintbrush Selection"?()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,v,T,E,b,C]),R=P.useMemo(()=>o.length===0?null:new Set(o),[o]),N=P.useMemo(()=>!T||!C?null:s.map((O,L)=>{if(O[i.x]===null||O[i.y]===null)return null;const j=i.dataType==="date"?T(new Date(O[i.x])):T(O[i.x]);return S.jsx("circle",{opacity:R&&!R.has(O[i.ids])?.3:1,r:3,fill:R&&!R.has(O[i.ids])?"lightgray":g(O[i.category]),cx:j,cy:C(O[i.y])},L)}),[R,g,s,i.category,i.dataType,i.ids,i.x,i.y,T,C]);return P.useEffect(()=>{r==="Axis Selection"&&BIe(".handle").style("fill","darkgrey")},[t,r]),S.jsxs(uo,{children:[S.jsxs(Yr,{children:[S.jsx(gn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),I==null||I()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?S.jsx(IB,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:O=>h(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),S.jsxs(Yr,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[S.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&C?S.jsxs("g",{children:[S.jsx(YOe,{yScale:C,label:i.y,horizontalPosition:ks.left,xRange:T.range()}),S.jsx(pre,{xScale:T,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+ks.top,label:i.x,ticks:T.ticks(i.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:T(O)}))})]}):null,N,S.jsx("g",{id:"brushXRef",ref:c}),S.jsx("g",{id:"brushYRef",ref:f}),T&&C&&r==="Paintbrush Selection"?S.jsx(KOe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:T,yScale:C}):null]}),r==="Slider Selection"&&T&&C?S.jsxs(uo,{style:{flexGrow:1},gap:50,children:[S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.x}),S.jsx(yC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[T(O[0]),t.y1],[T(O[1]),t.y2]],T,C,"drag")},style:{width:"300px"},marks:T.ticks(5).map(O=>({value:O,label:O})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.y}),S.jsx(yC,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:O=>{n([[t.x1,C(O[1])],[t.x2,C(O[0])]],T,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(O=>({value:O,label:O})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const sMt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:iK,default:iK},Symbol.toStringTag,{value:"Module"}));function Tge({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{Kee(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?NOe(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=kx.create(),v=g.register("brush",(C,I)=>(C.all={brush:I},C)),b=g.register("brushMove",(C,I)=>(C.all={brush:I},C)),w=g.register("brushResize",(C,I)=>(C.all={brush:I},C)),E=g.register("brushClear",(C,I)=>(C.all={brush:I},C)),T=uI({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:w,clearBrush:E},trrack:T}},[]),f=P.useCallback((g,v)=>{g==="drag"?c.apply("Move Brush",l.brushMove(v)):g==="handle"&&c.apply("Brush",l.brush(v))},[l,c]),d=P.useMemo(()=>lp(f,100,{maxWait:100}),[f]),h=P.useCallback((g,v,b,w,E)=>{if(!v||!b)return;const T=v.invert(g[0][0]||i.x1),C=v.invert(g[1][0]||i.x2),I=b.invert(g[1][1]||i.y2),R=b.invert(g[0][1]||i.y1);let N=null;if(w==="clear")N=u;else if(E){const L=new Set(E);N=u.filter(tC(j=>L.has(j[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(tC(L=>new Date(L[e.x])>=new Date(T)&&new Date(L[e.x])<=new Date(C)&&L[e.y]>=I&&L[e.y]<=R)):N=u.filter(tC(L=>L[e.x]>=T&&L[e.x]<=C&&L[e.y]>=I&&L[e.y]<=R));const O={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?N==null?void 0:N.array("id"):[]};s(O),w==="drag"||w==="handle"?d(w,O):w==="clear"&&c.apply("Clear Brush",l.clearBrush(O)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?S.jsxs(uo,{gap:"xs",children:[S.jsx(iK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),S.jsx(rK,{data:o,parameters:e,barsTable:p})]}):S.jsx(df,{})}const oMt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Tge,default:Tge},Symbol.toStringTag,{value:"Module"})),aMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),uMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),lMt="_chartWrapper_hwk6h_1",cMt="_tooltip_hwk6h_5",fMt="_searching_hwk6h_16",dMt="_bubble_hwk6h_17",hMt="_bubbleSelected_hwk6h_26",Av={chartWrapper:lMt,tooltip:cMt,searching:fMt,bubble:dMt,bubbleSelected:hMt},Cge="COSTT4_A",XOe="MD_EARN_WNE_P10",VT="ADM_RATE",bR="INSTNM",pMt=300,mMt=["#5e3c99","#b2abd2","#fdb863","#e66101"],sK=720,gMt=ate().size([sK,sK]).padding(5),yMt={left:0,right:100,top:0,bottom:0};function vMt(e){let t=e.filter(r=>!(Number.isNaN(+r[Cge])||Number.isNaN(+r[XOe])||Number.isNaN(+r[VT])||+r[VT]==0));t=t.sort((r,i)=>+r[VT]-+i[VT]),t=t.filter((r,i)=>i<pMt);const n=I3({children:t}).sum(r=>+r[Cge]).sort((r,i)=>+!r.children-+!i.children||+r.data[VT]-+i.data[VT]);return gMt(n),n}function bMt(e,t){return e.toLowerCase().includes(t.toLowerCase())}const xMt=P.memo(ME);function _Mt({parameters:e,setAnswer:t,provenanceState:n}){const{data:r}=e,i=P.useRef(null),[s,o]=P.useState(null),[a,u]=P.useState({}),[l,c]=P.useState({}),[f,d]=P.useState(null),[h,p]=P.useState(""),[m,g]=P.useState(""),[v,b]=P.useState([]),w=P.useMemo(()=>{if(f){const R=f[bR];return l[R]}return null},[f,l]);P.useEffect(()=>{n?(d(n.all.hoveredItem),p(n.all.searchValue||"")):(d(null),p(""))},[n]);const{actions:E,trrack:T}=P.useMemo(()=>{const R=kx.create(),N=R.register("hoverItem",(j,F)=>(j.all.hoveredItem=F,j)),O=R.register("searchInProgress",(j,F)=>(j.all.searchValue=F,j)),L=uI({registry:R,initialState:{all:{hoveredItem:null,searchValue:null}}});return{actions:{hover:N,searchInProgress:O},trrack:L}},[]),C=P.useMemo(()=>s&&s.children?s.children.map(R=>R.data.INSTNM):[],[s]);P.useEffect(()=>{Kee(r).then(R=>{var j;const N=vMt(R);o(N);const O={},L={};(j=N.children)==null||j.forEach(F=>{O[F.data[bR]]=F.data,L[F.data[bR]]=F}),u(O),c(L)})},[r]),P.useEffect(()=>{const R=si(i.current),N=dte().range(mMt).domain([13e3**2,65e3**2]);if(!s)return;const O=R.selectAll("circle").data(s.descendants().slice(1)).enter().append("circle").attr("r",Q=>Q.r).attr("cx",Q=>Q.x).attr("cy",Q=>Q.y).filter(Q=>!!Q.data).style("fill",Q=>N((+Q.data[XOe])**2)).classed(Av.bubble,!0);O.on("mouseover",(Q,J)=>{J.data.children||(d(J.data),T.apply("Hover",E.hover(J.data)),t({status:!0,provenanceGraph:T.graph.backend,answers:{}}))}),O.on("mouseout",()=>{d(null),T.apply("Hover",E.hover(null)),t({status:!0,provenanceGraph:T.graph.backend,answers:{}})});const L=R.append("g").classed("legend",!0);let j=40;const F=20,H=10;L.append("text").attr("x",sK+yMt.right).attr("y",j).text("Distance to Center: Admission Rate (%)"),j+=H+F},[s,T,t,E]),P.useEffect(()=>{const R=si(i.current);R.selectAll(`.${Av.bubble}`).classed(Av.bubbleSelected,!1),R.selectAll(`.${Av.bubble}`).filter(O=>v.some(L=>L[bR]===O.data[bR])).classed(Av.bubbleSelected,!0)},[v]),P.useEffect(()=>{const R=C.filter(N=>bMt(N,h));b(m&&h===""?[a[m]]:R.map(N=>a[N]))},[h,a,m,C]);const I=P.useCallback(R=>{p(R||""),T.apply("Search Value",E.searchInProgress(R||"")),t({status:!0,provenanceGraph:T.graph.backend,answers:{}})},[T,t,E]);return S.jsxs("div",{children:[S.jsx(xMt,{searchable:!0,searchValue:h,onSearchChange:I,onChange:g,label:"Search",placeholder:"Search for college...",data:C}),S.jsxs("div",{className:co(Av.chartWrapper,{[Av.searching]:h!==""}),style:{height:"720px"},children:[S.jsx("svg",{ref:i,style:{height:720,width:720}}),w&&S.jsxs("div",{className:Av.tooltip,style:{left:w.x,top:w.y},children:[S.jsx("div",{children:S.jsx("strong",{children:w.data.INSTNM})}),S.jsxs("div",{children:["Admission Rate:"," ",Math.round(+w.data.ADM_RATE*1e4)/100,"%"]}),S.jsxs("div",{children:["Annual Cost:"," ","$",w.data.COSTT4_A]}),S.jsxs("div",{children:["Median of Earnings:"," ","$",w.data.MD_EARN_WNE_P10]})]})]})]})}const wMt=Object.freeze(Object.defineProperty({__proto__:null,default:_Mt},Symbol.toStringTag,{value:"Module"}));class EMt extends fi.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?S.jsx(lt,{children:this.state.error.toString()}):this.props.children}}const Age=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":QIt,"../public/example-brush-interactions/assets/Bar.tsx":ekt,"../public/example-brush-interactions/assets/BrushPlot.tsx":u6t,"../public/example-brush-interactions/assets/Paintbrush.tsx":o6t,"../public/example-brush-interactions/assets/Scatter.tsx":a6t,"../public/example-brush-interactions/assets/XAxisBar.tsx":JIt,"../public/example-brush-interactions/assets/YAxis.tsx":s6t,"../public/example-brush-interactions/assets/YAxisBar.tsx":ZIt,"../public/example-brush-interactions/assets/types.ts":l6t,"../public/example-cleveland/assets/BarChart.tsx":m6t,"../public/example-cleveland/assets/BubbleChart.tsx":w6t,"../public/example-cleveland/assets/PieChart.tsx":I6t,"../public/example-cleveland/assets/StackedBarChart.tsx":P6t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":c6t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":g6t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":y6t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":k6t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":f6t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":d6t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":E6t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":S6t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":R6t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":YIt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":M6t,"../public/libraries/mic-check/assets/AudioTest.tsx":K6t,"../public/libraries/test/assets/test.tsx":Q6t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":Z6t,"../public/tutorial/react-and-randomization/assets/Bar.tsx":nMt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":oMt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":iMt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":sMt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":eMt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":rMt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":tMt,"../public/tutorial/react-and-randomization/assets/some.tsx":aMt,"../public/tutorial/react-and-randomization/assets/types.ts":uMt,"../public/vis-search/assets/SearchBubbleChart.tsx":wMt});function SMt({currentConfig:e,provState:t}){const n=Ch(),r=Ah(),i=`../public/${e.path}`,s=i in Age?Age[i].default:null,o=bl(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Tu(),l=P.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return S.jsx(P.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:s?S.jsx(EMt,{children:S.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):S.jsx(Ob,{path:e.path})})}function TMt({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function s(){const o=await Pee(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?S.jsx(fl,{text:t}):S.jsx(Ob,{path:e.path})}function _I(e){return e.baseComponent!==void 0}function QOe(){const e=Ch(),{setAlertModal:t}=Tu(),n=bl();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Ige=Object.prototype.hasOwnProperty;function kge(e,t,n){for(n of e.keys())if(sN(n,t))return n}function sN(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&sN(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=kge(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=kge(t,i),!i)||!sN(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Ige.call(e,n)&&++r&&!Ige.call(t,n)||!(n in t)||!sN(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function CMt(e){var t=P.useRef(e),n=P.useRef(0);return sN(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function AMt(e,t){return P.useEffect(e,CMt(t))}const e8=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,s]=P.useState(null),[o,a]=P.useState(null),u=P.useRef(null),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return AMt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function JOe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const IMt="_root_1spq0_1",kMt="_description_1spq0_9",RMt="_title_1spq0_10",DMt="_closeButton_1spq0_14",NMt={root:IMt,description:kMt,title:RMt,closeButton:DMt},vP=e=>{const{title:t,message:n,color:r}=e;FE.show({title:t,message:n,position:"top-center",classNames:NMt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Rge=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],ZOe=["participantId","trialId","trialOrder","responseId"];function mre(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function PMt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(zp(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=_I(u)&&u.baseComponent&&n.baseComponents?Ree({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=JOe(s);return Object.entries(s.answer).map(([h,p])=>{var v,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const w=(b=(v=l.correctAnswer)==null?void 0:v.find(E=>E.id===h))==null?void 0:b.answer;m.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function OMt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...ZOe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await PMt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function MMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=P.useState([...Rge].filter(p=>p!=="meta")),a=ho(),{value:u,status:l,error:c}=e8(OMt,[s,r,a.storageEngine,i]),f=P.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);mre(p,n)},[n,u]),d=P.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),vP({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=P.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return S.jsxs(Vs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[S.jsx(mJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Rge],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:S.jsx(JZe,{}),variant:"filled"}),S.jsx(rd,{h:"md"}),S.jsxs(je,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?S.jsxs(En,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:u.header.map(p=>S.jsx(En.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:S.jsxs(an,{direction:"row",justify:"space-between",align:"center",children:[p,!ZOe.includes(p)&&S.jsx(mx,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:S.jsx(e3,{size:16})})]})},p))})}),S.jsx(En.Tbody,{children:u.rows.slice(0,5).map((p,m)=>S.jsx(En.Tr,{children:u.header.map(g=>S.jsx(En.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?S.jsx(My,{variant:"light",children:c.message}):null,S.jsx(ld,{visible:l==="pending"||l==="idle"})]}),S.jsx(rd,{h:"sm"}),S.jsx(an,{justify:"center",fz:"sm",c:"dimmed",children:S.jsx(lt,{children:h})}),S.jsx(rd,{h:"md"}),S.jsxs(Yr,{justify:"right",children:[S.jsx(gn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),S.jsx(gn,{leftSection:S.jsx(wSe,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&S.jsx(gn,{onClick:d,children:S.jsx(zZe,{})})]})]})}function LMt(){const e=s1(),{storageEngine:t}=ho(),n=yi(w=>w.answers),r=eI(),[i,s]=P.useState(!1);P.useEffect(()=>{if(r){s(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(w))},1e3)},[]),QOe();const[o,a]=P.useState(),[u,l]=P.useState(""),c=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(E),a(T)}}w()},[t]);const f=P.useCallback(async()=>{mre(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=P.useState(Math.floor(h/1e3));P.useEffect(()=>{if(i){const w=setInterval(()=>{m(E=>E-1)},1e3);return p<=0?(d&&f(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,i,p,f]);const g=GE(),[v,b]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(g);b(E.dataCollectionEnabled)}})()},[t,g]),S.jsx(ma,{style:{height:"100%"},children:S.jsx(an,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?S.jsx(fl,{text:e.uiConfig.studyEndMsg}):S.jsx(lt,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):S.jsxs(S.Fragment,{children:[S.jsx(lt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),S.jsx(rd,{h:"lg"}),S.jsx(ma,{children:S.jsx(df,{color:"blue"})})]})})})}function $Mt(){return S.jsx(lt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function FMt(){return S.jsx(lt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Dge={};function oK(e,t){e===void 0&&(e=Dge),t===void 0&&(t=Dge);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var BMt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jMt=Object.prototype.hasOwnProperty;function aK(e,t){return jMt.call(e,t)}function uK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)aK(e,i)&&r.push(i);return r}function Zf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function lK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function sw(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function e4e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function cK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(cK(e[t]))return!0}else if(typeof e=="object"){for(var r=uK(e),i=r.length,s=0;s<i;s++)if(cK(e[r[s]]))return!0}}return!1}function Nge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var t4e=function(e){BMt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Nge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Nge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),no=t4e,UMt=Zf,I2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=t8(n,this.path);r&&(r=Zf(r));var i=Uw(n,{op:"remove",path:this.from}).removed;return Uw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=t8(n,this.from);return Uw(n,{op:"add",path:this.path,value:Zf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:bP(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},zMt={add:function(e,t,n){return lK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:I2.move,copy:I2.copy,test:I2.test,_get:I2._get};function t8(e,t){if(t=="")return e;var n={op:"_get",path:t};return Uw(e,n),n.value}function Uw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):n8(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=t8(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=bP(e,t.value),o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Zf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=n8;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=e4e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!lK(h))throw new no("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);lK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new no("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=zMt[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=I2[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new no("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function gj(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Zf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Uw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function VMt(e,t,n){var r=Uw(e,t);if(r.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function n8(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new no("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(I2[e.op]){if(typeof e.path!="string")throw new no("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new no('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new no("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&cK(e.value))throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new no("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new no("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=n4e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new no("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function n4e(e,t,n){try{if(!Array.isArray(e))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)gj(Zf(t),Zf(e),n||!0);else{n=n||n8;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof no)return i;throw i}}function bP(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!bP(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!bP(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const HMt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:no,_areEquals:bP,applyOperation:Uw,applyPatch:gj,applyReducer:VMt,deepClone:UMt,getValueByPointer:t8,validate:n4e,validator:n8},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var gre=new WeakMap,qMt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),WMt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function GMt(e){return gre.get(e)}function YMt(e,t){return e.observers.get(t)}function KMt(e,t){e.observers.delete(t.callback)}function XMt(e,t){t.unobserve()}function QMt(e,t){var n=[],r,i=GMt(e);if(!i)i=new qMt(e),gre.set(e,i);else{var s=YMt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Zf(e),t){r.callback=t,r.next=null;var o=function(){fK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){fK(r),clearTimeout(r.next),KMt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new WMt(t,r)),r}function fK(e,t){t===void 0&&(t=!1);var n=gre.get(e.object);yre(n.value,e.object,e.patches,"",t),e.patches.length&&gj(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function yre(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=uK(t),o=uK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(aK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?yre(c,f,n,r+"/"+sw(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+sw(l),value:Zf(c)}),n.push({op:"replace",path:r+"/"+sw(l),value:Zf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+sw(l),value:Zf(c)}),n.push({op:"remove",path:r+"/"+sw(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!aK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+sw(l),value:Zf(t[l])})}}}function JMt(e,t,n){n===void 0&&(n=!1);var r=[];return yre(e,t,r,"",n),r}const ZMt=Object.freeze(Object.defineProperty({__proto__:null,compare:JMt,generate:fK,observe:QMt,unobserve:XMt},Symbol.toStringTag,{value:"Module"}));Object.assign({},HMt,ZMt,{JsonPatchError:t4e,deepClone:Zf,escapePathComponent:sw,unescapePathComponent:e4e});var kH,Pge;function eLt(){if(Pge)return kH;Pge=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return kH=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,g,v,b,w,E,T,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,o),T===void 0)return T;if(v=s-l.length-c,T.length<=v&&(w=T.replace(e,function(I,R){return R||I+" "}),w.length<=v))return w;if(o!=null&&(u=JSON.parse(T),o=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],d=0,Array.isArray(u))for(E="[",f="]",v=u.length;d<v;d++)h.push(a(u[d],b,d===v-1?0:1)||"null");else for(E="{",f="}",g=Object.keys(u),v=g.length;d<v;d++)p=g[d],m=JSON.stringify(p)+": ",C=a(u[p],b,m.length+(d===v-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[E,i+h.join(`,
`+b),f].join(`
`+l)}return T}(n,"",0)},kH}var tLt=eLt();const RH=vh(tLt);function pf(e,t,n){return e.fields=t||[],e.fname=n,e}function lo(e){return e==null?null:e.fname}function al(e){return e==null?null:e.fields}function r4e(e){return e.length===1?nLt(e[0]):rLt(e)}const nLt=e=>function(t){return t[e]},rLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ut(e){throw Error(e)}function dg(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||ut("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&ut("Access path missing closing bracket: "+e),r&&ut("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function dh(e,t,n){const r=dg(e);return e=r.length===1?r[0]:e,pf((n&&n.get||r4e)(r),[e],t||e)}const Y3=dh("id"),pl=pf(e=>e,[],"identity"),Qv=pf(()=>0,[],"zero"),wI=pf(()=>1,[],"one"),hh=pf(()=>!0,[],"true"),Pv=pf(()=>!1,[],"false");function iLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const i4e=0,vre=1,bre=2,s4e=3,o4e=4;function xre(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iLt,r=e||i4e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=vre&&n(t||"error","ERROR",arguments),this},warn(){return r>=bre&&n(t||"warn","WARN",arguments),this},info(){return r>=s4e&&n(t||"log","INFO",arguments),this},debug(){return r>=o4e&&n(t||"log","DEBUG",arguments),this}}}var ft=Array.isArray;function Ht(e){return e===Object(e)}const Oge=e=>e!=="__proto__";function EI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=sLt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;SI(r,s,i[s],o)}return r},{})}function SI(e,t,n,r){if(!Oge(t))return;let i,s;if(Ht(n)&&!ft(n)){s=Ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?SI(s,i,n[i]):Oge(i)&&(s[i]=n[i])}else e[t]=n}function sLt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kr(e){return e[e.length-1]}function sl(e){return e==null||e===""?null:+e}const a4e=e=>t=>e*Math.exp(t),u4e=e=>t=>Math.log(e*t),l4e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),c4e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,r8=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function yj(e,t,n,r){const i=n(e[0]),s=n(Kr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function f4e(e,t){return yj(e,t,sl,pl)}function d4e(e,t){var n=Math.sign(e[0]);return yj(e,t,u4e(n),a4e(n))}function h4e(e,t,n){return yj(e,t,r8(n),r8(1/n))}function p4e(e,t,n){return yj(e,t,l4e(n),c4e(n))}function vj(e,t,n,r,i){const s=r(e[0]),o=r(Kr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function _re(e,t,n){return vj(e,t,n,sl,pl)}function wre(e,t,n){const r=Math.sign(e[0]);return vj(e,t,n,u4e(r),a4e(r))}function i8(e,t,n,r){return vj(e,t,n,r8(r),r8(1/r))}function Ere(e,t,n,r){return vj(e,t,n,l4e(r),c4e(r))}function m4e(e){return 1+~~(new Date(e).getMonth()/3)}function g4e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Wt(e){return e!=null?ft(e)?e:[e]:[]}function y4e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const oLt="descending";function Sre(e,t,n){n=n||{},t=Wt(t)||[];const r=[],i=[],s={},o=n.comparator||aLt;return Wt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===oLt?-1:1),i.push(a=cr(a)?a:dh(a,null,n)),(al(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:pf(o(i,r),Object.keys(s))}const bj=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),aLt=(e,t)=>e.length===1?uLt(e[0],t[0]):lLt(e,t,e.length),uLt=(e,t)=>function(n,r){return bj(e(n),e(r))*t},lLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=bj(s(r),s(i));return o*t[a]});function ml(e){return cr(e)?e:()=>e}function Tre(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function J0(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function v4e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const cLt=Object.prototype.hasOwnProperty;function Jt(e,t){return cLt.call(e,t)}const L6={};function TI(e){let t={},n;function r(s){return Jt(t,s)&&t[s]!==L6}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===L6&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=L6),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==L6&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function b4e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function zt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function k2(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ox(e){return typeof e=="boolean"}function bb(e){return Object.prototype.toString.call(e)==="[object Date]"}function x4e(e){return e&&cr(e[Symbol.iterator])}function bi(e){return typeof e=="number"}function _4e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Gt(e){return typeof e=="string"}function Cre(e,t,n){e&&(e=t?Wt(e).map(a=>a.replace(/\\(.)/g,"$1")):Wt(e));const r=e&&e.length,i=n&&n.get||r4e,s=a=>i(t?[a]:dg(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return pf(o,e,"key")}function w4e(e,t){const n=e[0],r=Kr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const fLt=1e4;function E4e(e){e=+e||fLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Jt(t,o)||Jt(n,o),get:o=>Jt(t,o)?t[o]:Jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Jt(t,o)?t[o]=a:s(o,a)}}function S4e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function mD(e,t){let n="";for(;--t>=0;)n+=e;return n}function T4e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?mD(i,o)+s:r==="center"?mD(i,~~(o/2))+s+mD(i,Math.ceil(o/2)):s+mD(i,o)}function K3(e){return e&&Kr(e)-e[0]||0}function jt(e){return ft(e)?"["+e.map(jt)+"]":Ht(e)||Gt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Are(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const dLt=e=>bi(e)||bb(e)?e:Date.parse(e);function Ire(e,t){return t=t||dLt,e==null||e===""?null:t(e)}function kre(e){return e==null||e===""?null:e+""}function Wp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function C4e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function jv(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function hLt(e){return e}function pLt(e){if(e==null)return hLt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function mLt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function gLt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Mge(e,n)})}:Mge(e,t)}function Mge(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=A4e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function A4e(e,t){var n=pLt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&mLt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function yLt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function vLt(e){return A4e(e,bLt.apply(this,arguments))}function bLt(e,t,n){var r,i,s;if(arguments.length>1)r=xLt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:yLt(e,r)}}function xLt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const wu="year",of="quarter",ul="month",ca="week",af="date",rl="day",Z0="dayofyear",gd="hours",yd="minutes",ph="seconds",Gp="milliseconds",Rre=[wu,of,ul,ca,af,rl,Z0,gd,yd,ph,Gp],DH=Rre.reduce((e,t,n)=>(e[t]=1+n,e),{});function Dre(e){const t=Wt(e).slice(),n={};return t.length||ut("Missing time unit."),t.forEach(i=>{Jt(DH,i)?n[i]=1:ut(`Invalid time unit: ${i}.`)}),(n[ca]||n[rl]?1:0)+(n[of]||n[ul]||n[af]?1:0)+(n[Z0]?1:0)>1&&ut(`Incompatible time units: ${e}`),t.sort((i,s)=>DH[i]-DH[s]),t}const _Lt={[wu]:"%Y ",[of]:"Q%q ",[ul]:"%b ",[af]:"%d ",[ca]:"W%U ",[rl]:"%a ",[Z0]:"%j ",[gd]:"%H:00",[yd]:"00:%M",[ph]:":%S",[Gp]:".%L",[`${wu}-${ul}`]:"%Y-%m ",[`${wu}-${ul}-${af}`]:"%Y-%m-%d ",[`${gd}-${yd}`]:"%H:%M"};function I4e(e,t){const n=lr({},_Lt,t),r=Dre(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const cw=new Date;function Nre(e){return cw.setFullYear(e),cw.setMonth(0),cw.setDate(1),cw.setHours(0,0,0,0),cw}function k4e(e){return D4e(new Date(e))}function R4e(e){return dK(new Date(e))}function D4e(e){return Vy.count(Nre(e.getFullYear())-1,e)}function dK(e){return sI.count(Nre(e.getFullYear())-1,e)}function hK(e){return Nre(e).getDay()}function wLt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function N4e(e){return O4e(new Date(e))}function P4e(e){return pK(new Date(e))}function O4e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return gb.count(t-1,e)}function pK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return oI.count(t-1,e)}function mK(e){return cw.setTime(Date.UTC(e,0,1)),cw.getUTCDay()}function ELt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function M4e(e,t,n,r,i){const s=t||1,o=Kr(e),a=(v,b,w)=>(w=w||v,SLt(n[w],r[w],v===o&&s,b)),u=new Date,l=Wp(e),c=l[wu]?a(wu):ml(2012),f=l[ul]?a(ul):l[of]?a(of):Qv,d=l[ca]&&l[rl]?a(rl,1,ca+rl):l[ca]?a(ca,1):l[rl]?a(rl,1):l[af]?a(af,1):l[Z0]?a(Z0,1):wI,h=l[gd]?a(gd):Qv,p=l[yd]?a(yd):Qv,m=l[ph]?a(ph):Qv,g=l[Gp]?a(Gp):Qv;return function(v){u.setTime(+v);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function SLt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function QC(e,t,n){return t+e*7-(n+6)%7}const TLt={[wu]:e=>e.getFullYear(),[of]:e=>Math.floor(e.getMonth()/3),[ul]:e=>e.getMonth(),[af]:e=>e.getDate(),[gd]:e=>e.getHours(),[yd]:e=>e.getMinutes(),[ph]:e=>e.getSeconds(),[Gp]:e=>e.getMilliseconds(),[Z0]:e=>D4e(e),[ca]:e=>dK(e),[ca+rl]:(e,t)=>QC(dK(e),e.getDay(),hK(t)),[rl]:(e,t)=>QC(1,e.getDay(),hK(t))},CLt={[of]:e=>3*e,[ca]:(e,t)=>QC(e,0,hK(t))};function L4e(e,t){return M4e(e,t||1,TLt,CLt,wLt)}const ALt={[wu]:e=>e.getUTCFullYear(),[of]:e=>Math.floor(e.getUTCMonth()/3),[ul]:e=>e.getUTCMonth(),[af]:e=>e.getUTCDate(),[gd]:e=>e.getUTCHours(),[yd]:e=>e.getUTCMinutes(),[ph]:e=>e.getUTCSeconds(),[Gp]:e=>e.getUTCMilliseconds(),[Z0]:e=>O4e(e),[ca]:e=>pK(e),[rl]:(e,t)=>QC(1,e.getUTCDay(),mK(t)),[ca+rl]:(e,t)=>QC(pK(e),e.getUTCDay(),mK(t))},ILt={[of]:e=>3*e,[ca]:(e,t)=>QC(e,0,mK(t))};function $4e(e,t){return M4e(e,t||1,ALt,ILt,ELt)}const kLt={[wu]:H0,[of]:ZN.every(3),[ul]:ZN,[ca]:sI,[af]:Vy,[rl]:Vy,[Z0]:Vy,[gd]:L9,[yd]:O9,[ph]:Dy,[Gp]:OC},RLt={[wu]:q0,[of]:eP.every(3),[ul]:eP,[ca]:oI,[af]:gb,[rl]:gb,[Z0]:gb,[gd]:$9,[yd]:M9,[ph]:Dy,[Gp]:OC};function CI(e){return kLt[e]}function AI(e){return RLt[e]}function F4e(e,t,n){return e?e.offset(t,n):void 0}function B4e(e,t,n){return F4e(CI(e),t,n)}function j4e(e,t,n){return F4e(AI(e),t,n)}function U4e(e,t,n,r){return e?e.range(t,n,r):void 0}function z4e(e,t,n,r){return U4e(CI(e),t,n,r)}function V4e(e,t,n,r){return U4e(AI(e),t,n,r)}const gD=1e3,yD=gD*60,vD=yD*60,xj=vD*24,DLt=xj*7,Lge=xj*30,gK=xj*365,H4e=[wu,ul,af,gd,yd,ph,Gp],bD=H4e.slice(0,-1),xD=bD.slice(0,-1),_D=xD.slice(0,-1),NLt=_D.slice(0,-1),PLt=[wu,ca],$ge=[wu,ul],q4e=[wu],xR=[[bD,1,gD],[bD,5,5*gD],[bD,15,15*gD],[bD,30,30*gD],[xD,1,yD],[xD,5,5*yD],[xD,15,15*yD],[xD,30,30*yD],[_D,1,vD],[_D,3,3*vD],[_D,6,6*vD],[_D,12,12*vD],[NLt,1,xj],[PLt,1,DLt],[$ge,1,Lge],[$ge,3,3*Lge],[q4e,1,gK]];function W4e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(K3(t))/n;let i=tI(a=>a[2]).right(xR,r),s,o;return i===xR.length?(s=q4e,o=Lb(t[0]/gK,t[1]/gK,n)):i?(i=xR[r/xR[i-1][2]<xR[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=H4e,o=Math.max(Lb(t[0],t[1],n),1)),{units:s,step:o}}function wD(e){const t={};return n=>t[n]||(t[n]=e(n))}function OLt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=MLt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function MLt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function G4e(e){const t=wD(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=rE(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return OLt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=rE(o??",f");const a=Lb(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=kke(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Rke(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Ike(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let yK;Y4e();function Y4e(){return yK=G4e({format:Tx,formatPrefix:Zee})}function K4e(e){return G4e(Ake(e))}function s8(e){return arguments.length?yK=K4e(e):yK}function Fge(e,t,n){n=n||{},Ht(n)||ut(`Invalid time multi-format specifier: ${n}`);const r=t(ph),i=t(yd),s=t(gd),o=t(af),a=t(ca),u=t(ul),l=t(of),c=t(wu),f=e(n[Gp]||".%L"),d=e(n[ph]||":%S"),h=e(n[yd]||"%I:%M"),p=e(n[gd]||"%I %p"),m=e(n[af]||n[rl]||"%a %d"),g=e(n[ca]||"%b %d"),v=e(n[ul]||"%B"),b=e(n[of]||"%B"),w=e(n[wu]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?v:b:w)(E)}function X4e(e){const t=wD(e.format),n=wD(e.utcFormat);return{timeFormat:r=>Gt(r)?t(r):Fge(t,CI,r),utcFormat:r=>Gt(r)?n(r):Fge(n,AI,r),timeParse:wD(e.parse),utcParse:wD(e.utcParse)}}let vK;Q4e();function Q4e(){return vK=X4e({format:pte,parse:URe,utcFormat:D3,utcParse:zRe})}function J4e(e){return X4e(LRe(e))}function xP(e){return arguments.length?vK=J4e(e):vK}const bK=(e,t)=>lr({},e,t);function Z4e(e,t){const n=e?K4e(e):s8(),r=t?J4e(t):xP();return bK(n,r)}function Pre(e,t){const n=arguments.length;return n&&n!==2&&ut("defaultLocale expects either zero or two arguments."),n?bK(s8(e),xP(t)):bK(s8(),xP())}function LLt(){return Y4e(),Q4e(),Pre()}const $Lt=/^(data:|([A-Za-z]+:)?\/\/)/,FLt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BLt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Bge="file://";function jLt(e,t){return n=>({options:n||{},sanitize:zLt,load:ULt,fileAccess:!1,file:VLt(t),http:qLt(e)})}async function ULt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function zLt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=FLt.test(e.replace(BLt,""));(e==null||typeof e!="string"||!a)&&ut("Sanitize failure, invalid URI: "+jt(e));const u=$Lt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Bge))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Bge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function VLt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):HLt}async function HLt(){ut("No file system access.")}function qLt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():ut(s.status+""+s.statusText)}:WLt}async function WLt(){ut("No HTTP fetch method available.")}const GLt=e=>e!=null&&e===e,YLt=e=>e==="true"||e==="false"||e===!0||e===!1,KLt=e=>!Number.isNaN(Date.parse(e)),e6e=e=>!Number.isNaN(+e)&&!(e instanceof Date),XLt=e=>e6e(e)&&Number.isInteger(+e),xK={boolean:Are,integer:sl,number:sl,date:Ire,string:kre,unknown:pl},$6=[YLt,XLt,e6e,KLt],QLt=["boolean","integer","number","date"];function t6e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=$6.length,i=$6.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&GLt(u)&&!$6[a](u)&&(i[a]=0,++o,o===$6.length))return"string";return QLt[i.reduce((s,o)=>s===0?o:s,0)-1]}function n6e(e,t){return t.reduce((n,r)=>(n[r]=t6e(e,r),n),{})}function jge(e){const t=function(n,r){const i={delimiter:e};return Ore(n,r?lr(r,i):i)};return t.responseType="text",t}function Ore(e,t){return t.header&&(e=t.header.map(jt).join(t.delimiter)+`
`+e),Ske(t.delimiter).parse(e+"")}Ore.responseType="text";function JLt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Mre(e,t){const n=t&&t.property?dh(t.property):pl;return Ht(e)&&!JLt(e)?ZLt(n(e),t):n(JSON.parse(e))}Mre.responseType="json";function ZLt(e,t){return!ft(e)&&x4e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const e$t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function r6e(e,t){let n,r,i,s;return e=Mre(e,t),t&&t.feature?(n=gLt,i=t.feature):t&&t.mesh?(n=vLt,i=t.mesh,s=e$t[t.filter]):ut("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ut("Invalid TopoJSON object: "+i),r&&r.features||[r]}r6e.responseType="json";const y$={dsv:Ore,csv:jge(","),tsv:jge("	"),json:Mre,topojson:r6e};function Lre(e,t){return arguments.length>1?(y$[e]=t,this):Jt(y$,e)?y$[e]:null}function i6e(e){const t=Lre(e);return t&&t.responseType||"text"}function s6e(e,t,n,r){t=t||{};const i=Lre(t.type||"json");return i||ut("Unknown data format type: "+t.type),e=i(e,t),t.parse&&t$t(e,t.parse,n,r),Jt(e,"columns")&&delete e.columns,e}function t$t(e,t,n,r){if(!e.length)return;const i=xP();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=n6e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!xK[p])throw Error("Illegal format pattern: "+h+":"+p);return xK[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const _j=jLt(typeof fetch<"u"&&fetch,null);function wj(e){const t=e||pl,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function v$(e,t){try{await t(e)}catch(n){e.error(n)}}const o6e=Symbol("vega_id");let n$t=1;function Ej(e){return!!(e&&bn(e))}function bn(e){return e[o6e]}function a6e(e,t){return e[o6e]=t,e}function Ti(e){const t=e===Object(e)?e:{data:e};return bn(t)?t:a6e(t,n$t++)}function $re(e){return Sj(e,Ti({}))}function Sj(e,t){for(const n in e)t[n]=e[n];return t}function u6e(e,t){return a6e(t,bn(e))}function ZE(e,t){return e?t?(n,r)=>e(n,r)||bn(t(n))-bn(t(r)):(n,r)=>e(n,r)||bn(n)-bn(r):null}function l6e(e){return e&&e.constructor===eS}function eS(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:eS,insert(a){const u=Wt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Wt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ml(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[bn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[bn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[bn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=bn(m),l[g]?l[g]=1:a.add.push(Ti(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[bn(m)]<0&&a.rem.push(m);function v(b,w,E){E?b[w]=E(b):a.encode=w,o||(c[bn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[bn(m)],g>0&&(v(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[bn(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[bn(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const b$="_:mod:_";function Tj(){Object.defineProperty(this,b$,{writable:!0,value:{}})}Tj.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[b$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=ft(n)?1+n.length:-1),i},modified(e,t){const n=this[b$];if(arguments.length){if(ft(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[b$]={},this}};let r$t=0;const i$t="pulse",s$t=new Tj,o$t=1,a$t=2;function os(e,t,n,r){this.id=++r$t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Uge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}os.prototype={targets(){return this._targets||(this._targets=wj(Y3))},set(e){return this.value!==e?(this.value=e,1):0},skip:Uge(o$t),modified:Uge(a$t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Tj,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof os?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===i$t)Wt(a).forEach(f=>{f instanceof os?f!==this&&(f.targets().add(this),s.push(f)):ut("Pulse parameters must be operator instances.")}),this.source=a;else if(ft(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||s$t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function u$t(e,t,n,r){let i=1,s;return e instanceof os?s=e:e&&e.prototype instanceof os?s=new e:cr(e)?s=new os(null,e):(i=0,s=new os(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function l$t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let c$t=0;function Cj(e,t,n){this.id=++c$t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ov(e,t,n){return new Cj(e,t,n)}Cj.prototype={_filter:hh,_apply:pl,targets(){return this._targets||(this._targets=wj(Y3))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ov(e);return this.targets().add(t),t},apply(e){const t=Ov(null,e);return this.targets().add(t),t},merge(){const e=Ov();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ov();return this.targets().add(Ov(null,null,Tre(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ov(null,null,()=>n=!0)),t.targets().add(Ov(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=hh,this._targets=null}};function f$t(e,t,n,r){const i=this,s=Ov(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Wt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function d$t(e,t){const n=this.locale();return s6e(e,t,n.timeParse,n.utcParse)}function h$t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function p$t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:i6e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function m$t(e,t,n){const r=this,i=r._pending||g$t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(hh).insert(s.data||[])),i.done(),s}function g$t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const y$t={skip:!0};function v$t(e,t,n,r,i){return(e instanceof os?x$t:b$t)(this,e,t,n,r,i),this}function b$t(e,t,n,r,i,s){const o=lr({},s,y$t);let a,u;cr(n)||(n=ml(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new os(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;l6e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function x$t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new os(null,_$t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function _$t(e,t){return t=cr(t)?t:ml(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function w$t(e){e.rank=++this._rank}function E$t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ut("Cycle detected in dataflow graph.")}const o8={},Qm=1,Uv=2,cy=4,S$t=Qm|Uv,zge=Qm|cy,HT=Qm|Uv|cy,Vge=8,_R=16,Hge=32,qge=64;function xb(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function NH(e,t){const n=[];return jv(e,t,r=>n.push(r)),n}function Wge(e,t){const n={};return e.visit(t,r=>{n[bn(r)]=1}),r=>n[bn(r)]?null:r}function F6(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}xb.prototype={StopPropagation:o8,ADD:Qm,REM:Uv,MOD:cy,ADD_REM:S$t,ADD_MOD:zge,ALL:HT,REFLOW:Vge,SOURCE:_R,NO_SOURCE:Hge,NO_FIELDS:qge,fork(e){return new xb(this.dataflow).init(this,e)},clone(){const e=this.fork(HT);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(HT|_R)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new xb(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&qge)&&(n.fields=e.fields),t&Qm?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Uv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&cy?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Hge?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||HT;return t&Qm&&this.add.length||t&Uv&&this.rem.length||t&cy&&this.mod.length},reflow(e){if(e)return this.fork(HT).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(cy,Wge(this,Qm))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ft(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ft(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Qm&&(n.addF=F6(n.addF,t)),e&Uv&&(n.remF=F6(n.remF,t)),e&cy&&(n.modF=F6(n.modF,t)),e&_R&&(n.srcF=F6(n.srcF,t)),n},materialize(e){e=e||HT;const t=this;return e&Qm&&t.addF&&(t.add=NH(t.add,t.addF),t.addF=null),e&Uv&&t.remF&&(t.rem=NH(t.rem,t.remF),t.remF=null),e&cy&&t.modF&&(t.mod=NH(t.mod,t.modF),t.modF=null),e&_R&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&_R)return jv(n.source,n.srcF,r),n;e&Qm&&jv(n.add,n.addF,r),e&Uv&&jv(n.rem,n.remF,r),e&cy&&jv(n.mod,n.modF,r);const i=n.source;if(e&Vge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?jv(i,Wge(n,zge),r):jv(i,n.srcF,r))}return n}};function Fre(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}zt(Fre,xb,{fork(e){const t=new xb(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ft(e)?e.some(r=>n[r]):n[e]:0},filter(){ut("MultiPulse does not support filtering.")},materialize(){ut("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function T$t(e,t,n){const r=this,i=[];if(r._pulse)return c6e(r);if(r._pending&&await r._pending,t&&await v$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new xb(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=wj(Y3);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=o8),u!==o8&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await v$(r,c[f].callback)}return n&&await v$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function C$t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function A$t(e,t,n){return this._pulse?c6e(this):(this.evaluate(e,t,n),this)}function I$t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function c6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function k$t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function R$t(e,t){const n=e.source,r=this._clock;return n&&ft(n)?new Fre(this,r,n.map(i=>i.pulse),t):this._input[e.id]||D$t(this._pulse,n&&n.pulse)}function D$t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==o8&&(e.source=t.source),e)}const Bre={skip:!1,force:!1};function N$t(e,t){const n=t||Bre;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function P$t(e,t,n){const r=n||Bre;return(e.set(t)||r.force)&&this.touch(e,r),this}function O$t(e,t,n){this.touch(e,n||Bre);const r=new xb(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function M$t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),f6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,L$t(t,0,e)):r=n,r}}}function f6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function L$t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,f6e(e,r,t,n)}function nC(){this.logger(xre()),this.logLevel(vre),this._clock=0,this._rank=0,this._locale=Pre();try{this._loader=_j()}catch{}this._touched=wj(Y3),this._input={},this._pulse=null,this._heap=M$t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function wR(e){return function(){return this._log[e].apply(this,arguments)}}nC.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:wR("error"),warn:wR("warn"),info:wR("info"),debug:wR("debug"),logLevel:wR("level"),cleanThreshold:1e4,add:u$t,connect:l$t,rank:w$t,rerank:E$t,pulse:O$t,touch:N$t,update:P$t,changeset:eS,ingest:h$t,parse:d$t,preload:m$t,request:p$t,events:f$t,on:v$t,evaluate:T$t,run:A$t,runAsync:C$t,runAfter:I$t,_enqueue:k$t,_getPulse:R$t};function nt(e,t){os.call(this,e,null,t)}zt(nt,os,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const JC={};function d6e(e){const t=h6e(e);return t&&t.Definition||null}function h6e(e){return e=e&&e.toLowerCase(),Jt(JC,e)?JC[e]:null}function*p6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function jre(e,t,n){const r=Float64Array.from(p6e(e,n));return r.sort(jy),t.map(i=>EIe(r,i))}function Ure(e,t){return jre(e,[.25,.5,.75],t)}function zre(e,t){const n=e.length,r=bvt(e,t),i=Ure(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function m6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var mh=Math.random;function $$t(e){mh=e}function g6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(p6e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(mh()*s)];c[l]=a/s}return c.sort(jy),[CG(c,n/2),CG(c,1-n/2)]}function y6e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?F$t(s,t+t/4):s}function F$t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function B$t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function j$t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*mh())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const v6e=Math.sqrt(2*Math.PI),U$t=Math.SQRT2;let ER=NaN;function Aj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(ER===ER)n=ER,ER=NaN;else{do n=mh()*2-1,r=mh()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,ER=r*s}return e+n*t}function Vre(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*v6e)}function Ij(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function kj(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*U$t*z$t(2*e-1)}function z$t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Hre(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Aj(n,r),pdf:s=>Vre(s,n,r),cdf:s=>Ij(s,n,r),icdf:s=>kj(s,n,r)};return i.mean(e).stdev(t)}function qre(e,t){const n=Hre();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=zre(e)),i):t},sample(){return e[~~(mh()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Wre(e,t){return e=e||0,t=t??1,Math.exp(e+Aj()*t)}function Gre(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*v6e*e)}function Yre(e,t,n){return Ij(Math.log(e),t,n)}function Kre(e,t,n){return Math.exp(kj(e,t,n))}function b6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Wre(n,r),pdf:s=>Gre(s,n,r),cdf:s=>Yre(s,n,r),icdf:s=>Kre(s,n,r)};return i.mean(e).stdev(t)}function x6e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=mh();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Xre(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*mh()}function Qre(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Jre(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Zre(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function _6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Xre(n,r),pdf:s=>Qre(s,n,r),cdf:s=>Jre(s,n,r),icdf:s=>Zre(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function eie(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function X3(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function Rj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Q3(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function II(e,t,n,r,i){let s=0,o=0;return Q3(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function tie(e,t,n){let r=0,i=0,s=0,o=0,a=0;Q3(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=X3(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:II(e,t,n,i,l)}}function w6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;Q3(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=X3(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:II(e,t,n,i,l)}}function E6e(e,t,n){const[r,i,s,o]=Rj(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Q3(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),p=d*w,a+=(w*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=X3(u/o,a/o,l/o,c/o),v=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:v,rSquared:II(e,t,n,o,v)}}function S6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Q3(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=X3(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:II(e,t,n,a,c)}}function nie(e,t,n){const[r,i,s,o]=Rj(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const v=c-u*u,b=u*v-l*l,w=(d*u-f*l)/b,E=(f*v-d*l)/b,T=-w*u,C=I=>(I=I-s,w*I*I+E*I+T+o);return{coef:[T-E*s+w*s*s+o,E-2*w*s,w],predict:C,rSquared:II(e,t,n,o,C)}}function T6e(e,t,n,r){if(r===0)return eie(e,t,n);if(r===1)return tie(e,t,n);if(r===2)return nie(e,t,n);const[i,s,o,a]=Rj(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const v=H$t(c),b=w=>{w-=o;let E=a+v[0]+v[1]*w+v[2]*w*w;for(d=3;d<f;++d)E+=v[d]*Math.pow(w,d);return E};return{coef:V$t(f,v,-o,a),predict:b,rSquared:II(e,t,n,a,b)}}function V$t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function H$t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Gge=2,Yge=1e-12;function C6e(e,t,n,r){const[i,s,o,a]=Rj(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Gge;){const p=[0,l-1];for(let g=0;g<u;++g){const v=i[g],b=p[0],w=p[1],E=v-i[b]>i[w]-v?b:w;let T=0,C=0,I=0,R=0,N=0;const O=1/Math.abs(i[E]-v||1);for(let F=b;F<=w;++F){const H=i[F],Q=s[F],J=q$t(Math.abs(v-H)*O)*d[F],ne=H*J;T+=J,C+=ne,I+=Q*J,R+=Q*ne,N+=H*ne}const[L,j]=X3(C/T,I/T,R/T,N/T);c[g]=L+j*v,f[g]=Math.abs(s[g]-c[g]),W$t(i,g+1,p)}if(h===Gge)break;const m=SIe(f);if(Math.abs(m)<Yge)break;for(let g=0,v,b;g<u;++g)v=f[g]/(6*m),d[g]=v>=1?Yge:(b=1-v*v)*b}return G$t(i,c,o,a)}function q$t(e){return(e=1-e*e*e)*e*e}function W$t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function G$t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const Y$t=.5*Math.PI/180;function Dj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=K$t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&X$t(f,m,d,h,p)>Y$t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function K$t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function X$t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Q$t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function _K(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Q$t(e)}function A6e(e,t,n){return n||e+(t?"_"+t:"")}const PH=()=>{},J$t={init:PH,add:PH,rem:PH,idx:0},_P={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},J3=Object.keys(_P).filter(e=>e!=="__count__");function Z$t(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},J$t,t)}[...J3,"__count__"].forEach(e=>{_P[e]=Z$t(e,_P[e])});function I6e(e,t,n){return _P[e](n,t)}function k6e(e,t){return e.idx-t.idx}function eFt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=_P[i]())})};return e.forEach(n),Object.values(t).sort(k6e)}function tFt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function nFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function rFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function iFt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function R6e(e,t){const n=t||pl,r=eFt(e),i=e.slice().sort(k6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=tFt,s.prototype.add=nFt,s.prototype.rem=rFt,s.prototype.set=iFt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function rie(e){this._key=e?dh(e):bn,this.reset()}const ku=rie.prototype;ku.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ku.add=function(e){this._add.push(e)};ku.rem=function(e){this._rem.push(e)};ku.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};ku.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Jt(n,s)||(n[s]=1,++i);return i};ku.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=v4e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ku.argmin=function(e){return this.extent(e)[0]||{}};ku.argmax=function(e){return this.extent(e)[1]||{}};ku.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ku.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ku.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Ure(this.values(),e),this._get=e),this._q};ku.q1=function(e){return this.quartile(e)[0]};ku.q2=function(e){return this.quartile(e)[1]};ku.q3=function(e){return this.quartile(e)[2]};ku.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=g6e(this.values(),1e3,.05,e),this._get=e),this._ci};ku.ci0=function(e){return this.ci(e)[0]};ku.ci1=function(e){return this.ci(e)[1]};function Jb(e){nt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Jb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:J3},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};zt(Jb,nt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Wt(al(b)),E=w.length;let T=0,C;for(;T<E;++T)r[C=w[T]]||(r[C]=1,t.push(C))}this._dims=Wt(e.groupby),this._dnames=this._dims.map(b=>{const w=lo(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:_K(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,v;for(l!==o.length&&ut("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=s[v],d=o[v],h=a[v]||null,f==null&&d!=="count"&&ut("Null aggregate field specified."),m=lo(f),g=A6e(d,m,u[v]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(I6e(d,h,g))}return this._measures=this._measures.map(b=>R6e(b,b.field)),Object.create(null)},cellkey:_K(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new rie),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?u6e(t.tuple,s):Ti(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const sFt=1e-14;function iie(e){nt.call(this,null,e)}iie.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};zt(iie,nt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(al(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=m6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=sl(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(sFt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=pf(u,al(t),e.name||"bin_"+lo(t))}});function D6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?S4e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function sie(e){nt.call(this,[],e)}sie.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};zt(sie,nt,{transform(e,t){const n=t.fork(t.ALL),r=D6e(bn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(ZE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function N6e(e){os.call(this,null,oFt,e)}zt(N6e,os);function oFt(e){return this.value&&!e.modified()?this.value:Sre(e.fields,e.orders)}function oie(e){nt.call(this,null,e)}oie.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function aFt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}zt(oie,nt,{transform(e,t){const n=f=>d=>{for(var h=aFt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ti({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function aie(e){nt.call(this,null,e)}aie.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};zt(aie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=uFt(a,i,s,e.filter||hh)):n.mod=a,n.source=this.value,n.modifies(r)}});function uFt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ti(s)),s={},s[t]=l);return i}const Kge={kde:qre,mixture:x6e,normal:Hre,lognormal:b6e,uniform:_6e},lFt="distributions",Xge="function",cFt="field";function P6e(e,t){const n=e[Xge];Jt(Kge,n)||ut("Unknown distribution function: "+n);const r=Kge[n]();for(const i in e)i===cFt?r.data((e.from||t()).map(e[i])):i===lFt?r[i](e[i].map(s=>P6e(s,t))):typeof r[i]===Xge&&r[i](e[i]);return r}function uie(e){nt.call(this,null,e)}const O6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],fFt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:O6e},{name:"weights",type:"number",array:!0}]};uie.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:O6e.concat(fFt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(uie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=P6e(e.distribution,dFt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ut("Invalid density method: "+o),!e.extent&&!r.data&&ut("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||J0(r.data()),l=Dj(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ti(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function dFt(e){return()=>e.materialize(e.SOURCE).source}function M6e(e,t){return e?e.map((n,r)=>t[r]||lo(n)):null}function lie(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const L6e="bin";function cie(e){nt.call(this,null,e)}cie.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:L6e}]};const hFt=(e,t)=>K3(J0(e,t))/30;zt(cie,nt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=lie(t.source,e.groupby,pl),i=e.smooth||!1,s=e.field,o=e.step||hFt(n,s),a=ZE((p,m)=>s(p)-s(m)),u=e.as||L6e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of y6e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function $6e(e){os.call(this,null,pFt,e),this.modified(!0)}zt($6e,os);function pFt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:pf(n=>t(n,e),al(t),lo(t))}function fie(e){nt.call(this,[void 0,void 0],e)}fie.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};zt(fie,nt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=sl(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=lo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function die(e,t){os.call(this,e),this.parent=t,this.count=0}zt(die,os,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Nj(e){nt.call(this,{},e),this._keys=TI();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}zt(Nj,nt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new die(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=bn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(bn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=bn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(bn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=bn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function F6e(e){os.call(this,null,mFt,e)}zt(F6e,os);function mFt(e){return this.value&&!e.modified()?this.value:ft(e.name)?Wt(e.name).map(t=>dh(t)):dh(e.name,e.as)}function hie(e){nt.call(this,TI(),e)}hie.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};zt(hie,nt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=bn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(bn(f),1)});function c(f){const d=bn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function pie(e){nt.call(this,[],e)}pie.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};zt(pie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=M6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=$re(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function mie(e){nt.call(this,[],e)}mie.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};zt(mie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(lo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=$re(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function gie(e){nt.call(this,null,e)}gie.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};zt(gie,nt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function B6e(e){nt.call(this,[],e)}zt(B6e,nt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ti(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const B6={value:"value",median:SIe,mean:Tvt,min:TG,max:Uy},gFt=[];function yie(e){nt.call(this,[],e)}yie.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function yFt(e){var t=e.method||B6.value,n;if(B6[t]==null)ut("Unrecognized imputation method: "+t);else return t===B6.value?(n=e.value!==void 0?e.value:0,()=>n):B6[t]}function vFt(e){const t=e.field;return n=>n?t(n):NaN}zt(yie,nt,{transform(e,t){var n=t.fork(t.ALL),r=yFt(e),i=vFt(e),s=lo(e.field),o=lo(e.key),a=(e.groupby||[]).map(lo),u=bFt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,v,b,w,E,T;for(g=0,w=u.length;g<w;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],T={_impute:!0},v=0,E=p.length;v<E;++v)T[a[v]]=p[v];T[o]=m,T[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ti(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function bFt(e,t,n,r){var i=v=>v(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((v,b)=>a[v]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):gFt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function vie(e){Jb.call(this,e)}vie.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:J3},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};zt(vie,Jb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function bie(e){nt.call(this,null,e)}bie.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(bie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=lie(r,e.groupby,e.field),s=(e.groupby||[]).map(lo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ut("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=J0(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=qre(h,o)[a],m=e.counts?h.length:1,g=c||J0(h);Dj(p,g,f,d).forEach(v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*m,l.push(Ti(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function j6e(e){os.call(this,null,xFt,e)}zt(j6e,os);function xFt(e){return this.value&&!e.modified()?this.value:Cre(e.fields,e.flat)}function U6e(e){nt.call(this,[],e),this._pending=null}zt(U6e,nt,{transform(e,t){const n=t.dataflow;return this._pending?OH(this,t,this._pending):_Ft(e)?t.StopPropagation:e.values?OH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Wt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>OH(this,t,Wt(r.data)))}});function _Ft(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function OH(e,t,n){n.forEach(Ti);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xie(e){nt.call(this,{},e)}xie.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};zt(xie,nt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ut('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ut('The "as" parameter has too few output field names.'),c=c||i.map(lo),f=function(p){for(var m=0,g=0,v,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(v=0;v<d;++v,++g)p[c[g]]=s;else for(v=0;v<d;++v,++g)p[c[g]]=i[v](b)}):(c||ut("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function z6e(e){os.call(this,null,wFt,e)}zt(z6e,os);function wFt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function V6e(e){os.call(this,null,EFt,e)}zt(V6e,os);function EFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function H6e(e){nt.call(this,null,e)}zt(H6e,nt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _ie(e){Jb.call(this,e)}_ie.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:J3,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};zt(_ie,Jb,{_transform:Jb.prototype.transform,transform(e,t){return this._transform(SFt(e,t),t)}});function SFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=al(n).concat(al(r)),o=CFt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>TFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function TFt(e,t,n,r){return pf(i=>t(i)===e?n(i):NaN,r,e+"")}function CFt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(bj),t?i.slice(0,t):i}function q6e(e){Nj.call(this,e)}zt(q6e,Nj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(bn(s),n,t,s);return(e.modified("field")||r&&t.modified(al(r)))&&ut("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ti(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function wie(e){nt.call(this,null,e)}wie.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};zt(wie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=M6e(e.fields,e.as||[]),s=r?(a,u)=>AFt(a,u,r,i):Sj;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=bn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ti({}));o[bn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[bn(a)]))}),n}});function AFt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function W6e(e){nt.call(this,null,e)}zt(W6e,nt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Eie(e){nt.call(this,null,e)}Eie.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const IFt=1e-14;zt(Eie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=lie(i,e.groupby,e.field),o=(e.groupby||[]).map(lo),a=[],u=e.step||.01,l=e.probs||Wc(u/2,1-IFt,u),c=l.length;return s.forEach(f=>{const d=jre(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ti(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function G6e(e){nt.call(this,null,e)}zt(G6e,nt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=bn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=$re(i);r[bn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[bn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Sie(e){nt.call(this,[],e),this.count=0}Sie.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};zt(Sie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[bn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*mh()),d<o.length&&d>=u&&(f=o[d],s[bn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=bn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[bn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[bn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[bn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[bn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[bn(c)])),this.count=a,this.value=n.source=o,n}});function Tie(e){nt.call(this,null,e)}Tie.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};zt(Tie,nt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Wc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ti(s)}),n.add=t.add.concat(this.value),n}});function Y6e(e){nt.call(this,null,e),this.modified(!0)}zt(Y6e,nt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Cie(e){nt.call(this,null,e)}const K6e=["unit0","unit1"];Cie.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Rre,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:K6e}]};zt(Cie,nt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?AI:CI)(s.unit).offset,a=e.as||K6e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(al(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,v;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=v=s(m),r&&(p[l]=v=o(g,c)),g<f&&(f=g),v>d&&(d=v))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:W4e({extent:e.extent||J0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Dre(r),o=this.value||{},a=(n?$4e:L4e)(s,i);return a.unit=Kr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function X6e(e){nt.call(this,TI(),e)}zt(X6e,nt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Q6e(e){nt.call(this,null,e)}zt(Q6e,nt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ZE(e.sort)):t.source).map(e.field))}});function kFt(e,t,n,r){const i=wP[e](t,n);return{init:i.init||Qv,update:function(s,o){o[r]=i.next(s)}}}const wP={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=wP.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ut("ntile num must be greater than zero.");const n=wP.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ut("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=RFt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function RFt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const DFt=Object.keys(wP);function J6e(e){const t=Wt(e.ops),n=Wt(e.fields),r=Wt(e.params),i=Wt(e.aggregate_params),s=Wt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Wt(al(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],v=r[m],b=i[m]||null,w=lo(g),E=A6e(p,w,s[m]);if(h(g),o.push(E),Jt(wP,p))a.push(kFt(p,g,v,E));else{if(g==null&&p!=="count"&&ut("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let T=l[w];T||(T=l[w]=[],T.field=g,f.push(T)),T.push(I6e(p,b,E))}}),(c.length||f.length)&&(this.cell=NFt(f,c,d)),this.inputs=Object.keys(u)}const Z6e=J6e.prototype;Z6e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Z6e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function NFt(e,t,n){e=e.map(u=>R6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new rie;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Aie(e){nt.call(this,{},e),this._mlen=0,this._mods=[]}Aie.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:DFt.concat(J3)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};zt(Aie,nt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=ZE(e.sort),i=_K(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new J6e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)PFt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=D6e(bn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function PFt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?tI(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ml(-1)};t.init();for(let f=0;f<u;++f)OFt(c,o,f,u),s&&MFt(c,l),t.update(c,a[f])}function OFt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function MFt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const LFt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Jb,bin:iie,collect:sie,compare:N6e,countpattern:oie,cross:aie,density:uie,dotbin:cie,expression:$6e,extent:fie,facet:Nj,field:F6e,filter:hie,flatten:pie,fold:mie,formula:gie,generate:B6e,impute:yie,joinaggregate:vie,kde:bie,key:j6e,load:U6e,lookup:xie,multiextent:z6e,multivalues:V6e,params:H6e,pivot:_ie,prefacet:q6e,project:wie,proxy:W6e,quantile:Eie,relay:G6e,sample:Sie,sequence:Tie,sieve:Y6e,subflow:die,timeunit:Cie,tupleindex:X6e,values:Q6e,window:Aie},Symbol.toStringTag,{value:"Module"}));function _b(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const $Ft=()=>typeof Image<"u"?Image:null;function Iie(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const FFt="identity",ZC="linear",g1="log",Z3="pow",eO="sqrt",Pj="symlog",fE="time",dE="utc",D0="sequential",kI="diverging",eA="quantile",Oj="quantize",Mj="threshold",kie="ordinal",wK="point",eMe="band",Rie="bin-ordinal",va="continuous",tO="discrete",nO="discretizing",Rh="interpolating",Die="temporal";function BFt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function jFt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Nie(){const e=Ax().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Iie(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Wc(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],v,b,w;if(!(m!==m||g!==g)&&(g<m&&(w=m,m=g,g=w),!(g<h[0]||m>r[1-d])))return v=Math.max(0,Mb(h,m)-1),b=m===g?v:Mb(h,g)-1,m-h[v]>s+1e-10&&++v,d&&(w=v,v=p-b,b=p-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Nie().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function tMe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return tMe(t())},e}function UFt(){return tMe(Nie().paddingInner(1))}var zFt=Array.prototype.map;function VFt(e){return zFt.call(e,sl)}const HFt=Array.prototype.slice;function nMe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Mb(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=VFt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=HFt.call(r),n):t.slice()},n.tickFormat=function(r,i){return ARe(e[0],Kr(e),r??10,i)},n.copy=function(){return nMe().domain(n.domain()).range(n.range())},n}const a8=new Map,rMe=Symbol("vega_scale");function iMe(e){return e[rMe]=!0,e}function qFt(e){return e&&e[rMe]===!0}function WFt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?BFt(s):s.invertExtent?jFt(s):void 0),s.type=e,iMe(s)};return r.metadata=Wp(Wt(n)),r}function xi(e,t,n){return arguments.length>1?(a8.set(e,WFt(e,t,n)),this):sMe(e)?a8.get(e):void 0}xi(FFt,IRe);xi(ZC,ef,va);xi(g1,RRe,[va,g1]);xi(Z3,fte,va);xi(eO,JTt,va);xi(Pj,DRe,va);xi(fE,gte,[va,Die]);xi(dE,hCt,[va,Die]);xi(D0,yte,[va,Rh]);xi(`${D0}-${ZC}`,yte,[va,Rh]);xi(`${D0}-${g1}`,VRe,[va,Rh,g1]);xi(`${D0}-${Z3}`,vte,[va,Rh]);xi(`${D0}-${eO}`,pCt,[va,Rh]);xi(`${D0}-${Pj}`,HRe,[va,Rh]);xi(`${kI}-${ZC}`,qRe,[va,Rh]);xi(`${kI}-${g1}`,WRe,[va,Rh,g1]);xi(`${kI}-${Z3}`,bte,[va,Rh]);xi(`${kI}-${eO}`,mCt,[va,Rh]);xi(`${kI}-${Pj}`,GRe,[va,Rh]);xi(eA,NRe,[nO,eA]);xi(Oj,dte,nO);xi(Mj,PRe,nO);xi(Rie,nMe,[tO,nO]);xi(kie,Ax,tO);xi(eMe,Nie,tO);xi(wK,UFt,tO);function sMe(e){return a8.has(e)}function tS(e,t){const n=a8.get(e);return n&&n.metadata[t]}function Pie(e){return tS(e,va)}function tA(e){return tS(e,tO)}function EK(e){return tS(e,nO)}function oMe(e){return tS(e,g1)}function GFt(e){return tS(e,Die)}function aMe(e){return tS(e,Rh)}function uMe(e){return tS(e,eA)}const YFt=["clamp","base","constant","exponent"];function lMe(e,t){const n=t[0],r=Kr(t)-n;return function(i){return e(n+i*r)}}function Lj(e,t,n){return zee(Oie(t||"rgb",n),e)}function cMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function fMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ml(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=xi(s)().domain([t,n]).range([0,1]),YFt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Oie(e,t){const n=Kxt[KFt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function KFt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const XFt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},QFt={accent:yCt,category10:gCt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:vCt,observable10:bCt,paired:xCt,pastel1:_Ct,pastel2:wCt,set1:ECt,set2:SCt,set3:TCt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function dMe(e){if(ft(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function hMe(e,t){for(const n in e)Mie(n,t(e[n]))}const Qge={};hMe(QFt,dMe);hMe(XFt,e=>Lj(dMe(e)));function Mie(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Qge[e]=t,this):Qge[e]}const x$="symbol",JFt="discrete",ZFt="gradient",e5t=e=>ft(e)?e.map(t=>String(t)):String(e),t5t=(e,t)=>e[1]-t[1],n5t=(e,t)=>t[1]-e[1];function Lie(e,t,n){let r;return bi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(K3(e.domain())/n||1)+1))),Ht(t)&&(r=t.step,t=t.interval),Gt(t)&&(t=e.type===fE?CI(t):e.type==dE?AI(t):ut("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function pMe(e,t,n){let r=e.range(),i=r[0],s=Kr(r),o=t5t;if(i>s&&(r=s,s=i,i=r,o=n5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function $ie(e,t){return e.bins?pMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function mMe(e,t,n,r,i,s){const o=t.type;let a=e5t;if(o===fE||i===fE)a=e.timeFormat(r);else if(o===dE||i===dE)a=e.utcFormat(r);else if(oMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=gMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function gMe(e,t,n){const r=$ie(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const SK={[eA]:"quantiles",[Oj]:"thresholds",[Mj]:"domain"},yMe={[eA]:"quantiles",[Oj]:"domain"};function vMe(e,t){return e.bins?s5t(e.bins):e.type===g1?gMe(e,t,!0):SK[e.type]?i5t(e[SK[e.type]]()):$ie(e,t)}function r5t(e,t,n){const r=t[yMe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function i5t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function s5t(e){const t=e.slice(0,-1);return t.max=Kr(e),t}const o5t=e=>SK[e.type]||e.bins;function bMe(e,t,n,r,i,s,o){const a=yMe[t.type]&&s!==fE&&s!==dE?r5t(e,t,i):mMe(e,t,n,i,s,o);return r===x$&&o5t(t)?a5t(a):r===JFt?u5t(a):l5t(a)}const a5t=e=>(t,n,r)=>{const i=Jge(r[n+1],Jge(r.max,1/0)),s=Zge(t,e),o=Zge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Jge=(e,t)=>e??t,u5t=e=>(t,n)=>n?e(t):null,l5t=e=>t=>e(t),Zge=(e,t)=>Number.isFinite(e)?t(e):null;function c5t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kr(t),s=i-r;if(e.type===Mj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function f5t(e,t,n,r){const i=r||t.type;return Gt(n)&&GFt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===fE?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===dE?e.utcFormat("%A, %d %B %Y, %X UTC"):bMe(e,t,5,null,n,r,!0)}function xMe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=f5t(e,t,n.format,n.formatType);if(EK(t.type)){const s=vMe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(tA(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kr(s))}`}}let _Me=0;function d5t(){_Me=0}const u8="p_";function Fie(e){return e&&e.gradient}function wMe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?u8:"";return i||(i=e.id="gradient_"+_Me++,r==="radial"?(e.x1=jm(e.x1,.5),e.y1=jm(e.y1,.5),e.r1=jm(e.r1,0),e.x2=jm(e.x2,.5),e.y2=jm(e.y2,.5),e.r2=jm(e.r2,.5),s=u8):(e.x1=jm(e.x1,0),e.y1=jm(e.y1,0),e.x2=jm(e.x2,1),e.y2=jm(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function jm(e,t){return e??t}function EMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const eye={basis:{curve:BCt},"basis-closed":{curve:jCt},"basis-open":{curve:UCt},bundle:{curve:zCt,tension:"beta",value:.85},cardinal:{curve:VCt,tension:"tension",value:0},"cardinal-open":{curve:qCt,tension:"tension",value:0},"cardinal-closed":{curve:HCt,tension:"tension",value:0},"catmull-rom":{curve:WCt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:GCt,tension:"alpha",value:.5},"catmull-rom-open":{curve:YCt,tension:"alpha",value:.5},linear:{curve:xte},"linear-closed":{curve:KCt},monotone:{horizontal:QCt,vertical:XCt},natural:{curve:JCt},step:{curve:ZCt},"step-after":{curve:tAt},"step-before":{curve:eAt}};function Bie(e,t,n){var r=Jt(eye,e)&&eye[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const h5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},p5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,m5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,g5t=/^((\s+,?\s*)|(,\s*))/,y5t=/^[01]/;function nA(e){const t=[];return(e.match(p5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=h5t[s],a=v5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function v5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?y5t:m5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(g5t);u!==null&&(i+=u[0].length)}return r}const Zb=Math.PI/180,b5t=1e-14,fw=Math.PI/2,d0=Math.PI*2,qT=Math.sqrt(3)/2;var MH={},LH={},SMe=[].join;function x5t(e,t,n,r,i,s,o,a,u){const l=SMe.call(arguments);if(MH[l])return MH[l];const c=o*Zb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,v=f/n,b=-f/r,w=d/r,E=g*a+v*u,T=b*a+w*u,C=g*e+v*t,I=b*e+w*t;let N=1/((C-E)*(C-E)+(I-T)*(I-T))-.25;N<0&&(N=0);let O=Math.sqrt(N);s==i&&(O=-O);const L=.5*(E+C)-O*(I-T),j=.5*(T+I)+O*(C-E),F=Math.atan2(T-j,E-L);let Q=Math.atan2(I-j,C-L)-F;Q<0&&s===1?Q+=d0:Q>0&&s===0&&(Q-=d0);const J=Math.ceil(Math.abs(Q/(fw+.001))),ne=[];for(let Z=0;Z<J;++Z){const ie=F+Z*Q/J,q=F+(Z+1)*Q/J;ne[Z]=[L,j,ie,q,n,r,f,d]}return MH[l]=ne}function _5t(e){const t=SMe.call(e);if(LH[t])return LH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),v=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),T=n+p-E*m,C=r+m+E*p,I=n+g,R=r+v,N=I+E*v,O=R-E*g;return LH[t]=[c*T+f*C,d*T+h*C,c*N+f*O,d*N+h*O,c*I+f*R,d*I+h*R]}const qd=["l",0,0,0,0,0,0,0];function w5t(e,t,n){const r=qd[0]=e[0];if(r==="a"||r==="A")qd[1]=t*e[1],qd[2]=n*e[2],qd[3]=e[3],qd[4]=e[4],qd[5]=e[5],qd[6]=t*e[6],qd[7]=n*e[7];else if(r==="h"||r==="H")qd[1]=t*e[1];else if(r==="v"||r==="V")qd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)qd[i]=(i%2==1?t:n)*e[i];return qd}function EP(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=w5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":tye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":tye(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=v,e.closePath();break}a=o}}function tye(e,t,n,r){const i=x5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=_5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const nye=.5773502691896257,rye={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,d0)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n,i=r-n*nye,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n,i=r-n*nye;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=qT*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function TMe(e){return Jt(rye,e)?rye[e]:E5t(e)}var $H={};function E5t(e){if(!Jt($H,e)){const t=nA(e);$H[e]={draw:function(n,r){EP(n,t,0,0,Math.sqrt(r)/2)}}}return $H[e]}const Iv=.448084975506;function S5t(e){return e.x}function T5t(e){return e.y}function C5t(e){return e.width}function A5t(e){return e.height}function ey(e){return typeof e=="function"?e:()=>+e}function j6(e,t,n){return Math.max(t,Math.min(e,n))}function CMe(){var e=S5t,t=T5t,n=C5t,r=A5t,i=ey(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),v=+r.call(this,c),b=Math.min(g,v)/2,w=j6(+i.call(this,c),0,b),E=j6(+s.call(this,c),0,b),T=j6(+o.call(this,c),0,b),C=j6(+a.call(this,c),0,b);if(u||(u=h=I9()),w<=0&&E<=0&&T<=0&&C<=0)u.rect(p,m,g,v);else{var I=p+g,R=m+v;u.moveTo(p+w,m),u.lineTo(I-E,m),u.bezierCurveTo(I-Iv*E,m,I,m+Iv*E,I,m+E),u.lineTo(I,R-C),u.bezierCurveTo(I,R-Iv*C,I-Iv*C,R,I-C,R),u.lineTo(p+T,R),u.bezierCurveTo(p+Iv*T,R,p,R-Iv*T,p,R-T),u.lineTo(p,m+w),u.bezierCurveTo(p,m+Iv*w,p+Iv*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=ey(c),l):e},l.y=function(c){return arguments.length?(t=ey(c),l):t},l.width=function(c){return arguments.length?(n=ey(c),l):n},l.height=function(c){return arguments.length?(r=ey(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=ey(c),s=f!=null?ey(f):i,a=d!=null?ey(d):i,o=h!=null?ey(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function AMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var v=Math.hypot(m,g),b=(m/=v)*u,w=(g/=v)*u,E=Math.atan2(g,m);i.moveTo(o-b,a-w),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,d0);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=I9()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function rO(e,t){return e??t}const iO=e=>e.x||0,sO=e=>e.y||0,I5t=e=>e.width||0,k5t=e=>e.height||0,R5t=e=>(e.x||0)+(e.width||0),D5t=e=>(e.y||0)+(e.height||0),N5t=e=>e.startAngle||0,P5t=e=>e.endAngle||0,O5t=e=>e.padAngle||0,M5t=e=>e.innerRadius||0,L5t=e=>e.outerRadius||0,$5t=e=>e.cornerRadius||0,F5t=e=>rO(e.cornerRadiusTopLeft,e.cornerRadius)||0,B5t=e=>rO(e.cornerRadiusTopRight,e.cornerRadius)||0,j5t=e=>rO(e.cornerRadiusBottomRight,e.cornerRadius)||0,U5t=e=>rO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,z5t=e=>rO(e.size,64),V5t=e=>e.size||1,$j=e=>e.defined!==!1,H5t=e=>TMe(e.shape||"circle"),q5t=dY().startAngle(N5t).endAngle(P5t).padAngle(O5t).innerRadius(M5t).outerRadius(L5t).cornerRadius($5t),W5t=JRe().x(iO).y1(sO).y0(D5t).defined($j),G5t=JRe().y(sO).x1(iO).x0(R5t).defined($j),Y5t=QRe().x(iO).y(sO).defined($j),K5t=CMe().x(iO).y(sO).width(I5t).height(k5t).cornerRadius(F5t,B5t,j5t,U5t),X5t=FCt().type(H5t).size(z5t),Q5t=AMe().x(iO).y(sO).defined($j).size(V5t);function jie(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function J5t(e,t){return q5t.context(e)(t)}function Z5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?G5t:W5t).curve(Bie(r,n.orient,n.tension)).context(e)(t)}function e8t(e,t){const n=t[0],r=n.interpolate||"linear";return Y5t.curve(Bie(r,n.orient,n.tension)).context(e)(t)}function RI(e,t,n,r){return K5t.context(e)(t,n,r)}function t8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function n8t(e,t){return X5t.context(e)(t)}function r8t(e,t){return Q5t.context(e)(t)}var IMe=1;function kMe(){IMe=1}function Uie(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+IMe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):jie(n)?o.path=RI(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ko(e){this.clear(),e&&this.union(e)}Ko.prototype={clone(){return new Ko(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Fj(e){this.mark=e,this.bounds=this.bounds||new Ko}function Bj(e){Fj.call(this,e),this.items=this.items||[]}zt(Bj,Fj);class RMe{constructor(t){this._pending=0,this._loader=t||_j()}pending(){return this._pending}sanitizeURL(t){const n=this;return iye(n),n._loader.sanitize(t,{context:"href"}).then(r=>(SR(n),r)).catch(()=>(SR(n),null))}loadImage(t){const n=this,r=$Ft();return iye(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>SR(n),o.onerror=()=>SR(n),o.src=s,o}).catch(i=>(SR(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function iye(e){e._pending+=1}function SR(e){e._pending-=1}function O1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?i8t(t,r):0))}return e}function i8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const s8t=d0-1e-8;let jj,_$,w$,Pw,TK,E$,CK,AK;const nb=(e,t)=>jj.add(e,t),S$=(e,t)=>nb(_$=e,w$=t),sye=e=>nb(e,jj.y1),oye=e=>nb(jj.x1,e),dw=(e,t)=>TK*e+CK*t,hw=(e,t)=>E$*e+AK*t,FH=(e,t)=>nb(dw(e,t),hw(e,t)),BH=(e,t)=>S$(dw(e,t),hw(e,t));function oO(e,t){return jj=e,t?(Pw=t*Zb,TK=AK=Math.cos(Pw),E$=Math.sin(Pw),CK=-E$):(TK=AK=1,Pw=E$=CK=0),o8t}const o8t={beginPath(){},closePath(){},moveTo:BH,lineTo:BH,rect(e,t,n,r){Pw?(FH(e+n,t),FH(e+n,t+r),FH(e,t+r),BH(e,t)):(nb(e+n,t+r),S$(e,t))},quadraticCurveTo(e,t,n,r){const i=dw(e,t),s=hw(e,t),o=dw(n,r),a=hw(n,r);aye(_$,i,o,sye),aye(w$,s,a,oye),S$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=dw(e,t),a=hw(e,t),u=dw(n,r),l=hw(n,r),c=dw(i,s),f=hw(i,s);uye(_$,o,u,c,sye),uye(w$,a,l,f,oye),S$(c,f)},arc(e,t,n,r,i,s){if(r+=Pw,i+=Pw,_$=n*Math.cos(i)+e,w$=n*Math.sin(i)+t,Math.abs(i-r)>s8t)nb(e-n,t-n),nb(e+n,t+n);else{const o=l=>nb(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%d0,r<0&&(r+=d0),i=i%d0,i<0&&(i+=d0),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=d0,a=r-r%fw,u=0;u<4&&a>i;++u,a-=fw)o(a);else for(a=r-r%fw+fw,u=0;u<4&&a<i;++u,a=a+fw)o(a)}}};function aye(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function uye(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>b5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(lye(u,e,t,n,r)),0<l&&l<1&&i(lye(l,e,t,n,r))}function lye(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var wb=(wb=_b(1,1))?wb.getContext("2d"):null;const IK=new Ko;function zie(e){return function(t,n){if(!wb)return!0;e(wb,t),IK.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=IK;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(wb.isPointInPath(u,a))return!0;return!1}}function Vie(e,t){return t.contains(e.x||0,e.y||0)}function DMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(IK.set(n,r,n+i,r+s))}function NMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return R2(t,n,r,i,s)}function R2(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function rA(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ap(e,t){return e??t}function cye(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function a8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ap(t.x1,.5)*r,n.y1+ap(t.y1,.5)*i,Math.max(r,i)*ap(t.r1,0),n.x1+ap(t.x2,.5)*r,n.y1+ap(t.y2,.5)*i,Math.max(r,i)*ap(t.r2,.5));else{const o=ap(t.x1,0),a=ap(t.y1,0),u=ap(t.x2,1),l=ap(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=_b(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=cye(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return cye(s,t.stops)}function PMe(e,t,n){return Fie(n)?a8t(e,n,t.bounds):n}function l8(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=PMe(e,t,t.fill),!0):!1}var u8t=[];function iA(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=PMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||u8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function l8t(e,t){return e.zindex-t.zindex||e.index-t.index}function Hie(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(l8t)}function Yp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Hie(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function c8(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Hie(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function qie(e){return function(t,n,r){Yp(n,i=>{(!r||r.intersects(i.bounds))&&OMe(e,t,i,i)})}}function c8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&OMe(e,t,n.items[0],n.items)}}function OMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(rA(t,n),n.fill&&l8(t,n,i)&&t.fill(),n.stroke&&iA(t,n,i)&&t.stroke()))}function Uj(e){return e=e||hh,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,c8(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function aO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Wie(e){return Uj(aO(e))}function zw(e,t){return"translate("+e+","+t+")"}function Gie(e){return"rotate("+e+")"}function f8t(e,t){return"scale("+e+","+t+")"}function MMe(e){return zw(e.x||0,e.y||0)}function d8t(e){return zw(e.x||0,e.y||0)+(e.angle?" "+Gie(e.angle):"")}function h8t(e){return zw(e.x||0,e.y||0)+(e.angle?" "+Gie(e.angle):"")+(e.scaleX||e.scaleY?" "+f8t(e.scaleX||1,e.scaleY||1):"")}function Yie(e,t,n){function r(o,a){o("transform",d8t(a)),o("d",t(null,a))}function i(o,a){return t(oO(o,a.angle),a),O1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Zb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:qie(s),pick:Wie(s),isect:n||zie(s)}}var p8t=Yie("arc",J5t);function m8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function g8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function y8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Kie(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(oO(u),c),O1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=aO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:c8t(s),pick:a,isect:Vie,tip:n}}var v8t=Kie("area",Z5t,m8t);function b8t(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):LMe(e,t.group)}function LMe(e,t){e.beginPath(),jie(t)?RI(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function $Me(e){const t=ap(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function x8t(e,t){e("transform",MMe(t))}function FMe(e,t){const n=$Me(t);e("d",RI(null,t,n,n))}function _8t(e,t){e("class","background"),e("aria-hidden",!0),FMe(e,t)}function w8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?FMe(e,t):e("d","")}function E8t(e,t,n){const r=t.clip?Uie(n,t,t):null;e("clip-path",r)}function S8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),O1(e,t),e.translate(t.x||0,t.y||0)}function SP(e,t,n,r){const i=$Me(t);e.beginPath(),RI(e,t,(n||0)+i,(r||0)+i)}const T8t=aO(SP),C8t=aO(SP,!1),A8t=aO(SP,!0);function I8t(e,t,n,r){Yp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(SP(e,i,s,o),rA(e,i),i.fill&&l8(e,i,u)&&e.fill(),i.stroke&&!a&&iA(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&LMe(e,i),n&&n.translate(-s,-o),Yp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(SP(e,i,s,o),rA(e,i),iA(e,i,u)&&e.stroke())})}function k8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return c8(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&jie(u)&&!A8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,v=t.interactive!==!1;return v&&g&&u.stroke&&C8t(e,u,o,a)?(e.restore(),u):(l=c8(u,b=>R8t(b,c,f)?this.pick(b,n,r,c,f):null),!l&&v&&(u.fill||!g&&u.stroke)&&T8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function R8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var D8t={type:"group",tag:"g",nested:!1,attr:x8t,bound:S8t,draw:I8t,pick:k8t,isect:DMe,content:E8t,background:_8t,foreground:w8t},TP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Xie(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Qie(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Jie(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function zj(e,t){return e==="center"?t/2:e==="right"?t:0}function Vj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function N8t(e,t,n){const r=Xie(t,n),i=Qie(t,r),s=Jie(t,r),o=(t.x||0)-zj(t.align,i),a=(t.y||0)-Vj(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,TP["xmlns:xlink"],"xlink:href"),e("transform",zw(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function P8t(e,t){const n=t.image,r=Qie(t,n),i=Jie(t,n),s=(t.x||0)-zj(t.align,r),o=(t.y||0)-Vj(t.baseline,i);return e.set(s,o,s+r,o+i)}function O8t(e,t,n){Yp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Xie(r,this);let s=Qie(r,i),o=Jie(r,i);if(s===0||o===0)return;let a=(r.x||0)-zj(r.align,s),u=(r.y||0)-Vj(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(rA(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var M8t={type:"image",tag:"image",nested:!1,attr:N8t,bound:P8t,draw:O8t,pick:Uj(),isect:hh,get:Xie,xOffset:zj,yOffset:Vj},L8t=Kie("line",e8t,g8t);function $8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",h8t(t)),e("d",t.path)}function T$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Zb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=nA(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),EP(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):EP(e,u,r,i,s,o)}function F8t(e,t){return T$(oO(e,t.angle),t)?e.set(0,0,0,0):O1(e,t,!0)}var B8t={type:"path",tag:"path",nested:!1,attr:$8t,bound:F8t,draw:qie(T$),pick:Wie(T$),isect:zie(T$)};function j8t(e,t){e("d",RI(null,t))}function U8t(e,t){var n,r;return O1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function fye(e,t){e.beginPath(),RI(e,t)}var z8t={type:"rect",tag:"path",nested:!1,attr:j8t,bound:U8t,draw:qie(fye),pick:Wie(fye),isect:DMe};function V8t(e,t){e("transform",MMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function H8t(e,t){var n,r;return O1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function BMe(e,t,n){var r,i,s,o;return t.stroke&&iA(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function q8t(e,t,n){Yp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&BMe(e,r,i)&&(rA(e,r),e.stroke())}})}function W8t(e,t,n,r){return e.isPointInStroke?BMe(e,t,1)&&e.isPointInStroke(n,r):!1}var G8t={type:"rule",tag:"line",nested:!1,attr:V8t,bound:H8t,draw:q8t,pick:Uj(W8t),isect:NMe},Y8t=Yie("shape",t8t),K8t=Yie("symbol",n8t,Vie);const dye=E4e();var sd={height:hg,measureWidth:Zie,estimateWidth:f8,width:f8,canvas:jMe};jMe(!0);function jMe(e){sd.width=e&&wb?Zie:f8}function f8(e,t){return UMe(tx(e,t),hg(e))}function UMe(e,t){return~~(.8*e.length*t)}function Zie(e,t){return hg(e)<=0||!(t=tx(e,t))?0:zMe(t,Hj(e))}function zMe(e,t){const n=`(${t}) ${e}`;let r=dye.get(n);return r===void 0&&(wb.font=t,r=wb.measureText(e).width,dye.set(n,r)),r}function hg(e){return e.fontSize!=null?+e.fontSize||0:11}function ex(e){return e.lineHeight!=null?e.lineHeight:hg(e)+2}function X8t(e){return ft(e)?e.length>1?e:e[0]:e}function uO(e){return X8t(e.lineBreak&&e.text&&!ft(e.text)?e.text.split(e.lineBreak):e.text)}function ese(e){const t=uO(e);return(ft(t)?t.length-1:0)*ex(e)}function tx(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?J8t(e,n):n}function Q8t(e){if(sd.width===Zie){const t=Hj(e);return n=>zMe(n,t)}else if(sd.width===f8){const t=hg(e);return n=>UMe(n,t)}else return t=>sd.width(e,t)}function J8t(e,t){var n=+e.limit,r=Q8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function lO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Hj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+hg(e)+"px "+lO(e,t)}function tse(e){var t=e.baseline,n=hg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ex(e):t==="line-bottom"?.29*n-.5*ex(e):0)}const Z8t={left:"start",center:"middle",right:"end"},oN=new Ko;function qj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-fw,t+=r*Math.cos(i),n+=r*Math.sin(i)),oN.x1=t,oN.y1=n,oN}function eBt(e,t){var n=t.dx||0,r=(t.dy||0)+tse(t),i=qj(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Z8t[t.align]||"start"),a?(u=zw(s,o)+" "+Gie(a),(n||r)&&(u+=" "+zw(n,r))):u=zw(s+n,o+r),e("transform",u)}function nse(e,t,n){var r=sd.height(t),i=t.align,s=qj(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+tse(t)-Math.round(.8*r),c=uO(t),f;if(ft(c)?(r+=ex(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,sd.width(t,h)),0)):f=sd.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Zb,o,a);else if(n===2)return e.rotatedPoints(t.angle*Zb,o,a);return e}function tBt(e,t,n){Yp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Hj(r),e.textAlign=r.align||"left",s=qj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Zb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+tse(r),c=uO(r),rA(e,r),ft(c))for(l=ex(r),u=0;u<c.length;++u)f=tx(r,c[u]),r.fill&&l8(e,r,i)&&e.fillText(f,o,a),r.stroke&&iA(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=tx(r,c),r.fill&&l8(e,r,i)&&e.fillText(f,o,a),r.stroke&&iA(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function nBt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=qj(t),a=o.x1,u=o.y1,l=nse(oN,t,1),c=-t.angle*Zb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function rBt(e,t){const n=nse(oN,e,2);return R2(t,n[0],n[1],n[2],n[3])||R2(t,n[0],n[1],n[4],n[5])||R2(t,n[4],n[5],n[6],n[7])||R2(t,n[2],n[3],n[6],n[7])}var iBt={type:"text",tag:"text",nested:!1,attr:eBt,bound:nse,draw:tBt,pick:Uj(nBt),isect:rBt},sBt=Kie("trail",r8t,y8t),vd={arc:p8t,area:v8t,group:D8t,image:M8t,line:L8t,path:B8t,rect:z8t,rule:G8t,shape:Y8t,symbol:K8t,text:iBt,trail:sBt};function kK(e,t,n){var r=vd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ko),e,n)}var hye={mark:null};function VMe(e,t,n){var r=vd[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(hye.mark=e,l=hye),c=kK(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ko,o)for(a=0,u=s.length;a<u;++a)t.union(kK(s[a],i,n));return e.bounds=t}const oBt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function HMe(e,t){return JSON.stringify(e,oBt,t)}function qMe(e){const t=typeof e=="string"?JSON.parse(e):e;return WMe(t)}function WMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&WMe(n[i]);return t&&VMe(e),e}class GMe{constructor(t){arguments.length?this.root=qMe(t):(this.root=pye({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Bj(this.root)])}toJSON(t){return HMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=pye(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function pye(e,t){const n={bounds:new Ko,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function rb(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function rse(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ua(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=rb(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function eh(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function YMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Wj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function aBt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=vd[i.marktype]).tip){for(o=Wj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let ise=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||_j(),this._tooltip=n||uBt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=rb(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=aBt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function uBt(e,t,n,r){e.element().setAttribute("title",r||"")}class cO{constructor(t){this._el=null,this._bgcolor=null,this._loader=new RMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const lBt="keydown",cBt="keypress",fBt="keyup",KMe="dragenter",C$="dragleave",XMe="dragover",RK="pointerdown",dBt="pointerup",d8="pointermove",A$="pointerout",QMe="pointerover",DK="mousedown",hBt="mouseup",JMe="mousemove",h8="mouseout",ZMe="mouseover",p8="click",pBt="dblclick",mBt="wheel",eLe="mousewheel",m8="touchstart",g8="touchmove",y8="touchend",gBt=[lBt,cBt,fBt,KMe,C$,XMe,RK,dBt,d8,A$,QMe,DK,hBt,JMe,h8,ZMe,p8,pBt,mBt,eLe,m8,g8,y8],NK=d8,aN=h8,PK=p8;class fO extends ise{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=gBt,this.pointermove=gye([d8,JMe],[QMe,ZMe],[A$,h8]),this.dragover=gye([XMe],[KMe],[C$]),this.pointerout=yye([A$,h8]),this.dragleave=yye([C$])}initialize(t,n,r){return this._canvas=t&&rse(t,"canvas"),[p8,DK,RK,d8,A$,C$].forEach(i=>mye(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(eLe,t)}pointerdown(t){this._down=this._active,this.fire(RK,t)}mousedown(t){this._down=this._active,this.fire(DK,t)}click(t){this._down===this._active&&(this.fire(p8,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(m8,t,!0)}touchmove(t){this.fire(g8,t,!0)}touchend(t){this.fire(y8,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===PK&&i&&i.href?this.handleHref(n,i,i.href):(t===NK||t===aN)&&this.handleTooltip(n,i,t!==aN),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(mye(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Wj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return vd[t.marktype].pick.call(this,o,t,n,r,i,s)}}const yBt=e=>e===m8||e===g8||e===y8?[m8,g8,y8]:[e];function mye(e,t){yBt(t).forEach(n=>vBt(e,n))}function vBt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function ED(e,t,n){t.forEach(r=>e.fire(r,n))}function gye(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?ED(this,e,r):((!i||!i.exit)&&ED(this,n,r),this._active=s,ED(this,t,r),ED(this,e,r))}}function yye(e){return function(t){ED(this,e,t),this._active=null}}function bBt(){return typeof window<"u"&&window.devicePixelRatio||1}function xBt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?bBt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class v8 extends cO{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ko,this._tempb=new Ko}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:_b(1,1,this._options.type),t&&this._canvas&&(eh(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)xBt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ut("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=_Bt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):wBt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=vd[n.marktype];n.clip&&b8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const _Bt=(e,t,n)=>new Ko().set(0,0,t,n).translate(-e[0],-e[1]);function wBt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class tLe extends ise{constructor(t,n){super(t,n);const r=this;r._hrefHandler=jH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=jH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==aN)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(PK,this._hrefHandler),i.removeEventListener(NK,this._tooltipHandler),i.removeEventListener(aN,this._tooltipHandler)),this._svg=i=t&&rse(t,"svg"),i&&(i.addEventListener(PK,this._hrefHandler),i.addEventListener(NK,this._tooltipHandler),i.addEventListener(aN,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:jH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const jH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},nLe="aria-hidden",sse="aria-label",ose="role",ase="aria-roledescription",rLe="graphics-object",use="graphics-symbol",iLe=(e,t,n)=>({[ose]:e,[ase]:t,[sse]:n||void 0}),EBt=Wp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),vye={axis:{desc:"axis",caption:CBt},legend:{desc:"legend",caption:ABt},"title-text":{desc:"title",caption:e=>`Title text '${xye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${xye(e)}'`}},bye={ariaRole:ose,ariaRoleDescription:ase,description:sse};function sLe(e,t){const n=t.aria===!1;if(e(nLe,n||void 0),n||t.description==null)for(const r in bye)e(bye[r],void 0);else{const r=t.mark.marktype;e(sse,t.description),e(ose,t.ariaRole||(r==="group"?rLe:use)),e(ase,t.ariaRoleDescription||`${r} mark`)}}function oLe(e){return e.aria===!1?{[nLe]:!0}:EBt[e.role]?null:vye[e.role]?TBt(e,vye[e.role]):SBt(e)}function SBt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return iLe(n?rLe:use,`${t} mark container`,e.description)}function TBt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return iLe(t.role||use,t.desc,n.description||r(n))}catch{return null}}function xye(e){return Wt(e.text).join(" ")}function CBt(e){const t=e.datum,n=e.orient,r=t.title?aLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${tA(a)?"discrete":a} scale with ${xMe(o,s,e)}`}function ABt(e){const t=e.datum,n=t.title?aLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return kBt(r)+(n?` titled '${n}'`:"")+` for ${IBt(s)} with ${xMe(u,a,e)}`}function aLe(e){try{return Wt(Kr(e.items).items[0].text).join(" ")}catch{return null}}function IBt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kr(e)}function kBt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const uLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),RBt=e=>uLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function lse(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${RBt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=uLe(u),a),toString:()=>e};return a}const lLe=e=>cLe(lse(),e)+"";function cLe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):cLe(e,r)}return e.close()}const b8={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},x8={blend:"mix-blend-mode"},fLe={fill:"none","stroke-miterlimit":10},TR=0,_ye="http://www.w3.org/2000/xmlns/",oa=TP.xmlns;class cse extends cO{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ua(t,0,"svg",oa),this._svg.setAttributeNS(_ye,"xmlns",oa),this._svg.setAttributeNS(_ye,"xmlns:xlink",TP["xmlns:xlink"]),this._svg.setAttribute("version",TP.version),this._svg.setAttribute("class","marks"),eh(t,1),this._root=ua(this._svg,TR,"g",oa),ib(this._root,fLe),eh(this._svg,TR+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(ib(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ua(t,TR,"rect",oa),ib(r,{width:this._width,height:this._height,fill:n}));const i=lLe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),eh(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=vd[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,wye(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,wye(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=vd[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Eye(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return eh(c,0),n._svg;c.setAttribute("class",YMe(n));const f=oLe(n);for(const m in f)Ml(c,m,f[m]);l||Ml(c,"pointer-events",u),Ml(c,"clip-path",n.clip?Uie(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),v=Eye(m,c,d,a.tag,s);g&&(this._update(a,v,m),l&&PBt(this,v,m,i)),d=v,++h};return a.nested?n.items.length&&p(n.items[0]):Yp(n,p),eh(c,h),c}_update(t,n,r){Ny=n,Xu=n.__values__,sLe(uN,r),t.attr(uN,r,this);const i=MBt[t.type];i&&i.call(this,t,n,r),Ny&&this.style(Ny,r)}style(t,n){if(n!=null){for(const r in b8){let i=r==="font"?lO(n):n[r];if(i===Xu[r])continue;const s=b8[r];i==null?t.removeAttribute(s):(Fie(i)&&(i=wMe(i,this._defs.gradient,dLe())),t.setAttribute(s,i+"")),Xu[r]=i}for(const r in x8)I$(t,x8[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ua(t,TR+1,"defs",oa)),i=DBt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ua(t,TR+1,"defs",oa)),i=NBt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):eh(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function wye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function DBt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ua(e,n++,"pattern",oa);ib(o,{id:u8+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ua(o,0,"rect",oa),ib(o,{width:1,height:1,fill:`url(${dLe()}#${t.id})`}),e=ua(e,n++,"radialGradient",oa),ib(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ua(e,n++,"linearGradient",oa),ib(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ua(e,r,"stop",oa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return eh(e,r),n}function NBt(e,t,n){let r;return e=ua(e,n,"clipPath",oa),e.setAttribute("id",t.id),t.path?(r=ua(e,0,"path",oa),r.setAttribute("d",t.path)):(r=ua(e,0,"rect",oa),ib(r,{x:0,y:0,width:t.width,height:t.height})),eh(e,1),n+1}function PBt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Yp(n,o=>{i=e.mark(t,o,i,r),++s}),eh(t,1+s)}function Eye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=rb(o,r,oa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=rb(o,"path",oa);s.appendChild(a),a.__data__=e;const u=rb(o,"g",oa);s.appendChild(u),u.__data__=e;const l=rb(o,"path",oa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||OBt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function OBt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ny=null,Xu=null;const MBt={group(e,t,n){const r=Ny=t.childNodes[2];Xu=r.__values__,e.foreground(uN,n,this),Xu=t.__values__,Ny=t.childNodes[1],e.content(uN,n,this);const i=Ny=t.childNodes[0];e.background(uN,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Xu.events&&(Ml(r,"pointer-events",s),Ml(i,"pointer-events",s),Xu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ml(r,"display",null),this.style(i,n),Ml(i,"stroke",null),o&&(n.fill=null),Xu=r.__values__,this.style(r,n),o&&(n.fill=o),Ny=null}else Ml(r,"display","none")},image(e,t,n){n.smooth===!1?(I$(t,"image-rendering","optimizeSpeed"),I$(t,"image-rendering","pixelated")):I$(t,"image-rendering",null)},text(e,t,n){const r=uO(n);let i,s,o,a;ft(r)?(s=r.map(u=>tx(n,u)),i=s.join(`
`),i!==Xu.text&&(eh(t,0),o=t.ownerDocument,a=ex(n),s.forEach((u,l)=>{const c=rb(o,"tspan",oa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Xu.text=i)):(s=tx(n,r),s!==Xu.text&&(t.textContent=s,Xu.text=s)),Ml(t,"font-family",lO(n)),Ml(t,"font-size",hg(n)+"px"),Ml(t,"font-style",n.fontStyle),Ml(t,"font-variant",n.fontVariant),Ml(t,"font-weight",n.fontWeight)}};function uN(e,t,n){t!==Xu[e]&&(n?LBt(Ny,e,t,n):Ml(Ny,e,t),Xu[e]=t)}function I$(e,t,n){n!==Xu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Xu[t]=n)}function ib(e,t){for(const n in t)Ml(e,n,t[n])}function Ml(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function LBt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function dLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class hLe extends cO{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=lse();n.open("svg",lr({},TP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",fLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=vd[n.marktype],i=r.tag,s=[sLe,r.attr];t.open("g",{class:YMe(n),"clip-path":n.clip?Uie(this,n,n.group):null},oLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=uO(a);if(ft(l)){const c={x:0,dy:ex(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(tx(a,l[f])).close()}else t.text(tx(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Yp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Yp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&$Bt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:u8+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function $Bt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=lO(t),e["font-size"]=hg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in b8){let a=t[o];const u=b8[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Fie(a)&&(a=wMe(a,i.gradient,"")),e[u]=a)}for(const o in x8){const a=t[o];a!=null&&(s=s||[],s.push(`${x8[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const hp={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function FBt(e){hp.svgMarkTypes=e.svgMarkTypes??["text"],hp.svgOnTop=e.svgOnTop??!0,hp.debug=e.debug??!1}class OK extends cO{constructor(t){super(t),this._svgRenderer=new cse(t),this._canvasRenderer=new v8(t)}initialize(t,n,r,i,s){this._root_el=ua(t,0,"div");const o=ua(this._root_el,0,"div"),a=ua(this._root_el,1,"div");return this._root_el.style.position="relative",hp.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=hp.svgOnTop?a:o,this._canvasEl=hp.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return hp.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!hp.svgMarkTypes.includes(s));this._svgRenderer.render(t,hp.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return hp.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class pLe extends fO{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ua(ua(t,0,"div"),hp.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const mLe="canvas",gLe="hybrid",yLe="png",vLe="svg",bLe="none",sb={Canvas:mLe,PNG:yLe,SVG:vLe,Hybrid:gLe,None:bLe},hE={};hE[mLe]=hE[yLe]={renderer:v8,headless:v8,handler:fO};hE[vLe]={renderer:cse,headless:hLe,handler:tLe};hE[gLe]={renderer:OK,headless:OK,handler:pLe};hE[bLe]={};function Gj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(hE[e]=t,this):hE[e]}function xLe(e,t,n){const r=[],i=new Ko().union(t),s=e.marktype;return s?_Le(e,i,n,r):s==="group"?wLe(e,i,n,r):ut("Intersect scene must be mark node or group item.")}function _Le(e,t,n,r){if(BBt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)wLe(i[a],t,n,r);else for(const u=vd[s].isect;a<o;++a){const l=i[a];ELe(l,t,u)&&r.push(l)}}return r}function BBt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function wLe(e,t,n,r){n&&n(e.mark)&&ELe(e,t,vd.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)_Le(i[u],t,n,r);t.translate(o,a)}return r}function ELe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const UH=new Ko;function SLe(e){const t=e.clip;if(cr(t))t(oO(UH.clear()));else if(t)UH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(UH)}const jBt=1e-9;function fse(e,t,n){return e===t?!0:n==="path"?TLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:bi(e)&&bi(t)?Math.abs(e-t)<=jBt:!e||!t||!Ht(e)&&!Ht(t)?e==t:UBt(e,t)}function TLe(e,t){return fse(nA(e),nA(t))}function UBt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!fse(e[i],t[i],i))return!1;return typeof e==typeof t}function zBt(){kMe(),d5t()}const sA="top",Ep="left",Ip="right",nx="bottom",VBt="top-left",HBt="top-right",qBt="bottom-left",WBt="bottom-right",dse="start",MK="middle",$l="end",GBt="x",YBt="y",Yj="group",hse="axis",pse="title",KBt="frame",XBt="scope",mse="legend",CLe="row-header",ALe="row-footer",ILe="row-title",kLe="column-header",RLe="column-footer",DLe="column-title",QBt="padding",JBt="symbol",NLe="fit",PLe="fit-x",OLe="fit-y",ZBt="pad",gse="none",U6="all",LK="each",yse="flush",ob="column",ab="row";function MLe(e){nt.call(this,null,e)}zt(MLe,nt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=vd[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=z6(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===Yj||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(z6(l,o))),r.role){case hse:case mse:case pse:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(z6(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(z6(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return SLe(r),t.modifies("bounds")}});function z6(e,t,n){return t(e.bounds.clear(),e,n)}const Sye=":vega_identifier:";function vse(e){nt.call(this,0,e)}vse.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};zt(vse,nt,{transform(e,t){const n=e9t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function e9t(e){return e._signals[Sye]||(e._signals[Sye]=e.add(0))}function LLe(e){nt.call(this,null,e)}zt(LLe,nt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,t9t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Yj?Bj:Fj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function t9t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function $Le(e){nt.call(this,null,e)}const Tye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!FLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},FLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Cye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(FLe(i,s=e[n].bounds,t))return!0},n9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},r9t=(e,t,n)=>{var r=e.range(),i=new Ko;return t===sA||t===nx?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Aye=e=>(e.forEach(t=>t.opacity=1),e),Iye=(e,t)=>e.reflow(t.modified()).modifies("opacity");zt($Le,nt,{transform(e,t){const n=Tye[e.method]||Tye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Aye(i),t=Iye(t,e)),t;if(i=i.filter(n9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Aye(i),t=Iye(t,e),s.length>=3&&Cye(s,r)){do s=n(s,r);while(s.length>=3&&Cye(s,r));s.length<3&&!Kr(i).opacity&&(s.length>1&&(Kr(s).opacity=0),Kr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=r9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function BLe(e){nt.call(this,null,e)}zt(BLe,nt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Yu=new Ko;function D2(e,t,n){return e[t]===n?0:(e[t]=n,1)}function i9t(e){var t=e.items[0].orient;return t===Ep||t===Ip}function s9t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function o9t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=s9t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,v=p&&ese(p),b=0,w=0,E,T;switch(Yu.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case sA:b=f||0,w=-c,T=Math.max(d,Math.min(h,-g.y1)),g.add(0,-T).add(l,0),p&&V6(e,p,T,m,v,0,-1,g);break;case Ep:b=-c,w=f||0,T=Math.max(d,Math.min(h,-g.x1)),g.add(-T,0).add(0,l),p&&V6(e,p,T,m,v,1,-1,g);break;case Ip:b=n+c,w=f||0,T=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(T,l),p&&V6(e,p,T,m,v,1,1,g);break;case nx:b=f||0,w=r+c,T=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,T),p&&V6(e,p,T,m,0,0,1,g);break;default:b=i.x,w=i.y}return O1(g.translate(b,w),i),D2(i,"x",b+o)|D2(i,"y",w+o)&&(i.bounds=Yu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function V6(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const kye=(e,t)=>Math.floor(Math.min(e,t)),Rye=(e,t)=>Math.ceil(Math.max(e,t));function a9t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Yj)switch(i.role){case hse:case mse:case pse:break;case CLe:o.rowheaders.push(...s);break;case ALe:o.rowfooters.push(...s);break;case kLe:o.colheaders.push(...s);break;case RLe:o.colfooters.push(...s);break;case ILe:o.rowtitle=s[0];break;case DLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function u9t(e){return new Ko().set(0,0,e.width||0,e.height||0)}function l9t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ns(e,t,n){const r=Ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function Dye(e){return e<0?Math.ceil(-e):0}function jLe(e,t,n){var r=!n.nodirty,i=n.bounds===yse?u9t:l9t,s=Yu.set(0,0,0,0),o=Ns(n.align,ob),a=Ns(n.align,ab),u=Ns(n.padding,ob),l=Ns(n.padding,ab),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),v=Array(f),b=0,w=Array(d),E=Array(d),T=Array(d),C,I,R,N,O,L,j,F,H,Q,J;for(I=0;I<c;++I)p[I]=0;for(I=0;I<f;++I)v[I]=0;for(I=0;I<d;++I)L=t[I],O=T[I]=i(L),L.x=L.x||0,w[I]=0,L.y=L.y||0,E[I]=0,R=I%c,N=~~(I/c),m=Math.max(m,j=Math.ceil(O.x2)),b=Math.max(b,F=Math.ceil(O.y2)),p[R]=Math.max(p[R],j),v[N]=Math.max(v[N],F),h[I]=u+Dye(O.x1),g[I]=l+Dye(O.y1),r&&e.dirty(t[I]);for(I=0;I<d;++I)I%c===0&&(h[I]=0),I<c&&(g[I]=0);if(o===LK)for(R=1;R<c;++R){for(J=0,I=R;I<d;I+=c)J<h[I]&&(J=h[I]);for(I=R;I<d;I+=c)h[I]=J+p[R-1]}else if(o===U6){for(J=0,I=0;I<d;++I)I%c&&J<h[I]&&(J=h[I]);for(I=0;I<d;++I)I%c&&(h[I]=J+m)}else for(o=!1,R=1;R<c;++R)for(I=R;I<d;I+=c)h[I]+=p[R-1];if(a===LK)for(N=1;N<f;++N){for(J=0,I=N*c,C=I+c;I<C;++I)J<g[I]&&(J=g[I]);for(I=N*c;I<C;++I)g[I]=J+v[N-1]}else if(a===U6){for(J=0,I=c;I<d;++I)J<g[I]&&(J=g[I]);for(I=c;I<d;++I)g[I]=J+b}else for(a=!1,N=1;N<f;++N)for(I=N*c,C=I+c;I<C;++I)g[I]+=v[N-1];for(H=0,I=0;I<d;++I)H=h[I]+(I%c?H:0),w[I]+=H-t[I].x;for(R=0;R<c;++R)for(Q=0,I=R;I<d;I+=c)Q+=g[I],E[I]+=Q-t[I].y;if(o&&Ns(n.center,ob)&&f>1)for(I=0;I<d;++I)O=o===U6?m:p[I%c],H=O-T[I].x2-t[I].x-w[I],H>0&&(w[I]+=H/2);if(a&&Ns(n.center,ab)&&c!==1)for(I=0;I<d;++I)O=a===U6?b:v[~~(I/c)],Q=O-T[I].y2-t[I].y-E[I],Q>0&&(E[I]+=Q/2);for(I=0;I<d;++I)s.union(T[I].translate(w[I],E[I]));switch(H=Ns(n.anchor,GBt),Q=Ns(n.anchor,YBt),Ns(n.anchor,ob)){case $l:H-=s.width();break;case MK:H-=s.width()/2}switch(Ns(n.anchor,ab)){case $l:Q-=s.height();break;case MK:Q-=s.height()/2}for(H=Math.round(H),Q=Math.round(Q),s.clear(),I=0;I<d;++I)t[I].mark.bounds.clear();for(I=0;I<d;++I)L=t[I],L.x+=w[I]+=H,L.y+=E[I]+=Q,s.union(L.mark.bounds.union(L.bounds.translate(w[I],E[I]))),r&&e.dirty(L);return s}function c9t(e,t,n){var r=a9t(t),i=r.marks,s=n.bounds===yse?f9t:d9t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const v=jLe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=Ns(n.headerBand,ab,null),c=H6(e,r.rowheaders,i,a,u,-Ns(o,"rowHeader"),kye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ns(n.headerBand,ob,null),f=H6(e,r.colheaders,i,a,a,-Ns(o,"columnHeader"),kye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ns(n.footerBand,ab,null),d=H6(e,r.rowfooters,i,a,u,Ns(o,"rowFooter"),Rye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ns(n.footerBand,ob,null),h=H6(e,r.colfooters,i,a,a,Ns(o,"columnFooter"),Rye,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ns(n.titleAnchor,ab),g=Ns(o,"rowTitle"),g=p===$l?d+g:c-g,m=Ns(n.titleBand,ab,.5),Nye(e,r.rowtitle,g,0,v,m)),r.coltitle&&(p=Ns(n.titleAnchor,ob),g=Ns(o,"columnTitle"),g=p===$l?h+g:f-g,m=Ns(n.titleBand,ob,.5),Nye(e,r.coltitle,g,1,v,m))}function f9t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function d9t(e,t){return e.bounds[t]}function H6(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,v,b,w,E,T,C,I,R,N;if(!p)return m;for(v=c;v<p;v+=f)n[v]&&(m=o(m,u(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=f){for(C=t[b],T=C.mark.bounds,w=v;w>=0&&(I=n[w])==null;w-=d);a?(R=h==null?I.x:Math.round(I.bounds.x1+h*I.bounds.width()),N=m):(R=m,N=h==null?I.y:Math.round(I.bounds.y1+h*I.bounds.height())),T.union(C.bounds.translate(R-(C.x||0),N-(C.y||0))),C.x=R,C.y=N,e.dirty(C),g=o(g,T[l])}return g}function Nye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function h9t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function p9t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function m9t(e,t,n,r,i,s,o){const a=h9t(n,t),u=p9t(e,a("offset",0)),l=a("anchor",dse),c=l===$l?1:l===MK?.5:0,f={align:LK,bounds:a("bounds",yse),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Ep:f.anchor={x:Math.floor(r.x1)-u,column:$l,y:c*(o||r.height()+2*r.y1),row:l};break;case Ip:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case sA:f.anchor={y:Math.floor(i.y1)-u,row:$l,x:c*(s||i.width()+2*i.x1),column:l};break;case nx:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case VBt:f.anchor={x:u,y:u};break;case HBt:f.anchor={x:s-u,y:u,column:$l};break;case qBt:f.anchor={x:u,y:o-u,row:$l};break;case WBt:f.anchor={x:s-u,y:o-u,column:$l,row:$l};break}return f}function g9t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),v9t(e,n,n.items[0].items[0]),s=y9t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===JBt&&b9t(n.items[0].items[0].items[0].items),i!==gse&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,O1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function y9t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function v9t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&CR(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Ep:i+=Math.ceil(o.bounds.width())+u;break;case Ip:case nx:break;default:s+=o.bounds.height()+u}switch((i||s)&&CR(e,n,i,s),o.orient){case Ep:c+=WT(t,n,o,a,1,1);break;case Ip:l+=WT(t,n,o,$l,0,0)+u,c+=WT(t,n,o,a,1,1);break;case nx:l+=WT(t,n,o,a,0,0),c+=WT(t,n,o,$l,-1,0,1)+u;break;default:l+=WT(t,n,o,a,0,0)}(l||c)&&CR(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(CR(e,n,-l,0),CR(e,o,-l,0))}}function WT(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:ese(n);return Math.round(r===dse?f:r===$l?d-h:.5*(c-h))}function CR(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function b9t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function x9t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Ep||a===Ip?r:n,p=0,m=0,g=0,v=0,b=0,w;if(o!==Yj?a===Ep?(p=i.y2,h=i.y1):a===Ip?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Ep&&(p=r,h=0),w=u===dse?p:u===$l?h:(p+h)/2,d&&d.text){switch(a){case sA:case nx:b=f.bounds.height()+c;break;case Ep:v=f.bounds.width()+c;break;case Ip:v=-f.bounds.width()-c;break}Yu.clear().union(d.bounds),Yu.translate(v-(d.x||0),b-(d.y||0)),D2(d,"x",v)|D2(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Yu),d.mark.bounds.clear().union(Yu),e.dirty(d)),Yu.clear().union(d.bounds)}else Yu.clear();switch(Yu.union(f.bounds),a){case sA:m=w,g=i.y1-Yu.height()-l;break;case Ep:m=i.x1-Yu.width()-l,g=w;break;case Ip:m=i.x2+Yu.width()+l,g=w;break;case nx:m=w,g=i.y2+l;break;default:m=s.x,g=s.y}return D2(s,"x",m)|D2(s,"y",g)&&(Yu.translate(m,g),e.dirty(s),s.bounds.clear().union(Yu),t.bounds.clear().union(Yu),e.dirty(s)),s.bounds}function ULe(e){nt.call(this,null,e)}zt(ULe,nt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&c9t(n,r,e.layout),w9t(n,r,e)}),_9t(e.mark.group)?t.reflow():t}});function _9t(e){return e&&e.mark.role!=="legend-entry"}function w9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ko().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case hse:h=i9t(f)?a:u,h.union(o9t(e,f,i,s));break;case pse:c=f;break;case mse:l.push(g9t(e,f));break;case KBt:case XBt:case CLe:case ALe:case ILe:case kLe:case RLe:case DLe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(v=>{d=v.orient||Ip,d!==gse&&(g[d]||(g[d]=[])).push(v)});for(const v in g){const b=g[v];jLe(e,b,m9t(b,v,n.legends,a,u,i,s))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===NLe||n.autosize.type===PLe||n.autosize.type===OLe))switch(v.orient){case Ep:case Ip:o.add(b.x1,0).add(b.x2,0);break;case sA:case nx:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(x9t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),E9t(e,t,o,n)}function E9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===QBt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===gse?(l=0,f=0,u=o,c=a):s===NLe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===PLe?(u=Math.max(0,o-l-d),a=c+f+h):s===OLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===ZBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const S9t=Object.freeze(Object.defineProperty({__proto__:null,bound:MLe,identifier:vse,mark:LLe,overlap:$Le,render:BLe,viewlayout:ULe},Symbol.toStringTag,{value:"Module"}));function zLe(e){nt.call(this,null,e)}zt(zLe,nt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Lie(s,o,e.minstep),u=e.format||mMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?pMe(s,e.values,a):$ie(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ti({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ti({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function VLe(e){nt.call(this,null,e)}function T9t(){return Ti({})}function C9t(e){const t=TI().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}zt(VLe,nt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||T9t,s=e.key||bn,o=this.value;return ft(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ut("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=C9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function HLe(e){nt.call(this,null,e)}zt(HLe,nt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ft(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Pv,u=i.enter||Pv,l=i.exit||Pv,c=(s&&!o?i[s]:a)||Pv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Pv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Pv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Pv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function qLe(e){nt.call(this,[],e)}zt(qLe,nt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||x$,o=e.scale,a=+e.limit,u=Lie(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===x$,c=e.format||bMe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||vMe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===x$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,b)=>Math.max(v,p(b,e)),0)):p=ml(m=p||8),i=i.map((v,b)=>Ti({index:b,label:c(v,b,i),value:v,offset:m,size:p(v,e)})),g&&(g=f[i.length],i.push(Ti({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===ZFt?(d=o.domain(),h=fMe(o,d[0],Kr(d)),f.length<3&&!e.values&&d[0]!==Kr(d)&&(f=[d[0],Kr(d)]),i=f.map((v,b)=>Ti({index:b,label:c(v,b,f),value:v,perc:h(v)}))):(p=f.length-1,h=c5t(o),i=f.map((v,b)=>Ti({index:b,label:c(v,b,f),value:v,perc:b?h(v):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const A9t=e=>e.source.x,I9t=e=>e.source.y,k9t=e=>e.target.x,R9t=e=>e.target.y;function bse(e){nt.call(this,{},e)}bse.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};zt(bse,nt,{transform(e,t){var n=e.sourceX||A9t,r=e.sourceY||I9t,i=e.targetX||k9t,s=e.targetY||R9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Pye.get(u+"-"+a)||Pye.get(u);return l||ut("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const WLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,D9t=(e,t,n,r)=>WLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},N9t=(e,t,n,r)=>GLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),YLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},P9t=(e,t,n,r)=>YLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),O9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,M9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,L9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},$9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},F9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},B9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Pye=TI({line:WLe,"line-radial":D9t,arc:GLe,"arc-radial":N9t,curve:YLe,"curve-radial":P9t,"orthogonal-horizontal":O9t,"orthogonal-vertical":M9t,"orthogonal-radial":L9t,"diagonal-horizontal":$9t,"diagonal-vertical":F9t,"diagonal-radial":B9t});function xse(e){nt.call(this,null,e)}xse.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};zt(xse,nt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||wI,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/CIe(l),h=Wc(c),p,m,g;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const j9t=5;function U9t(e){const t=e.type;return!e.bins&&(t===ZC||t===Z3||t===eO)}function KLe(e){return Pie(e)&&e!==D0}const z9t=Wp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function XLe(e){nt.call(this,null,e),this.modified(!0)}zt(XLe,nt,{transform(e,t){var n=t.dataflow,r=this.value,i=V9t(e);(!r||i!==r.type)&&(this.value=r=xi(i)());for(i in e)if(!z9t[i]){if(i==="padding"&&KLe(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return K9t(r,e,Y9t(r,e,q9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function V9t(e){var t=e.type,n="",r;return t===D0?D0+"-"+ZC:(H9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?D0+"-":r===3?kI+"-":""),(n+t||ZC).toLowerCase())}function H9t(e){const t=e.type;return Pie(t)&&t!==fE&&t!==dE&&(e.scheme||e.range&&e.range.length&&e.range.every(Gt))}function q9t(e,t,n){const r=W9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&U9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return KLe(s)&&t.padding&&i[0]!==Kr(i)&&(i=G9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(QLe(s,i,n)),s===kie&&e.unknown(t.domainImplicit?lY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Lie(e,t.nice)||null),i.length}function W9t(e,t,n){return t?(e.domain(QLe(e.type,t,n)),t.length):-1}function G9t(e,t,n,r,i,s){var o=Math.abs(Kr(n)-n[0]),a=o/(o-2*r),u=e===g1?wre(t,null,a):e===eO?i8(t,null,a,.5):e===Z3?i8(t,null,a,i||1):e===Pj?Ere(t,null,a,s||1):_re(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function QLe(e,t,n){if(oMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+jt(t))}return t}function Y9t(e,t,n){let r=t.bins;if(r&&!ft(r)){const i=e.domain(),s=i[0],o=Kr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||ut("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Wc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Rie&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function K9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=X9t(r,t,n);else if(t.scheme&&(s=Q9t(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);ut(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&aMe(r))return e.interpolator(Lj($K(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Oie(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?S3:A1),s&&e.range($K(s,t.reverse))}function X9t(e,t,n){e!==eMe&&e!==wK&&ut("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===wK?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Iie(n,i,r)]}function Q9t(e,t,n){var r=t.schemeExtent,i,s;return ft(t.scheme)?s=Lj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Mie(i),s||ut(`Unrecognized scheme name: ${t.scheme}`)),n=e===Mj?n+1:e===Rie?n-1:e===eA||e===Oj?+t.schemeCount||j9t:n,aMe(e)?Oye(s,r,t.reverse):cr(s)?cMe(Oye(s,r),n):e===kie?s:s.slice(0,n)}function Oye(e,t,n){return cr(e)&&(t||n)?lMe(e,$K(t||[0,1],n)):e}function $K(e,t){return t?e.slice().reverse():e}function JLe(e){nt.call(this,null,e)}zt(JLe,nt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ZE(e.sort)),this.modified(n),t}});const Mye="zero",ZLe="center",e$e="normalize",t$e=["y0","y1"];function _se(e){nt.call(this,null,e)}_se.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Mye,values:[Mye,ZLe,e$e]},{name:"as",type:"string",array:!0,length:2,default:t$e}]};zt(_se,nt,{transform(e,t){var n=e.as||t$e,r=n[0],i=n[1],s=ZE(e.sort),o=e.field||wI,a=e.offset===ZLe?J9t:e.offset===e$e?Z9t:ejt,u,l,c,f;for(u=tjt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function J9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Z9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function ejt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function tjt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const njt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:zLe,datajoin:VLe,encode:HLe,legendentries:qLe,linkpath:bse,pie:xse,scale:XLe,sortitems:JLe,stack:_se},Symbol.toStringTag,{value:"Module"}));var rjt=Math.abs,FK=Math.cos,_8=Math.sin,ijt=1e-6,n$e=Math.PI,BK=n$e/2,Lye=sjt(2);function $ye(e){return e>1?BK:e<-1?-BK:Math.asin(e)}function sjt(e){return e>0?Math.sqrt(e):0}function ojt(e,t){var n=e*_8(t),r=30,i;do t-=i=(t+_8(t)-n)/(1+FK(t));while(rjt(i)>ijt&&--r>0);return t/2}function ajt(e,t,n){function r(i,s){return[e*i*FK(s=ojt(n,s)),t*_8(s)]}return r.invert=function(i,s){return s=$ye(s/t),[i/(e*FK(s)),$ye((2*s+_8(2*s))/n)]},r}var ujt=ajt(Lye/BK,Lye,n$e);function ljt(){return lg(ujt).scale(169.529)}const cjt=sRe(),jK=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function fjt(e,t){return function n(){const r=t();return r.type=e,r.path=sRe().projection(r),r.copy=r.copy||function(){const i=n();return jK.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},iMe(r)}}function wse(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(w8[e]=fjt(e,t),this):w8[e]||null}function r$e(e){return e&&e.path||cjt}const w8={albers:aRe,albersusa:TSt,azimuthalequalarea:CSt,azimuthalequidistant:ASt,conicconformal:RSt,conicequalarea:a5,conicequidistant:PSt,equalEarth:MSt,equirectangular:DSt,gnomonic:LSt,identity:$St,mercator:ISt,mollweide:ljt,naturalEarth1:FSt,orthographic:BSt,stereographic:jSt,transversemercator:USt};for(const e in w8)wse(e,w8[e]);function djt(){}const ty=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function i$e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),hjt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(pjt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,v,b;for(h=p=-1,g=u[0]>=l,ty[g<<1].forEach(w);++h<e-1;)m=g,g=u[h+1]>=l,ty[m|g<<1].forEach(w);for(ty[g<<0].forEach(w);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,v=u[p*e]>=l,ty[g<<1|v<<2].forEach(w);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=v,v=u[p*e+h+1]>=l,ty[m|g<<1|v<<2|b<<3].forEach(w);ty[g|v<<3].forEach(w)}for(h=-1,v=u[p*e]>=l,ty[v<<2].forEach(w);++h<e-1;)b=v,v=u[p*e+h+1]>=l,ty[v<<2|b<<3].forEach(w);ty[v<<3].forEach(w);function w(E){var T=[E[0][0]+h,E[0][1]+p],C=[E[1][0]+h,E[1][1]+p],I=o(T),R=o(C),N,O;(N=d[I])?(O=f[R])?(delete d[N.end],delete f[O.start],N===O?(N.ring.push(C),c(N.ring)):f[N.start]=d[O.end]={start:N.start,end:O.end,ring:N.ring.concat(O.ring)}):(delete d[N.end],N.ring.push(C),d[N.end=R]=N):(N=f[R])?(O=d[I])?(delete f[N.start],delete d[O.end],N===O?(N.ring.push(C),c(N.ring)):f[O.start]=d[N.end]={start:O.start,end:N.end,ring:O.ring.concat(N.ring)}):(delete f[N.start],N.ring.unshift(T),f[N.start=I]=N):f[I]=d[R]={start:I,end:R,ring:[T,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,v=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(v-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(v-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ut("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:djt,r):n===a},r}function hjt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function pjt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=mjt(e,t[n]))return i;return 0}function mjt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(gjt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function gjt(e,t,n){var r;return yjt(e,t,n)&&vjt(e[r=+(e[0]===t[0])],n[r],t[r])}function yjt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function vjt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function s$e(e,t,n){return function(r){var i=J0(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Lb(s,o,e):a/(e+1);return Wc(s+u,o,u)}}function Ese(e){nt.call(this,null,e)}Ese.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};zt(Ese,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||pl,s=i$e().smooth(e.smooth!==!1),o=e.thresholds||bjt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,ft(o)?o:o(c.values));xjt(f,c,l,e),f.forEach(d=>{u.push(Sj(l,Ti(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function bjt(e,t,n){const r=s$e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Uy(t(i).values)))}function xjt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(bi(i)?i:i[0])||1,a=(bi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(o$e(t,o,a,u,l))}function o$e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Fye(e,t,n){const r=e>=0?e:zre(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function zH(e){return cr(e)?e:ml(+e)}function a$e(){var e=u=>u[0],t=u=>u[1],n=wI,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Fye(r[0],u,e)>>o,f=Fye(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),v=new Float32Array(p*m);let b=g;u.forEach(E=>{const T=d+(+e(E)>>o),C=h+(+t(E)>>o);T>=0&&T<p&&C>=0&&C<m&&(g[T+C*p]+=+n(E))}),c>0&&f>0?(GT(p,m,g,v,c),YT(p,m,v,g,f),GT(p,m,g,v,c),YT(p,m,v,g,f),GT(p,m,g,v,c),YT(p,m,v,g,f)):c>0?(GT(p,m,g,v,c),GT(p,m,v,g,c),GT(p,m,g,v,c),b=v):f>0&&(YT(p,m,g,v,f),YT(p,m,v,g,f),YT(p,m,g,v,f),b=v);const w=l?Math.pow(2,-2*o):1/CIe(b);for(let E=0,T=p*m;E<T;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=zH(u),a):e},a.y=function(u){return arguments.length?(t=zH(u),a):t},a.weight=function(u){return arguments.length?(n=zH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||ut("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||ut("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Wt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ut("invalid bandwidth"),r=u,a):r},a}function GT(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function YT(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Sse(e){nt.call(this,null,e)}Sse.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const _jt=["x","y","weight","size","cellSize","bandwidth"];function u$e(e,t){return _jt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}zt(Sse,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=wjt(r,e.groupby),s=(e.groupby||[]).map(lo),o=u$e(a$e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ti(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function wjt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Tse(e){nt.call(this,null,e)}Tse.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};zt(Tse,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=i$e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||s$e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=u$e(a$e(),e)(i,!0),u=o$e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=ft(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ti),n}});const UK="Feature",Cse="FeatureCollection",Ejt="MultiPoint";function Ase(e){nt.call(this,null,e)}Ase.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};zt(Ase,nt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&pl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(al(a))||s&&t.modified(al(s))||o&&t.modified(al(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:UK,geometry:{type:Ejt,coordinates:r}})),this.value={type:Cse,features:n}}});function Ise(e){nt.call(this,null,e)}Ise.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};zt(Ise,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||pl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=r$e(e.projection),n.materialize().reflow()):o=i===pl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Sjt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Sjt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function kse(e){nt.call(this,null,e)}kse.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};zt(kse,nt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Rse(e){nt.call(this,null,e)}Rse.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};zt(Rse,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Tjt(r$e(e.projection),e.field||dh("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Tjt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Dse(e){nt.call(this,[],e),this.generator=iSt()}Dse.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};zt(Dse,nt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(u6e(n[0],i)):t.add.push(Ti(i)),n[0]=i,t}});function Nse(e){nt.call(this,null,e)}Nse.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};zt(Nse,nt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||pl,s=Ajt(e.opacity,e),o=Cjt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Uy(n.map(l=>Uy(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=Uy(c.values||[])),l[a]=Ijt(c,f,o.dep?o:ml(o(f)),s.dep?s:ml(s(f)))}),t.reflow(!0).modifies(a)}});function Cjt(e,t){let n;return cr(e)?(n=r=>$b(e(r,t)),n.dep=l$e(e)):n=ml($b(e||"#888")),n}function Ajt(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=l$e(e)):e?n=ml(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function l$e(e){if(!cr(e))return!1;const t=Wp(al(e));return t.$x||t.$y||t.$value||t.$max}function Ijt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Qv,d=_b(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,v=0;g<l;++g){t.$y=g-a;for(let b=o,w=g*i;b<u;++b,v+=4){t.$x=b-o,t.$value=f(b+w);const E=n(t);m[v+0]=E.r,m[v+1]=E.g,m[v+2]=E.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function c$e(e){nt.call(this,null,e),this.modified(!0)}zt(c$e,nt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Rjt(e.type),jK.forEach(r=>{e[r]!=null&&Bye(n,r,e[r])})):jK.forEach(r=>{e.modified(r)&&Bye(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&kjt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kjt(e,t){const n=Djt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Rjt(e){const t=wse((e||"mercator").toLowerCase());return t||ut("Unrecognized projection type: "+e),t()}function Bye(e,t,n){cr(e[t])&&e[t](n)}function Djt(e){return e=Wt(e),e.length===1?e[0]:{type:Cse,features:e.reduce((t,n)=>t.concat(Njt(n)),[])}}function Njt(e){return e.type===Cse?e.features:Wt(e).filter(t=>t!=null).map(t=>t.type===UK?t:{type:UK,geometry:t})}const Pjt=Object.freeze(Object.defineProperty({__proto__:null,contour:Tse,geojson:Ase,geopath:Ise,geopoint:kse,geoshape:Rse,graticule:Dse,heatmap:Nse,isocontour:Ese,kde2d:Sse,projection:c$e},Symbol.toStringTag,{value:"Module"})),jye={center:Ywt,collide:hEt,nbody:SEt,link:mEt,x:TEt,y:CEt},SD="forces",zK=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ojt=["static","iterations"],f$e=["x","y","vx","vy"];function Pse(e){nt.call(this,null,e)}Pse.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:f$e}]};zt(Pse,nt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(zK),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&d$e(n,e,0,t)):(this.value=n=Ljt(t.source,e),n.on("tick",Mjt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Ojt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==SD||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(f$e)}});function Mjt(e,t){return()=>e.touch(t).run()}function Ljt(e,t){const n=EEt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),d$e(n,t,!0).on("end",()=>s=!0)}function d$e(e,t,n,r){var i=Wt(t.forces),s,o,a,u;for(s=0,o=zK.length;s<o;++s)a=zK[s],a!==SD&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=SD+s,a=n||t.modified(SD,s)?Fjt(i[s]):r&&$jt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(SD+s,null);return e.numForces=i.length,e}function $jt(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(al(r)))return 1;return 0}function Fjt(e){var t,n;Jt(jye,e.force)||ut("Unrecognized force: "+e.force),t=jye[e.force]();for(n in e)cr(t[n])&&Bjt(t[n],e[n],e);return t}function Bjt(e,t,n){e(cr(t)?r=>t(r,n):t)}const jjt=Object.freeze(Object.defineProperty({__proto__:null,force:Pse},Symbol.toStringTag,{value:"Module"}));function VK(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Ose(e){nt.call(this,null,e)}Ose.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Ujt=e=>e.values;zt(Ose,nt,{transform(e,t){t.source||ut("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Ej(o.data)&&i.rem.push(o.data)}),this.value=s=I3({values:Wt(e.keys).reduce((o,a)=>(o.key(a),o),zjt()).entries(i.source)},Ujt),n&&s.each(o=>{o.children&&(o=Ti(o.data),i.add.push(o),i.source.push(o))}),VK(s,bn,bn)),i.source.root=s,i}});function zjt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function M1(e){nt.call(this,null,e)}const Vjt=(e,t)=>e.parent===t.parent?1:2;zt(M1,nt,{transform(e,t){(!t.source||!t.source.root)&&ut(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(ZE(e.sort,o=>o.data)),Hjt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Vjt:wI);try{this.value=n(i)}catch(o){ut(o)}return i.each(o=>qjt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Hjt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function qjt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const HK=["x","y","r","depth","children"];function Mse(e){M1.call(this,e)}Mse.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HK.length,default:HK}]};zt(Mse,M1,{layout:ate,params:["radius","size","padding"],fields:HK});const qK=["x0","y0","x1","y1","depth","children"];function Lse(e){M1.call(this,e)}Lse.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qK.length,default:qK}]};zt(Lse,M1,{layout:CTt,params:["size","round","padding"],fields:qK});function $se(e){nt.call(this,null,e)}$se.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};zt($se,nt,{transform(e,t){t.source||ut("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?VK(_me().id(e.key).parentId(e.parentKey)(i.source),e.key,hh):VK(_me()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Uye={tidy:LTt,cluster:KSt},WK=["x","y","depth","children"];function Fse(e){M1.call(this,e)}Fse.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:WK.length,default:WK}]};zt(Fse,M1,{layout(e){const t=e||"tidy";if(Jt(Uye,t))return Uye[t]();ut("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:WK});function Bse(e){nt.call(this,[],e)}Bse.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};zt(Bse,nt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ut("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[bn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[bn(a)]&&s[bn(u)]&&i.add.push(Ti({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[bn(o)]=1),n.forEach(o=>{(s[bn(o.source)]||s[bn(o.target)])&&i.mod.push(o)})),i}});const zye={binary:FTt,dice:k3,slice:N9,slicedice:BTt,squarify:TRe,resquarify:jTt},GK=["x0","y0","x1","y1","depth","children"];function jse(e){M1.call(this,e)}jse.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GK.length,default:GK}]};zt(jse,M1,{layout(){const e=$Tt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Jt(zye,t)?e.tile(zye[t]):ut("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:GK});const Wjt=Object.freeze(Object.defineProperty({__proto__:null,nest:Ose,pack:Mse,partition:Lse,stratify:$se,tree:Fse,treelinks:Bse,treemap:jse},Symbol.toStringTag,{value:"Module"})),VH=4278190080;function Gjt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Yjt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=_b(s,o).getContext("2d"),l=_b(s,o).getContext("2d"),c=a&&_b(s,o).getContext("2d");n.forEach(R=>k$(u,R,!1)),k$(l,t,!1),a&&k$(c,t,!0);const f=HH(u,s,o),d=HH(l,s,o),h=a&&HH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,v,b,w,E,T,C,I;for(v=0;v<o;++v)for(g=0;g<s;++g)E=v*s+g,T=f[E]&VH,I=d[E]&VH,C=a&&h[E]&VH,(T||C||I)&&(b=e(g),w=e(v),!i&&(T||I)&&p.set(b,w),a&&(T||C)&&m.set(b,w));return[p,m]}function HH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function k$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>k$(e,s.items,n))}):vd[r].draw(e,{items:n?t.map(Kjt):t})}function Kjt(e){const t=Sj(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ny=5,Pl=31,CP=32,zv=new Uint32Array(CP+1),yp=new Uint32Array(CP+1);yp[0]=0;zv[0]=~yp[0];for(let e=1;e<=CP;++e)yp[e]=yp[e-1]<<1|1,zv[e]=~yp[e];function Xjt(e,t){const n=new Uint32Array(~~((e*t+CP)/CP));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>ny]&1<<(a&Pl)},set:(s,o)=>{const a=o*e+s;r(a>>>ny,1<<(a&Pl))},clear:(s,o)=>{const a=o*e+s;i(a>>>ny,~(1<<(a&Pl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>ny,h=f>>>ny,d===h){if(n[d]&zv[c&Pl]&yp[(f&Pl)+1])return!0}else{if(n[d]&zv[c&Pl]||n[h]&yp[(f&Pl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ny,d=c>>>ny,f===d)r(f,zv[l&Pl]&yp[(c&Pl)+1]);else for(r(f,zv[l&Pl]),r(d,yp[(c&Pl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ny,d=c>>>ny,f===d)i(f,yp[l&Pl]|zv[(c&Pl)+1]);else for(i(f,yp[l&Pl]),i(d,zv[(c&Pl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function Qjt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Xjt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Jjt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=sd.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,v,b;for(let w=0;w<u;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,g=(d+h)/2,v=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=v);return g=c/2,v=l/2,d=o.x-g,h=o.x+g,p=o.y-v,m=o.y+v,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function E8(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function ub(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Zjt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,v=s,b;if(!E8(p,m,d,h,i,s)&&!ub(e,p,m,h,d,g,o,a)&&!ub(e,p,m,h,d,h,o,null)){for(;v-g>=1;)b=(g+v)/2,ub(e,p,m,h,d,b,o,a)?v=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=sd.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,v=0,b,w,E,T,C,I,R,N,O,L,j,F,H,Q,J,ne,Z;for(let ie=0;ie<f;++ie){for(b=c[ie].x,E=c[ie].y,w=c[ie].x2===void 0?b:c[ie].x2,T=c[ie].y2===void 0?E:c[ie].y2,b>w&&(Z=b,b=w,w=Z),E>T&&(Z=E,E=T,T=Z),O=e(b),j=e(w),L=~~((O+j)/2),F=e(E),Q=e(T),H=~~((F+Q)/2),R=L;R>=O;--R)for(N=H;N>=F;--N)ne=u(R,N,p,h,d),ne&&([l.x,l.y,p,m]=ne);for(R=L;R<=j;++R)for(N=H;N<=Q;++N)ne=u(R,N,p,h,d),ne&&([l.x,l.y,p,m]=ne);!m&&!n&&(J=Math.abs(w-b+T-E),C=(b+w)/2,I=(E+T)/2,J>=v&&!E8(C,I,h,d,i,s)&&!ub(e,C,I,d,h,d,o,null)&&(v=J,l.x=C,l.y=I,g=!0))}return m||g?(C=h/2,I=d/2,o.setRange(e(l.x-C),e(l.y-I),e(l.x+C),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const e7t=[-1,-1,1,1],t7t=[-1,1,-1,1];function n7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=sd.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,v=!1,b=0,w,E,T,C,I,R,N,O,L,j,F,H;for(let Q=0;Q<f;++Q){for(w=c[Q].x,T=c[Q].y,E=c[Q].x2===void 0?w:c[Q].x2,C=c[Q].y2===void 0?T:c[Q].y2,p.push([e((w+E)/2),e((T+C)/2)]);p.length;)if([N,O]=p.pop(),!(o.get(N,O)||a.get(N,O)||u.get(N,O))){u.set(N,O);for(let J=0;J<4;++J)I=N+e7t[J],R=O+t7t[J],u.outOfBounds(I,R,I,R)||p.push([I,R]);if(I=e.invert(N),R=e.invert(O),L=m,j=s,!E8(I,R,h,d,i,s)&&!ub(e,I,R,d,h,L,o,a)&&!ub(e,I,R,d,h,d,o,null)){for(;j-L>=1;)F=(L+j)/2,ub(e,I,R,d,h,F,o,a)?j=F:L=F;L>m&&(l.x=I,l.y=R,m=L,g=!0)}}!g&&!n&&(H=Math.abs(E-w+C-T),I=(w+E)/2,R=(T+C)/2,H>=b&&!E8(I,R,h,d,i,s)&&!ub(e,I,R,d,h,d,o,null)&&(b=H,l.x=I,l.y=R,v=!0))}return g||v?(I=h/2,R=d/2,o.setRange(e(l.x-I),e(l.y-R),e(l.x+I),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const r7t=["right","center","left"],i7t=["bottom","middle","top"];function s7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,v,b,w,E,T,C,I,R,N,O,L;for(let j=0;j<u;++j){if(h=(n[j]&3)-1,p=(n[j]>>>2&3)-1,m=h===0&&p===0||r[j]<0,g=h&&p?Math.SQRT1_2:1,v=r[j]<0?-1:1,b=c[1+h]+r[j]*h*g,I=c[4+p]+v*f*p/2+r[j]*p*g,E=I-f/2,T=I+f/2,R=e(b),O=e(E),L=e(T),!d)if(Vye(R,R,O,L,o,a,b,b,E,T,c,m))d=sd.width(l.datum,l.datum.text);else continue;if(C=b+v*d*h/2,b=C-d/2,w=C+d/2,R=e(b),N=e(w),Vye(R,N,O,L,o,a,b,w,E,T,c,m))return l.x=h?h*v<0?w:b:C,l.y=p?p*v<0?T:E:I,l.align=r7t[h*v+1],l.baseline=i7t[p*v+1],o.setRange(R,O,N,L),!0}return!1}}function Vye(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const qH=0,WH=4,GH=8,YH=0,KH=1,XH=2,o7t={"top-left":qH+YH,top:qH+KH,"top-right":qH+XH,left:WH+YH,middle:WH+KH,right:WH+XH,"bottom-left":GH+YH,bottom:GH+KH,"bottom-right":GH+XH},a7t={naive:Jjt,"reduced-search":Zjt,floodfill:n7t};function u7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=l7t(r,f),h=c7t(i,f),p=f7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",v=d7t(p,m,a,u),b=l===null||l===1/0,w=g&&c==="naive";let E=-1,T=-1;const C=e.map(O=>{const L=b?sd.width(O,O.text):void 0;return E=Math.max(E,L),T=Math.max(T,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(O),textWidth:L}});l=l===null||l===1/0?Math.max(E,T)+Math.max(...r):l;const I=Qjt(t[0],t[1],l);let R;if(!w){n&&C.sort((j,F)=>n(j.datum,F.datum));let O=!1;for(let j=0;j<h.length&&!O;++j)O=h[j]===5||d[j]<0;const L=(p&&o||g)&&e.map(j=>j.datum);R=s.length||L?Yjt(I,L||[],s,O,g):Gjt(I,o&&C)}const N=g?a7t[c](I,R,o,u):s7t(I,R,h,d);return C.forEach(O=>O.opacity=+N(O)),C}function l7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function c7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=o7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function f7t(e){return e&&e.mark&&e.mark.marktype}function d7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const YK=["x","y","opacity","align","baseline"],h$e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Use(e){nt.call(this,null,e)}Use.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:h$e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:YK.length,default:YK}]};zt(Use,nt,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ut("Size parameter should be specified as a [width, height] array.");const i=e.as||YK;return u7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,Wt(e.offset==null?1:e.offset),Wt(e.anchor||h$e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const h7t=Object.freeze(Object.defineProperty({__proto__:null,label:Use},Symbol.toStringTag,{value:"Module"}));function p$e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function zse(e){nt.call(this,null,e)}zse.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};zt(zse,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=p$e(r,e.groupby),s=(e.groupby||[]).map(lo),o=s.length,a=e.as||[lo(e.x),lo(e.y)],u=[];i.forEach(l=>{C6e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ti(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const KK={constant:eie,linear:tie,log:w6e,exp:E6e,pow:S6e,quad:nie,poly:T6e},p7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Vse(e){nt.call(this,null,e)}Vse.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(KK)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};zt(Vse,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=p$e(r,e.groupby),s=(e.groupby||[]).map(lo),o=e.method||"linear",a=e.order==null?3:e.order,u=p7t(o,a),l=e.as||[lo(e.x),lo(e.y)],c=KK[o],f=[];let d=e.extent;Jt(KK,o)||ut("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ti({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||J0(h,e.x),v=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(Ti(w))};o==="linear"||o==="constant"?g.forEach(b=>v([b,m.predict(b)])):Dj(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const m7t=Object.freeze(Object.defineProperty({__proto__:null,loess:zse,regression:Vse},Symbol.toStringTag,{value:"Module"}));function Hse(e){nt.call(this,null,e)}Hse.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const g7t=[-1e5,-1e5,1e5,1e5];zt(Hse,nt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:g7t;const s=this.value=Yee.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!v7t(u)?y7t(u):null}return t.reflow(e.modified()).modifies(n)}});function y7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function v7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const b7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Hse},Symbol.toStringTag,{value:"Module"}));var QH=Math.PI/180,TD=64,R$=2048;function x7t(){var e=[256,256],t,n,r,i,s,o,a,u=m$e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(_b()),m=C7t((e[0]>>5)*e[1]),g=null,v=l.length,b=-1,w=[],E=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,I)=>I.size-C.size);++b<v;){var T=E[b];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,_7t(p,T,E,b),T.hasText&&h(m,T,g)&&(w.push(T),g?E7t(g,T):g=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(TD<<5)/m,p.height=R$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var v=m.x,b=m.y,w=Math.hypot(e[0],e[1]),E=u(e),T=c()<.5?1:-1,C=-T,I,R,N;(I=E(C+=T))&&(R=~~I[0],N=~~I[1],!(Math.min(Math.abs(R),Math.abs(N))>=w));)if(m.x=v+R,m.y=b+N,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!w7t(m,p,e[0]))&&(!g||S7t(m,g))){for(var O=m.sprite,L=m.width>>5,j=e[0]>>5,F=m.x-(L<<4),H=F&127,Q=32-H,J=m.y1-m.y0,ne=(m.y+m.y0)*j+(F>>5),Z,ie=0;ie<J;ie++){Z=0;for(var q=0;q<=L;q++)p[ne+q]|=Z<<Q|(q<L?(Z=O[ie*L+q])>>>H:0);ne+=j}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=P_(p),f):n},f.fontStyle=function(p){return arguments.length?(i=P_(p),f):i},f.fontWeight=function(p){return arguments.length?(s=P_(p),f):s},f.rotate=function(p){return arguments.length?(o=P_(p),f):o},f.text=function(p){return arguments.length?(t=P_(p),f):t},f.spiral=function(p){return arguments.length?(u=A7t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=P_(p),f):r},f.padding=function(p){return arguments.length?(a=P_(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function _7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(TD<<5)/s,R$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*QH),g=Math.cos(t.rotate*QH),v=c*g,b=c*m,w=d*g,E=d*m;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=TD<<5&&(o=0,a+=u,u=0),a+d>=R$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*QH),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(TD<<5)/s,R$/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var I=0,R=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var N=f*p+(h>>5),O=T[(a+p)*(TD<<5)+(o+h)<<2]?1<<31-h%32:0;C[N]|=O,I|=O}I?R=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+R,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function w7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function E7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function S7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function m$e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function T7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function C7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function P_(e){return typeof e=="function"?e:function(){return e}}var A7t={archimedean:m$e,rectangular:T7t};const g$e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],I7t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function qse(e){nt.call(this,x7t(),e)}qse.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:g$e}]};zt(qse,nt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ut("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||I7t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||g$e;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=ml(a),u){const p=a,m=xi("sqrt")().domain(J0(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(mh).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const k7t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:qse},Symbol.toStringTag,{value:"Module"})),R7t=e=>new Uint8Array(e),D7t=e=>new Uint16Array(e),lN=e=>new Uint32Array(e);function N7t(){let e=8,t=[],n=lN(0),r=q6(0,e),i=q6(0,e);return{data:()=>t,seen:()=>n=P7t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=q6(s,e,r),i=q6(s,e))}}}function P7t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function q6(e,t,n){const r=(t<257?R7t:t<65537?D7t:lN)(e);return n&&r.set(n),r}function Hye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function qye(){let e=lN(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=lN(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=O7t(h,d),c)p=t,m=e,t=Array(c+f),e=lN(c+f),M7t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[yvt(u,a[0],0,l),Mb(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function O7t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),xvt(e,t)}function M7t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Wse(e){nt.call(this,N7t(),e),this._indices=null,this._dims=null}Wse.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};zt(Wse,nt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=qye()),s.push(Hye(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,v,b,w,E,T,C,I;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,T=0,C=b.length;T<C;++T)E[b[T]._index]=1;for(T=0;T<h;++T)I=r[T],(!o[T]||e.modified("fields",T)||t.modified(I.fields))&&(v=I.fname,(m=p[v])||(s[v]=g=qye(),p[v]=m=g.insert(I,t.source,0)),o[T]=Hye(g,T,i[T]).onAdd(m,u));for(T=0,C=a.data().length;T<C;++T)w[T]||(l[T]!==u[T]?f.push(T):E[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),v=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)v[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,v,b;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,v=Math.min(f,p);g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),v=d;g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),v=p;g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Gse(e){nt.call(this,null,e)}Gse.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};zt(Gse,nt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const L7t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Wse,resolvefilter:Gse},Symbol.toStringTag,{value:"Module"})),$7t="RawCode",oA="Literal",F7t="Property",B7t="Identifier",j7t="ArrayExpression",U7t="BinaryExpression",y$e="CallExpression",z7t="ConditionalExpression",V7t="LogicalExpression",H7t="MemberExpression",q7t="ObjectExpression",W7t="UnaryExpression";function om(e){this.type=e}om.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=G7t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function G7t(e){switch(e.type){case j7t:return e.elements;case U7t:case V7t:return[e.left,e.right];case y$e:return[e.callee].concat(e.arguments);case z7t:return[e.test,e.consequent,e.alternate];case H7t:return[e.object,e.property];case q7t:return e.properties;case F7t:return[e.key,e.value];case W7t:return[e.argument];case B7t:case oA:case $7t:default:return[]}}var pg,hn,ot,ll,Fi,Kj=1,dO=2,pE=3,Mx=4,Xj=5,nS=6,Bc=7,hO=8,Y7t=9;pg={};pg[Kj]="Boolean";pg[dO]="<end>";pg[pE]="Identifier";pg[Mx]="Keyword";pg[Xj]="Null";pg[nS]="Numeric";pg[Bc]="Punctuator";pg[hO]="String";pg[Y7t]="RegularExpression";var K7t="ArrayExpression",X7t="BinaryExpression",Q7t="CallExpression",J7t="ConditionalExpression",v$e="Identifier",Z7t="Literal",eUt="LogicalExpression",tUt="MemberExpression",nUt="ObjectExpression",rUt="Property",iUt="UnaryExpression",Ba="Unexpected token %0",sUt="Unexpected number",oUt="Unexpected string",aUt="Unexpected identifier",uUt="Unexpected reserved word",lUt="Unexpected end of input",XK="Invalid regular expression",JH="Invalid regular expression: missing /",b$e="Octal literals are not allowed in strict mode.",cUt="Duplicate data property in object literal not allowed in strict mode",bu="ILLEGAL",AP="Disabled.",fUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),dUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Qj(e,t){if(!e)throw new Error("ASSERT: "+t)}function py(e){return e>=48&&e<=57}function Yse(e){return"0123456789abcdefABCDEF".includes(e)}function cN(e){return"01234567".includes(e)}function hUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function IP(e){return e===10||e===13||e===8232||e===8233}function pO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&fUt.test(String.fromCharCode(e))}function S8(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&dUt.test(String.fromCharCode(e))}const pUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function x$e(){for(;ot<ll;){const e=hn.charCodeAt(ot);if(hUt(e)||IP(e))++ot;else break}}function QK(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ot<ll&&Yse(hn[ot])?(r=hn[ot++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gi({},Ba,bu);return String.fromCharCode(i)}function mUt(){var e,t,n,r;for(e=hn[ot],t=0,e==="}"&&gi({},Ba,bu);ot<ll&&(e=hn[ot++],!!Yse(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gi({},Ba,bu),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function _$e(){var e,t;for(e=hn.charCodeAt(ot++),t=String.fromCharCode(e),e===92&&(hn.charCodeAt(ot)!==117&&gi({},Ba,bu),++ot,e=QK("u"),(!e||e==="\\"||!pO(e.charCodeAt(0)))&&gi({},Ba,bu),t=e);ot<ll&&(e=hn.charCodeAt(ot),!!S8(e));)++ot,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),hn.charCodeAt(ot)!==117&&gi({},Ba,bu),++ot,e=QK("u"),(!e||e==="\\"||!S8(e.charCodeAt(0)))&&gi({},Ba,bu),t+=e);return t}function gUt(){var e,t;for(e=ot++;ot<ll;){if(t=hn.charCodeAt(ot),t===92)return ot=e,_$e();if(S8(t))++ot;else break}return hn.slice(e,ot)}function yUt(){var e,t,n;return e=ot,t=hn.charCodeAt(ot)===92?_$e():gUt(),t.length===1?n=pE:pUt.hasOwnProperty(t)?n=Mx:t==="null"?n=Xj:t==="true"||t==="false"?n=Kj:n=pE,{type:n,value:t,start:e,end:ot}}function ZH(){var e=ot,t=hn.charCodeAt(ot),n,r=hn[ot],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ot,{type:Bc,value:String.fromCharCode(t),start:e,end:ot};default:if(n=hn.charCodeAt(ot+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ot+=2,{type:Bc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ot};case 33:case 61:return ot+=2,hn.charCodeAt(ot)===61&&++ot,{type:Bc,value:hn.slice(e,ot),start:e,end:ot}}}if(o=hn.substr(ot,4),o===">>>=")return ot+=4,{type:Bc,value:o,start:e,end:ot};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ot+=3,{type:Bc,value:s,start:e,end:ot};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ot+=2,{type:Bc,value:i,start:e,end:ot};if(i==="//"&&gi({},Ba,bu),"<>=!+-*%&|^/".includes(r))return++ot,{type:Bc,value:r,start:e,end:ot};gi({},Ba,bu)}function vUt(e){let t="";for(;ot<ll&&Yse(hn[ot]);)t+=hn[ot++];return t.length===0&&gi({},Ba,bu),pO(hn.charCodeAt(ot))&&gi({},Ba,bu),{type:nS,value:parseInt("0x"+t,16),start:e,end:ot}}function bUt(e){let t="0"+hn[ot++];for(;ot<ll&&cN(hn[ot]);)t+=hn[ot++];return(pO(hn.charCodeAt(ot))||py(hn.charCodeAt(ot)))&&gi({},Ba,bu),{type:nS,value:parseInt(t,8),octal:!0,start:e,end:ot}}function Wye(){var e,t,n;if(n=hn[ot],Qj(py(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ot,e="",n!=="."){if(e=hn[ot++],n=hn[ot],e==="0"){if(n==="x"||n==="X")return++ot,vUt(t);if(cN(n))return bUt(t);n&&py(n.charCodeAt(0))&&gi({},Ba,bu)}for(;py(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="."){for(e+=hn[ot++];py(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="e"||n==="E")if(e+=hn[ot++],n=hn[ot],(n==="+"||n==="-")&&(e+=hn[ot++]),py(hn.charCodeAt(ot)))for(;py(hn.charCodeAt(ot));)e+=hn[ot++];else gi({},Ba,bu);return pO(hn.charCodeAt(ot))&&gi({},Ba,bu),{type:nS,value:parseFloat(e),start:t,end:ot}}function xUt(){var e="",t,n,r,i,s=!1;for(t=hn[ot],Qj(t==="'"||t==='"',"String literal must starts with a quote"),n=ot,++ot;ot<ll;)if(r=hn[ot++],r===t){t="";break}else if(r==="\\")if(r=hn[ot++],!r||!IP(r.charCodeAt(0)))switch(r){case"u":case"x":hn[ot]==="{"?(++ot,e+=mUt()):e+=QK(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:cN(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ot<ll&&cN(hn[ot])&&(s=!0,i=i*8+"01234567".indexOf(hn[ot++]),"0123".includes(r)&&ot<ll&&cN(hn[ot])&&(i=i*8+"01234567".indexOf(hn[ot++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&hn[ot]===`
`&&++ot;else{if(IP(r.charCodeAt(0)))break;e+=r}return t!==""&&gi({},Ba,bu),{type:hO,value:e,octal:s,start:n,end:ot}}function _Ut(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gi({},XK)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gi({},XK)}try{return new RegExp(e,t)}catch{return null}}function wUt(){var e,t,n,r,i;for(e=hn[ot],Qj(e==="/","Regular expression literal must start with a slash"),t=hn[ot++],n=!1,r=!1;ot<ll;)if(e=hn[ot++],t+=e,e==="\\")e=hn[ot++],IP(e.charCodeAt(0))&&gi({},JH),t+=e;else if(IP(e.charCodeAt(0)))gi({},JH);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gi({},JH),i=t.substr(1,t.length-2),{value:i,literal:t}}function EUt(){var e,t,n;for(t="",n="";ot<ll&&(e=hn[ot],!!S8(e.charCodeAt(0)));)++ot,e==="\\"&&ot<ll?gi({},Ba,bu):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gi({},XK,n),{value:n,literal:t}}function SUt(){var e,t,n,r;return Fi=null,x$e(),e=ot,t=wUt(),n=EUt(),r=_Ut(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ot}}function TUt(e){return e.type===pE||e.type===Mx||e.type===Kj||e.type===Xj}function w$e(){if(x$e(),ot>=ll)return{type:dO,start:ot,end:ot};const e=hn.charCodeAt(ot);return pO(e)?yUt():e===40||e===41||e===59?ZH():e===39||e===34?xUt():e===46?py(hn.charCodeAt(ot+1))?Wye():ZH():py(e)?Wye():ZH()}function Hc(){const e=Fi;return ot=e.end,Fi=w$e(),ot=e.end,e}function E$e(){const e=ot;Fi=w$e(),ot=e}function CUt(e){const t=new om(K7t);return t.elements=e,t}function Gye(e,t,n){const r=new om(e==="||"||e==="&&"?eUt:X7t);return r.operator=e,r.left=t,r.right=n,r}function AUt(e,t){const n=new om(Q7t);return n.callee=e,n.arguments=t,n}function IUt(e,t,n){const r=new om(J7t);return r.test=e,r.consequent=t,r.alternate=n,r}function Kse(e){const t=new om(v$e);return t.name=e,t}function CD(e){const t=new om(Z7t);return t.value=e.value,t.raw=hn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Yye(e,t,n){const r=new om(tUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function kUt(e){const t=new om(nUt);return t.properties=e,t}function Kye(e,t,n){const r=new om(rUt);return r.key=t,r.value=n,r.kind=e,r}function RUt(e,t){const n=new om(iUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function gi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Qj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ot,n.description=i,n}function Jj(e){e.type===dO&&gi(e,lUt),e.type===nS&&gi(e,sUt),e.type===hO&&gi(e,oUt),e.type===pE&&gi(e,aUt),e.type===Mx&&gi(e,uUt),gi(e,Ba,e.value)}function cl(e){const t=Hc();(t.type!==Bc||t.value!==e)&&Jj(t)}function _s(e){return Fi.type===Bc&&Fi.value===e}function eq(e){return Fi.type===Mx&&Fi.value===e}function DUt(){const e=[];for(ot=Fi.start,cl("[");!_s("]");)_s(",")?(Hc(),e.push(null)):(e.push(mE()),_s("]")||cl(","));return Hc(),CUt(e)}function Xye(){ot=Fi.start;const e=Hc();return e.type===hO||e.type===nS?(e.octal&&gi(e,b$e),CD(e)):Kse(e.value)}function NUt(){var e,t,n,r;if(ot=Fi.start,e=Fi,e.type===pE)return n=Xye(),cl(":"),r=mE(),Kye("init",n,r);if(e.type===dO||e.type===Bc)Jj(e);else return t=Xye(),cl(":"),r=mE(),Kye("init",t,r)}function PUt(){var e=[],t,n,r,i={},s=String;for(ot=Fi.start,cl("{");!_s("}");)t=NUt(),t.key.type===v$e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gi({},cUt):i[r]=!0,e.push(t),_s("}")||cl(",");return cl("}"),kUt(e)}function OUt(){cl("(");const e=Xse();return cl(")"),e}const MUt={if:1};function LUt(){var e,t,n;if(_s("("))return OUt();if(_s("["))return DUt();if(_s("{"))return PUt();if(e=Fi.type,ot=Fi.start,e===pE||MUt[Fi.value])n=Kse(Hc().value);else if(e===hO||e===nS)Fi.octal&&gi(Fi,b$e),n=CD(Hc());else{if(e===Mx)throw new Error(AP);e===Kj?(t=Hc(),t.value=t.value==="true",n=CD(t)):e===Xj?(t=Hc(),t.value=null,n=CD(t)):_s("/")||_s("/=")?(n=CD(SUt()),E$e()):Jj(Hc())}return n}function $Ut(){const e=[];if(cl("("),!_s(")"))for(;ot<ll&&(e.push(mE()),!_s(")"));)cl(",");return cl(")"),e}function FUt(){ot=Fi.start;const e=Hc();return TUt(e)||Jj(e),Kse(e.value)}function BUt(){return cl("."),FUt()}function jUt(){cl("[");const e=Xse();return cl("]"),e}function UUt(){var e,t,n;for(e=LUt();;)if(_s("."))n=BUt(),e=Yye(".",e,n);else if(_s("("))t=$Ut(),e=AUt(e,t);else if(_s("["))n=jUt(),e=Yye("[",e,n);else break;return e}function Qye(){const e=UUt();if(Fi.type===Bc&&(_s("++")||_s("--")))throw new Error(AP);return e}function D$(){var e,t;if(Fi.type!==Bc&&Fi.type!==Mx)t=Qye();else{if(_s("++")||_s("--"))throw new Error(AP);if(_s("+")||_s("-")||_s("~")||_s("!"))e=Hc(),t=D$(),t=RUt(e.value,t);else{if(eq("delete")||eq("void")||eq("typeof"))throw new Error(AP);t=Qye()}}return t}function Jye(e){let t=0;if(e.type!==Bc&&e.type!==Mx)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function zUt(){var e,t,n,r,i,s,o,a,u,l;if(e=Fi,u=D$(),r=Fi,i=Jye(r),i===0)return u;for(r.prec=i,Hc(),t=[e,Fi],o=D$(),s=[u,r,o];(i=Jye(Fi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Gye(a,u,o),s.push(n);r=Hc(),r.prec=i,s.push(r),t.push(Fi),n=D$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Gye(s[l-1].value,s[l-2],n),l-=2;return n}function mE(){var e,t,n;return e=zUt(),_s("?")&&(Hc(),t=mE(),cl(":"),n=mE(),e=IUt(e,t,n)),e}function Xse(){const e=mE();if(_s(","))throw new Error(AP);return e}function Qse(e){hn=e,ot=0,ll=hn.length,Fi=null,E$e();const t=Xse();if(Fi.type!==dO)throw new Error("Unexpect token after expression.");return t}var S$e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function T$e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ut("Missing arguments to clamp function."),o.length>3&&ut("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ut("Missing arguments to if function."),o.length>3&&ut("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function VUt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function C$e(e){e=e||{};const t=e.allowed?Wp(e.allowed):{},n=e.forbidden?Wp(e.forbidden):{},r=e.constants||S$e,i=(e.functions||T$e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Gt(p))return p;const m=d[p.type];return m==null&&ut("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Jt(n,m)?ut("Illegal identifier: "+m):Jt(r,m)?r[m]:Jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const v=f(p.property);return g===o&&(l[VUt(v)]=1),m&&(c-=1),g+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ut("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,v=Jt(i,m)&&i[m];return v||ut("Unrecognized function: "+m),cr(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const HUt="Literal";var mg,qUt=1,WUt=2,GUt=3,YUt=4,KUt=5,XUt=6,QUt=7,JUt=8,ZUt=9;mg={};mg[qUt]="Boolean";mg[WUt]="<end>";mg[GUt]="Identifier";mg[YUt]="Keyword";mg[KUt]="Null";mg[XUt]="Numeric";mg[QUt]="Punctuator";mg[JUt]="String";mg[ZUt]="RegularExpression";const Zye=Symbol("vega_selection_getter");function A$e(e){return(!e.getter||!e.getter[Zye])&&(e.getter=dh(e.field),e.getter[Zye]=!0),e.getter}const Jse="intersect",e1e="union",ezt="vlMulti",tzt="vlPoint",t1e="or",nzt="and",Zm="_vgsid_",kP=dh(Zm),rzt="E",izt="R",szt="R-E",ozt="R-LE",azt="R-RE",T8="index:unit";function n1e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=A$e(a)(e),bb(o)&&(o=sl(o)),bb(r[s])&&(r[s]=sl(r[s])),ft(r[s])&&bb(r[s][0])&&(r[s]=r[s].map(sl)),a.type===rzt){if(ft(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===izt){if(!k2(o,r[s]))return!1}else if(a.type===azt){if(!k2(o,r[s],!0,!1))return!1}else if(a.type===szt){if(!k2(o,r[s],!1,!1))return!1}else if(a.type===ozt&&!k2(o,r[s],!1,!0))return!1;return!0}function uzt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[T8]&&r[T8].value:void 0,o=n===Jse,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=n1e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=n1e(t,l),o^h)return h;return a&&o}const I$e=tI(kP),lzt=I$e.left,czt=I$e.right;function fzt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[T8]&&r[T8].value:void 0,o=n===Jse,a=kP(t),u=lzt(i,a);if(u===i.length||kP(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(czt(i,a)-u<s.size)return!1}return!0}function dzt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>A$e(r)(n.datum))}:{[Zm]:kP(n.datum)},t))}function hzt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,v,b,w=s.length,E=0,T,C;E<w;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,C=c.length;T<C;++T)h=c[T],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=v=h.type.charAt(0),b=tq[`${v}_union`],m[d]=b(g,Wt(f[T]));n&&(g=a[d]||(a[d]=[]),g.push(Wt(f).reduce((I,R,N)=>(I[c[N].field]=R,I),{})))}else h=Zm,p=kP(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Zm]:p}));if(t=t||e1e,o[Zm]?o[Zm]=tq[`${Zm}_${t}`](...Object.values(o[Zm])):Object.keys(o).forEach(I=>{o[I]=Object.keys(o[I]).map(R=>o[I][R]).reduce((R,N)=>R===void 0?N:tq[`${u[I]}_${t}`](R,N))}),s=Object.keys(a),n&&s.length){const I=r?tzt:ezt;o[I]=t===e1e?{[t1e]:s.reduce((R,N)=>(R.push(...a[N]),R),[])}:{[nzt]:s.map(R=>({[t1e]:a[R]}))}}return o}var tq={[`${Zm}_union`]:kvt,[`${Zm}_intersect`]:Avt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=sl(t[0]),r=sl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=sl(t[0]),r=sl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const pzt=":",mzt="@";function Zse(e,t,n,r){t[0].type!==HUt&&ut("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kr(t).value,o="unit",a=mzt+o,u=pzt+i;s===Jse&&!Jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function k$e(e){const t=this.context.data[e];return t?t.values.value:[]}function gzt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function yzt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(hh).insert(t)),1}function vzt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const mO=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},bzt=mO("format"),R$e=mO("timeFormat"),xzt=mO("utcFormat"),_zt=mO("timeParse"),wzt=mO("utcParse"),W6=new Date(2e3,0,1);function Zj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(W6.setYear(2e3),W6.setMonth(e),W6.setDate(t),R$e.call(this,W6,n))}function Ezt(e){return Zj.call(this,e,1,"%B")}function Szt(e){return Zj.call(this,e,1,"%b")}function Tzt(e){return Zj.call(this,0,2+e,"%A")}function Czt(e){return Zj.call(this,0,2+e,"%a")}const Azt=":",Izt="@",JK="%",D$e="$";function eoe(e,t,n,r){t[0].type!==oA&&ut("First argument to data functions must be a string literal.");const i=t[0].value,s=Azt+i;if(!Jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function kzt(e,t,n,r){t[0].type!==oA&&ut("First argument to indata must be a string literal."),t[1].type!==oA&&ut("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Izt+s;Jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Kl(e,t,n,r){if(t[0].type===oA)r1e(n,r,t[0].value);else for(e in n.scales)r1e(n,r,e)}function r1e(e,t,n){const r=JK+n;if(!Jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function gg(e,t){if(cr(e))return e;if(Gt(e)){const n=t.scales[e];return n&&qFt(n.value)?n.value:void 0}}function Rzt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Kl,n._range=Kl,n._scale=Kl;const r=i=>"_["+(i.type===oA?jt(JK+i.value):jt(JK)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function toe(e,t){return function(n,r,i){if(n){const s=gg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Dzt=toe("area",$Et),Nzt=toe("bounds",UEt),Pzt=toe("centroid",GEt);function Ozt(e,t){const n=gg(e,(t||this).context);return n&&n.scale()}function Mzt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function noe(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Lzt(){return noe(this.context.dataflow,"warn",arguments)}function $zt(){return noe(this.context.dataflow,"info",arguments)}function Fzt(){return noe(this.context.dataflow,"debug",arguments)}function nq(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ZK(e){const t=$b(e),n=nq(t.r),r=nq(t.g),i=nq(t.b);return .2126*n+.7152*r+.0722*i}function Bzt(e,t){const n=ZK(e),r=ZK(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function jzt(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function N$e(e,t){return e===t||e!==e&&t!==t?!0:ft(e)?ft(t)&&e.length===t.length?Uzt(e,t):!1:Ht(e)&&Ht(t)?P$e(e,t):!1}function Uzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!N$e(e[n],t[n]))return!1;return!0}function P$e(e,t){for(const n in e)if(!N$e(e[n],t[n]))return!1;return!0}function i1e(e){return t=>P$e(e,t)}function zzt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?hh:ft(n)||Ej(n)?n:i1e(n),c.remove(f)),t&&c.insert(t),r&&(f=i1e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Vzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Hzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const s1e={};function qzt(e,t){const n=s1e[t]||(s1e[t]=dh(t));return ft(e)?e.map(n):n(e)}function roe(e){return ft(e)||ArrayBuffer.isView(e)?e:null}function ioe(e){return roe(e)||(Gt(e)?e:null)}function Wzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return roe(e).join(...n)}function Gzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ioe(e).indexOf(...n)}function Yzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ioe(e).lastIndexOf(...n)}function Kzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ioe(e).slice(...n)}function Xzt(e,t,n){return cr(n)&&ut("Function argument passed to replace."),String(e).replace(t,n)}function Qzt(e){return roe(e).slice().reverse()}function Jzt(e,t,n){return Iie(e||0,t||0,n||0)}function Zzt(e,t){const n=gg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function eVt(e,t){const n=gg(e,(t||this).context);return n?n.copy():void 0}function tVt(e,t){const n=gg(e,(t||this).context);return n?n.domain():[]}function nVt(e,t,n){const r=gg(e,(n||this).context);return r?ft(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function rVt(e,t){const n=gg(e,(t||this).context);return n&&n.range?n.range():[]}function iVt(e,t,n){const r=gg(e,(n||this).context);return r?r(t):void 0}function sVt(e,t,n,r,i){e=gg(e,(i||this).context);const s=EMe(t,n);let o=e.domain(),a=o[0],u=Kr(o),l=pl;return u-a?l=fMe(e,a,u):e=(e.interpolator?xi("sequential")().interpolator(e.interpolator()):xi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function oVt(e,t,n){const r=gg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function aVt(e){let t=null;return function(n){return n?EP(n,t=t||nA(e)):e}}const O$e=e=>e.data;function M$e(e,t){const n=k$e.call(t,e);return n.root&&n.root.lookup||{}}function uVt(e,t,n){const r=M$e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(O$e):void 0}function lVt(e,t){const n=M$e(e,this)[t];return n?n.ancestors().map(O$e):void 0}const L$e=()=>typeof window<"u"&&window||null;function cVt(){const e=L$e();return e?e.screen:{}}function fVt(){const e=L$e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function dVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function $$e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ko().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return xLe(o,s,hVt(t))}function hVt(e){let t=null;if(e){const n=Wt(e.marktype),r=Wt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function pVt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Wt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function mVt(e){return Wt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function gVt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ko().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),$$e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>yVt(u.x,u.y,t))}function yVt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const RP={random(){return mh()},cumulativeNormal:Ij,cumulativeLogNormal:Yre,cumulativeUniform:Jre,densityNormal:Vre,densityLogNormal:Gre,densityUniform:Qre,quantileNormal:kj,quantileLogNormal:Kre,quantileUniform:Zre,sampleNormal:Aj,sampleLogNormal:Wre,sampleUniform:Xre,isArray:ft,isBoolean:Ox,isDate:bb,isDefined(e){return e!==void 0},isNumber:bi,isObject:Ht,isRegExp:_4e,isString:Gt,isTuple:Ej,isValid(e){return e!=null&&e===e},toBoolean:Are,toDate(e){return Ire(e)},toNumber:sl,toString:kre,indexof:Gzt,join:Wzt,lastindexof:Yzt,replace:Xzt,reverse:Qzt,slice:Kzt,flush:b4e,lerp:w4e,merge:jzt,pad:T4e,peek:Kr,pluck:qzt,span:K3,inrange:k2,truncate:C4e,rgb:$b,lab:MF,hcl:LF,hsl:PF,luminance:ZK,contrast:Bzt,sequence:Wc,format:bzt,utcFormat:xzt,utcParse:wzt,utcOffset:j4e,utcSequence:V4e,timeFormat:R$e,timeParse:_zt,timeOffset:B4e,timeSequence:z4e,timeUnitSpecifier:I4e,monthFormat:Ezt,monthAbbrevFormat:Szt,dayFormat:Tzt,dayAbbrevFormat:Czt,quarter:m4e,utcquarter:g4e,week:R4e,utcweek:P4e,dayofyear:k4e,utcdayofyear:N4e,warn:Lzt,info:$zt,debug:Fzt,extent(e){return J0(e)},inScope:Mzt,intersect:$$e,clampRange:y4e,pinchDistance:Vzt,pinchAngle:Hzt,screen:cVt,containerSize:dVt,windowSize:fVt,bandspace:Jzt,setdata:yzt,pathShape:aVt,panLinear:f4e,panLog:d4e,panPow:h4e,panSymlog:p4e,zoomLinear:_re,zoomLog:wre,zoomPow:i8,zoomSymlog:Ere,encode:vzt,modify:zzt,lassoAppend:pVt,lassoPath:mVt,intersectLasso:gVt},vVt=["view","item","group","xy","x","y"],bVt="event.vega.",F$e="this.",soe={},B$e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${jt(D$e+e)}]`,functions:xVt,constants:S$e,visitors:soe},j$e=C$e(B$e);function xVt(e){const t=T$e(e);vVt.forEach(n=>t[n]=bVt+n);for(const n in RP)t[n]=F$e+n;return lr(t,Rzt(e,RP,soe)),t}function Mo(e,t,n){return arguments.length===1?RP[e]:(RP[e]=t,n&&(soe[e]=n),j$e.functions[e]=F$e+e,this)}Mo("bandwidth",Zzt,Kl);Mo("copy",eVt,Kl);Mo("domain",tVt,Kl);Mo("range",rVt,Kl);Mo("invert",nVt,Kl);Mo("scale",iVt,Kl);Mo("gradient",sVt,Kl);Mo("geoArea",Dzt,Kl);Mo("geoBounds",Nzt,Kl);Mo("geoCentroid",Pzt,Kl);Mo("geoShape",oVt,Kl);Mo("geoScale",Ozt,Kl);Mo("indata",gzt,kzt);Mo("data",k$e,eoe);Mo("treePath",uVt,eoe);Mo("treeAncestors",lVt,eoe);Mo("vlSelectionTest",uzt,Zse);Mo("vlSelectionIdTest",fzt,Zse);Mo("vlSelectionResolve",hzt,Zse);Mo("vlSelectionTuples",dzt);function eg(e,t){const n={};let r;try{e=Gt(e)?e:jt(e)+"",r=Qse(e)}catch{ut("Expression parse error: "+e)}r.visit(s=>{if(s.type!==y$e)return;const o=s.callee.name,a=B$e.visitors[o];a&&a(o,s.arguments,t,n)});const i=j$e(r);return i.globals.forEach(s=>{const o=D$e+s;!Jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function _Vt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const wVt=Wp(["rule"]),o1e=Wp(["group","image","rect"]);function EVt(e,t){let n="";return wVt[t]||(e.x2&&(e.x?(o1e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(o1e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ooe(e){return(e+"").toLowerCase()}function SVt(e){return ooe(e)==="operator"}function TVt(e){return ooe(e)==="collect"}function AR(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function CVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var AVt={operator:(e,t)=>AR(e,["_"],t.code),parameter:(e,t)=>AR(e,["datum","_"],t.code),event:(e,t)=>AR(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return AR(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=EVt(r,n),i+="return m;",AR(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),CVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function IVt(e){const t=this;SVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function kVt(e){const t=this;if(e.params){const n=t.get(e.id);n||ut("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function RVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ft(i)?i.map(s=>a1e(s,n,t)):a1e(i,n,t)}return t}function a1e(e,t,n){if(!e||!Ht(e))return e;for(let r=0,i=u1e.length,s;r<i;++r)if(s=u1e[r],Jt(e,s.key))return s.parse(e,t,n);return e}var u1e=[{key:"$ref",parse:DVt},{key:"$key",parse:PVt},{key:"$expr",parse:NVt},{key:"$field",parse:OVt},{key:"$encode",parse:LVt},{key:"$compare",parse:MVt},{key:"$context",parse:$Vt},{key:"$subflow",parse:FVt},{key:"$tupleid",parse:BVt}];function DVt(e,t){return t.get(e.$ref)||ut("Operator not defined: "+e.$ref)}function NVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=pf(t.parameterExpression(e.$expr),e.$fields))}function PVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Cre(e.$key,e.$flat,t.expr.codegen))}function OVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=dh(e.$field,e.$name,t.expr.codegen))}function MVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Wt(e.$compare).map(i=>i&&i.$tupleid?bn:i);return t.fn[n]||(t.fn[n]=Sre(r,e.$order,t.expr.codegen))}function LVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=pf(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function $Vt(e,t){return t}function FVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function BVt(){return bn}function jVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ut("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function UVt(e){var t=this,n=Ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ut("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const zVt={skip:!0};function VVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function HVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],zVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(hh).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function U$e(e,t,n,r){return new z$e(e,t,n,r)}function z$e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||AVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function l1e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}z$e.prototype=l1e.prototype={fork(){const e=new l1e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),TVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ooe(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:_Vt,parseOperator:IVt,parseOperatorParameters:kVt,parseParameters:RVt,parseStream:jVt,parseUpdate:UVt,getState:VVt,setState:HVt};function qVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),V$e(t,e.description()))}function V$e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function WVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const rq="default";function GVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:rq,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Gt(i)?i:i.user:rq,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Gt(r)||(i=r.item,r=r.user),eX(e,r&&r!==rq?r:i||r),i},{cursor:t})}function eX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function C8(e,t){var n=e._runtime.data;return Jt(n,t)||ut("Unrecognized data set: "+t),n[t]}function YVt(e,t){return arguments.length<2?C8(this,e).values.value:e7.call(this,e,eS().remove(hh).insert(t))}function e7(e,t){l6e(t)||ut("Second argument to changes must be a changeset.");const n=C8(this,e);return n.modified=!0,this.pulse(n.input,t)}function KVt(e,t){return e7.call(this,e,eS().insert(t))}function XVt(e,t){return e7.call(this,e,eS().remove(t))}function H$e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function q$e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function t7(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function QVt(e){var t=t7(e),n=H$e(e),r=q$e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function JVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=t7(e),o=t.changedTouches?t.changedTouches[0]:t,s=Wj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=ZVt(e,n,s),t}function ZVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Gt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ml(e),item:ml(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const c1e="view",eHt="timer",tHt="window",nHt={trap:!1};function rHt(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ft(r[s])&&(r[s]=Wp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function W$e(e,t,n,r){e._eventListeners.push({type:n,sources:Wt(t),handler:r})}function iHt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function G6(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function sHt(e,t,n){var r=this,i=new Cj(n),s=function(l,c){r.runAsync(null,()=>{e===c1e&&iHt(r,t)&&l.preventDefault(),i.receive(JVt(r,l,c))})},o;if(e===eHt)G6(r,"timer",t)&&r.timer(s,t);else if(e===c1e)G6(r,"view",t)&&r.addEventListener(t,s,nHt);else if(e===tHt?G6(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&G6(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);W$e(r,o,t,s)}return i}function f1e(e){return e.item}function d1e(e){return e.item.mark.source}function h1e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function oHt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",f1e),d1e,h1e(e)),this.on(this.events("view","pointerout",f1e),d1e,h1e(t)),this}function aHt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function od(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const uHt="vega-bind",lHt="vega-bind-name",cHt="vega-bind-radio";function fHt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Tre(r.debounce,i.update))),(r.input==null&&r.element?dHt:pHt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function dHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),W$e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(hHt(i))}}function hHt(e){return typeof Event<"u"?new Event(e):{type:e}}function pHt(e,t,n,r){const i=r.signal(n.signal),s=od("div",{class:uHt}),o=n.input==="radio"?s:s.appendChild(od("label"));o.appendChild(od("span",{class:lHt},n.name||n.signal)),t.appendChild(s);let a=mHt;switch(n.input){case"checkbox":a=gHt;break;case"select":a=yHt;break;case"radio":a=vHt;break;case"range":a=bHt;break}a(e,o,n,i)}function mHt(e,t,n,r){const i=od("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function gHt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=od("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function yHt(e,t,n,r){const i=od("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};A8(o,r)&&(u.selected=!0),i.appendChild(od("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(A8(n.options[a],o)){i.selectedIndex=a;return}}}function vHt(e,t,n,r){const i=od("span",{class:cHt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};A8(o,r)&&(u.checked=!0);const l=od("input",u);l.addEventListener("change",()=>e.update(o));const c=od("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)A8(a[l].value,o)&&(a[l].checked=!0)}}function bHt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Lb(s,i,100),a=od("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=od("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function A8(e,t){return e===t||e+""==t+""}function G$e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,H$e(e),q$e(e),t7(e),i,s).background(e.background())}function aoe(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function xHt(e,t,n,r){const i=new r(e.loader(),aoe(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,t7(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function _Ht(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Gj(r);e=n._el=e?iq(n,e,!0):null,qVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||fO,a=e?s.renderer:s.headless;return n._renderer=a?G$e(n,n._renderer,e,a):null,n._handler=xHt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=iq(n,t,!0):e.appendChild(od("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=iq(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{fHt(n,u.element||t,u)})),n}function iq(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const IR=e=>+e||0,wHt=e=>({top:e,bottom:e,left:e,right:e});function p1e(e){return Ht(e)?{top:IR(e.top),bottom:IR(e.bottom),left:IR(e.left),right:IR(e.right)}:wHt(IR(e))}async function uoe(e,t,n,r){const i=Gj(t),s=i&&i.headless;return s||ut("Unrecognized renderer type: "+t),await e.runAsync(),G$e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function EHt(e,t){e!==sb.Canvas&&e!==sb.SVG&&e!==sb.PNG&&ut("Unrecognized image type: "+e);const n=await uoe(this,e,t);return e===sb.SVG?SHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function SHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function THt(e,t){return(await uoe(this,sb.Canvas,e,t)).canvas()}async function CHt(e){return(await uoe(this,sb.SVG,e)).svg()}function AHt(e,t,n){return U$e(e,JC,RP,n).parse(t)}function IHt(e){var t=this._runtime.scales;return Jt(t,e)||ut("Unrecognized scale or projection: "+e),t[e].value}var Y$e="width",K$e="height",loe="padding",m1e={skip:!0};function X$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===loe?r.left+r.right:0)}function Q$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===loe?r.top+r.bottom:0)}function kHt(e){var t=e._signals,n=t[Y$e],r=t[K$e],i=t[loe];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=X$e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Q$e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function RHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Y$e,n,m1e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(K$e,r,m1e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function DHt(e){return this._runtime.getState(e||{data:NHt,signals:PHt,recurse:!0})}function NHt(e,t){return t.modified&&ft(t.input.value)&&!e.startsWith("_:vega:_")}function PHt(e,t){return!(e==="parent"||t instanceof JC.proxy)}function OHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function MHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(e_t(n,t))}function LHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",$Ht(r))}function $Ht(e){return e==null?"":ft(e)?J$e(e):Ht(e)&&!bb(e)?FHt(e):e+""}function FHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ft(n)?J$e(n):Z$e(n))}).join(`
`)}function J$e(e){return"["+e.map(Z$e).join(", ")+"]"}function Z$e(e){return ft(e)?"[]":Ht(e)&&!bb(e)?"{}":e}function BHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function eFe(e,t){const n=this;if(t=t||{},nC.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(Z4e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||sb.Canvas,n._scenegraph=new GMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||LHt,n._redraw=!0,n._handler=new fO().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=rHt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=AHt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=X$e(n,n._width),n._viewHeight=Q$e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,kHt(n),WVt(n),GVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Y6(e,t){return Jt(e._signals,t)?e._signals[t]:ut("Unrecognized signal name: "+jt(t))}function tFe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function g1e(e,t,n,r){let i=tFe(n,r);return i||(i=aoe(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function y1e(e,t,n){const r=tFe(t,n);return r&&t._targets.remove(r),e}zt(eFe,nC,{async evaluate(e,t,n){if(await nC.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,QVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&v$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&V$e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Y6(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",p1e(e)):p1e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Gj(e)||ut("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(nC.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Y6(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:RHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=aoe(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return g1e(this,e,Y6(this,e),t)},removeSignalListener(e,t){return y1e(this,Y6(this,e),t)},addDataListener(e,t){return g1e(this,e,C8(this,e).values,t)},removeDataListener(e,t){return y1e(this,C8(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=eX(this,null);this._globalCursor=!!e,t&&eX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:MHt,events:sHt,finalize:aHt,hover:oHt,data:YVt,change:e7,insert:KVt,remove:XVt,scale:IHt,initialize:_Ht,toImageURL:EHt,toCanvas:THt,toSVG:CHt,getState:DHt,setState:OHt,_watchPixelRatio:BHt});const jHt="view",I8="[",k8="]",nFe="{",rFe="}",UHt=":",iFe=",",zHt="@",VHt=">",HHt=/[[\]{}]/,qHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let sFe,oFe;function Lx(e,t,n){return sFe=t||jHt,oFe=n||qHt,aFe(e.trim()).map(tX)}function WHt(e){return oFe[e]}function fN(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function aFe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=fN(e,i,iFe,I8+nFe,k8+rFe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function tX(e){return e[0]==="["?GHt(e):YHt(e)}function GHt(e){const t=e.length;let n=1,r;if(n=fN(e,n,k8,I8,k8),n===t)throw"Empty between selector: "+e;if(r=aFe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==VHt)throw"Expected '>' after between selector: "+e;r=r.map(tX);const i=tX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function YHt(e){const t={source:sFe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===rFe){if(a=e.lastIndexOf(nFe),a>=0){try{r=KHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===zHt&&(i=++a),u=fN(e,a,UHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=fN(e,a,I8),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=fN(e,a,k8),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==I8)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||HHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):WHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function KHt(e){const t=e.split(iFe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function XHt(e){return Ht(e)?e:{type:e||"pad"}}const kR=e=>+e||0,QHt=e=>({top:e,bottom:e,left:e,right:e});function JHt(e){return Ht(e)?e.signal?e:{top:kR(e.top),bottom:kR(e.bottom),left:kR(e.left),right:kR(e.right)}:QHt(kR(e))}const ja=e=>Ht(e)&&!ft(e)?lr({},e):{value:e};function v1e(e,t,n,r){return n!=null?(Ht(n)&&!ft(n)||ft(n)&&n.length&&Ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Cu(e,t,n){for(const r in t)v1e(e,r,t[r]);for(const r in n)v1e(e,r,n[r],"update")}function DI(e,t,n){for(const r in t)n&&Jt(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function y2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const coe="mark",foe="frame",doe="scope",ZHt="axis",eqt="axis-domain",tqt="axis-grid",nqt="axis-label",rqt="axis-tick",iqt="axis-title",sqt="legend",oqt="legend-band",aqt="legend-entry",uqt="legend-gradient",uFe="legend-label",lqt="legend-symbol",cqt="legend-title",fqt="title",dqt="title-text",hqt="title-subtitle";function pqt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!y2(u,e)&&sq(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===foe?i.group:n===coe?lr({},i.mark,i[t]):null;for(u in c)l=y2(u,e)||(u==="fill"||u==="stroke")&&(y2("fill",e)||y2("stroke",e)),l||sq(s,u,c[u]);Wt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)y2(h,e)||sq(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function sq(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const lFe=e=>Gt(e)?jt(e):e.signal?`(${e.signal})`:cFe(e);function n7(e){if(e.gradient!=null)return gqt(e);let t=e.signal?`(${e.signal})`:e.color?mqt(e.color):e.field!=null?cFe(e.field):e.value!==void 0?jt(e.value):void 0;return e.scale!=null&&(t=yqt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${N$(e.exponent)})`),e.mult!=null&&(t+=`*${N$(e.mult)}`),e.offset!=null&&(t+=`+${N$(e.offset)}`),e.round&&(t=`round(${t})`),t}const K6=(e,t,n,r)=>`(${e}(${[t,n,r].map(n7).join(",")})+'')`;function mqt(e){return e.c?K6("hcl",e.h,e.c,e.l):e.h||e.s?K6("hsl",e.h,e.s,e.l):e.l||e.a?K6("lab",e.l,e.a,e.b):e.r||e.g||e.b?K6("rgb",e.r,e.g,e.b):null}function gqt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:jt(n));for(;t.length&&Kr(t)==null;)t.pop();return t.unshift(lFe(e.gradient)),`gradient(${t.join(",")})`}function N$(e){return Ht(e)?"("+n7(e)+")":e}function cFe(e){return fFe(Ht(e)?e:{datum:e})}function fFe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ut("Invalid field reference: "+jt(e));return e.signal||(r=Gt(r)?dg(r).map(jt).join("]["):fFe(r)),t+"["+r+"]"}function yqt(e,t){const n=lFe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+N$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function vqt(e){let t="";return e.forEach(n=>{const r=n7(n);t+=n.test?`(${n.test})?${r}:`:r}),Kr(t)===":"&&(t+="null"),t}function dFe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=pqt(e,t,n,r,i.config);for(const a in e)o[a]=bqt(e[a],t,s,i);return s}function bqt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=_qt(xqt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function xqt(e){return ft(e)?vqt(e):n7(e)}function _qt(e,t,n,r){const i=eg(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const wqt="outer",Eqt=["value","update","init","react","bind"];function b1e(e,t){ut(e+' for "outer" push: '+jt(t))}function hFe(e,t){const n=e.name;if(e.push===wqt)t.signals[n]||b1e("No prior signal definition",n),Eqt.forEach(r=>{e[r]!==void 0&&b1e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function nX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function r7(e,t,n,r){return new nX(e,t,n,r)}function R8(e,t){return r7("operator",e,t)}function vn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function DP(e,t){return t?{$field:e,$name:t}:{$field:e}}const rX=DP("key");function x1e(e,t){return{$compare:e,$order:t}}function Sqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Tqt="ascending",Cqt="descending";function Aqt(e){return Ht(e)?(e.order===Cqt?"-":"+")+i7(e.op,e.field):""}function i7(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const hoe="scope",iX="view";function pa(e){return e&&e.signal}function Iqt(e){return e&&e.expr}function P$(e){if(pa(e))return!0;if(Ht(e)){for(const t in e)if(P$(e[t]))return!0}return!1}function pp(e,t){return e??t}function Vw(e){return e&&e.signal||e}const _1e="timer";function NP(e,t){return(e.merge?Rqt:e.stream?Dqt:e.type?Nqt:ut("Invalid stream specification: "+jt(e)))(e,t)}function kqt(e){return e===hoe?iX:e||iX}function Rqt(e,t){const n=e.merge.map(i=>NP(i,t)),r=poe({merge:n},e,t);return t.addStream(r).id}function Dqt(e,t){const n=NP(e.stream,t),r=poe({stream:n},e,t);return t.addStream(r).id}function Nqt(e,t){let n;e.type===_1e?(n=t.event(_1e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(kqt(e.source),e.type);const r=poe({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function poe(e,t,n){let r=t.between;return r&&(r.length!==2&&ut('Stream "between" parameter must have 2 entries: '+jt(t)),e.between=[NP(r[0],n),NP(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Pqt(t.marktype,t.markname,t.markrole)),t.source===hoe&&r.push("inScope(event.item)"),r.length&&(e.filter=eg("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Pqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Oqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Mqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ut("Signal update missing events specification."),Gt(s)&&(s=Lx(s,t.isSubscope()?hoe:iX)),s=Wt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[$qt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ut("Signal encode and update are mutually exclusive."),o="encode(item(),"+jt(r)+")"),i.update=Gt(o)?eg(o,t):o.expr!=null?eg(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Oqt,$params:{$value:t.signalRef(o.signal)}}:ut("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(Lqt(u,t),i)))}function Lqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):NP(e,t)}}function $qt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Fqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ut("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=eg(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Mqt(i,t,n.id))}const Qi=e=>(t,n,r)=>r7(e,n,t||void 0,r),pFe=Qi("aggregate"),Bqt=Qi("axisticks"),mFe=Qi("bound"),am=Qi("collect"),w1e=Qi("compare"),jqt=Qi("datajoin"),gFe=Qi("encode"),Uqt=Qi("expression"),zqt=Qi("facet"),Vqt=Qi("field"),Hqt=Qi("key"),qqt=Qi("legendentries"),Wqt=Qi("load"),Gqt=Qi("mark"),Yqt=Qi("multiextent"),Kqt=Qi("multivalues"),Xqt=Qi("overlap"),Qqt=Qi("params"),yFe=Qi("prefacet"),Jqt=Qi("projection"),Zqt=Qi("proxy"),eWt=Qi("relay"),vFe=Qi("render"),tWt=Qi("scale"),rS=Qi("sieve"),nWt=Qi("sortitems"),bFe=Qi("viewlayout"),rWt=Qi("values");let iWt=0;const xFe={min:"min",max:"max",count:"sum"};function sWt(e,t){const n=e.type||"linear";sMe(n)||ut("Unrecognized scale type: "+jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function oWt(e,t){const n=t.getScale(e.name).params;let r;n.domain=_Fe(e.domain,e,t),e.range!=null&&(n.range=EFe(e,t,n)),e.interpolate!=null&&gWt(e.interpolate,n),e.nice!=null&&(n.nice=mWt(e.nice,t)),e.bins!=null&&(n.bins=pWt(e.bins,t));for(r in e)Jt(n,r)||r==="name"||(n[r]=sh(e[r],t))}function sh(e,t){return Ht(e)?e.signal?t.signalRef(e.signal):ut("Unsupported object: "+jt(e)):e}function O$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>sh(n,t))}function s7(e){ut("Can not find data set: "+jt(e))}function _Fe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ut("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ft(e)?aWt:e.fields?lWt:uWt)(e,t,n)}function aWt(e,t,n){return e.map(r=>sh(r,n))}function uWt(e,t,n){const r=n.getData(e.data);return r||s7(e.data),tA(t.type)?r.valuesRef(n,e.field,wFe(e.sort,!1)):uMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function lWt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Gt(o)?{data:r,field:o}:ft(o)||o.signal?cWt(o,n):o,s.push(o),s),[]);return(tA(t.type)?fWt:uMe(t.type)?dWt:hWt)(e,n,i)}function cWt(e,t){const n="_:vega:_"+iWt++,r=am({});if(ft(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,rS({})]),{data:n,field:"data"}}function fWt(e,t,n){const r=wFe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||s7(l.data),c.countsRef(t,l.field,r)}),a={groupby:rX,pulse:o};r&&(i=r.op||"count",s=r.field?i7(i,r.field):"count",a.ops=[xFe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(pFe(a));const u=t.add(am({pulse:vn(i)}));return s=t.add(rWt({field:rX,sort:t.sortRef(r),pulse:vn(u)})),vn(s)}function wFe(e,t){return e&&(!e.field&&!e.op?Ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ut("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!xFe[e.op]&&ut("Multiple domain scales can not be sorted using "+e.op)),e}function dWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||s7(i.data),s.domainRef(t,i.field)});return vn(t.add(Kqt({values:r})))}function hWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||s7(i.data),s.extentRef(t,i.field)});return vn(t.add(Yqt({extents:r})))}function pWt(e,t){return e.signal||ft(e)?O$(e,t):t.objectProperty(e)}function mWt(e,t){return e.signal?t.signalRef(e.signal):Ht(e)?{interval:sh(e.interval),step:sh(e.step)}:sh(e)}function gWt(e,t){t.interpolate=sh(e.type||e),e.gamma!=null&&(t.interpolateGamma=sh(e.gamma))}function EFe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Gt(i)){if(r&&Jt(r,i))return e=lr({},e,{range:r[i]}),EFe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=tA(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ut("Unrecognized scale range value: "+jt(i))}else if(i.scheme){n.scheme=ft(i.scheme)?O$(i.scheme,t):sh(i.scheme,t),i.extent&&(n.schemeExtent=O$(i.extent,t)),i.count&&(n.schemeCount=sh(i.count,t));return}else if(i.step){n.rangeStep=sh(i.step,t);return}else{if(tA(e.type)&&!ft(i))return _Fe(i,e,t);ft(i)||ut("Unsupported range type: "+jt(i))}return i.map(s=>(ft(s)?O$:sh)(s,t))}function yWt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=sX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=sX(n[i],i,t));t.addProjection(e.name,r)}function sX(e,t,n){return ft(e)?e.map(r=>sX(r,t,n)):Ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ut("Unsupported parameter object: "+jt(e)):e}const um="top",NI="left",PI="right",rx="bottom",SFe="center",vWt="vertical",bWt="start",xWt="middle",_Wt="end",oX="index",moe="label",wWt="offset",aA="perc",EWt="perc2",ah="value",gO="guide-label",goe="guide-title",SWt="group-title",TWt="group-subtitle",E1e="symbol",M$="gradient",aX="discrete",uX="size",CWt="shape",AWt="fill",IWt="stroke",kWt="strokeWidth",RWt="strokeDash",DWt="opacity",yoe=[uX,CWt,AWt,IWt,kWt,RWt,DWt],yO={name:1,style:1,interactive:1},oi={value:0},uh={value:1},o7="group",TFe="rect",voe="rule",NWt="symbol",iS="text";function PP(e){return e.type=o7,e.interactive=e.interactive||!1,e}function mf(e,t){const n=(r,i)=>pp(e[r],pp(t[r],i));return n.isVertical=r=>vWt===pp(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>pp(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>pp(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>pp(e.columns,pp(t.columns,+n.isVertical(!0))),n}function CFe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function PWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function a7(e,t,n){return`item.anchor === '${bWt}' ? ${e} : item.anchor === '${_Wt}' ? ${t} : ${n}`}const boe=a7(jt(NI),jt(PI),jt(SFe));function OWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function AFe(e,t){return t?e?Ht(e)?Object.assign({},e,{offset:AFe(e.offset,t)}):{value:e,offset:t}:t:e}function bd(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=DI(e.encode,t,yO)):e.interactive=!1,e}function MWt(e,t,n,r){const i=mf(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:oi,x:oi,y:oi,width:ja(f),height:ja(d)},update:lr({},u,{opacity:uh,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:oi}};return Cu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),bd({type:TFe,role:uqt,encode:h},r)}function LWt(e,t,n,r,i){const s=mf(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:oi,fill:{scale:t,field:ah}};p[l]={signal:h+"datum."+aA,mult:u},p[c]=oi,p[f]={signal:h+"datum."+EWt,mult:u},p[d]=ja(a);const m={enter:p,update:lr({},p,{opacity:uh}),exit:{opacity:oi}};return Cu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),bd({type:TFe,role:oqt,key:ah,from:i,encode:m},r)}const $Wt=`datum.${aA}<=0?"${NI}":datum.${aA}>=1?"${PI}":"${SFe}"`,FWt=`datum.${aA}<=0?"${rx}":datum.${aA}>=1?"${um}":"${xWt}"`;function S1e(e,t,n,r){const i=mf(e,t),s=i.isVertical(),o=ja(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:oi},update:c={opacity:uh,text:{field:moe}},exit:{opacity:oi}};return Cu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:pp(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:FWt},f="y",d="x",h="1-"):(l.align=c.align={signal:$Wt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+aA,mult:a},l[d]=c[d]=o,o.offset=pp(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+oX}:void 0,bd({type:iS,role:uFe,style:gO,key:ah,from:r,encode:p,overlap:u},n)}function BWt(e,t,n,r,i){const s=mf(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${wWt} : datum.${uX}`,h=l?ja(l):{field:uX},p=`datum.${oX}`,m=`max(1, ${i})`;let g,v,b,w,E;h.mult=.5,g={enter:v={opacity:oi,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:uh,x:v.x,y:v.y},exit:{opacity:oi}};let T=null,C=null;e.fill||(T=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),Cu(g,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),yoe.forEach(O=>{e[O]&&(b[O]=v[O]={scale:e[O],field:ah})});const I=bd({type:NWt,role:lqt,key:ah,from:f,clip:l?!0:void 0,encode:g},n.symbols),R=ja(c);R.offset=s("labelOffset"),g={enter:v={opacity:oi,x:{signal:d,offset:R},y:h},update:b={opacity:uh,text:{field:moe},x:v.x,y:v.y},exit:{opacity:oi}},Cu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const N=bd({type:iS,role:uFe,style:gO,key:ah,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:oi,height:l?ja(l):oi,opacity:oi},exit:{opacity:oi},update:b={opacity:uh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:oX}},PP({role:doe,from:r,encode:DI(g,o,yO),marks:[I,N],name:u,interactive:a,sort:E})}function jWt(e,t){const n=mf(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const xoe='item.orient === "left"',_oe='item.orient === "right"',u7=`(${xoe} || ${_oe})`,UWt=`datum.vgrad && ${u7}`,zWt=a7('"top"','"bottom"','"middle"'),VWt=a7('"right"','"left"','"center"'),HWt=`datum.vgrad && ${_oe} ? (${VWt}) : (${u7} && !(datum.vgrad && ${xoe})) ? "left" : ${boe}`,qWt=`item._anchor || (${u7} ? "middle" : "start")`,WWt=`${UWt} ? (${xoe} ? -90 : 90) : 0`,GWt=`${u7} ? (datum.vgrad ? (${_oe} ? "bottom" : "top") : ${zWt}) : "top"`;function YWt(e,t,n,r){const i=mf(e,t),s={enter:{opacity:oi},update:{opacity:uh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:oi}};return Cu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:qWt},angle:{signal:WWt},align:{signal:HWt},baseline:{signal:GWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),bd({type:iS,role:cqt,style:goe,from:r,encode:s},n)}function KWt(e,t){let n;return Ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+T1e(e.path)+")":e.sphere&&(n="geoShape("+T1e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function T1e(e){return Ht(e)&&e.signal?e.signal:jt(e)}function IFe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===o7?doe:t||coe}function XWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||IFe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function QWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function woe(e,t){const n=d6e(e.type);n||ut("Unrecognized transform type: "+jt(e.type));const r=r7(n.type.toLowerCase(),null,kFe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function kFe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=JWt(o,t,n)}return r}function JWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return ZWt(e,t,n);if(i===void 0){e.required&&ut("Missing required "+jt(t.type)+" parameter: "+jt(e.name));return}else{if(r==="param")return eGt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!pa(i)?i.map(s=>C1e(e,s,n)):C1e(e,i,n)}function C1e(e,t,n){const r=e.type;if(pa(t))return I1e(r)?ut("Expression references can not be signals."):oq(r)?n.fieldRef(t):k1e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||oq(r);return i&&tGt(t)?n.exprRef(t.expr,t.as):i&&nGt(t)?DP(t.field,t.as):I1e(r)?eg(t,n):rGt(r)?vn(n.getData(t).values):oq(r)?DP(t):k1e(r)?n.compareRef(t):t}}function ZWt(e,t,n){return Gt(t.from)||ut('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function eGt(e,t,n){const r=t[e.name];return e.array?(ft(r)||ut("Expected an array of sub-parameters. Instead: "+jt(r)),r.map(i=>A1e(e,i,n))):A1e(e,r,n)}function A1e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ut("Unsupported parameter: "+jt(t));const s=lr(kFe(i,t,n),i.key);return vn(n.add(Qqt(s)))}const tGt=e=>e&&e.expr,nGt=e=>e&&e.field,rGt=e=>e==="data",I1e=e=>e==="expr",oq=e=>e==="field",k1e=e=>e==="compare";function iGt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ut("Only group marks can be faceted."),r.field!=null?o=a=L$(r,n):(e.data?a=vn(n.getData(e.data).aggregate):(s=woe(lr({type:"aggregate",groupby:Wt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=L$(r,n),o=a=vn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=vn(n.add(am(null,[{}]))),o||(o=L$(e,n)),{key:i,pulse:o,parent:a}}function L$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:vn(t.getData(e.data).output)}function gE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}gE.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=vn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new gE(e,s,i,r,o)};function RFe(e){return Gt(e)?e:null}function R1e(e,t,n){const r=i7(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function RR(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Aqt(s);let l=RFe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:rX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:vn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(r7(r,void 0,d)),o&&(t.index[i]=f),c=vn(f),l!=null&&(a[l]=c)}return c}gE.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=RFe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&R1e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:vn(r.output)},n&&n.field&&R1e(e,u,n),a=e.add(pFe(u)),o=e.add(am({pulse:vn(a)})),o={agg:a,ref:vn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return vn(this.values)},extentRef(e,t){return RR(e,this,"extent","extent",t,!1)},domainRef(e,t){return RR(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return RR(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return RR(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return RR(e,this,"indata","tupleindex",t,!0,!0)}};function sGt(e,t,n){const r=e.from.facet,i=r.name,s=L$(r,t);let o;r.name||ut("Facet must have a name: "+jt(r)),r.data||ut("Facet must reference a data set: "+jt(r)),r.field?o=t.add(yFe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(zqt({key:t.keyRef(r.groupby),group:vn(t.proxy(n.parent)),pulse:s})):ut("Facet must specify groupby or field: "+jt(r));const a=t.fork(),u=a.add(am()),l=a.add(rS({pulse:vn(u)}));a.addData(i,new gE(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function oGt(e,t,n){const r=t.add(yFe({pulse:n.pulse})),i=t.fork();i.add(rS()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function DFe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(R8()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=eg(l,t);u.update=c.$expr,u.params=c.$params}function l7(e,t){const n=IFe(e),r=e.type===o7,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===doe||n===foe,a,u,l,c,f,d,h;const p=n===coe||o||i,m=iGt(e.from,r,t);u=t.add(jqt({key:m.key||(e.key?DP(e.key):void 0),pulse:m.pulse,clean:!r}));const g=vn(u);u=l=t.add(am({pulse:g})),u=t.add(Gqt({markdef:XWt(e),interactive:QWt(e.interactive,t),clip:KWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:vn(u)}));const v=vn(u);u=c=t.add(gFe(dFe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const I=woe(C,t),R=I.metadata;(R.generates||R.changes)&&ut("Mark transforms should not generate new data."),R.nomod||(c.params.mod=!0),I.params.pulse=vn(u),t.add(u=I)}),e.sort&&(u=t.add(nWt({sort:t.compareRef(e.sort),pulse:vn(u)})));const b=vn(u);(i||o)&&(o=t.add(bFe({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),d=vn(o));const w=t.add(mFe({mark:v,pulse:d||b}));h=vn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?sGt(e,t,m):p?oGt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=aGt(s,h,t));const E=t.add(vFe({pulse:h})),T=t.add(rS({pulse:vn(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new gE(t,l,E,T)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&ut("Marks only support modify triggers."),DFe(C,t,f)}))}function aGt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:pa(s)?n.signalRef(s.signal):s,method:pa(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=pa(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return vn(n.add(Xqt(o)))}function uGt(e,t){const n=t.config.legend,r=e.encode||{},i=mf(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;yoe.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||ut("Missing valid scale for legend.");const p=lGt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=vn(t.add(am(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},b=vn(t.add(qqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===M$?(h=[MWt(e,c,n,r.gradient),S1e(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${Vw(i.gradientLength())})/100))`)):p===aX?h=[LWt(e,c,n,r.gradient,b),S1e(e,n,r.labels,b)]:(f=jWt(e,n),h=[BWt(e,n,r,b,Vw(f.columns))],d.size=dGt(e,t,h[0].marks)),h=[PP({role:aqt,from:g,encode:v,marks:h,layout:f,interactive:a})],m.title&&h.push(YWt(e,n,r.title,g)),l7(PP({role:sqt,from:g,encode:DI(fGt(i,e,n),s,yO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function lGt(e,t){let n=e.type||E1e;return!e.type&&cGt(e)===1&&(e.fill||e.stroke)&&(n=Pie(t)?M$:EK(t)?aX:E1e),n!==M$?n:EK(t)?aX:M$}function cGt(e){return yoe.reduce((t,n)=>t+(e[n]?1:0),0)}function fGt(e,t,n){const r={enter:{},update:{}};return Cu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function dGt(e,t,n){const r=Vw(D1e("size",e,n)),i=Vw(D1e("strokeWidth",e,n)),s=Vw(hGt(n[1].encode,t,gO));return eg(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function D1e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:CFe(e,n[0].encode)}function hGt(e,t,n){return CFe("fontSize",e)||PWt("fontSize",t,n)}const pGt=`item.orient==="${NI}"?-90:item.orient==="${PI}"?90:0`;function mGt(e,t){e=Gt(e)?{text:e}:e;const n=mf(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=vn(t.add(am(null,[l])));return u.push(vGt(e,n,gGt(e),c)),e.subtitle&&u.push(bGt(e,n,r.subtitle,c)),l7(PP({role:fqt,from:c,encode:yGt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function gGt(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function yGt(e,t){const n={enter:{},update:{}};return Cu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:boe},angle:{signal:pGt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),DI(n,t,yO)}function vGt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bd({type:iS,role:dqt,style:SWt,from:r,encode:o},n)}function bGt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bd({type:iS,role:hqt,style:TWt,from:r,encode:o},n)}function xGt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(woe(r,t))}),e.on&&e.on.forEach(r=>{DFe(r,t,e.name)}),t.addDataPipeline(e.name,_Gt(e,t,n))}function _Gt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?pa(e.values)||P$(e.format)?(r.push(N1e(t,e)),r.push(i=O_())):r.push(i=O_({$ingest:e.values,$format:e.format})):e.url?P$(e.url)||P$(e.format)?(r.push(N1e(t,e)),r.push(i=O_())):r.push(i=O_({$request:e.url,$format:e.format})):e.source&&(i=a=Wt(e.source).map(d=>vn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=O_()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=eWt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,O_())),i||r.push(O_()),r.push(rS({})),r}function O_(e){const t=am({},e);return t.metadata={source:!0},t}function N1e(e,t){return Wqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const NFe=e=>e===rx||e===um,c7=(e,t,n)=>pa(e)?TGt(e.signal,t,n):e===NI||e===um?t:n,Ua=(e,t,n)=>pa(e)?EGt(e.signal,t,n):NFe(e)?t:n,$p=(e,t,n)=>pa(e)?SGt(e.signal,t,n):NFe(e)?n:t,PFe=(e,t,n)=>pa(e)?CGt(e.signal,t,n):e===um?{value:t}:{value:n},wGt=(e,t,n)=>pa(e)?AGt(e.signal,t,n):e===PI?{value:t}:{value:n},EGt=(e,t,n)=>OFe(`${e} === '${um}' || ${e} === '${rx}'`,t,n),SGt=(e,t,n)=>OFe(`${e} !== '${um}' && ${e} !== '${rx}'`,t,n),TGt=(e,t,n)=>Eoe(`${e} === '${NI}' || ${e} === '${um}'`,t,n),CGt=(e,t,n)=>Eoe(`${e} === '${um}'`,t,n),AGt=(e,t,n)=>Eoe(`${e} === '${PI}'`,t,n),OFe=(e,t,n)=>(t=t!=null?ja(t):t,n=n!=null?ja(n):n,P1e(t)&&P1e(n)?(t=t?t.signal||jt(t.value):null,n=n?n.signal||jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),P1e=e=>e==null||Object.keys(e).length===1,Eoe=(e,t,n)=>({signal:`${e} ? (${N2(t)}) : (${N2(n)})`}),IGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${NI}' ? (${N2(r)}) : `:"")+(n!=null?`${e} === '${rx}' ? (${N2(n)}) : `:"")+(i!=null?`${e} === '${PI}' ? (${N2(i)}) : `:"")+(t!=null?`${e} === '${um}' ? (${N2(t)}) : `:"")+"(null)"}),N2=e=>pa(e)?e.signal:e==null?null:jt(e),kGt=(e,t)=>t===0?0:pa(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},rC=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function KT(e,t,n,r){let i;if(t&&Jt(t,e))return t[e];if(Jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[goe][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[gO][i]}return null}function O1e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function RGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(pa(o)){const f=O1e([n.axisX,n.axisY]),d=O1e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ua(o,KT(l,n.axisX,i,r),KT(l,n.axisY,i,r));u={};for(l of d)u[l]=IGt(o.signal,KT(l,n.axisTop,i,r),KT(l,n.axisBottom,i,r),KT(l,n.axisLeft,i,r),KT(l,n.axisRight,i,r))}else a=o===um||o===rx?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function DGt(e,t,n,r){const i=mf(e,t),s=e.orient;let o,a;const u={enter:o={opacity:oi},update:a={opacity:uh},exit:{opacity:oi}};Cu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=M1e(e,0),c=M1e(e,1);return o.x=a.x=Ua(s,l,oi),o.x2=a.x2=Ua(s,c),o.y=a.y=$p(s,l,oi),o.y2=a.y2=$p(s,c),bd({type:voe,role:eqt,from:r,encode:u},n)}function M1e(e,t){return{scale:e.scale,range:t}}function NGt(e,t,n,r,i){const s=mf(e,t),o=e.orient,a=e.gridScale,u=c7(o,1,-1),l=PGt(e.offset,u);let c,f,d;const h={enter:c={opacity:oi},update:d={opacity:uh},exit:f={opacity:oi}};Cu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:ah,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ua(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Ua(o,p,g),c.y=d.y=$p(o,p,g),c.x2=d.x2=$p(o,v),c.y2=d.y2=Ua(o,v),f.x=Ua(o,p),f.y=$p(o,p),bd({type:voe,role:tqt,key:ah,from:r,encode:h},n)}function PGt(e,t){if(t!==1)if(!Ht(e))e=pa(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(Ht(n.mult))n=n.mult=lr({},n.mult);else return n.mult=pa(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function OGt(e,t,n,r,i,s){const o=mf(e,t),a=e.orient,u=c7(a,-1,1);let l,c,f;const d={enter:l={opacity:oi},update:f={opacity:uh},exit:c={opacity:oi}};Cu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ja(i);h.mult=u;const p={scale:e.scale,field:ah,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ua(a,oi,p),f.y2=l.y2=Ua(a,h),c.x=Ua(a,p),f.x=l.x=$p(a,oi,p),f.x2=l.x2=$p(a,h),c.y=$p(a,p),bd({type:voe,role:rqt,key:ah,from:r,encode:d},n)}function aq(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function MGt(e,t,n,r,i,s){const o=mf(e,t),a=e.orient,u=e.scale,l=c7(a,-1,1),c=Vw(o("labelFlush")),f=Vw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ja(i);g.mult=l,g.offset=ja(o("labelPadding")||0),g.offset.mult=l;const v={scale:u,field:ah,band:.5,offset:AFe(s.offset,o("labelOffset"))},b=Ua(a,p?aq(u,c,'"left"','"right"','"center"'):{value:"center"},wGt(a,"left","right")),w=Ua(a,PFe(a,"bottom","top"),p?aq(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=aq(u,c,`-(${f})`,f,0);p=p&&f;const T={opacity:oi,x:Ua(a,v,g),y:$p(a,v,g)},C={enter:T,update:m={opacity:uh,text:{field:moe},x:T.x,y:T.y,align:b,baseline:w},exit:{opacity:oi,x:T.x,y:T.y}};Cu(C,{dx:!d&&p?Ua(a,E):null,dy:!h&&p?$p(a,E):null}),Cu(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const I=o("labelBound");let R=o("labelOverlap");return R=R||I?{separation:o("labelSeparation"),method:R,order:"datum.index",bound:I?{scale:u,orient:a,tolerance:I}:null}:void 0,m.align!==b&&(m.align=rC(m.align,b)),m.baseline!==w&&(m.baseline=rC(m.baseline,w)),bd({type:iS,role:nqt,style:gO,key:ah,from:r,encode:C,overlap:R},n)}function LGt(e,t,n,r){const i=mf(e,t),s=e.orient,o=c7(s,-1,1);let a,u;const l={enter:a={opacity:oi,anchor:ja(i("titleAnchor",null)),align:{signal:boe}},update:u=lr({},a,{opacity:uh,text:ja(e.title)}),exit:{opacity:oi}},c={signal:`lerp(range("${e.scale}"), ${a7(0,1,.5)})`};return u.x=Ua(s,c),u.y=$p(s,c),a.angle=Ua(s,oi,kGt(o,90)),a.baseline=Ua(s,PFe(s,rx,um),{value:rx}),u.angle=a.angle,u.baseline=a.baseline,Cu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),$Gt(i,s,l,n),l.update.align=rC(l.update.align,a.align),l.update.angle=rC(l.update.angle,a.angle),l.update.baseline=rC(l.update.baseline,a.baseline),bd({type:iS,role:iqt,style:goe,from:r,encode:l},n)}function $Gt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=rC(ja(a),n.update[u]),!1):!y2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ja(o):Ua(t,ja(o),ja(s))}function FGt(e,t){const n=RGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=mf(e,n),l=OWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=vn(t.add(am({},[c]))),d=vn(t.add(Bqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(NGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(OGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(MGt(e,n,r.labels,d,p,l))),c.domain&&h.push(DGt(e,n,r.domain,f)),c.title&&h.push(LGt(e,n,r.title,f)),l7(PP({role:ZHt,from:f,encode:DI(BGt(u,e),i,yO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function BGt(e,t){const n={enter:{},update:{}};return Cu(n,{orient:e("orient"),offset:e("offset")||0,position:pp(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function MFe(e,t,n){const r=Wt(e.signals),i=Wt(e.scales);return n||r.forEach(s=>hFe(s,t)),Wt(e.projections).forEach(s=>yWt(s,t)),i.forEach(s=>sWt(s,t)),Wt(e.data).forEach(s=>xGt(s,t)),i.forEach(s=>oWt(s,t)),(n||r).forEach(s=>Fqt(s,t)),Wt(e.axes).forEach(s=>FGt(s,t)),Wt(e.marks).forEach(s=>l7(s,t)),Wt(e.legends).forEach(s=>uGt(s,t)),e.title&&mGt(e.title,t),t.parseLambdas(),t}const jGt=e=>DI({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function UGt(e,t){const n=t.config,r=vn(t.root=t.add(R8())),i=zGt(e,n);i.forEach(l=>hFe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(am()),o=t.add(gFe(dFe(jGt(e.encode),o7,foe,e.style,t,{pulse:vn(s)}))),a=t.add(bFe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:vn(o)}));t.operators.pop(),t.pushState(vn(o),vn(a),null),MFe(e,t,i),t.operators.push(a);let u=t.add(mFe({mark:r,pulse:vn(a)}));return u=t.add(vFe({pulse:vn(u)})),u=t.add(rS({pulse:vn(u)})),t.addData("root",new gE(t,s,s,u)),t}function DR(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function zGt(e,t){const n=o=>pp(e[o],t[o]),r=[DR("background",n("background")),DR("autosize",XHt(n("autosize"))),DR("padding",JHt(n("padding"))),DR("width",n("width")||0),DR("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Wt(e.signals).forEach(o=>{Jt(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Wt(t.signals).forEach(o=>{!Jt(s,o.name)&&!Jt(i,o.name)&&r.push(o)}),r}function LFe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function L1e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}LFe.prototype=L1e.prototype={parse(e){return MFe(e,this)},fork(){return new L1e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof nX?vn(e):e;return this.add(Zqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(vn(this.add(rS({pulse:e})))),this._parent.push(t),this._lookup.push(n?vn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kr(this._parent)},encode(){return Kr(this._encode)},lookup(){return Kr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Gt(e))return DP(e,t);e.signal||ut("Unsupported field reference: "+jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=vn(this.add(Vqt(i)))}return r},compareRef(e){let t=!1;const n=s=>pa(s)?(t=!0,this.signalRef(s.signal)):Iqt(s)?(t=!0,this.exprRef(s.expr)):s,r=Wt(e.field).map(n),i=Wt(e.order).map(n);return t?vn(this.add(w1e({fields:r,orders:i}))):x1e(r,i)},keyRef(e,t){let n=!1;const r=s=>pa(s)?(n=!0,vn(i[s.signal])):s,i=this.signals;return e=Wt(e).map(r),n?vn(this.add(Hqt({fields:e,flat:t}))):Sqt(e,t)},sortRef(e){if(!e)return e;const t=i7(e.op,e.field),n=e.order||Tqt;return n.signal?vn(this.add(w1e({fields:t,orders:this.signalRef(n.signal)}))):x1e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ut("Duplicate signal name: "+jt(e));const n=t instanceof nX?t:this.add(R8(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ut("Unrecognized signal name: "+jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?vn(this.signals[e]):(Jt(this.lambdas,e)||(this.lambdas[e]=this.add(R8(null))),vn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=eg(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ht(e)?e:this.signalRef(e.signal||Soe(e))},exprRef(e,t){const n={expr:eg(e,this)};return t&&(n.expr.$name=t),vn(this.add(Uqt(n)))},addBinding(e,t){this.bindings||ut("Nested signals do not support binding: "+jt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){Jt(this.scales,e)&&ut("Duplicate scale or projection name: "+jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,tWt(t))},addProjection(e,t){this.addScaleProj(e,Jqt(t))},getScale(e){return this.scales[e]||ut("Unrecognized scale name: "+jt(e)),this.scales[e]},scaleRef(e){return vn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.data[e]=t},getData(e){return this.data[e]||ut("Undefined data set name: "+jt(e)),this.data[e]},addDataPipeline(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.addData(e,gE.fromEntries(this,t))}};function Soe(e){return(ft(e)?VGt:HGt)(e)}function VGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ht(i)?i.signal||Soe(i):jt(i))}return n+"]"}function HGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+jt(r)+":"+(Ht(i)?i.signal||Soe(i):jt(i));return t+"}"}function qGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function WGt(e,t,n){return Ht(e)||ut("Input Vega specification must be an object."),t=EI(qGt(),t,e.config),UGt(e,new LFe(t,n)).toRuntime()}var GGt="5.30.0";lr(JC,LFt,S9t,njt,Pjt,jjt,h7t,Wjt,m7t,b7t,k7t,L7t);const YGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ko,CanvasHandler:fO,CanvasRenderer:v8,DATE:af,DAY:rl,DAYOFYEAR:Z0,Dataflow:nC,Debug:o4e,Error:vre,EventStream:Cj,Gradient:EMe,GroupItem:Bj,HOURS:gd,Handler:ise,HybridHandler:pLe,HybridRenderer:OK,Info:s4e,Item:Fj,MILLISECONDS:Gp,MINUTES:yd,MONTH:ul,Marks:vd,MultiPulse:Fre,None:i4e,Operator:os,Parameters:Tj,Pulse:xb,QUARTER:of,RenderType:sb,Renderer:cO,ResourceLoader:RMe,SECONDS:ph,SVGHandler:tLe,SVGRenderer:cse,SVGStringRenderer:hLe,Scenegraph:GMe,TIME_UNITS:Rre,Transform:nt,View:eFe,WEEK:ca,Warn:bre,YEAR:wu,accessor:pf,accessorFields:al,accessorName:lo,array:Wt,ascending:bj,bandwidthNRD:zre,bin:m6e,bootstrapCI:g6e,boundClip:SLe,boundContext:oO,boundItem:kK,boundMark:VMe,boundStroke:O1,changeset:eS,clampRange:y4e,codegenExpression:C$e,compare:Sre,constant:ml,cumulativeLogNormal:Yre,cumulativeNormal:Ij,cumulativeUniform:Jre,dayofyear:k4e,debounce:Tre,defaultLocale:Pre,definition:d6e,densityLogNormal:Gre,densityNormal:Vre,densityUniform:Qre,domChild:ua,domClear:eh,domCreate:rb,domFind:rse,dotbin:y6e,error:ut,expressionFunction:Mo,extend:lr,extent:J0,extentIndex:v4e,falsy:Pv,fastmap:TI,field:dh,flush:b4e,font:Hj,fontFamily:lO,fontSize:hg,format:y$,formatLocale:s8,formats:Lre,hasOwnProperty:Jt,id:Y3,identity:pl,inferType:t6e,inferTypes:n6e,ingest:Ti,inherits:zt,inrange:k2,interpolate:Oie,interpolateColors:Lj,interpolateRange:lMe,intersect:xLe,intersectBoxLine:R2,intersectPath:zie,intersectPoint:Vie,intersectRule:NMe,isArray:ft,isBoolean:Ox,isDate:bb,isFunction:cr,isIterable:x4e,isNumber:bi,isObject:Ht,isRegExp:_4e,isString:Gt,isTuple:Ej,key:Cre,lerp:w4e,lineHeight:ex,loader:_j,locale:Z4e,logger:xre,lruCache:E4e,markup:lse,merge:S4e,mergeConfig:EI,multiLineOffset:ese,one:wI,pad:T4e,panLinear:f4e,panLog:d4e,panPow:h4e,panSymlog:p4e,parse:WGt,parseExpression:Qse,parseSelector:Lx,path:I9,pathCurves:Bie,pathEqual:TLe,pathParse:nA,pathRectangle:CMe,pathRender:EP,pathSymbols:TMe,pathTrail:AMe,peek:Kr,point:Wj,projection:wse,quantileLogNormal:Kre,quantileNormal:kj,quantileUniform:Zre,quantiles:jre,quantizeInterpolator:cMe,quarter:m4e,quartiles:Ure,get random(){return mh},randomInteger:j$t,randomKDE:qre,randomLCG:B$t,randomLogNormal:b6e,randomMixture:x6e,randomNormal:Hre,randomUniform:_6e,read:s6e,regressionConstant:eie,regressionExp:E6e,regressionLinear:tie,regressionLoess:C6e,regressionLog:w6e,regressionPoly:T6e,regressionPow:S6e,regressionQuad:nie,renderModule:Gj,repeat:mD,resetDefaultLocale:LLt,resetSVGClipId:kMe,resetSVGDefIds:zBt,responseType:i6e,runtimeContext:U$e,sampleCurve:Dj,sampleLogNormal:Wre,sampleNormal:Aj,sampleUniform:Xre,scale:xi,sceneEqual:fse,sceneFromJSON:qMe,scenePickVisit:c8,sceneToJSON:HMe,sceneVisit:Yp,sceneZOrder:Hie,scheme:Mie,serializeXML:lLe,setHybridRendererOptions:FBt,setRandom:$$t,span:K3,splitAccessPath:dg,stringValue:jt,textMetrics:sd,timeBin:W4e,timeFloor:L4e,timeFormatLocale:xP,timeInterval:CI,timeOffset:B4e,timeSequence:z4e,timeUnitSpecifier:I4e,timeUnits:Dre,toBoolean:Are,toDate:Ire,toNumber:sl,toSet:Wp,toString:kre,transform:h6e,transforms:JC,truncate:C4e,truthy:hh,tupleid:bn,typeParsers:xK,utcFloor:$4e,utcInterval:AI,utcOffset:j4e,utcSequence:V4e,utcdayofyear:N4e,utcquarter:g4e,utcweek:P4e,version:GGt,visitArray:jv,week:R4e,writeConfig:SI,zero:Qv,zoomLinear:_re,zoomLog:wre,zoomPow:i8,zoomSymlog:Ere},Symbol.toStringTag,{value:"Module"}));function KGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var XGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},QGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},JGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const ZGt=Array.prototype.slice,M_=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,ZGt.call(t,1))},eYt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var tYt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:eYt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return M_("join",arguments)},indexof:function(){return M_("indexOf",arguments)},lastindexof:function(){return M_("lastIndexOf",arguments)},slice:function(){return M_("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return M_("substring",arguments,String)},split:function(){return M_("split",arguments,String)},replace:function(){return M_("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const nYt=["view","item","group","xy","x","y"],lX=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&lX.add(setImmediate);const rYt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:XGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),lX.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||tYt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>QGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>JGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,lX.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function NR(e,t,n,r,i,s){const o=a=>rYt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,nYt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var iYt={operator(e,t){const n=t.ast,r=e.functions;return i=>NR(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>NR(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>NR(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return NR(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=NR(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&KGt(o,r,s),l}}};const sYt="vega-lite",oYt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',aYt="5.23.0",uYt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],lYt="https://vega.github.io/vega-lite/",cYt="Vega-Lite is a concise high-level language for interactive visualization.",fYt=["vega","chart","visualization"],dYt="build/vega-lite.js",hYt="build/vega-lite.min.js",pYt="build/vega-lite.min.js",mYt="build/src/index",gYt="build/src/index.d.ts",yYt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},vYt=["bin","build","src","vega-lite*","tsconfig.json"],bYt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},xYt={type:"git",url:"https://github.com/vega/vega-lite.git"},_Yt="BSD-3-Clause",wYt={url:"https://github.com/vega/vega-lite/issues"},EYt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},SYt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},TYt={vega:"^5.24.0"},CYt={node:">=18"},AYt="yarn@1.22.22",IYt={name:sYt,author:oYt,version:aYt,collaborators:uYt,homepage:lYt,description:cYt,keywords:fYt,main:dYt,unpkg:hYt,jsdelivr:pYt,module:mYt,types:gYt,bin:yYt,files:vYt,scripts:bYt,repository:xYt,license:_Yt,bugs:wYt,devDependencies:EYt,dependencies:SYt,peerDependencies:TYt,engines:CYt,packageManager:AYt};function Toe(e){return Rt(e,"or")}function Coe(e){return Rt(e,"and")}function Aoe(e){return Rt(e,"not")}function $$(e,t){if(Aoe(e))$$(e.not,t);else if(Coe(e))for(const n of e.and)$$(n,t);else if(Toe(e))for(const n of e.or)$$(n,t);else t(e)}function iC(e,t){return Aoe(e)?{not:iC(e.not,t)}:Coe(e)?{and:e.and.map(n=>iC(n,t))}:Toe(e)?{or:e.or.map(n=>iC(n,t))}:t(e)}const qn=structuredClone;function $Fe(e){throw new Error(e)}function uA(e,t){const n={};for(const r of t)Jt(e,r)&&(n[r]=e[r]);return n}function Xc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Yi(e)).join(",")})`};function Lr(e){if(bi(e))return e;const t=Gt(e)?e:Yi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function cX(e){return e===!1||e===null}function Ir(e,t){return e.includes(t)}function lA(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Ioe(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function FFe(e,...t){for(const n of t)kYt(e,n??{});return e}function kYt(e,t){for(const n of It(t))SI(e,n,t[n],!0)}function v0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function RYt(e,t){const n=It(e),r=It(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function BFe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function koe(e,t){for(const n of e)if(t.has(n))return!0;return!1}function fX(e){const t=new Set;for(const n of e){const i=dg(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Roe(e,t){return e===void 0||t===void 0?!0:koe(fX(e),fX(t))}function Gi(e){return It(e).length===0}const It=Object.keys,Eu=Object.values,ix=Object.entries;function OP(e){return e===!0||e===!1}function Ms(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function dN(e,t){return Aoe(e)?`!(${dN(e.not,t)})`:Coe(e)?`(${e.and.map(n=>dN(n,t)).join(") && (")})`:Toe(e)?`(${e.or.map(n=>dN(n,t)).join(") || (")})`:t(e)}function D8(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&D8(e[n],t)&&delete e[n],Gi(e)}function vO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Doe(e,t="datum"){const n=dg(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function jFe(e,t="datum"){return`${t}[${jt(dg(e).join("."))}]`}function $i(e){return`datum['${e.replaceAll("'","\\'")}']`}function DYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function gh(e){return`${dg(e).map(DYt).join("\\.")}`}function yE(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function OI(e){return`${dg(e).join(".")}`}function cA(e){return e?dg(e).length:0}function Do(...e){return e.find(t=>t!==void 0)}let UFe=42;function zFe(e){const t=++UFe;return e?String(e)+t:t}function NYt(){UFe=42}function VFe(e){return HFe(e)?e:`__${e}`}function HFe(e){return e.startsWith("__")}function MP(e){if(e!==void 0)return(e%360+360)%360}function f7(e){return bi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const $1e=Object.getPrototypeOf(structuredClone({}));function ed(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ed(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!ed(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==$1e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==$1e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!ed(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Yi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function Rt(e,t){return Ht(e)&&Jt(e,t)&&e[t]!==void 0}const Hy="row",qy="column",d7="facet",$s="x",Ya="y",lm="x2",yg="y2",$x="xOffset",MI="yOffset",cm="radius",L1="radius2",Dh="theta",$1="theta2",fm="latitude",dm="longitude",hm="latitude2",yh="longitude2",Fx="time",uf="color",vg="fill",bg="stroke",lf="shape",F1="size",sS="angle",B1="opacity",Bx="fillOpacity",jx="strokeOpacity",Ux="strokeWidth",zx="strokeDash",bO="text",fA="order",xO="detail",h7="key",vE="tooltip",p7="href",m7="url",g7="description",PYt={x:1,y:1,x2:1,y2:1},qFe={theta:1,theta2:1,radius:1,radius2:1};function WFe(e){return Jt(qFe,e)}const Noe={longitude:1,longitude2:1,latitude:1,latitude2:1};function GFe(e){switch(e){case fm:return"y";case hm:return"y2";case dm:return"x";case yh:return"x2"}}function YFe(e){return Jt(Noe,e)}const OYt=It(Noe),Poe={...PYt,...qFe,...Noe,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function sC(e){return e===uf||e===vg||e===bg}const KFe={row:1,column:1,facet:1},oh=It(KFe),Ooe={...Poe,...KFe},MYt=It(Ooe),{order:Lun,detail:$un,tooltip:Fun,...LYt}=Ooe,{row:Bun,column:jun,facet:Uun,...$Yt}=LYt;function FYt(e){return Jt($Yt,e)}function XFe(e){return Jt(Ooe,e)}const BYt=[lm,yg,hm,yh,$1,L1];function QFe(e){return oS(e)!==e}function oS(e){switch(e){case lm:return $s;case yg:return Ya;case hm:return fm;case yh:return dm;case $1:return Dh;case L1:return cm}return e}function sx(e){if(WFe(e))switch(e){case Dh:return"startAngle";case $1:return"endAngle";case cm:return"outerRadius";case L1:return"innerRadius"}return e}function xg(e){switch(e){case $s:return lm;case Ya:return yg;case fm:return hm;case dm:return yh;case Dh:return $1;case cm:return L1}}function cf(e){switch(e){case $s:case lm:return"width";case Ya:case yg:return"height"}}function JFe(e){switch(e){case $s:return"xOffset";case Ya:return"yOffset";case lm:return"x2Offset";case yg:return"y2Offset";case Dh:return"thetaOffset";case cm:return"radiusOffset";case $1:return"theta2Offset";case L1:return"radius2Offset"}}function Moe(e){switch(e){case $s:return"xOffset";case Ya:return"yOffset"}}function jYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const UYt=It(Poe),{x:zun,y:Vun,x2:Hun,y2:qun,xOffset:Wun,yOffset:Gun,latitude:Yun,longitude:Kun,latitude2:Xun,longitude2:Qun,theta:Jun,theta2:Zun,radius:eln,radius2:tln,...Loe}=Poe,zYt=It(Loe),$oe={x:1,y:1},j1=It($oe);function No(e){return Jt($oe,e)}const Foe={theta:1,radius:1},VYt=It(Foe);function y7(e){return e==="width"?$s:Ya}const ZFe={xOffset:1,yOffset:1};function _O(e){return Jt(ZFe,e)}const HYt={time:1};function uq(e){return e in HYt}const{text:nln,tooltip:rln,href:iln,url:sln,description:oln,detail:aln,key:uln,order:lln,...e5e}=Loe,qYt=It(e5e);function WYt(e){return Jt(Loe,e)}function GYt(e){switch(e){case uf:case vg:case bg:case F1:case lf:case B1:case Ux:case zx:return!0;case Bx:case jx:case sS:case Fx:return!1}}const t5e={...$oe,...Foe,...ZFe,...e5e},Boe=It(t5e);function _g(e){return Jt(t5e,e)}function YYt(e,t){return XYt(e)[t]}const n5e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cln,...KYt}=n5e;function XYt(e){switch(e){case uf:case vg:case bg:case g7:case xO:case h7:case vE:case p7:case fA:case B1:case Bx:case jx:case Ux:case d7:case Hy:case qy:return n5e;case $s:case Ya:case $x:case MI:case fm:case dm:case Fx:return KYt;case lm:case yg:case hm:case yh:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case F1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case zx:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case lf:return{point:"always",geoshape:"always"};case bO:return{text:"always"};case sS:return{point:"always",square:"always",text:"always"};case m7:return{image:"always"};case Dh:return{text:"always",arc:"always"};case cm:return{text:"always",arc:"always"};case $1:case L1:return{arc:"always"}}}function lq(e){switch(e){case $s:case Ya:case Dh:case cm:case $x:case MI:case F1:case sS:case Ux:case B1:case Bx:case jx:case Fx:case lm:case yg:case $1:case L1:return;case d7:case Hy:case qy:case lf:case zx:case bO:case vE:case p7:case m7:case g7:return"discrete";case uf:case vg:case bg:return"flexible";case fm:case dm:case hm:case yh:case xO:case h7:case fA:return}}const QYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},JYt={count:1,min:1,max:1};function y1(e){return Rt(e,"argmin")}function Vx(e){return Rt(e,"argmax")}function joe(e){return Gt(e)&&Jt(QYt,e)}const ZYt=new Set(["count","valid","missing","distinct"]);function v7(e){return Gt(e)&&ZYt.has(e)}function eKt(e){return Gt(e)&&Ir(["min","max"],e)}const tKt=new Set(["count","sum","distinct","valid","missing"]),nKt=new Set(["mean","average","median","q1","q3","min","max"]);function r5e(e){return Ox(e)&&(e=R7(e,void 0)),"bin"+It(e).map(t=>b7(e[t])?Ms(`_${t}_${ix(e[t])}`):Ms(`_${t}_${e[t]}`)).join("")}function ps(e){return e===!0||aS(e)&&!e.binned}function du(e){return e==="binned"||aS(e)&&e.binned===!0}function aS(e){return Ht(e)}function b7(e){return Rt(e,"param")}function F1e(e){switch(e){case Hy:case qy:case F1:case uf:case vg:case bg:case Ux:case B1:case Bx:case jx:case lf:return 6;case zx:return 4;default:return 10}}function wO(e){return Rt(e,"expr")}function hu(e,{level:t}={level:0}){const n=It(e||{}),r={};for(const i of n)r[i]=t===0?Yf(e[i]):hu(e[i],{level:t-1});return r}function i5e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=uA(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function Vv(e){return Gt(e)||ft(e)&&Gt(e[0])}function pn(e){return Rt(e,"signal")}function uS(e){return Rt(e,"step")}function rKt(e){return ft(e)?!1:Rt(e,"fields")&&!Rt(e,"data")}function iKt(e){return ft(e)?!1:Rt(e,"fields")&&Rt(e,"data")}function Py(e){return ft(e)?!1:Rt(e,"field")&&Rt(e,"data")}const sKt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},oKt=It(sKt),aKt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},dX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function s5e(e){const t=ft(e.condition)?e.condition.map(B1e):B1e(e.condition);return{...Yf(e),condition:t}}function Yf(e){if(wO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function B1e(e){if(wO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ws(e){if(wO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return pn(e)?e:e!==void 0?{value:e}:void 0}function uKt(e){return pn(e)?e.signal:jt(e)}function j1e(e){return pn(e)?e.signal:jt(e.value)}function kp(e){return pn(e)?e.signal:e==null?null:jt(e)}function lKt(e,t,n){for(const r of n){const i=tg(r,t.markDef,t.config);i!==void 0&&(e[r]=ws(i))}return e}function o5e(e){return[].concat(e.type,e.style??[])}function Hi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Rt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:tg(e,t,n,r)}function tg(e,t,n,{vgChannel:r}={}){const i=hX(e,t,n.style);return Do(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function hX(e,t,n){return a5e(e,o5e(t),n)}function a5e(e,t,n){t=Wt(t);let r;for(const i of t){const s=n[i];Rt(s,e)&&(r=s[e])}return r}function u5e(e,t){return Wt(e).reduce((n,r)=>(n.field.push(Vt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function l5e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(ed(i,r))return;n.push(r)}),n}function c5e(e,t){return ed(e,t)||!t?e:e?[...Wt(e),...Wt(t)].join(", "):t}function f5e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Vv(n)||pn(n))&&(Vv(r)||pn(r)))return{explicit:e.explicit,value:c5e(n,r)};if(Vv(n)||pn(n))return{explicit:e.explicit,value:n};if(Vv(r)||pn(r))return{explicit:e.explicit,value:r};if(!Vv(n)&&!pn(n)&&!Vv(r)&&!pn(r))return{explicit:e.explicit,value:l5e(n,r)};throw new Error("It should never reach here")}function Uoe(e){return`Invalid specification ${Yi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const cKt='Autosize "fit" only works for single views and layered views.';function U1e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function z1e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function V1e(e){return e?`Dropping "fit-${e}" because spec has discrete ${cf(e)}.`:'Dropping "fit" because spec has discrete size.'}function zoe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function H1e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function fKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function dKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function d5e(e){return`Selection not supported for ${e} yet.`}function hKt(e){return`Cannot find a selection named "${e}".`}const pKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",mKt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",gKt="Legend bindings are only supported for selections over an individual field or encoding channel.";function yKt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function vKt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const bKt="The same selection must be used to override scale domains in a layered view.",xKt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function _Kt(e){return`Unknown repeated value "${e}".`}function q1e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const wKt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Voe="Animation involving facet, layer, or concat is currently unsupported.";function EKt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${jt(e)}.`}function SKt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${jt(t)} encoding found for selection ${jt(n.param)}. Using "field": ${jt(r)}.`}const TKt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function CKt(e){return`Unrecognized parse "${e}".`}function W1e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const AKt="Attempt to add the same child twice.";function IKt(e){return`Ignoring an invalid transform: ${Yi(e)}.`}const kKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function G1e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function RKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yi(t)} is overridden by a child projection ${Yi(n)}.`}const DKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function NKt(e){return`${e}Offset dropped because ${e} is continuous`}function PKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yi(n)}}.`}function h5e(e){return`Invalid field type "${e}".`}function OKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function MKt(e){return`Invalid aggregation operator "${e}".`}function p5e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function LKt(e){return`Position range does not support relative band size for ${e}.`}function pX(e,t){return`Dropping ${Yi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const $Kt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function x7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function FKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function BKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function jKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function UKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function cq(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function zKt(e){return`The ${e} for range marks cannot be an expression`}function VKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function HKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function qKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function WKt(e){return`Cannot use the relative band size with ${e} scale.`}function GKt(e){return`Using unaggregated domain with raw field has no effect (${Yi(e)}).`}function YKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function KKt(e){return`Unaggregated domain is currently unsupported for log scale (${Yi(e)}).`}function XKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function QKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function JKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function m5e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function g5e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function ZKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yi(n)} and ${Yi(r)}). Using ${Yi(n)}.`}function eXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yi(n)} and ${Yi(r)}). Using the union of the two domains.`}function tXt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function nXt(e){return`Dropping sort property ${Yi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Y1e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",rXt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",iXt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",sXt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function oXt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function aXt(e){return`Stack is applied to a non-linear scale (${e}).`}function uXt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function N8(e,t){return`Invalid ${e}: ${Yi(t)}.`}function lXt(e){return`Dropping day from datetime ${Yi(e)} as day cannot be combined with other units.`}function cXt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function fXt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function dXt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function K1e(e){return`1D error band does not support ${e}.`}function y5e(e){return`Channel ${e} is required for "binned" bin.`}function hXt(e){return`Channel ${e} should not be used with "binned" bin.`}function pXt(e){return`Domain for ${e} is required for threshold scale.`}const v5e=xre(bre);let bE=v5e;function mXt(e){return bE=e,bE}function gXt(){return bE=v5e,bE}function Hoe(...e){bE.error(...e)}function Pt(...e){bE.warn(...e)}function yXt(...e){bE.debug(...e)}function lS(e){if(e&&Ht(e)){for(const t of Woe)if(Rt(e,t))return!0}return!1}const b5e=["january","february","march","april","may","june","july","august","september","october","november","december"],vXt=b5e.map(e=>e.substr(0,3)),x5e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],bXt=x5e.map(e=>e.substr(0,3));function xXt(e){if(f7(e)&&(e=+e),bi(e))return e>4&&Pt(N8("quarter",e)),e-1;throw new Error(N8("quarter",e))}function _Xt(e){if(f7(e)&&(e=+e),bi(e))return e-1;{const t=e.toLowerCase(),n=b5e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=vXt.indexOf(r);if(i!==-1)return i;throw new Error(N8("month",e))}}function wXt(e){if(f7(e)&&(e=+e),bi(e))return e%7;{const t=e.toLowerCase(),n=x5e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=bXt.indexOf(r);if(i!==-1)return i;throw new Error(N8("day",e))}}function qoe(e,t){const n=[];if(t&&e.day!==void 0&&It(e).length>1&&(Pt(lXt(e)),e=qn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?_Xt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?xXt(e.quarter):e.quarter;n.push(bi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?wXt(e.day):e.day;n.push(bi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function xE(e){const n=qoe(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function EXt(e){const n=qoe(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function SXt(e){const t=qoe(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const _5e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Woe=It(_5e);function TXt(e){return Jt(_5e,e)}function cS(e){return Ht(e)?e.binned:w5e(e)}function w5e(e){return e&&e.startsWith("binned")}function Goe(e){return e.startsWith("utc")}function CXt(e){return e.substring(3)}const AXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _7(e){return Woe.filter(t=>S5e(e,t))}function E5e(e){const t=_7(e);return t[t.length-1]}function S5e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function IXt(e,t,{end:n}={end:!1}){const r=Doe(t),i=Goe(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Woe)S5e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),EXt(a)}function T5e(e){if(!e)return;const t=_7(e);return`timeUnitSpecifier(${Yi(t)}, ${Yi(AXt)})`}function kXt(e,t,n){if(!e)return;const r=T5e(e);return`${n||Goe(e)?"utc":"time"}Format(${t}, ${r})`}function Va(e){if(!e)return;let t;return Gt(e)?w5e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ht(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Goe(t.unit)&&(t.utc=!0,t.unit=CXt(t.unit)),t}function RXt(e){const{utc:t,...n}=Va(e);return n.unit?(t?"utc":"")+It(n).map(r=>Ms(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+It(n).map(r=>Ms(`_${r}_${n[r]}`)).join("")}function C5e(e,t=n=>n){const n=Va(e),r=E5e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=A5e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(xE(a))} - ${t(xE(i))}`}}const DXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function NXt(e){return Jt(DXt,e)}function A5e(e,t=1){if(NXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function PXt(e){return Rt(e,"param")}function Yoe(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Koe(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Xoe(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Qoe(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Joe(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Zoe(e){if(e!=null&&e.field){if(ft(e.range)&&e.range.length===2)return!0;if(pn(e.range))return!0}return!1}function eae(e){return!!(e!=null&&e.field)&&(ft(e.oneOf)||ft(e.in))}function OXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function I5e(e){return eae(e)||Yoe(e)||Zoe(e)||Koe(e)||Qoe(e)||Xoe(e)||Joe(e)}function zm(e,t){return D7(e,{timeUnit:t,wrapTime:!0})}function MXt(e,t){return e.map(n=>zm(n,t))}function k5e(e,t=!0){const{field:n}=e,r=Va(e.timeUnit),{unit:i,binned:s}=r||{},o=Vt(e,{expr:"datum"}),a=i?`time(${s?o:IXt(i,n)})`:o;if(Yoe(e))return`${a}===${zm(e.equal,i)}`;if(Koe(e)){const u=e.lt;return`${a}<${zm(u,i)}`}else if(Qoe(e)){const u=e.gt;return`${a}>${zm(u,i)}`}else if(Xoe(e)){const u=e.lte;return`${a}<=${zm(u,i)}`}else if(Joe(e)){const u=e.gte;return`${a}>=${zm(u,i)}`}else{if(eae(e))return`indexof([${MXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(OXt(e))return w7(a,e.valid);if(Zoe(e)){const{range:u}=hu(e),l=pn(u)?{signal:`${u.signal}[0]`}:u[0],c=pn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+zm(l,i)+", "+zm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${zm(l,i)}`),c!==null&&f.push(`${a} <= ${zm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Yi(e)}`)}function w7(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function LXt(e){return I5e(e)&&e.timeUnit?{...e,timeUnit:Va(e.timeUnit)}:e}const EO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function $Xt(e){return e==="quantitative"||e==="temporal"}function R5e(e){return e==="ordinal"||e==="nominal"}const _E=EO.quantitative,tae=EO.ordinal,dA=EO.temporal,nae=EO.nominal,LI=EO.geojson;function FXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case _E:return"quantitative";case"t":case dA:return"temporal";case"o":case tae:return"ordinal";case"n":case nae:return"nominal";case LI:return"geojson"}}const pu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},mX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function BXt(e,t){const n=mX[e],r=mX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const jXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function X1e(e){return jXt[e]}const D5e=new Set(["linear","log","pow","sqrt","symlog"]),N5e=new Set([...D5e,"time","utc"]);function P5e(e){return D5e.has(e)}const O5e=new Set(["quantile","quantize","threshold"]),UXt=new Set([...N5e,...O5e,"sequential","identity"]),zXt=new Set(["ordinal","bin-ordinal","point","band"]);function qa(e){return zXt.has(e)}function Kp(e){return UXt.has(e)}function b0(e){return N5e.has(e)}function hA(e){return O5e.has(e)}const VXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function HXt(e){return!Gt(e)&&Rt(e,"name")}function M5e(e){return Rt(e,"param")}function qXt(e){return Rt(e,"unionWith")}function WXt(e){return Ht(e)&&"field"in e}const GXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:fln,domain:dln,range:hln,rangeMax:pln,rangeMin:mln,scheme:gln,...YXt}=GXt,KXt=It(YXt);function gX(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return b0(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return b0(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return b0(e);case"nice":return b0(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Kp(e)&&!Ir(["log","time","utc","threshold","quantile"],e)}}function L5e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return sC(e)?void 0:qKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function XXt(e,t){return Ir([tae,nae],t)?e===void 0||qa(e):t===dA?Ir([pu.TIME,pu.UTC,void 0],e):t===_E?P5e(e)||hA(e)||e===void 0:!0}function QXt(e,t,n=!1){if(!_g(e))return!1;switch(e){case $s:case Ya:case $x:case MI:case Dh:case cm:return b0(t)||t==="band"?!0:t==="point"?!n:!1;case Fx:return Ir(["linear","band"],t);case F1:case Ux:case B1:case Bx:case jx:case sS:return b0(t)||hA(t)||Ir(["band","point","ordinal"],t);case uf:case vg:case bg:return t!=="band";case zx:case lf:return t==="ordinal"||hA(t)}}function JXt(e){return Ht(e)&&"value"in e}const sc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},$5e=sc.arc,E7=sc.area,S7=sc.bar,ZXt=sc.image,T7=sc.line,C7=sc.point,eQt=sc.rect,P8=sc.rule,F5e=sc.text,rae=sc.tick,tQt=sc.trail,iae=sc.circle,sae=sc.square,B5e=sc.geoshape;function Hx(e){return["line","area","trail"].includes(e)}function LP(e){return["rect","bar","image","arc","tick"].includes(e)}const nQt=new Set(It(sc));function ng(e){return Rt(e,"type")}const rQt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],iQt=["fill","fillOpacity"],sQt=[...rQt,...iQt],oQt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Q1e=It(oQt),fq=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],aQt={area:["line","point"],bar:fq,rect:fq,line:["point"],tick:["bandSize","thickness",...fq]},uQt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},lQt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},j5e=It(lQt);function wE(e){return Rt(e,"band")}const cQt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},fQt=5,oae={binSpacing:0,continuousBandSize:fQt,minBandSize:.25,timeUnitBandPosition:.5},dQt={...oae,binSpacing:1},hQt={...oae,thickness:1};function pQt(e){return ng(e)?e.type:e}function U5e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function aae({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Kp(r)||i)return"always-valid";const s=U5e(Hi("invalid",e,t),{isPath:Hx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function mQt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function z5e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function V5e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Qp(t),u=v7(a==null?void 0:a.aggregate),l=aae({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:w7(Vt(a,{expr:"datum"}),!1),...gQt(f,n,r)}}}function gQt(e,t,n){if(JXt(e)){const{value:r}=e;return pn(r)?{signal:r.signal}:{value:r}}return z5e({scale:t,scaleName:n,mode:"zeroOrMin"})}function uae(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=oS(t),u=lae(e),l=V5e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function yQt(e){const{datum:t}=e;return lS(t)?xE(t):`${Yi(t)}`}function Hw(e,t,n,r){const i={};if(t&&(i.scale=t),wg(e)){const{datum:s}=e;lS(s)?i.signal=xE(s):pn(s)?i.signal=s.signal:wO(s)?i.signal=s.expr:i.value=s}else i.field=Vt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function O8({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!pn(o)&&0<o&&o<1?"datum":void 0,u=Vt(t,{expr:a,suffix:i}),l=n!==void 0?Vt(n,{expr:a}):Vt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=pn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function vQt({scaleName:e,fieldDef:t}){const n=Vt(t,{expr:"datum"}),r=Vt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function lae({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(tc(t)){c??(c=ox({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ps(d)||c&&h&&p===dA)return a!=null&&a.impute?Hw(t,s,{binSuffix:"mid"},{offset:u}):c&&!qa(f)?O8({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Hw(t,s,IO(t,e)?{binSuffix:"range"}:{},{offset:u});if(du(d)){if($t(n))return O8({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Pt(y5e(e===$s?lm:yg))}}return Hw(t,s,qa(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Xp(t)){const f=t.value,d=u?{offset:u}:{};return{...hN(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function hN(e,t){return Ir(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ir(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ws(t)}function EE(e){return e&&e!=="number"&&e!=="time"}function H5e(e,t,n){return`${e}(${t}${n?`, ${Yi(n)}`:""})`}const bQt="  ";function cae({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(EE(n))return Rp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=q5e(e,r,i),a=pA(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Rp({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Rp({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&$t(e)&&e.timeUnit===void 0)return Rp({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(gA(e)){const c=_Qt({field:o,timeUnit:$t(e)?(u=Va(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:fS(e)&&((l=e.scale)==null?void 0:l.type)===pu.UTC});return c?{signal:c}:void 0}if(t=yX({type:a,specifiedFormat:t,config:s,normalizeStack:i}),$t(e)&&ps(e.bin)){const c=Vt(e,{expr:r,binSuffix:"end"});return{signal:SO(o,c,t,n,s)}}else return t||pA(e)==="quantitative"?{signal:`${Y5e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function q5e(e,t,n){return $t(e)?n?`${Vt(e,{expr:t,suffix:"end"})}-${Vt(e,{expr:t,suffix:"start"})}`:Vt(e,{expr:t}):yQt(e)}function Rp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=q5e(e,r,i)),o!=="datum.value"&&$t(e)&&ps(e.bin)){const a=Vt(e,{expr:r,binSuffix:"end"});return{signal:SO(o,a,t,n,s)}}return{signal:H5e(n,o,t)}}function W5e(e,t,n,r,i,s){var o;if(!(Gt(r)&&EE(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&pA(e)==="quantitative"&&(i.normalizedNumberFormatType&&mA(e)&&e.stack==="normalize"||i.numberFormatType))){if(mA(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return yX({type:"quantitative",config:i,normalizeStack:!0});if(gA(e)){const a=$t(e)?(o=Va(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:xQt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return yX({type:t,specifiedFormat:n,config:i})}}function G5e(e,t,n){var r;if(e&&(pn(e)||e==="number"||e==="time"))return e;if(gA(t)&&n!=="time"&&n!=="utc")return $t(t)&&((r=Va(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function yX({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Gt(t))return t;if(e===_E)return r?n.normalizedNumberFormat:n.numberFormat}function xQt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:T5e(t)}:r?void 0:n.timeFormat)}function Y5e(e,t){return`format(${e}, "${t||""}")`}function J1e(e,t,n,r){return EE(n)?H5e(n,e,t):Y5e(e,(Gt(t)?t:void 0)??r.numberFormat)}function SO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return SO(e,t,i.numberFormat,i.numberFormatType,i);const s=J1e(e,n,r,i),o=J1e(t,n,r,i);return`${w7(e,!1)} ? "null" : ${s} + "${bQt}" + ${o}`}function _Qt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Gt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):kXt(t,e,s)}const A7="min",wQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Z1e(e){return Jt(wQt,e)}function EQt(e){return Rt(e,"encoding")}function Wy(e){return e&&(e.op==="count"||Rt(e,"field"))}function K5e(e){return e&&ft(e)}function TO(e){return Rt(e,"row")||Rt(e,"column")}function fae(e){return Rt(e,"header")}function I7(e){return Rt(e,"facet")}function SQt(e){return Rt(e,"param")}function TQt(e){return!Gt(e)&&Rt(e,"repeat")}function eve(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function dae(e){return Rt(e,"sort")}function ox({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if($t(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return tg("timeUnitBandPosition",n,r);if(ps(s))return .5}}function X5e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=cf(e),u=Hi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if($t(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:tg("timeUnitBandSize",r,i)};if(ps(h)&&!qa(s))return{band:1}}if(LP(r.type))return s?qa(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Q5e(e,t,n,r){return ps(e.bin)||e.timeUnit&&tc(e)&&e.type==="temporal"?ox({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function J5e(e){return Rt(e,"sort")&&!Rt(e,"field")}function CO(e){return Rt(e,"condition")}function k7(e){const t=e==null?void 0:e.condition;return!!t&&!ft(t)&&$t(t)}function AO(e){const t=e==null?void 0:e.condition;return!!t&&!ft(t)&&Qn(t)}function CQt(e){const t=e==null?void 0:e.condition;return!!t&&(ft(t)||Xp(t))}function $t(e){return Rt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function pA(e){return e==null?void 0:e.type}function wg(e){return Rt(e,"datum")}function lb(e){return tc(e)&&!L8(e)||M8(e)}function tve(e){return tc(e)&&e.type==="quantitative"&&!e.bin||M8(e)}function M8(e){return wg(e)&&bi(e.datum)}function Qn(e){return $t(e)||wg(e)}function tc(e){return e&&(Rt(e,"field")||e.aggregate==="count")&&Rt(e,"type")}function Xp(e){return Rt(e,"value")}function fS(e){return Rt(e,"scale")||Rt(e,"sort")}function mA(e){return Rt(e,"axis")||Rt(e,"stack")||Rt(e,"impute")}function Z5e(e){return Rt(e,"legend")}function e8e(e){return Rt(e,"format")||Rt(e,"formatType")}function AQt(e){return Xc(e,["legend","axis","header","scale"])}function IQt(e){return Rt(e,"op")}function Vt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(RQt(e))n=VFe("count");else{let o;if(!t.nofn)if(IQt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ps(a)?(o=r5e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Vx(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):y1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!cS(l)&&(o=RXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?OI(n):t.expr?jFe(n,t.expr)+s:gh(n)+s}function L8(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return $t(e)&&!!e.bin;case"temporal":return!1}throw new Error(h5e(e.type))}function kQt(e){var t;return fS(e)&&hA((t=e.scale)==null?void 0:t.type)}function RQt(e){return e.aggregate==="count"}function DQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ps(r))return`${n} (binned)`;if(i&&!cS(i)){const a=(o=Va(i))==null?void 0:o.unit;if(a)return`${n} (${_7(a).join("-")})`}else if(s)return Vx(s)?`${n} for max ${s.argmax}`:y1(s)?`${n} for min ${s.argmin}`:`${vO(s)} of ${n}`;return n}function NQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Vx(t))return`${i} for argmax(${t.argmax})`;if(y1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!cS(r)?Va(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ps(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const t8e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return NQt(e);default:return DQt(e,t)}};let n8e=t8e;function r8e(e){n8e=e}function PQt(){r8e(t8e)}function oC(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=hae(e))==null?void 0:a.title;if(!$t(e))return i??e.title;const s=e,o=r?pae(s,t):void 0;return n?Do(i,s.title,o):i??s.title??o}function hae(e){if(mA(e)&&e.axis)return e.axis;if(Z5e(e)&&e.legend)return e.legend;if(fae(e)&&e.header)return e.header}function pae(e,t){return n8e(e,t)}function $8(e){if(e8e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=hae(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function OQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(dae(e)&&ft(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Vx(n)&&!y1(n))return"quantitative";if(fS(e)&&((s=e.scale)!=null&&s.type))switch(mX[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Qp(e){if($t(e))return e;if(k7(e))return e.condition}function fa(e){if(Qn(e))return e;if(AO(e))return e.condition}function i8e(e,t,n,r={}){if(Gt(e)||bi(e)||Ox(e)){const i=Gt(e)?"string":bi(e)?"number":"boolean";return Pt(PKt(t,i,e)),{value:e}}return Qn(e)?F8(e,t,n,r):AO(e)?{...e,condition:F8(e.condition,t,n,r)}:e}function F8(e,t,n,r){if(e8e(e)){const{format:i,formatType:s,...o}=e;if(EE(s)&&!n.customFormatTypes)return Pt(G1e(t)),F8(o,t,n,r)}else{const i=mA(e)?"axis":Z5e(e)?"legend":fae(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(EE(o)&&!n.customFormatTypes)return Pt(G1e(t)),F8({...e,[i]:a},t,n,r)}}return $t(e)?mae(e,t,r):MQt(e)}function MQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=bi(n)?"quantitative":Gt(n)?"nominal":lS(n)?"temporal":void 0,{...e,type:t}}function mae(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!joe(r)&&!Vx(r)&&!y1(r)&&(Pt(MKt(r)),delete a.aggregate),i&&(a.timeUnit=Va(i)),o&&(a.field=`${o}`),ps(s)&&(a.bin=R7(s,t)),du(s)&&!No(t)&&Pt(hXt(t)),tc(a)){const{type:u}=a,l=FXt(u);u!==l&&(a.type=l),u!=="quantitative"&&v7(r)&&(Pt(OKt(u,r)),a.type="quantitative")}else if(!QFe(t)){const u=OQt(a,t);a.type=u}if(tc(a)){const{compatible:u,warning:l}=LQt(a,t)||{};u===!1&&Pt(l)}if(dae(a)&&Gt(a.sort)){const{sort:u}=a;if(Z1e(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&Z1e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(fae(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function R7(e,t){return Ox(e)?{maxbins:F1e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:F1e(t)}:e}const XT={compatible:!0};function LQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Hy:case qy:case d7:return L8(e)?XT:{compatible:!1,warning:BKt(t)};case $s:case Ya:case $x:case MI:case uf:case vg:case bg:case bO:case xO:case h7:case vE:case p7:case m7:case sS:case Dh:case cm:case g7:return XT;case dm:case yh:case fm:case hm:return n!==_E?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:XT;case B1:case Bx:case jx:case Ux:case F1:case $1:case L1:case lm:case yg:case Fx:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:XT;case lf:case zx:return!L8(e)&&!kQt(e)?{compatible:!1,warning:jKt(t)}:XT;case fA:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:XT}}function gA(e){const{formatType:t}=$8(e);return t==="time"||!t&&$Qt(e)}function $Qt(e){return e&&(e.type==="temporal"||$t(e)&&!!e.timeUnit)}function D7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Va(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return wO(e)?a=e.expr:pn(e)?a=e.signal:lS(e)?(o=!0,a=xE(e)):(Gt(e)||bi(e))&&o&&(a=`datetime(${Yi(e)})`,TXt(s)&&(bi(e)&&e<1e4||Gt(e)&&isNaN(Date.parse(e)))&&(a=xE({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Yi(e)}function s8e(e,t){const{type:n}=e;return t.map(r=>{const i=$t(e)&&!cS(e.timeUnit)?e.timeUnit:void 0,s=D7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function IO(e,t){return ps(e.bin)?_g(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const nve={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function kO(e){return e==null?void 0:e.condition}const o8e=["domain","grid","labels","ticks","title"],FQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},a8e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},BQt={...a8e,style:1,labelExpr:1,encoding:1};function rve(e){return Jt(BQt,e)}const jQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},u8e=It(jQt);function U1(e){return Rt(e,"mark")}class N7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return U1(t)?pQt(t.mark)===this.name:!1}}function qw(e,t){const n=e&&e[t];return n?ft(n)?lA(n,r=>!!r.field):$t(n)||k7(n):!1}function l8e(e,t){const n=e&&e[t];return n?ft(n)?lA(n,r=>!!r.field):$t(n)||wg(n)||AO(n):!1}function c8e(e,t){if(No(t)){const n=e[t];if(($t(n)||wg(n))&&(R5e(n.type)||$t(n)&&n.timeUnit)){const r=Moe(t);return l8e(e,r)}}return!1}function f8e(e){return lA(MYt,t=>{if(qw(e,t)){const n=e[t];if(ft(n))return lA(n,r=>!!r.aggregate);{const r=Qp(n);return r&&!!r.aggregate}}return!1})}function d8e(e,t){const n=[],r=[],i=[],s=[],o={};return gae(e,(a,u)=>{if($t(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=hae(a),m=p==null?void 0:p.title;let g=Vt(a,{forAs:!0});const v={...m?[]:{title:oC(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(Vx(c)?(b="argmax",g=Vt({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${g}.${l}`):y1(c)?(b="argmin",g=Vt({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),s.push(w)}}else if(n.push(g),tc(a)&&ps(f)){if(r.push({bin:f,field:l,as:g}),n.push(Vt(a,{binSuffix:"end"})),IO(a,u)&&n.push(Vt(a,{binSuffix:"range"})),No(u)){const b={field:`${g}_end`};o[`${u}2`]=b}v.bin="binned",QFe(u)||(v.type=_E)}else if(d&&!cS(d)){i.push({timeUnit:d,field:l,as:g});const b=tc(a)&&a.type!==dA&&"time";b&&(u===bO||u===vE?v.formatType=b:WYt(u)?v.legend={formatType:b,...v.legend}:No(u)&&(v.axis={formatType:b,...v.axis}))}o[u]=v}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function UQt(e,t,n){const r=YYt(t,n);if(r){if(r==="binned"){const i=e[t===lm?$s:Ya];return!!($t(i)&&$t(e[t])&&du(i.bin))}}else return!1;return!0}function zQt(e,t,n,r){const i={};for(const s of It(e))XFe(s)||Pt(FKt(s));for(let s of UYt){if(!e[s])continue;const o=e[s];if(_O(s)){const a=jYt(s),u=i[a];if($t(u)&&$Xt(u.type)&&$t(o)&&!u.timeUnit){Pt(NKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Pt(DKt),s=Dh),!UQt(e,s,t)){Pt(x7(s,t));continue}if(s===F1&&t==="line"){const a=Qp(e[s]);if(a!=null&&a.aggregate){Pt($Kt);continue}}if(s===uf&&(n?"fill"in e:"stroke"in e)){Pt(p5e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===xO||s===fA&&!ft(o)&&!Xp(o)||s===vE&&ft(o)){if(o){if(s===fA){const a=e[s];if(J5e(a)){i[s]=a;continue}}i[s]=Wt(o).reduce((a,u)=>($t(u)?a.push(mae(u,s)):Pt(pX(u,s)),a),[])}}else{if(s===vE&&o===null)i[s]=null;else if(!$t(o)&&!wg(o)&&!Xp(o)&&!CO(o)&&!pn(o)){Pt(pX(o,s));continue}i[s]=i8e(o,s,r)}}return i}function P7(e,t){const n={};for(const r of It(e)){const i=i8e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function VQt(e){const t=[];for(const n of It(e))if(qw(e,n)){const r=e[n],i=Wt(r);for(const s of i)$t(s)?t.push(s):k7(s)&&t.push(s.condition)}return t}function gae(e,t,n){if(e)for(const r of It(e)){const i=e[r];if(ft(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function HQt(e,t,n,r){return e?It(e).reduce((i,s)=>{const o=e[s];return ft(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function h8e(e,t){return It(t).reduce((n,r)=>{switch(r){case $s:case Ya:case p7:case g7:case m7:case lm:case yg:case $x:case MI:case Dh:case $1:case cm:case L1:case Fx:case fm:case dm:case hm:case yh:case bO:case lf:case sS:case vE:return n;case fA:if(e==="line"||e==="trail")return n;case xO:case h7:{const i=t[r];if(ft(i)||$t(i))for(const s of Wt(i))s.aggregate||n.push(Vt(s,{}));return n}case F1:if(e==="trail")return n;case uf:case vg:case bg:case B1:case Bx:case jx:case zx:case Ux:{const i=Qp(t[r]);return i&&!i.aggregate&&n.push(Vt(i,{})),n}}},[])}function qQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ft(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ft(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function vX(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${yae(t)}`:"";return{field:o+t.field,type:t.type,title:pn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=VQt(n).map(AQt);return{tooltip:[...i,...v0(s,Lr)]}}function yae(e){const{title:t,field:n}=e;return Do(t,n)}function vae(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=yae(n);return p8e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Gt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function p8e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...ng(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ox(e[t])?{}:e[t]}}]:[]}function m8e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:X6(s,n),continuousAxisChannelDef2:X6(o,n),continuousAxisChannelDefError:X6(a,n),continuousAxisChannelDefError2:X6(u,n),continuousAxis:i}}function X6(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Pt(dXt(n,t)),r}else return e}function g8e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(ng(n)&&n.orient)return n.orient;if(lb(i)){if(lb(s)){const o=$t(i)&&i.aggregate,a=$t(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return gA(s)&&!gA(i)?"horizontal":"vertical"}return"horizontal"}else{if(lb(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const B8="boxplot",WQt=["box","median","outliers","rule","ticks"],GQt=new N7(B8,v8e);function y8e(e){return bi(e)?"tukey":e}function v8e(e,{config:t}){e={...e,encoding:P7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=ng(n)?n:{type:n};i&&Pt(d5e("boxplot"));const u=a.extent??t.boxplot.extent,l=Hi("size",a,t),c=a.invalid,f=y8e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:C}=YQt(e,u,t),I=OI(m.field),{color:R,size:N,...O}=w,L=Ge=>vae(a,g,m,Ge,t.boxplot),j=L(O),F=L(w),H=(Ht(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",Q=L({...O,...N?{size:N}:{},color:{condition:{test:`${$i(`lower_box_${m.field}`)} >= ${$i(`upper_box_${m.field}`)}`,...R||{value:H}}}}),J=vX([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),ne={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},Z=f==="min-max"?J:vX([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),ie=[...j({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...j({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...j({partName:"ticks",mark:ne,positionPrefix:"lower_whisker",extraEncoding:Z}),...j({partName:"ticks",mark:ne,positionPrefix:"upper_whisker",extraEncoding:Z})],q=[...f!=="tukey"?ie:[],...F({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:J}),...Q({partName:"median",mark:{type:"tick",invalid:c,...Ht(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:J})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:q};const U=$i(`lower_box_${m.field}`),G=$i(`upper_box_${m.field}`),V=`(${G} - ${U})`,Y=`${U} - ${u} * ${V}`,ee=`${G} + ${u} * ${V}`,ae=$i(m.field),_e={joinaggregate:b8e(m.field),groupby:v},pe={transform:[{filter:`(${Y} <= ${ae}) && (${ae} <= ${ee})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${I}`},{op:"max",field:m.field,as:`upper_whisker_${I}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${I}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${I}`},...b],groupby:v}],layer:ie},{tooltip:Se,...Le}=O,{scale:ye,axis:he}=m,$e=yae(m),De=Xc(he,["title"]),tt=p8e(a,"outliers",t.boxplot,{transform:[{filter:`(${ae} < ${Y}) || (${ae} > ${ee})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...$e!==void 0?{title:$e}:{},...ye!==void 0?{scale:ye}:{},...Gi(De)?{}:{axis:De}},...Le,...R?{color:R}:{},...C?{tooltip:C}:{}}})[0];let it;const Me=[...d,...h,_e];return tt?it={transform:Me,layer:[tt,pe]}:(it=pe,it.transform.unshift(...Me)),{...o,layer:[it,{transform:p,layer:q}]}}function b8e(e){const t=OI(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function YQt(e,t,n){const r=g8e(e,B8),{continuousAxisChannelDef:i,continuousAxis:s}=m8e(e,r,B8),o=i.field,a=OI(o),u=y8e(t),l=[...b8e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${$i(`upper_box_${a}`)} - ${$i(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${$i(`upper_box_${a}`)} + ${$i(`iqr_${a}`)} * ${t}, ${$i(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${$i(`lower_box_${a}`)} - ${$i(`iqr_${a}`)} * ${t}, ${$i(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=qQt(d),{bins:m,timeUnits:g,aggregate:v,groupby:b,encoding:w}=d8e(p,n),E=r==="vertical"?"horizontal":"vertical",T=r,C=[...m,...g,{aggregate:[...v,...l],groupby:b},...c];return{bins:m,timeUnits:g,transform:C,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:h}}const bae="errorbar",KQt=["ticks","rule"],XQt=new N7(bae,x8e);function x8e(e,{config:t}){e={...e,encoding:P7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=_8e(e,bae,t);delete s.size;const c=vae(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function QQt(e,t){const{encoding:n}=e;if(JQt(n))return{orient:g8e(e,t),inputType:"raw"};const r=ZQt(n),i=eJt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(lb(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(lb(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(lb(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(lb(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function JQt(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function ZQt(e){return Qn(e.x2)||Qn(e.y2)}function eJt(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function _8e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=ng(r)?r:{type:r};s&&Pt(d5e(t));const{orient:l,inputType:c}=QQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=m8e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=tJt(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:T,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:I,...R}=i,{bins:N,timeUnits:O,aggregate:L,groupby:j,encoding:F}=d8e(R,n),H=[...L,...g],Q=c!=="raw"?[]:j,J=vX(b,f,F,w);return{transform:[...a.transform??[],...N,...O,...H.length===0?[]:[{aggregate:H,groupby:Q}],...v],groupby:Q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:F,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:J}}function tJt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Pt(fXt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${$i(`center_${c}`)} + ${$i(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${$i(`center_${c}`)} - ${$i(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:vO(h)},{fieldPrefix:"upper_",titlePrefix:ive(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:ive(h,p,"-")}],d=!0;else{let m,g,v;p==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:oC({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:oC({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:oC({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Pt(cXt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:$i(n.field),as:`upper_${c}`},{calculate:$i(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${$i(c)} + ${$i(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${$i(c)} + ${$i(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${$i(c)} - ${$i(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:yE(yE(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function ive(e,t,n){return`${vO(e)} ${n} ${t}`}const xae="errorband",nJt=["band","borders"],rJt=new N7(xae,w8e);function w8e(e,{config:t}){e={...e,encoding:P7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=_8e(e,xae,t),l=o,c=vae(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Pt(K1e("interpolate")):l.tension&&Pt(K1e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const E8e={};function _ae(e,t,n){const r=new N7(e,t);E8e[e]={normalizer:r,parts:n}}function iJt(){return It(E8e)}_ae(B8,v8e,WQt);_ae(bae,x8e,KQt);_ae(xae,w8e,nJt);const sJt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],S8e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},T8e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},oJt=It(S8e),aJt=It(T8e),uJt={header:1,headerRow:1,headerColumn:1,headerFacet:1},C8e=It(uJt),A8e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],lJt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},cJt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Jp="_vgsid_",fJt={point:{on:"click",fields:[Jp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function wae(e){return e==="legend"||!!(e!=null&&e.legend)}function dq(e){return wae(e)&&Ht(e)}function Eae(e){return!!(e!=null&&e.select)}function I8e(e){const t=[];for(const n of e||[]){if(Eae(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function dJt(e){return O7(e)||Tae(e)||Sae(e)}function Sae(e){return Rt(e,"concat")}function O7(e){return Rt(e,"vconcat")}function Tae(e){return Rt(e,"hconcat")}function k8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function rg(e){return Rt(e,"step")}function sve(e){return Rt(e,"view")||Rt(e,"width")||Rt(e,"height")}const ove=20,hJt={align:1,bounds:1,center:1,columns:1,spacing:1},pJt=It(hJt);function mJt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(I7(e)&&!TO(e.facet)||Sae(e))&&(i.columns=o),O7(e)&&(i.columns=1);for(const a of pJt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=bi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function bX(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function xX(e,t){const n=j8(e,t);return rg(n)?n.step:R8e}function j8(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Do(n,{step:e.step})}const R8e=20,gJt={continuousWidth:200,continuousHeight:200,step:R8e},yJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:gJt,mark:uQt,arc:{},area:{},bar:dQt,circle:{},geoshape:{},image:{},line:{},point:{},rect:oae,rule:{color:"black"},square:{},text:{color:"black"},tick:hQt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:VXt,projection:{},legend:lJt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:fJt,style:{},title:{},facet:{spacing:ove},concat:{spacing:ove},normalizedNumberFormat:".0%"},ry=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],ave={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},uve={blue:ry[0],orange:ry[1],red:ry[2],teal:ry[3],green:ry[4],yellow:ry[5],purple:ry[6],pink:ry[7],brown:ry[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function vJt(e={}){return{signals:[{name:"color",value:Ht(e)?{...uve,...e}:uve}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function bJt(e){return{signals:[{name:"fontSize",value:Ht(e)?{...ave,...e}:ave}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function xJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function D8e(e){const t=It(e||{}),n={};for(const r of t){const i=e[r];n[r]=kO(i)?s5e(i):Yf(i)}return n}function _Jt(e){const t=It(e),n={};for(const r of t)n[r]=D8e(e[r]);return n}const wJt=[...j5e,...u8e,...C8e,"background","padding","legend","lineBreak","scale","style","title","view"];function N8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=EI({},qn(yJt),n?xJt(n):{},t?vJt(t):{},r?bJt(r):{},s||{});i&&SI(o,"selection",i,!0);const a=Xc(o,wJt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Yf(o[u]));for(const u of j5e)o[u]&&(a[u]=hu(o[u]));for(const u of u8e)o[u]&&(a[u]=D8e(o[u]));for(const u of C8e)o[u]&&(a[u]=hu(o[u]));if(o.legend&&(a.legend=hu(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=hu(u,{level:1});a.scale={...hu(l),...It(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=_Jt(o.style)),o.title&&(a.title=hu(o.title)),o.view&&(a.view=hu(o.view)),a}const EJt=new Set(["view",...nQt]),SJt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],TJt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...aQt};function CJt(e){e=qn(e);for(const t of SJt)delete e[t];if(e.axis)for(const t in e.axis)kO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of sJt)delete e.legend[t];if(e.mark){for(const t of Q1e)delete e.mark[t];e.mark.tooltip&&Ht(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(I8e(e.params)),delete e.params);for(const t of EJt){for(const r of Q1e)delete e[t][r];const n=TJt[t];if(n)for(const r of n)delete e[t][r];IJt(e,t)}for(const t of iJt())delete e[t];AJt(e);for(const t in e)Ht(e[t])&&Gi(e[t])&&delete e[t];return Gi(e)?void 0:e}function AJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=i5e(e.title);Gi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Gi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Gi(r)?delete e.title:e.title=r}function IJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Gi(s)||(e.style[n??t]=s),delete e[t]}function M7(e){return Rt(e,"layer")}function kJt(e){return Rt(e,"repeat")}function RJt(e){return!ft(e.repeat)&&Rt(e.repeat,"layer")}class Cae{map(t,n){return I7(t)?this.mapFacet(t,n):kJt(t)?this.mapRepeat(t,n):Tae(t)?this.mapHConcat(t,n):O7(t)?this.mapVConcat(t,n):Sae(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(M7(t))return this.mapLayer(t,n);if(U1(t))return this.mapUnit(t,n);throw new Error(Uoe(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const DJt={zero:1,center:1,normalize:1};function NJt(e){return Jt(DJt,e)}const PJt=new Set([$5e,S7,E7,P8,C7,iae,sae,T7,F5e,rae]),OJt=new Set([S7,E7,$5e]);function QT(e){return $t(e)&&pA(e)==="quantitative"&&!e.bin}function lve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if($t(o)&&$t(a))if(QT(o)&&QT(a)){if(o.stack)return t;if(a.stack)return i;const u=$t(o)&&!!o.aggregate,l=$t(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(QT(o))return t;if(QT(a))return i}else{if(QT(o))return s&&n==="vertical"?void 0:t;if(QT(a))return s&&n==="horizontal"?void 0:i}}function MJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function P8e(e,t){var m,g;const n=ng(e)?e:{type:e},r=n.type;if(!PJt.has(r))return null;const i=lve(t,"x",n)||lve(t,"theta",n);if(!i)return null;const s=t[i],o=$t(s)?Vt(s,{}):void 0,a=MJt(i),u=[],l=new Set;if(t[a]){const v=t[a],b=$t(v)?Vt(v,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=$t(f)?Vt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=zYt.reduce((v,b)=>{if(b!=="tooltip"&&qw(t,b)){const w=t[b];for(const E of Wt(w)){const T=Qp(E);if(T.aggregate)continue;const C=Vt(T,{});(!C||!l.has(C))&&v.push({channel:b,fieldDef:T})}}return v},[]);let p;return s.stack!==void 0?Ox(s.stack)?p=s.stack?"zero":null:p=s.stack:OJt.has(r)&&(p="zero"),!p||!NJt(p)||f8e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==pu.LINEAR&&s!=null&&s.stack&&Pt(aXt(s.scale.type)),Qn(t[xg(i)])?(s.stack!==void 0&&Pt(oXt(i)),null):($t(s)&&s.aggregate&&!tKt.has(s.aggregate)&&Pt(uXt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Hx(r),stackBy:h,offset:p}))}function O8e(e,t,n){const r=hu(e),i=Hi("orient",r,n);if(r.orient=BJt(r.type,t,i),i!==void 0&&i!==r.orient&&Pt(HKt(r.orient,i)),r.type==="bar"&&r.orient){const u=Hi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:cQt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Hi("opacity",r,n),o=Hi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=$Jt(r.type,t)),Hi("cursor",r,n)===void 0&&(r.cursor=LJt(r,t,n)),r}function LJt(e,t,n){return t.href||e.href||Hi("href",e,n)?"pointer":e.cursor}function $Jt(e,t){if(Ir([C7,rae,iae,sae],e)&&!f8e(t))return .7}function FJt(e,t,{graticule:n}){if(n)return!1;const r=tg("filled",e,t),i=e.type;return Do(r,i!==C7&&i!==T7&&i!==P8)}function BJt(e,t,n){switch(e){case C7:case iae:case sae:case F5e:case eQt:case ZXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case S7:if($t(r)&&(du(r.bin)||$t(i)&&i.aggregate&&!r.aggregate))return"vertical";if($t(i)&&(du(i.bin)||$t(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return($t(r)&&r.type===_E&&!ps(r.bin)||M8(r))&&$t(i)&&du(i.bin)?"horizontal":"vertical";if(!o)return($t(i)&&i.type===_E&&!ps(i.bin)||M8(i))&&$t(r)&&du(r.bin)?"vertical":"horizontal"}case P8:if(s&&!($t(r)&&du(r.bin))&&o&&!($t(i)&&du(i.bin)))return;case E7:if(o)return $t(i)&&du(i.bin)?"horizontal":"vertical";if(s)return $t(r)&&du(r.bin)?"vertical":"horizontal";if(e===P8){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case T7:case rae:{const a=tve(r),u=tve(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tc(r)&&r.type===dA,c=tc(i)&&i.type===dA;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function jJt(e){const{point:t,line:n,...r}=e;return It(r).length>1?r:r.type}function UJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Xc(e[t],["point","line"])});return e}function hq(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ht(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ht(t.point)?t.point:{}:void 0}function cve(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class zJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(U1(t)){const{mark:r,encoding:i}=t,s=ng(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!hq(s,n[s.type],i);case"area":return!!hq(s,n[s.type],i)||!!cve(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=P7(l,i),d=ng(a)?a:{type:a},h=hq(d,i[d.type],f),p=d.type==="area"&&cve(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:jJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Xc(f,["shape"])}],g=P8e(O8e(d,f,i),f);let v=f;if(g){const{fieldChannel:b,offset:w}=g;v={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return v=Xc(v,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...uA(d,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...uA(d,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:m},{...n,config:UJt(i)})}}function VJt(e,t){return t?TO(e)?L8e(e,t):M8e(e,t):e}function pq(e,t){return t?L8e(e,t):e}function _X(e,t,n){const r=t[e];if(TQt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Pt(_Kt(r.repeat));return}return t}function M8e(e,t){if(e=_X("field",e,t),e!==void 0){if(e===null)return null;if(dae(e)&&Wy(e.sort)){const n=_X("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function fve(e,t){if($t(e))return M8e(e,t);{const n=_X("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function dve(e,t){if(Qn(e)){const n=fve(e,t);if(n)return n;if(CO(e))return{condition:e.condition}}else{if(AO(e)){const n=fve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function L8e(e,t){const n={};for(const r in e)if(Rt(e,r)){const i=e[r];if(ft(i))n[r]=i.map(s=>dve(s,t)).filter(s=>s);else{const s=dve(i,t);s!==void 0&&(n[r]=s)}}return n}class HJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(U1(t)){const{encoding:n,mark:r}=t;if(r==="line"||ng(r)&&r.type==="line")for(const i of BYt){const s=oS(i),o=n[s];if(n[i]&&($t(o)&&!du(o.bin)||wg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Pt(VKt(!!i.x2,!!i.y2)),r({...t,mark:Ht(s)?{...s,type:"rule"}:"rule"},n)}}class qJt extends Cae{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[GQt,XQt,rJt,new zJt,new HJt]}map(t,n){if(U1(t)){const r=qw(t.encoding,Hy),i=qw(t.encoding,qy),s=qw(t.encoding,d7);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=pq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return RJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ms(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!ft(r)&&t.columns&&(t=Xc(t,["columns"]),Pt(q1e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!ft(r)&&r.row||[u?u.row:null],f=!ft(r)&&r.column||[u?u.column:null],d=ft(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const v={repeat:p,row:m,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(ft(r)?`${Ms(p)}`:(r.row?`row_${Ms(m)}`:"")+(r.column?`column_${Ms(g)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(Xc(w,["data"]))}const h=ft(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return TO(r)&&t.columns&&(t=Xc(t,["columns"]),Pt(q1e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=pve({parentProjection:o,projection:i}),l=hve({parentEncoding:s,encoding:pq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),v=pq(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Pt(UKt([...r?[Hy]:[],...i?[qy]:[]]));const o={},a={};for(const u of[Hy,qy]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:VJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:hve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:pve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function hve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...It(e),...It(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else AO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Xp(a)||pn(a)||Qn(a)||ft(a))&&(r[s]=a)}}else r=t;return!r||Gi(r)?void 0:r}function pve(e){const{parentProjection:t,projection:n}=e;return t&&n&&Pt(RKt({parentProjection:t,projection:n})),n??t}function Aae(e){return Rt(e,"filter")}function WJt(e){return Rt(e,"stop")}function $8e(e){return Rt(e,"lookup")}function GJt(e){return Rt(e,"data")}function YJt(e){return Rt(e,"param")}function KJt(e){return Rt(e,"pivot")}function XJt(e){return Rt(e,"density")}function QJt(e){return Rt(e,"quantile")}function JJt(e){return Rt(e,"regression")}function ZJt(e){return Rt(e,"loess")}function eZt(e){return Rt(e,"sample")}function tZt(e){return Rt(e,"window")}function nZt(e){return Rt(e,"joinaggregate")}function rZt(e){return Rt(e,"flatten")}function iZt(e){return Rt(e,"calculate")}function F8e(e){return Rt(e,"bin")}function sZt(e){return Rt(e,"impute")}function oZt(e){return Rt(e,"timeUnit")}function aZt(e){return Rt(e,"aggregate")}function uZt(e){return Rt(e,"stack")}function lZt(e){return Rt(e,"fold")}function cZt(e){return Rt(e,"extent")&&!Rt(e,"density")&&!Rt(e,"regression")}function fZt(e){return e.map(t=>Aae(t)?{filter:iC(t.filter,LXt)}:t)}class dZt extends Cae{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=mve(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=mve(t,n),t.encoding){const r={};for(const[i,s]of ix(t.encoding))r[i]=B8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ix(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Eu(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function mve(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Aae(s))return{filter:wX(s,t)};if(F8e(s)&&aS(s.bin))return{...s,bin:j8e(s.bin)};if($8e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function B8e(e,t){var r,i;const n=qn(e);if($t(n)&&aS(n.bin)&&(n.bin=j8e(n.bin)),fS(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(CO(n))if(ft(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:wX(s,t)}});else{const{selection:s,param:o,test:a,...u}=B8e(n.condition,t);n.condition=o?n.condition:{...u,test:wX(n.condition,t)}}return n}function j8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function wX(e,t){const n=r=>iC(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):iC(e.test||e.filter,r=>r.selection?n(r.selection):r)}class EX extends Cae{map(t,n){const r=n.selections??[];if(t.params&&!U1(t)){const i=[];for(const s of t.params)Eae(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Gt(a)&&(a===t.name||i.includes(a))||ft(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=EX.prototype[e];EX.prototype[e]=function(n,r){return t.call(this,n,hZt(n,r))}}function hZt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function U8e(e,t){t===void 0&&(t=N8e(e.config));const n=yZt(e,t),{width:r,height:i}=e,s=vZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const pZt=new qJt,mZt=new dZt,gZt=new EX;function yZt(e,t={}){const n={config:t};return gZt.map(pZt.map(mZt.map(e,n),n),n)}function gve(e){return Gt(e)?{type:e}:e??{}}function vZt(e,t,n){let{width:r,height:i}=t;const s=U1(e)||M7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Pt(U1e("width")),r=void 0),i=="container"&&(Pt(U1e("height")),i=void 0));const a={type:"pad",...o,...n?gve(n.autosize):{},...gve(e.autosize)};if(a.type==="fit"&&!s&&(Pt(cKt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Pt(z1e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Pt(z1e("height")),!ed(a,{type:"pad"}))return a}function bZt(e){return["fit","fit-x","fit-y"].includes(e)}function xZt(e){return e?`fit-${y7(e)}`:"fit"}const _Zt=["background","padding"];function yve(e,t){const n={};for(const r of _Zt)e&&e[r]!==void 0&&(n[r]=Yf(e[r]));return t&&(n.params=e.params),n}class z1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new z1(qn(this.explicit),qn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Do(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of It(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Jm(e){return{explicit:!0,value:e}}function Uf(e){return{explicit:!1,value:e}}function z8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:L7(t,n,r,i)}}function L7(e,t,n,r){return e.explicit&&t.explicit&&Pt(ZKt(n,r,e.value,t.value)),e}function ax(e,t,n,r,i=L7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ed(e.value,t.value)?e:i(e,t,n,r)}class wZt extends z1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function yA(e){return Rt(e,"url")}function $P(e){return Rt(e,"values")}function V8e(e){return Rt(e,"name")&&!yA(e)&&!$P(e)&&!Eb(e)}function Eb(e){return e&&(H8e(e)||q8e(e)||Iae(e))}function H8e(e){return Rt(e,"sequence")}function q8e(e){return Rt(e,"sphere")}function Iae(e){return Rt(e,"graticule")}var Hs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Hs||(Hs={}));function W8e({invalid:e,isPath:t}){switch(U5e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function EZt(e){const{marks:t,scales:n}=W8e(e);return t===n?Hs.Main:n==="include-invalid-values"?Hs.PreFilterInvalid:Hs.PostFilterInvalid}class Bi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Pt(AKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Qc extends Bi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${zFe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function mq(e){return e.as!==void 0}function vve(e){return`${e}_end`}class N0 extends Bi{clone(){return new N0(null,qn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(cS(u)){if(zs(n)){const{mark:c,markDef:f,config:d}=n,h=ox({fieldDef:s,markDef:f,config:d});(LP(c)||h)&&(l={timeUnit:Va(u),field:a})}}else l={as:Vt(s,{forAs:!0}),field:a,timeUnit:u};if(zs(n)){const{mark:c,markDef:f,config:d}=n,h=ox({fieldDef:s,markDef:f,config:d});LP(c)&&No(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Lr(l)]=l)}return i},{});return Gi(r)?null:new N0(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Va(r),o={...i,timeUnit:s};return new N0(t,{[Lr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ix(this.timeUnits)){const s=mq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Eu(this.timeUnits).map(t=>mq(t)?t.as:vve(t.field)))}dependentFields(){return new Set(Eu(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Lr(this.timeUnits)}`}assemble(){const t=[];for(const n of Eu(this.timeUnits)){const{rectBandPosition:r}=n,i=Va(n.timeUnit);if(mq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:gh(s),type:"timeunit",...a?{units:_7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...bve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=G8e({timeUnit:i,field:o}),u=vve(o);t.push({type:"formula",expr:a,as:u}),t.push(...bve([o,u],r,i))}}return t}}const $7="offsetted_rect_start",F7="offsetted_rect_end";function G8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=E5e(r),{part:o,step:a}=A5e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${$i(t)}, ${n?-a:a})`}function bve([e,t],n,r){if(n!==void 0&&n!==.5){const i=$i(e),s=$i(t);return[{type:"formula",expr:xve([G8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${$7}`},{type:"formula",expr:xve([i,s],n+.5),as:`${e}_${F7}`}]}return[]}function xve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const RO="_tuple_fields";class SZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const TZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new SZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let v=Ms(`${r}_${g}`);for(let b=1;a.has(v);b++)v=Ms(`${r}_${g}_${b}`);return a.add(v),{[m]:v}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Wt(n.value):null;let{fields:d,encodings:h}=Ht(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ht(p))for(const m of It(p))FYt(m)?(h||(h=[])).push(m):l==="interval"?(Pt(xKt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Pt(fKt(p,m.aggregate));continue}else if(!g){Pt(H1e(p));continue}if(m.timeUnit&&!cS(m.timeUnit)){g=e.vgField(p);const v={timeUnit:m.timeUnit,as:g,field:m.field};o[Lr(v)]=v}if(!s[g]){const v=l==="interval"&&_g(p)&&Kp(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Jp,YFe(p)?(b.geoChannel=p,b.channel=GFe(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else Pt(H1e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Jp}f&&(t.init=f.map(p=>i.items.map(m=>Ht(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Gi(o)||(i.timeUnit=new N0(null,o))},signals:(e,t,n)=>{const r=t.name+RO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Q8e)})}},Y8e="_curr",F$="anim_value",v2="anim_clock",SX="eased_anim_clock",K8e="min_extent",X8e="max_range_extent",gq="last_tick_at",yq="is_playing",CZt=1/60*1e3,AZt=(e,t)=>[{name:SX,update:v2},{name:`${e}_domain`,init:`domain('${t}')`},{name:K8e,init:`extent(${e}_domain)[0]`},{name:X8e,init:`extent(range('${t}'))[1]`},{name:F$,update:`invert('${t}', ${SX})`}],IZt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(P0(t)&&(n=n.concat([{name:v2,init:"0",on:[{events:{type:"timer",throttle:CZt},update:`${yq} ? (${v2} + (now() - ${gq}) > ${X8e} ? 0 : ${v2} + (now() - ${gq})) : ${v2}`}]},{name:gq,init:"now()",on:[{events:[{signal:v2},{signal:yq}],update:"now()"}]},{name:yq,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+RO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Eu(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+aC):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Ww(e)}, `;if(t.project.hasSelectionId)l+=`${Jp}: ${o}[${jt(Jp)}]`;else if(P0(t))l+=`fields: ${i}, values: [${F$} ? ${F$} : ${K8e}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${jt(e.vgField(f.channel,{}))}], ${o}[${jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(P0(t))return n.concat(AZt(t.name,e.scaleName(Fx)),[{name:r+b1,on:[{events:[{signal:SX},{signal:F$}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+b1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function Q8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=gh(i.field),i}function SE(e,t=!0,n=pl){if(ft(e)){const r=e.map(i=>SE(i,t,n));return t?`[${r.join(", ")}]`:r}else if(lS(e))return n(t?xE(e):SXt(e));return t?n(Yi(e)):e}function kZt(e,t){for(const n of Eu(e.component.selection??{})){const r=n.name;let i=`${r}${b1}, ${n.resolve==="global"?"true":`{unit: ${Ww(e)}}`}`;for(const s of j7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+nen,on:[{events:{signal:n.name+b1},update:`modify(${jt(n.name+TE)}, ${i})`}]})}return kae(t)}function RZt(e,t){if(e.component.selection&&It(e.component.selection).length){const n=jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Lx("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return kae(t)}function DZt(e,t){let n=!1;for(const r of Eu(e.component.selection??{})){const i=r.name,s=jt(i+TE);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${pBe}(${s}, ${jt(a)}${u}`})}n=!0;for(const a of j7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),kae(t)}function NZt(e,t){const n=[],r=[],i=Ww(e,{escape:!1});for(const s of Eu(e.component.selection??{})){const o={name:s.name+TE};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Jp}}]),s.init){const u=s.project.items.map(Q8e);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[Jp]:SE(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:SE(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+TE).length||n.push(o),P0(s)&&t.length){const u=e.lookupDataSource(e.getDataName(Hs.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+Y8e,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function J8e(e,t){for(const n of Eu(e.component.selection??{}))for(const r of j7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function PZt(e,t){for(const n of e.children)zs(n)&&(t=J8e(n,t));return t}function OZt(e,t,n,r){const i=bBe(e,t.param,t);return{signal:Kp(n.get("type"))&&ft(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function kae(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Gy={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!_g(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Pt(mKt),!s||!Kp(o)){Pt(pKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||CX(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(pBe))i.update=`{${r.map(o=>`${jt(gh(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${jt(gh(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!CX(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function TX(e,t){return`domain(${jt(e.scaleName(t))})`}function CX(e){return e.parent&&UI(e.parent)&&(!e.parent.parent||CX(e.parent.parent))}const aC="_brush",Z8e="_scale_trigger",PR="geo_interval_init_tick",eBe="_init",MZt="_center",LZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ht(n.select)?n.select:{}};i.fields=[Jp],i.encodings||(i.encodings=n.value?It(n.value):[dm,fm]),n.select={type:"interval",...i}}if(t.translate&&!Gy.defined(t)){const i=`!event.item || event.item.mark.name !== ${jt(t.name+aC)}`;for(const s of t.events){if(!s.between){Pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Wt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+b1,s=Eu(t.project.hasChannel).filter(a=>a.channel===$s||a.channel===Ya),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat($Zt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=jt(e.projectionName()),u=e.projectionName()+MZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=T=>e.getSizeSignalRef(T).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+eBe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const v=`intersect(${g}, {markname: ${jt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Ww(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=s.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:PR}]:[]],update:w}]})}else{if(!Gy.defined(t)){const l=r+Z8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=jt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Kp(g)?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Ww(e)}, fields: ${r+RO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${SE(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(zs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===PR).length||n.unshift({name:PR,value:null,on:[{events:"timer{1}",update:`${PR} === null ? {} : ${PR}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${jt(t.name+TE)})`;if(Gy.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of It(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Ww(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=It(h).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+aC}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+aC,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function $Zt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===$s?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Gy.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:SE(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+Z8e},update:Kp(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:SE(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===$s?0:1,h=t.name+eBe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function $I({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=CO(t)&&t.condition;let o=[];s&&(o=Wt(s).map(l=>{const c=i(l);if(SQt(l)){const{param:f,empty:d}=l;return{test:vBe(e,{param:f,empty:d}),...c}}else return{test:V8(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Rae(e,t="text"){const n=e.encoding[t];return $I({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>B7(r,e.config),invalidValueRef:void 0})}function B7(e,t,n="datum"){if(e){if(Xp(e))return ws(e.value);if(Qn(e)){const{format:r,formatType:i}=$8(e);return cae({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function tBe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(ft(o))return{tooltip:_ve({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return $I({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=B7(l,i,a);if(c)return c;if(l===null)return;let f=Hi("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Gt(f))return{value:f};if(Ht(f))return pn(f)?f:f.content==="encoding"?_ve(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function nBe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=oS(f),h=tc(c)?c:{...c,type:e[d].type},p=h.title||pae(h,i),m=Wt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(No(f)){const v=f==="x"?"x2":"y2",b=Qp(e[v]);if(du(h.bin)&&b){const w=Vt(h,{expr:o}),E=Vt(b,{expr:o}),{format:T,formatType:C}=$8(h);g=SO(w,E,T,C,i),s.add(v)}}if((No(f)||f===Dh||f===cm)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:v,formatType:b}=$8(h);g=cae({fieldOrDatumDef:h,format:v,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=B7(h,i,o).signal),a.push({channel:f,key:m,value:g})}gae(e,(c,f)=>{$t(c)?u(c,f):k7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function _ve(e,t,n,{reactiveGeom:r}={}){const i=nBe(e,t,n,{reactiveGeom:r}),s=ix(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function FZt(e){const{markDef:t,config:n}=e,r=Hi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...BZt(e),...jZt(e)}}function BZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Hi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Jt(aKt,t)?{}:{ariaRoleDescription:{value:t}}}function jZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return $I({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>B7(u,e.config),invalidValueRef:void 0});const o=Hi("description",n,r);if(o!=null)return{description:ws(o)};if(r.aria===!1)return{};const a=nBe(t,i,r);if(!Gi(a))return{description:{signal:ix(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function yu(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=Hi(e,r,s,{vgChannel:o,ignoreVgConfig:!CO(l)})),u!==void 0&&(a=ws(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=V5e({...c,scaleChannel:e,channelDef:l});return $I({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>lae({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function rBe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Hi("filled",n,i),a=Ir(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Hi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Hi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ws(u)}:{},...l?{stroke:ws(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Pt(p5e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...yu("color",e,{vgChannel:c,defaultValue:o?u:l}),...yu("fill",e,{defaultValue:r.fill?u:void 0}),...yu("stroke",e,{defaultValue:r.stroke?l:void 0})}}function UZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Hx(n)&&Xp(r)?$I({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>ws(i.value),invalidValueRef:void 0}):{}}function vA({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:lae({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ws(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ql(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[xg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=vA({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Dae({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&No(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:zZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function zZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if($t(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return O8({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Hw(n,r,{suffix:"end"},{offset:s})}return uae(e)}function Dae({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=oS(n),u=sx(n),l=Hi(n,s,o,{vgChannel:u});if(l!==void 0)return hN(n,l);switch(t){case"zeroOrMin":return wve({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return wve({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[cf(n)],mult:.5}}}}function wve({mainChannel:e,config:t,...n}){const r=z5e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const VZt={left:"x",center:"xc",right:"x2"},HZt={top:"y",middle:"yc",bottom:"y2"};function iBe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return sx(e);const i=e==="x"?"align":"baseline",s=Hi(i,t,n);let o;return pn(s)?(Pt(zKt(i)),o=void 0):o=s,e==="x"?VZt[o||(r==="top"?"left":"center")]:HZt[o||r]}function U8(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?sBe(e,t,{defaultPos:n,defaultPos2:r}):ql(e,t,{defaultPos:n})}function sBe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=xg(e),a=cf(e),u=qZt(t,r,o),l=u[a]?iBe(e,i,s):sx(e);return{...ql(e,t,{defaultPos:n,vgChannel:l}),...u}}function qZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=oS(n),l=cf(n),c=sx(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?vA({channel:n,markDef:s,encoding:r,model:e}):vA({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cf(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[c]:{field:e.getName(n)}}}const m=WZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:Q6(n,s)||Q6(n,{[n]:hX(n,s,a.style),[l]:hX(l,s,a.style)})||Q6(n,a[i])||Q6(n,a.mark)||{[c]:Dae({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function WZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Hw(t,s,{suffix:"start"},{offset:u}):uae({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function Q6(e,t){const n=cf(e),r=sx(e);if(t[r]!==void 0)return{[r]:hN(e,t[r])};if(t[e]!==void 0)return{[r]:hN(e,t[e])};if(t[n]){const i=t[n];if(wE(i))Pt(LKt(n));else return{[n]:hN(e,i)}}}function v1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=xg(t),a=cf(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Hi("size",i,n,{vgChannel:a}),p=JFe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return $t(u)&&(ps(u.bin)||du(u.bin)||u.timeUnit&&!l)&&!(h&&!wE(h))&&!r[p]&&!qa(f)?KZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&qa(f)||m)&&!l?YZt(u,t,e):sBe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function GZt(e,t,n,r,i,s,o){if(wE(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=tg("minBandSize",{type:o},r);return{signal:c?`max(${kp(c)}, ${l})`:l}}else i.band!==1&&(Pt(WKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(pn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(uS(u)&&bi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Do(u,o==="tick"?f:o==="bar"?l:c);if(pn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(bi(d))return{signal:`${1-d} * ${e}`}}return{value:xX(r.view,e)-2}}function YZt(e,t,n){var N,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=cf(t),f=xg(t),d=JFe(t),h=n.scaleName(d),p=n.getScaleComponent(Moe(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=yu("size",n,{vgChannel:c,defaultRef:ws(r.size)}):Pt(XKt(r.type)));const v=!!g,b=X5e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(N=l||p)==null?void 0:N.get("type"),useVlSizeChannel:m});g=g||{[c]:GZt(c,h||u,p||l,s,b,!!e,r.type)};const w=((O=l||p)==null?void 0:O.get("type"))==="band"&&wE(b)&&!v?"top":"middle",E=iBe(t,r,s,w),T=E==="xc"||E==="yc",{offset:C,offsetType:I}=vA({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),R=uae({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:Dae({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?I==="encoding"?0:.5:pn(b)?{signal:`(1-${b})/2`}:wE(b)?(1-b.band)/2:0});if(c)return{[E]:R,...g};{const L=sx(f),j=g[c],F=C?{...j,offset:C}:j;return{[E]:R,[L]:ft(R)?[R[0],{...R[1],offset:F}]:{...R,offset:F}}}}function Eve(e,t,n,r,i,s,o){if(WFe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(pn(n)||pn(i)||pn(r)||s){const l=kp(n),c=kp(i),f=kp(r),d=kp(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${p})`:p;return{signal:m+g+v}}else return i=i||0,r+(n?-i-u:+i+u)}function KZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=X5e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(O=r.component.axes[n])==null?void 0:O[0],h=(d==null?void 0:d.get("translate"))??.5,p=No(n)?Hi("binSpacing",s,i)??0:0,m=xg(n),g=sx(n),v=sx(m),b=tg("minBandSize",s,i),{offset:w}=vA({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=vA({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),T=vQt({fieldDef:e,scaleName:u}),C=Eve(n,p,c,h,w,b,T),I=Eve(m,p,c,h,E??w,b,T),R=pn(f)?{signal:`(1-${f.signal})/2`}:wE(f)?(1-f.band)/2:.5,N=ox({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ps(e.bin)||e.timeUnit){const L=e.timeUnit&&N!==.5;return{[v]:Sve({fieldDef:e,scaleName:u,bandPosition:R,offset:I,useRectOffsetField:L}),[g]:Sve({fieldDef:e,scaleName:u,bandPosition:pn(R)?{signal:`1-${R.signal}`}:1-R,offset:C,useRectOffsetField:L})}}else if(du(e.bin)){const L=Hw(e,u,{},{offset:I});if($t(t))return{[v]:L,[g]:Hw(t,u,{},{offset:C})};if(aS(e.bin)&&e.bin.step)return{[v]:L,[g]:{signal:`scale("${u}", ${Vt(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Pt(y5e(m))}function Sve({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return O8({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:$7,endSuffix:F7}:{}})}const XZt=new Set(["aria","width","height"]);function Nh(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?rBe(e):{};return{...QZt(e.markDef,t),...Tve("fill",n),...Tve("stroke",r),...yu("opacity",e),...yu("fillOpacity",e),...yu("strokeOpacity",e),...yu("strokeWidth",e),...yu("strokeDash",e),...UZt(e),...tBe(e),...Rae(e,"href"),...FZt(e)}}function Tve(e,t){return t?{[e]:t}:{}}function QZt(e,t){return oKt.reduce((n,r)=>(!XZt.has(r)&&Rt(e,r)&&t[r]!=="ignore"&&(n[r]=ws(e[r])),n),{})}function Nae(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!_g(s)||!(o=e.getScaleType(s)))return;const a=v7(i.aggregate),u=aae({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(mQt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>w7(s,!0)).join(" && ")}}}function Cve(e,t){if(t!==void 0)return{[e]:ws(t)}}const vq="voronoi",oBe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(vq)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Hx(s))return Pt(dKt(s)),n;const o={name:e.getName(vq),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...tBe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(vq)&&(u=!0)}),u||n.splice(a+1,0,o),n}},aBe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!wae(e.bind),parse:(e,t,n)=>mBe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=oBe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ms(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:SE(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+b1),o=r+RO,a=i.items.map(l=>Ms(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},z8="_toggle",uBe={defined:e=>e.type==="point"&&!P0(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+z8,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+b1,r=t.name+z8;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Ww(e)}}, `)+`${r} ? ${n} : null`}},JZt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!P0(e),parse:(e,t)=>{t.clear&&(t.clear=Gt(t.clear)?Lx(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(aBe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ms(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+b1);r(i,"null"),uBe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+z8),r(i,"false"))}return n}},lBe={defined:e=>{const t=e.resolve==="global"&&e.bind&&wae(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Jp;return t&&!n&&Pt(gKt),t&&n},parse:(e,t,n)=>{const r=qn(n);if(r.select=Gt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},mBe(t,r),Ht(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Wt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=dq(t.bind)?t.bind.legend:"click",s=Gt(i)?Lx(i,"view"):Wt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=dq(t.bind)&&t.bind.legend,s=o=>a=>{const u=qn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ms(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+b1),o=r+RO,a=i.items.filter(d=>d.hasLegend).map(d=>Ms(`${r}_${Ms(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+z8),f=dq(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function ZZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Eu(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&lBe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const cBe="_translate_anchor",fBe="_translate_delta",een={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Gy.defined(t),s=r+cBe,{x:o,y:a}=t.project.hasChannel;let u=Lx(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+aC,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?TX(e,$s):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?TX(e,Ya):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+fBe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Ave(e,t,o,"width",n),a!==void 0&&Ave(e,t,a,"height",n),n}};function Ave(e,t,n,r,i){const s=t.name,o=s+cBe,a=s+fBe,u=n.channel,l=Gy.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===$s?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,v=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${g}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const dBe="_zoom_anchor",hBe="_zoom_delta",ten={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Gy.defined(t),s=r+hBe,{x:o,y:a}=t.project.hasChannel,u=jt(e.scaleName($s)),l=jt(e.scaleName(Ya));let c=Lx(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+aC,f))),n.push({name:r+dBe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Ive(e,t,o,"width",n),a!==void 0&&Ive(e,t,a,"height",n),n}};function Ive(e,t,n,r,i){const s=t.name,o=n.channel,a=Gy.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?TX(e,o):u.name,h=s+hBe,p=`${s}${dBe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const TE="_store",b1="_tuple",nen="_modify",pBe="vlSelectionResolve",j7=[IZt,LZt,TZt,uBe,aBe,Gy,lBe,JZt,een,ten,oBe];function ren(e){let t=e.parent;for(;t&&!ad(t);)t=t.parent;return t}function Ww(e,{escape:t}={escape:!0}){let n=t?jt(e.name):e.name;const r=ren(e);if(r){const{facet:i}=r;for(const s of oh)i[s]&&(n+=` + '__facet_${s}_' + (facet[${jt(r.vgField(s))}])`)}return n}function Pae(e){return Eu(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function mBe(e,t){(Gt(t.select)||!t.select.on)&&delete e.events,(Gt(t.select)||!t.select.clear)&&delete e.clear,(Gt(t.select)||!t.select.toggle)&&delete e.toggle}function P0(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function AX(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...AX(e.object)),t.push(...AX(e.property))),t)}function gBe(e){return e.object.type==="MemberExpression"?gBe(e.object):e.object.name==="datum"}function yBe(e){const t=Qse(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&gBe(r)&&n.add(AX(r).slice(1).join("."))}),n}class FI extends Bi{clone(){return new FI(null,this.model,qn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=V8(this.model,this.filter,this),this._dependentFields=yBe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ien(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=Ms(s.name),a=s.select,u=Gt(a)?a:a.type,l=Ht(a)?qn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=qn(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:Gt(l.on)?Lx(l.on,"scope"):Wt(qn(l.on))};if(P0(f)&&(i++,i>1)){delete n[o];continue}const d=qn(s);for(const h of j7)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&Pt(wKt),n}function vBe(e,t,n,r="datum"){const i=Gt(t)?t:t.param,s=Ms(i),o=jt(s+TE);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function bBe(e,t,n){const r=Ms(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Pt(EKt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Pt(SKt(a,i,n,s))):s=a[0].field}return`${o.name}[${jt(gh(s))}]`}function sen(e,t){for(const[n,r]of ix(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Qc(new FI(t,e,{param:n}),i,Hs.Lookup,e.component.data.outputNodeRefCounts)}}function V8(e,t,n){return dN(t,r=>Gt(r)?r:PXt(r)?vBe(e,r,n):k5e(r))}function oen(e,t){if(e)return ft(e)&&!Vv(e)?e.map(n=>pae(n,t)).join(", "):e}function bq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function AD(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=FQt[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(kO(g)){const{condition:v,...b}=g,w=Wt(v),E=nve[p];if(E){const{vgProp:T,part:C}=E,I=[...w.map(R=>{const{test:N,...O}=R;return{test:V8(null,N),...O}}),b];bq(c,C,T,I),delete c[p]}else if(E===null){const T={signal:w.map(C=>{const{test:I,...R}=C;return`${V8(null,I)} ? ${j1e(R)} : `}).join("")+j1e(b)};c[p]=T}}else if(pn(g)){const v=nve[p];if(v){const{vgProp:b,part:w}=v;bq(c,w,b,g),delete c[p]}}Ir(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Gi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Do(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&pn(c.encode.labels.update.text)&&(p=yE(a,"datum.label",c.encode.labels.update.text.signal)),bq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of o8e)e.hasAxisPart(p)||delete c.encode[p];Gi(c.encode)&&delete c.encode}const h=oen(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Do(l,0)}}}}function xBe(e){const{axes:t}=e.component,n=[];for(const r of j1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function aen(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>AD(i,"grid",t)),...r.map(i=>AD(i,"grid",t)),...n.map(i=>AD(i,"main",t)),...r.map(i=>AD(i,"main",t))].filter(i=>i)}function kve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...It(o),...It(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${kp(o[c])} : ${kp(a[c])}`};return l}return t[i]})])}function uen(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:P5e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=pn(n)?"axisOrient":`axis${vO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:kve(a,r,e,n),vgAxisConfig:kve(u,r,e,n),axisConfigStyle:len([...u,...a],r)}}function len(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Wt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function IX(e,t,n,r={}){var s;const i=a5e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Rve={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??cen(n,e),gridScale:({model:e,channel:t})=>fen(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||wBe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||_Be(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??hen(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??pen(t.type,n,$t(t)&&!!t.timeUnit,$t(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??gen({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:yen,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=EBe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return l5e(i?[eve(i)]:[],$t(o)?[eve(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>ven(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??ben(n,t)};function cen(e,t){return!qa(e)&&$t(t)&&!ps(t==null?void 0:t.bin)&&!du(t==null?void 0:t.bin)}function fen(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function den(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return pn(s)?s:MP(s);{const{configValue:o}=IX("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?MP(o):n===$s&&Ir([nae,tae],e.type)&&!($t(e)&&e.timeUnit)?270:void 0}}function kX(e){return`(((${e.signal} % 360) + 360) % 360)`}function _Be(e,t,n,r){if(e!==void 0)if(n==="x"){if(pn(e)){const i=kX(e),s=pn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(pn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(pn(e)){const i=kX(e),s=pn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(pn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function wBe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(pn(e)){const o=kX(e),a=pn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(pn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function hen(e,t){if(t==="x"&&Ir(["quantitative","temporal"],e))return!0}function pen(e,t,n,r){if(n&&!Ht(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function men(e){return e==="x"?"bottom":"left"}function gen({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!qa(t)&&t!=="log"){if($t(e)){if(ps(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ir(["month","hours","day","quarter"],(i=Va(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function yen({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if($t(t)){const{timeUnit:n}=t;if(n){const r=C5e(n);if(r)return{signal:r}}}}function EBe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return c5e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function ven(e,t){const n=e.values;if(ft(n))return s8e(t,n);if(pn(n))return n}function ben(e,t){return e==="rect"&&L8(t)?1:0}class bA extends Bi{clone(){return new bA(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=yBe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(fS(r)&&K5e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${k5e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new bA(t,{calculate:u,as:xA(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Lr(this.transform)}`}}function xA(e,t,n){return Vt(e,{prefix:t,suffix:"sort_index",...n})}function U7(e,t){return Ir(["top","bottom"],t)?"column":Ir(["left","right"],t)||e==="row"?"row":"column"}function _A(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Do((t||{})[e],i[e],n.header[e])}function z7(e,t,n,r){const i={};for(const s of e){const o=_A(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Oae=["row","column"],Mae=["header","footer"];function xen(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=z7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=U7(t,a),l=MP(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...TBe(l,u),...SBe(u,l,s),...CBe(r,i,t,oJt,S8e)}}}function SBe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=wBe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function TBe(e,t){const n=_Be(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function _en(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Mae)if(n[i])for(const s of n[i]){const o=Een(e,t,i,n,s);o!=null&&r.push(o)}return r}function wen(e,t){const{sort:n}=e;return Wy(n)?{field:Vt(n,{expr:"datum"}),order:n.order??"ascending"}:ft(n)?{field:xA(e,t,{expr:"datum"}),order:"ascending"}:{field:Vt(e,{expr:"datum"}),order:n??"ascending"}}function RX(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=z7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=cae({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=U7(t,a);return{text:{signal:u?yE(yE(u,"datum.label",l),"datum.value",Vt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...TBe(s,c),...SBe(c,s,o),...CBe(n,e,t,aJt,T8e)}}function Een(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=z7(["labelOrient"],o.header,a,t);(t==="row"&&!Ir(["top","bottom"],f)||t==="column"&&!Ir(["left","right"],f))&&(s=RX(o,t,a))}const u=ad(e)&&!TO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:wen(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Sen={column:{start:0,end:1},row:{start:1,end:0}};function Ten(e,t){return Sen[t][e]}function Cen(e,t){const n={};for(const r of oh){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=z7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=U7(r,o),u=Ten(s,a);u!==void 0&&(n[a]=u)}}return Gi(n)?void 0:n}function CBe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=_A(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Lae(e){return[...J6(e,"width"),...J6(e,"height"),...J6(e,"childWidth"),...J6(e,"childHeight")]}function J6(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(qa(o)&&uS(a)){const u=e.scaleName(n);return ad(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Dve(u,a)]:[Dve(u,a),{name:i,update:ABe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=bX(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Dve(e,t){const n=`${e}_step`;return pn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function ABe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Do(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${kp(o)}, ${kp(s)}) * ${e}_step`}function IBe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function kBe(e,t){return It(e).reduce((n,r)=>({...n,...$I({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>ws(i.value),invalidValueRef:void 0})}),{})}function RBe(e,t){if(ad(t))return e==="theta"?"independent":"shared";if(UI(t))return"shared";if(Vae(t))return No(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function $ae(e,t){const n=e.scale[t],r=No(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Pt(tXt(t)),"independent"):e[r][t]||"shared"}const Aen={...cJt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},DBe=It(Aen);class Ien extends z1{}const Nve={symbols:ken,gradient:Ren,labels:Den,entries:Nen};function ken(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...lKt({},n,sQt),...rBe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?NBe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===uf)delete f.fill;else if(Rt(f.fill,"field"))h?delete f.fill:(f.fill=ws(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ws(m??1));else if(ft(f.fill)){const g=DX(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ws(g))}}if(f.stroke){if(r==="stroke"||!c&&r===uf)delete f.stroke;else if(Rt(f.stroke,"field")||p)delete f.stroke;else if(ft(f.stroke)){const g=Do(DX(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==B1){const g=$t(t)&&OBe(n,i,t);g?f.opacity=[{test:g,...ws(m??1)},ws(u.legend.unselectedOpacity)]:m&&(f.opacity=ws(m))}return f={...f,...e},Gi(f)?void 0:f}function Ren(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?NBe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ws(l)),a={...a,...e},Gi(a)?void 0:a}function Den(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=$t(t)?OBe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;EE(c)?f=Rp({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Rp({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&$t(t)&&t.timeUnit===void 0&&(f=Rp({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Gi(d)?void 0:d}function Nen(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function NBe(e){return PBe(e,(t,n)=>Math.max(t,n.value))}function DX(e){return PBe(e,(t,n)=>Do(t,n.value))}function PBe(e,t){if(CQt(e))return Wt(e.condition).reduce(t,e.value);if(Xp(e))return e.value}function OBe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=jt(n.field);return r.map(s=>`(!length(data(${jt(Ms(s)+TE)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Pve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return W5e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return G5e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Ben(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??jen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Oen(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>oC(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(sC(n)&&b0(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Pen(t,e)};function Pen(e,t){const n=e.values;if(ft(n))return s8e(t,n);if(pn(n))return n}function Oen(e,t,n,r){if(t!=="shape"){const i=DX(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Men(e){const{legend:t}=e;return Do(t.type,Len(e))}function Len({channel:e,timeUnit:t,scaleType:n}){if(sC(e)){if(Ir(["quarter","month","day"],t))return"symbol";if(b0(n))return"gradient"}return"symbol"}function $en({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Fen(n,t)}function Fen(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Ben({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(b0(i))return n==="horizontal"?r==="top"||r==="bottom"?Ove(t,"width",o,s):o:Ove(t,"height",u,a)}function Ove(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function jen(e){if(Ir(["quantile","threshold","log","symlog"],e))return"greedy"}function MBe(e){const t=zs(e)?Uen(e):qen(e);return e.component.legends=t,t}function Uen(e){const{encoding:t}=e,n={};for(const r of[uf,...A8e]){const i=fa(t[r]);!i||!e.getScaleComponent(r)||r===lf&&$t(i)&&i.type===LI||(n[r]=Hen(e,r))}return n}function zen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ven(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Hen(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Ien({},zen(e,t));ZZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=fa(i[t]),f=$t(c)?(E=Va(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=Men({legend:n,channel:t,timeUnit:f,scaleType:l}),p=$en({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const T of DBe){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const C=T in Pve?Pve[T](m):n[T];if(C!==void 0){const I=Ven(C,T,n,e.fieldDef(t));(I||s.legend[T]===void 0)&&a.set(T,C,I)}}const g=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const C=kBe(g[T]??{},e),I=T in Nve?Nve[T](C,w):C;I!==void 0&&!Gi(I)&&(b[T]={...v!=null&&v.length&&$t(c)?{name:`${Ms(c.field)}_legend_${T}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:I})}return Gi(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function qen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){MBe(r);for(const i of It(r.component.legends))n.legend[i]=$ae(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=LBe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of It(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function LBe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of DBe){const c=ax(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Wen(f,d);case"title":return f5e(f,d);case"type":return i=!0,Uf("symbol")}return L7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&D8(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&D8(e.explicit,["encode","gradient"])),e}function Wen(e,t){return t.value==="circle"?t:e}function Gen(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function $Be(e){const t=e.component.legends,n={};for(const i of It(t)){const s=e.getScaleComponent(i),o=Yi(s.get("domains"));if(n[o])for(const a of n[o])LBe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Eu(n).flat().map(i=>Yen(i,e.config)).filter(i=>i!==void 0)}function Yen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of A8e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&pn(s.encode.labels.update.text)&&(l=yE(r,"datum.label",s.encode.labels.update.text.signal)),Gen(s,"labels","text",{signal:l})}return s}}function Ken(e){return UI(e)||Vae(e)?Xen(e):FBe(e)}function Xen(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),FBe(e))}function FBe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=pn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ir(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Qen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class BBe extends z1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function jBe(e){e.component.projection=zs(e)?Jen(e):ttn(e)}function Jen(e){if(e.hasProjection){const t=hu(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Zen(e):void 0,s=new BBe(e.projectionName(!0),{...hu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Zen(e){const t=[],{encoding:n}=e;for(const r of[[dm,fm],[yh,hm]])(fa(n[r[0]])||fa(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(lf)&&e.typedFieldDef(lf).type===LI&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Hs.Main)),t}function etn(e,t){const n=Ioe(Qen,i=>!!(!Jt(e.explicit,i)&&!Jt(t.explicit,i)||Jt(e.explicit,i)&&Jt(t.explicit,i)&&ed(e.get(i),t.get(i))));if(ed(e.size,t.size)){if(n)return e;if(ed(e.explicit,{}))return t;if(ed(t.explicit,{}))return e}return null}function ttn(e){if(e.children.length===0)return;let t;for(const r of e.children)jBe(r);const n=Ioe(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=etn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new BBe(r,t.specifiedProjection,t.size,qn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function ntn(e,t,n,r){if(IO(t,n)){const i=zs(e)?e.axis(n)??e.legend(n)??{}:{},s=Vt(t,{expr:"datum"}),o=Vt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Vt(t,{binSuffix:"range",forAs:!0}),formula:SO(s,o,i.format,i.formatType,r)}}return{}}function UBe(e,t){return`${r5e(e)}_${t}`}function rtn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Fae(e,t,n){const r=R7(n,void 0)??{},i=UBe(r,t);return e.getName(`${i}_bins`)}function itn(e){return"as"in e}function Mve(e,t,n){let r,i;itn(e)?r=Gt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Vt(e,{forAs:!0}),Vt(e,{binSuffix:"end",forAs:!0})];const s={...R7(t,void 0)},o=UBe(s,e.field),{signal:a,extentSignal:u}=rtn(n,o);if(b7(s.extent)){const c=s.extent;i=bBe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class O0 extends Bi{clone(){return new O0(null,qn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tc(s)&&ps(s.bin)){const{key:a,binComponent:u}=Mve(s,s.bin,n);i[a]={...u,...i[a],...ntn(n,s,o,n.config)}}return i},{});return Gi(r)?null:new O0(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Mve(n,n.bin,r);return new O0(t,{[i]:s})}merge(t,n){for(const r of It(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=v0([...this.bins[r].as,...t.bins[r].as],Lr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Eu(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Eu(this.bins).map(t=>t.field))}hash(){return`Bin ${Lr(this.bins)}`}assemble(){return Eu(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:gh(t.field),as:r,signal:t.signal,...b7(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:gh(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Vt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function stn(e,t,n,r){var s;const i=zs(r)?r.encoding[xg(t)]:void 0;if(tc(n)&&zs(r)&&Q5e(n,i,r.markDef,r.config)){e.add(Vt(n,{})),e.add(Vt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ox({fieldDef:n,markDef:a,config:u});LP(o)&&l!==.5&&No(t)&&(e.add(Vt(n,{suffix:$7})),e.add(Vt(n,{suffix:F7}))),n.bin&&IO(n,t)&&e.add(Vt(n,{binSuffix:"range"}))}else if(YFe(t)){const o=GFe(t);e.add(r.getName(o))}else e.add(Vt(n));return fS(n)&&WXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function otn(e,t){for(const n of It(t)){const r=t[n];for(const i of It(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Fp extends Bi{clone(){return new Fp(null,new Set(this.dimensions),qn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Vt(o,{forAs:!0})]);else{if(y1(u)||Vx(u)){const c=y1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Vt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Vt(o,{forAs:!0})]);_g(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Vt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Vt({field:l,aggregate:"max"},{forAs:!0})]))}else stn(s,a,o,n)}),s.size+It(i).length===0)?null:new Fp(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||Vt(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||Vt(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+It(s).length===0?null:new Fp(t,i,s)}merge(t){return BFe(this.dimensions,t.dimensions)?(otn(this.measures,t.measures),!0):(yXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...It(this.measures)])}producedFields(){const t=new Set;for(const n of It(this.measures))for(const r of It(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Lr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of It(this.measures))for(const o of It(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:gh(s));return{type:"aggregate",groupby:[...this.dimensions].map(gh),ops:t,fields:n,as:r}}}class BI extends Bi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of oh){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Vt(o),...ps(a)?[Vt(o,{binSuffix:"end"})]:[]],...Wy(u)?{sortField:u}:ft(u)?{sortIndexField:xA(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of oh)this[n]&&(t+=` ${n.charAt(0)}:${Lr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of oh)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of oh)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of j1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(qa(i)&&uS(s)){const o=V7(this.childModel,n),a=zae(o);a?t[n]=a:Pt(zoe(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=A7,field:f}=u;s.push(f),o.push(c),a.push(Vt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Oae){for(const c of Mae){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[qy,Hy])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Lve(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function atn(e,t){const n=Doe(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Lve(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Lve(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Pt(CKt(t)),null}function utn(e){const t={};return $$(e.filter,n=>{if(I5e(n)){let r=null;Yoe(n)?r=Yf(n.equal):Xoe(n)?r=Yf(n.lte):Koe(n)?r=Yf(n.lt):Qoe(n)?r=Yf(n.gt):Joe(n)?r=Yf(n.gte):Zoe(n)?r=n.range[0]:eae(n)&&(r=(n.oneOf??n.in)[0]),r&&(lS(r)?t[n.field]="date":bi(r)?t[n.field]="number":Gt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function ltn(e){const t={};function n(r){gA(r)?t[r.field]="date":r.type==="quantitative"&&eKt(r.aggregate)?t[r.field]="number":cA(r.field)>1?r.field in t||(t[r.field]="flatten"):fS(r)&&Wy(r.sort)&&cA(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((zs(e)||ad(e))&&e.forEachFieldDef((r,i)=>{if(tc(r))n(r);else{const s=oS(i),o=e.fieldDef(s);n({...r,type:o.type})}}),zs(e)){const{mark:r,markDef:i,encoding:s}=e;if(Hx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];$t(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ctn(e){const t={};if(zs(e)&&e.component.selection)for(const n of It(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cA(i.field)>1&&(t[i.field]="flatten")}return t}class ol extends Bi{clone(){return new ol(null,qn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Lr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Eb(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of It(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Pt(W1e(a,r[a],u.value)))}for(const a of It(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Pt(W1e(a,n[a],u)))}const s=new z1(n,r);i.copyAll(s);const o={};for(const a of It(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return It(o).length===0||i.parseNothing?null:new ol(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of It(this._parse)){const r=this._parse[n];cA(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(It(this._parse))}dependentFields(){return new Set(It(this._parse))}assembleTransforms(t=!1){return It(this._parse).filter(n=>t?cA(n)>1:!0).map(n=>{const r=atn(n,this._parse[n]);return r?{type:"formula",expr:r,as:OI(n)}:null}).filter(n=>n!==null)}}class ux extends Bi{clone(){return new ux(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Jp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Jp}}}class DO extends Bi{clone(){return new DO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Lr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class NO extends Bi{clone(){return new NO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Lr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class CE extends Bi{constructor(t){super(null),t??(t={name:"source"});let n;if(Eb(t)||(n=t.format?{...Xc(t.format,["parse"])}:{}),$P(t))this._data={values:t.values};else if(yA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ir(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else q8e(t)?this._data={values:[{type:"Sphere"}]}:(V8e(t)||Eb(t))&&(this._data={});this._generator=Eb(t),t.name&&(this._name=t.name),n&&!Gi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var $ve=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ftn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},ID;function Bae(e){return e instanceof CE||e instanceof DO||e instanceof NO}class jae{constructor(){ID.set(this,void 0),$ve(this,ID,!1,"f")}setModified(){$ve(this,ID,!0,"f")}get modifiedFlag(){return ftn(this,ID,"f")}}ID=new WeakMap;class dS extends jae{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Uae extends jae{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class dtn extends Uae{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of It(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class htn extends Uae{constructor(t){super(),this.requiresSelectionId=t&&Pae(t)}run(t){t instanceof ux&&(this.requiresSelectionId&&(Bae(t.parent)||t.parent instanceof Fp||t.parent instanceof ol)||(this.setModified(),t.remove()))}}class ptn extends jae{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof N0&&(r=t.producedFields(),koe(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class mtn extends Uae{constructor(){super()}run(t){t instanceof Qc&&!t.isRequired()&&(this.setModified(),t.remove())}}class gtn extends dS{run(t){if(!Bae(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ol)if(t instanceof ol)this.setModified(),t.merge(n);else{if(Roe(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class ytn extends dS{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ol);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of It(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Gi(i)){this.setModified();const o=new ol(t,i);for(const a of n){if(a instanceof ol)for(const u of It(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ol&&It(a.parse).length===0&&a.remove()}}}}}class vtn extends dS{run(t){t instanceof Qc||t.numChildren()>0||t instanceof BI||t instanceof CE||(this.setModified(),t.remove())}}class btn extends dS{run(t){const n=t.children.filter(i=>i instanceof N0),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class xtn extends dS{run(t){const n=t.children.filter(i=>i instanceof Fp),r={};for(const i of n){const s=Lr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of It(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class _tn extends dS{constructor(t){super(),this.model=t}run(t){const n=!(Bae(t)||t instanceof FI||t instanceof ol||t instanceof ux),r=[],i=[];for(const s of t.children)s instanceof O0&&(n&&!Roe(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof O0?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class wtn extends dS{run(t){const n=[...t.children];if(!lA(n,o=>o instanceof Qc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Qc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Qc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class hS extends Bi{clone(){return new hS(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=v0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`JoinAggregateTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class wA extends Bi{clone(){return new wA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=_g(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=aae({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:v7(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return It(u).length?new wA(t,u):null}dependentFields(){return new Set(It(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Lr(this.filter)}`}assemble(){const t=It(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${NX(s)}))`):i.type==="quantitative"&&n.push(NX(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function NX(e){return`isValid(${e}) && isFinite(+${e})`}function Etn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Vt(r);return i&&t.push(i),t},[])}function Stn(e){return ft(e)&&e.every(t=>Gt(t))&&e.length>1}class Yy extends Bi{clone(){return new Yy(null,qn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Do(f.order,"ascending"));const l={field:a,order:u};let c;return Stn(s)?c=s:Gt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Yy(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Qp(p)}).filter(h=>!!h),c=Etn(n),f=n.encoding.order;let d;if(ft(f)||$t(f))d=u5e(f);else{const h=J5e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Yy(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Lr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Vt(i,{binSuffix:"mid"})]:[Vt(i,{}),Vt(i,{binSuffix:"end"})]:[Vt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Vt(c,{expr:"datum"}),p=Vt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${NX(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:Vt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Vt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class jI extends Bi{clone(){return new jI(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=v0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`WindowTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>joe(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Ttn(e){function t(n){if(!(n instanceof BI)){const r=n.clone();if(r instanceof Qc){const i=OX+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Fp||r instanceof Yy||r instanceof jI||r instanceof hS)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function PX(e){if(e instanceof BI)if(e.numChildren()===1&&!(e.children[0]instanceof Qc)){const t=e.children[0];(t instanceof Fp||t instanceof Yy||t instanceof jI||t instanceof hS)&&t.addDimensions(e.fields),t.swapWithParent(),PX(e)}else{const t=e.model.component.data.main;zBe(t);const n=Ttn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(PX)}function zBe(e){if(e instanceof Qc&&e.type===Hs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof BI||(t.swapWithParent(),zBe(e))}}const OX="scale_",Z6=5;function MX(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!MX(t.children))return!1}return!0}function rp(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Fve(e,t,n){let r=e.sources,i=!1;return i=rp(new mtn,r)||i,i=rp(new htn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=rp(new vtn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=rp(new gtn,r)||i,i=rp(new _tn(t),r)||i,i=rp(new ptn,r)||i,i=rp(new ytn,r)||i,i=rp(new xtn,r)||i,i=rp(new btn,r)||i,i=rp(new dtn,r)||i,i=rp(new wtn,r)||i),e.sources=r,i}function Ctn(e,t){MX(e.sources);let n=0,r=0;for(let i=0;i<Z6&&Fve(e,t,!0);i++)n++;e.sources.map(PX);for(let i=0;i<Z6&&Fve(e,t,!1);i++)r++;MX(e.sources),Math.max(n,r)===Z6&&Pt(`Maximum optimization runs(${Z6}) reached.`)}class Ma{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ma(()=>t(n))}}function VBe(e){zs(e)?Atn(e):Itn(e)}function Atn(e){const t=e.component.scales;for(const n of It(t)){const r=Rtn(e,n);if(t[n].setWithExplicit("domains",r),Ntn(e,n),e.component.data.isFaceted){let s=e;for(;!ad(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Py(a)&&(a.data=OX+a.data.replace(OX,""))}}}function Itn(e){for(const n of e.children)VBe(n);const t=e.component.scales;for(const n of It(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ax(r,o.getWithExplicit("domains"),"domains","scale",LX);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Pt(bKt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function ktn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Bve(t,n);if(!i){Pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Bve(t,n);if(i)return"unaggregated"}return e}function Rtn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=ktn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fa(r.x2)?fa(r.x)?ax(Mv(n,i,e,"x"),Mv(n,i,e,"x2"),"domain","scale",LX):Mv(n,i,e,"x2"):t==="y"&&fa(r.y2)?fa(r.y)?ax(Mv(n,i,e,"y"),Mv(n,i,e,"y2"),"domain","scale",LX):Mv(n,i,e,"y2"):Mv(n,i,e,t)}function Dtn(e,t,n){return e.map(r=>({signal:`{data: ${D7(r,{timeUnit:n,type:t})}}`}))}function xq(e,t,n){var i;const r=(i=Va(n))==null?void 0:i.unit;return t==="temporal"||r?Dtn(e,t,r):[e]}function Mv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=fa(i[r]),{type:c}=l,f=l.timeUnit,d=EZt({invalid:tg("invalid",s,a),isPath:Hx(o)});if(qXt(t)){const m=Mv(e,void 0,n,r),g=xq(t.unionWith,c,f);return Jm([...g,...m.value])}else{if(pn(t))return Jm([t]);if(t&&t!=="unaggregated"&&!M5e(t))return Jm(xq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Uf([[0,1]]);const m=n.requestDataName(d);return Uf([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=_g(r)&&$t(l)?Ptn(n,r,e):void 0;if(wg(l)){const m=xq([l.datum],c,f);return Uf(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Uf([{data:n.requestDataName(d),field:Vt({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:Vt({field:m,aggregate:"max"})}])}else if(ps(p.bin)){if(qa(e))return Uf(e==="bin-ordinal"?[]:[{data:OP(h)?n.requestDataName(d):n.requestDataName(Hs.Raw),field:n.vgField(r,IO(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!Ht(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(ps(m)){const g=Fae(n,p.field,m);return Uf([new Ma(()=>{const v=n.getSignalName(g);return`[${v}.start, ${v}.stop]`})])}else return Uf([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ir(["time","utc"],e)){const m=i[xg(r)];if(Q5e(p,m,s,a)){const g=n.requestDataName(d),v=ox({fieldDef:p,fieldDef2:m,markDef:s,config:a}),b=LP(o)&&v!==.5&&No(r);return Uf([{data:g,field:n.vgField(r,b?{suffix:$7}:{})},{data:g,field:n.vgField(r,{suffix:b?F7:"end"})}])}}return Uf(h?[{data:OP(h)?n.requestDataName(d):n.requestDataName(Hs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function _q(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":A7),...r?{field:gh(r)}:{},...i?{order:i}:{}}}function Ntn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=M5e(r)?r:void 0,o=aS(i)&&b7(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ptn(e,t,n){if(!qa(n))return;const r=e.fieldDef(t),i=r.sort;if(K5e(i))return{op:"min",field:xA(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Wy(i)){const a=s&&!o.has(i.field);return _q(i,a)}else if(EQt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(y1(c)||Vx(c))return _q({field:Vt(l),order:u},d);if(joe(c)||!c)return _q({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ir(["ascending",void 0],i))return!0}}function Bve(e,t){const{aggregate:n,type:r}=e;return n?Gt(n)&&!nKt.has(n)?{valid:!1,reason:YKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:KKt(e)}:{valid:!0}:{valid:!1,reason:GKt(e)}}function LX(e,t,n,r){return e.explicit&&t.explicit&&Pt(eXt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Otn(e){const t=v0(e.map(o=>{if(Py(o)){const{sort:a,...u}=o;return u}return o}),Lr),n=v0(e.map(o=>{if(Py(o)){const a=o.sort;return a!==void 0&&!OP(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Lr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Py(o)&&n.length>0){let a=n[0];if(n.length>1){Pt(Y1e);const u=n.filter(l=>Ht(l)&&"op"in l&&l.op!=="min");n.every(l=>Ht(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ht(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=v0(n.map(o=>OP(o)||!("op"in o)||Gt(o.op)&&Jt(JYt,o.op)?o:(Pt(nXt(o)),!0)),Lr);let i;r.length===1?i=r[0]:r.length>1&&(Pt(Y1e),i=!0);const s=v0(e.map(o=>Py(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function zae(e){if(Py(e)&&Gt(e.field))return e.field;if(rKt(e)){let t;for(const n of e.fields)if(Py(n)&&Gt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Pt(rXt),t}return Pt(iXt),t}else if(iKt(e)){Pt(sXt);const t=e.fields[0];return Gt(t)?t:void 0}}function V7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Py(i)&&(i.data=e.lookupDataSource(i.data)),i));return Otn(r)}function HBe(e){return UI(e)||Vae(e)?e.children.reduce((t,n)=>t.concat(HBe(n)),jve(e)):jve(e)}function jve(e){return It(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Mtn(i.range,s,n,e),h=V7(e,n),p=a?OZt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Mtn(e,t,n,r){if(No(n)){if(uS(e))return{step:{signal:`${t}_step`}}}else if(Ht(e)&&Py(e))return{...e,data:r.lookupDataSource(e.data)};return e}class qBe extends z1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ir([pu.LOG,pu.TIME,pu.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ir([pu.LINEAR,pu.SQRT,pu.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(ft(a)){const u=a[0],l=a[a.length-1];if(bi(u)&&bi(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const Ltn=["range","scheme"];function $tn(e){const t=e.component.scales;for(const n of Boe){const r=t[n];if(!r)continue;const i=Ftn(n,e);r.setWithExplicit("range",i)}}function Uve(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=cf(t),o=e.getName(s);if(Ht(r)&&r.binned&&r.step!==void 0)return new Ma(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ps(r)){const a=Fae(e,i,r);return new Ma(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Ftn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Ltn)if(n[f]!==void 0){const d=gX(s,f),h=L5e(e,f);if(!d)Pt(m5e(s,f,e));else if(h)Pt(h);else switch(f){case"range":{const p=n.range;if(ft(p)){if(No(e))return Jm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),v=t.getSignalName.bind(t);return Ma.fromName(v,g)}return m}))}else if(Ht(p))return Jm({data:t.requestDataName(Hs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Jm(p)}case"scheme":return Jm(Btn(n[f]))}}const o=e===$s||e==="xOffset"?"width":"height",a=r[o];if(rg(a)){if(No(e))if(qa(s)){const f=GBe(a,t,e);if(f)return Jm({step:f})}else Pt(g5e(o));else if(_O(e)){const f=e===$x?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=YBe(a,s);if(p)return Jm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=jtn(e,t);return(u!==void 0||l!==void 0)&&gX(s,"rangeMin")&&ft(c)&&c.length===2?Jm([u??c[0],l??c[1]]):Uf(c)}function Btn(e){return HXt(e)?{scheme:e.name,...Xc(e,["name"])}:{scheme:e}}function WBe(e,t,n,{center:r}={}){const i=cf(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Ya&&Kp(n)?r?[Ma.fromName(a=>`${o(a)}/2`,s),Ma.fromName(a=>`-${o(a)}/2`,s)]:[Ma.fromName(o,s),0]:r?[Ma.fromName(a=>`-${o(a)}/2`,s),Ma.fromName(a=>`${o(a)}/2`,s)]:[0,Ma.fromName(o,s)]}function jtn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fa(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case $s:case Ya:{if(Ir(["point","band"],u)){const f=KBe(e,n,r.view);if(rg(f))return{step:GBe(f,t,e)}}return WBe(e,t,u)}case $x:case MI:return Utn(e,t,u);case F1:{const f=Htn(i,r),d=qtn(i,n,t,r);return hA(u)?Vtn(f,d,ztn(u,r,l,e)):[f,d]}case Dh:return[0,Math.PI*2];case sS:return[0,360];case cm:return[0,new Ma(()=>{const f=t.getSignalName(ad(t.parent)?"child_width":"width"),d=t.getSignalName(ad(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Fx:return{step:1e3/r.scale.framesPerSecond};case Ux:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case zx:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case lf:return"symbol";case uf:case vg:case bg:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case B1:case Bx:case jx:return[r.scale.minOpacity,r.scale.maxOpacity]}}function GBe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Moe(n),o=r[s];if(k8e({step:e,offsetIsDiscrete:Qn(o)&&R5e(o.type)})==="offset"&&l8e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${uKt(f)})`}}else return e.step}function YBe(e,t){if(k8e({step:e,offsetIsDiscrete:qa(t)})==="offset")return{step:e.step}}function Utn(e,t,n){const r=e===$x?"x":"y",i=t.getScaleComponent(r);if(!i)return WBe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=KBe(r,t.size,t.config.view);if(rg(l)){const c=YBe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if($t(l)&&l.timeUnit){const c=C5e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ox({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=pn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=pn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return $Fe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function KBe(e,t,n){const r=e===$s?"width":"height",i=t[r];return i||j8(n,r)}function ztn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ft(n)?n.length+1:(Pt(pXt(r)),3)}}function Vtn(e,t,n){const r=()=>{const i=kp(t),s=kp(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return pn(t)?new Ma(r):{signal:r()}}function Htn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(x7("size",e))}const zve=.95;function qtn(e,t,n,r){const i={x:Uve(n,"x"),y:Uve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Vve(t,i,r.view);return bi(s)?s-1:new Ma(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Vve(t,i,r.view);return bi(s)?Math.pow(zve*s,2):new Ma(()=>`pow(${zve} * ${s.signal}, 2)`)}}throw new Error(x7("size",e))}function Vve(e,t,n){const r=rg(e.width)?e.width.step:xX(n,"width"),i=rg(e.height)?e.height.step:xX(n,"height");return t.x||t.y?new Ma(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function XBe(e,t){zs(e)?Wtn(e,t):JBe(e,t)}function Wtn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of It(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=fa(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=gX(h,t),v=L5e(a,t);if(d!==void 0&&(g?v&&Pt(v):Pt(m5e(h,t,a))),g&&v===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":lS(u[t])||w==="temporal"||b?l.set(t,{signal:D7(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=Rt(Hve,t)?Hve[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:c8e(i,a),hasSecondaryRangeChannel:!!i[xg(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const Hve={bins:({model:e,fieldOrDatumDef:t})=>$t(t)?Gtn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Ytn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Ktn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Xtn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Qtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Jtn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=$t(e)?e.sort:void 0;return Ztn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>enn(e,t,n,r,i,s.scale,o)};function QBe(e){zs(e)?$tn(e):JBe(e,"range")}function JBe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?QBe(r):XBe(r,t);for(const r of It(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ax(i,a,t,"scale",z8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Gtn(e,t){const n=t.bin;if(ps(n)){const r=Fae(e,t.field,n);return new Ma(()=>e.getSignalName(r))}else if(du(n)&&aS(n)&&n.step!==void 0)return{step:n.step}}function Ytn(e,t){if(Ir([uf,vg,bg],e)&&t!=="nominal")return"hcl"}function Ktn(e,t,n,r,i,s){var o;if(!((o=Qp(s))!=null&&o.bin||ft(n)||i!=null||r!=null||Ir([pu.TIME,pu.UTC],e)))return No(t)?!0:void 0}function Xtn(e,t,n,r,i,s){if(No(e)){if(b0(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!($t(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===pu.POINT)return n.pointPadding}}function Qtn(e,t,n,r,i,s=!1){if(e===void 0){if(No(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Do(o,n==="bar"?a:n==="tick"?l:u)}else if(_O(t)&&r===pu.BAND)return i.offsetBandPaddingInner}}function Jtn(e,t,n,r,i,s=!1){if(e===void 0){if(No(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===pu.BAND)return Do(o,pn(r)?{signal:`${r.signal}/2`}:r/2)}else if(_O(t)){if(n===pu.POINT)return .5;if(n===pu.BAND)return i.offsetBandPaddingOuter}}}function Ztn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Kp(e)&&t==="descending"?pn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Kp(e)&&t==="descending")return!0}function enn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Kp(i)){if(ft(n)){const u=n[0],l=n[n.length-1];if(bi(u)&&u<=0&&bi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!hA(i))return!0;if(!($t(t)&&t.bin)&&Ir([...j1,...VYt],e)){const{orient:u,type:l}=r;return Ir(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ir(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function tnn(e,t,n,r,i=!1){const s=nnn(t,n,r,i),{type:o}=e;return _g(t)?o!==void 0?QXt(t,o)?$t(n)&&!XXt(o,n.type)?(Pt(JKt(o,s)),s):o:(Pt(QKt(t,o,s)),s):s:null}function nnn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(sC(e)||lq(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Pt(cq(e,"ordinal")),"ordinal";if(uq(e))return"band";if(No(e)||_O(e)){if(Ir(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Foe)return"band";const s=n[cf(e)];return wE(s)||mA(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return sC(e)?"time":lq(e)==="discrete"?(Pt(cq(e,"temporal")),"ordinal"):$t(t)&&t.timeUnit&&Va(t.timeUnit).utc?"utc":uq(e)?"band":"time";case"quantitative":return sC(e)?$t(t)&&ps(t.bin)?"bin-ordinal":"linear":lq(e)==="discrete"?(Pt(cq(e,"quantitative")),"ordinal"):uq(e)?"band":"linear";case"geojson":return}throw new Error(h5e(t.type))}function rnn(e,{ignoreRange:t}={}){ZBe(e),VBe(e);for(const n of KXt)XBe(e,n);t||QBe(e)}function ZBe(e){zs(e)?e.component.scales=inn(e):e.component.scales=onn(e)}function inn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Boe){const o=fa(t[s]);if(o&&n===B5e&&s===lf&&o.type===LI)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=c8e(t,s),l=tnn(a,s,o,r,u);i[s]=new qBe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const snn=z8e((e,t)=>X1e(e)-X1e(t));function onn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){ZBe(s);for(const o of It(s.component.scales))if((t=i.scale)[o]??(t[o]=RBe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?BXt(a.value,u.value)?r[o]=ax(a,u,"type","scale",snn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of It(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new qBe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class wq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function zs(e){return(e==null?void 0:e.type)==="unit"}function ad(e){return(e==null?void 0:e.type)==="facet"}function Vae(e){return(e==null?void 0:e.type)==="concat"}function UI(e){return(e==null?void 0:e.type)==="layer"}class Hae{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=hu(a),this.name=t.name??i,this.title=Vv(t.title)?{text:t.title}:t.title?hu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new wq,this.projectionNameMap=r?r.projectionNameMap:new wq,this.signalNameMap=r?r.signalNameMap:new wq,this.data=t.data,this.description=t.description,this.transforms=fZt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:mJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:I7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new z1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){rnn(this)}parseProjection(){jBe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){MBe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of It(r)){const o=r[s];o!==void 0&&(i[s]=ws(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ws(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Gi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Cen(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of oh)t[r].title&&n.push(xen(this,r));for(const r of Oae)n=n.concat(_en(this,r));return n}assembleAxes(){return aen(this.component.axes,this.config)}assembleLegends(){return $Be(this)}assembleProjections(){return Ken(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...i5e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ir(["unit","layer"],this.type)?Ir(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Gi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ad(this.parent)?HBe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ms((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Hs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ad(this.parent)){const n=IBe(t),r=y7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(qa(s)&&uS(o)){const a=i.get("name"),u=V7(this,r),l=zae(u);if(l){const c=Vt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:ABe(a,i,c)}}else return Pt(zoe(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(XFe(t)&&_g(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(hKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class e9e extends Hae{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Vt(r,n)}reduceFieldDef(t,n){return HQt(this.getMapping(),(r,i,s)=>{const o=Qp(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){gae(this.getMapping(),(r,i)=>{const s=Qp(r);s&&t(s,i)},n)}}class H7 extends Bi{clone(){return new H7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Lr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class q7 extends Bi{clone(){return new q7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Lr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class W7 extends Bi{clone(){return new W7(this.parent,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Lr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class G7 extends Bi{clone(){return new G7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Lr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class uC extends Bi{clone(){return new uC(null,qn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[dm,fm],[yh,hm]]){const s=i.map(o=>{const a=fa(n.encoding[o]);return $t(a)?a.field:wg(a)?{expr:`${a.datum}`}:Xp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new uC(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(lf)){const i=n.typedFieldDef(lf);i.type===LI&&(t=new uC(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Gt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Lr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class FP extends Bi{clone(){return new FP(null,this.projection,qn(this.fields),qn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[dm,fm],[yh,hm]]){const i=r.map(o=>{const a=fa(n.encoding[o]);return $t(a)?a.field:wg(a)?{expr:`${a.datum}`}:Xp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===yh?"2":"";(i[0]||i[1])&&(t=new FP(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Gt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Lr(this.fields)} ${Lr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Gw extends Bi{clone(){return new Gw(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Gw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if($t(i)&&$t(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=h8e(n.mark,r);return new Gw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Lr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:WJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Y7 extends Bi{clone(){return new Y7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Lr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class BP extends Bi{clone(){return new BP(null,qn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(GJt(o)){let u=r9e(o.data,s);u||(u=new CE(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Qc(u,l,Hs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(YJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ms(u),u)}catch{throw new Error(yKt(u))}if(a=l.materialized,!a)throw new Error(vKt(u))}return new BP(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Lr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Wt(this.transform.as)}:{}};else{let n=this.transform.as;Gt(n)||(Pt(kKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class K7 extends Bi{clone(){return new K7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Lr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class X7 extends Bi{clone(){return new X7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Lr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Q7 extends Bi{clone(){return new Q7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=v0((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Lr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class J7 extends Bi{clone(){return new J7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Lr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function t9e(e){let t=0;function n(r,i){if(r instanceof CE&&!r.isGenerator&&!yA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ol&&(r.parent instanceof CE&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof BI){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof DO||r instanceof NO||r instanceof wA||r instanceof FI||r instanceof bA||r instanceof FP||r instanceof Fp||r instanceof BP||r instanceof jI||r instanceof hS||r instanceof G7||r instanceof W7||r instanceof H7||r instanceof Y7||r instanceof K7||r instanceof X7||r instanceof ux||r instanceof J7||r instanceof Q7||r instanceof q7)&&i.transform.push(r.assemble()),(r instanceof O0||r instanceof N0||r instanceof Gw||r instanceof Yy||r instanceof uC)&&i.transform.push(...r.assemble()),r instanceof Qc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Qc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Qc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function ann(e){const t=[],n=t9e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function unn(e,t){const n=[],r=t9e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function lnn(e){return e==="top"||e==="left"||pn(e)?"header":"footer"}function cnn(e){for(const t of oh)fnn(e,t);qve(e,"x"),qve(e,"y")}function fnn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=_A("title",null,r,t);let l=oC(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=ft(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=_A("labelOrient",a.header,r,t),f=a.header!==null?Do((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Ir(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[n9e(e,t,f)]}}}function n9e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function qve(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=$ae(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=lnn(a.get("orient"));o[u]??(o[u]=[n9e(e,s,!1)]);const l=AD(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function dnn(e){qae(e),H8(e,"width"),H8(e,"height")}function hnn(e){qae(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";H8(e,t),H8(e,n)}function qae(e){for(const t of e.children)t.parseLayoutSize()}function H8(e,t){const n=IBe(t),r=y7(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??RBe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ax(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function pnn(e){const{size:t,component:n}=e;for(const r of j1){const i=cf(r);if(t[i]){const s=t[i];n.layoutSize.set(i,rg(s)?"step":s,!0)}else{const s=mnn(e,i);n.layoutSize.set(i,s,!1)}}}function mnn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(qa(s)){const a=j8(r.view,t);return uS(o)||rg(a)?"step":a}else return bX(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return bX(r.view,t);{const s=j8(r.view,t);return rg(s)?s.step:s}}}function $X(e,t,n){return Vt(t,{suffix:`by_${Vt(e)}`,...n})}class pN extends e9e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Xae(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!TO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=It(t),r={};for(const i of n){if(![Hy,qy].includes(i)){Pt(x7(i,"facet"));break}const s=t[i];if(s.field===void 0){Pt(pX(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=mae(t,n);return r.header?r.header=hu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Rt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Z7(this),this.child.parseData()}parseLayoutSize(){qae(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>P0(t))&&Hoe(Voe)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),cnn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of oh)for(const r of Mae){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=_A("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=U7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof pN))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof pN?{...this.channelHasField("column")?{encode:{update:{columns:{field:Vt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof pN){if(this.child.channelHasField("column")){const i=Vt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of j1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(qa(o)&&uS(a)){const u=V7(this.child,i),l=zae(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Pt(zoe(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of oh){const f=this.facet[c];if(f){u.push(Vt(f));const{bin:d,sort:h}=f;if(ps(d)&&u.push(Vt(f,{binSuffix:"end"})),Wy(h)){const{field:p,op:m=A7}=h,g=$X(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(ft(h)){const p=xA(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Wy(r.sort)?[$X(r,r.sort,{expr:"datum"})]:ft(r.sort)?[xA(r,t,{expr:"datum"})]:[Vt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Wy(i)?i.order:!ft(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return RX(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Oae)if(t[s]){const o=_A("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return RX(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=ann(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:oh.map(u=>this.facetSortFields(u)).flat(),order:oh.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(RZt(this,[]))}]}getMapping(){return this.facet}}function gnn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Wy(s.sort)){const{field:o,op:a=A7}=s.sort;e=i=new hS(e,{joinaggregate:[{op:a,field:o,as:$X(s,s.sort,{forAs:!0})}],groupby:[Vt(s)]})}return i}return null}function r9e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if($P(e)&&$P(a)){if(ed(e.values,a.values))return o}else if(yA(e)&&yA(a)){if(e.url===a.url)return o}else if(V8e(e)&&e.name===o.dataName)return o}}return null}function ynn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new CE({values:[]});return t.push(r),r}const n=r9e(e.data,t);if(n)return Eb(e.data)||(n.data.format=FFe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new CE(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function vnn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(iZt(i))o=e=new bA(e,i),s="derived";else if(Aae(i)){const a=utn(i);o=e=ol.makeWithAncestors(e,{},a,n)??e,e=new FI(e,t,i.filter)}else if(F8e(i))o=e=O0.makeFromTransform(e,i,t),s="number";else if(oZt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ol(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=N0.makeFromTransform(e,i);else if(aZt(i))o=e=Fp.makeFromTransform(e,i),s="number",Pae(t)&&(e=new ux(e));else if($8e(i))o=e=BP.make(e,t,i,r++),s="derived";else if(tZt(i))o=e=new jI(e,i),s="number";else if(nZt(i))o=e=new hS(e,i),s="number";else if(uZt(i))o=e=Yy.makeFromTransform(e,i),s="derived";else if(lZt(i))o=e=new G7(e,i),s="derived";else if(cZt(i))o=e=new q7(e,i),s="derived";else if(rZt(i))o=e=new W7(e,i),s="derived";else if(KJt(i))o=e=new Q7(e,i),s="derived";else if(eZt(i))e=new J7(e,i);else if(sZt(i))o=e=Gw.makeFromTransform(e,i),s="derived";else if(XJt(i))o=e=new H7(e,i),s="derived";else if(QJt(i))o=e=new K7(e,i),s="derived";else if(JJt(i))o=e=new X7(e,i),s="derived";else if(ZJt(i))o=e=new Y7(e,i),s="derived";else{Pt(IKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function Z7(e){var g;let t=ynn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Eb(i)||yA(i)||$P(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new wZt;Eb(i)?(H8e(i)?t=new NO(t,i.sequence):Iae(i)&&(t=new DO(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=ol.makeExplicit(t,e,o)??t,t=new ux(t);const a=e.parent&&UI(e.parent);(zs(e)||ad(e))&&a&&(t=O0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=vnn(t,e,o));const u=ctn(e),l=ltn(e);t=ol.makeWithAncestors(t,{},{...u,...l},o)??t,zs(e)&&(t=uC.parseAll(t,e),t=FP.parseAll(t,e)),(zs(e)||ad(e))&&(a||(t=O0.makeFromEncoding(t,e)??t),t=N0.makeFromEncoding(t,e)??t,t=bA.parseAllForSortIndex(t,e));const c=t=eM(Hs.Raw,e,t);if(zs(e)){const v=Fp.makeFromEncoding(t,e);v&&(t=v,Pae(e)&&(t=new ux(t))),t=Gw.makeFromEncoding(t,e)??t,t=Yy.makeFromEncoding(t,e)??t}let f,d;if(zs(e)){const{markDef:v,mark:b,config:w}=e,E=Hi("invalid",v,w),{marks:T,scales:C}=d=W8e({invalid:E,isPath:Hx(b)});T!==C&&C==="include-invalid-values"&&(f=t=eM(Hs.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=wA.make(t,e,d)??t)}const h=t=eM(Hs.Main,e,t);let p;if(zs(e)&&d){const{marks:v,scales:b}=d;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=wA.make(t,e,d)??t,p=t=eM(Hs.PostFilterInvalid,e,t))}zs(e)&&sen(e,h);let m=null;if(ad(e)){const v=e.getName("facet");t=gnn(t,e.facet)??t,m=new BI(t,e,v,h.getSource()),n[v]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function eM(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Qc(n,s,e,i);return r[s]=o,o}class bnn extends Hae{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Pt(TKt),this.children=this.getChildren(t).map((l,c)=>Xae(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Z7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>P0(t))&&Hoe(Voe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return O7(t)?t.vconcat:Tae(t)?t.hconcat:t.concat}parseLayoutSize(){hnn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Lae(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function xnn(e){return e===!1||e===null}const _nn={disable:1,gridScale:1,scale:1,...a8e,labelExpr:1,encode:1},i9e=It(_nn);class Wae extends z1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Wae(qn(this.explicit),qn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!xnn(this.get(t))}hasOrientSignalRef(){return pn(this.explicit.orient)}}function wnn(e,t,n){const{encoding:r,config:i}=e,s=fa(r[t])??fa(r[xg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(EE(u))return{text:Rp({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(pA(s)==="quantitative"){if(mA(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Rp({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Rp({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(pA(s)==="temporal"&&i.timeFormatType&&$t(s)&&!s.timeUnit)return{text:Rp({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Enn(e){return j1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Rnn(n,e)]),t),{})}const Snn={bottom:"top",top:"bottom",left:"right",right:"left"};function Tnn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of It(i.component.axes))n.axis[s]=$ae(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Cnn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of j1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!pn(a)){if(r[a]>0&&!u){const l=Snn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Cnn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Ann(i,s)}}}else return t.map(n=>n.clone());return e}function Ann(e,t){for(const n of i9e){const r=ax(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return f5e(i,s);case"gridScale":return{explicit:i.explicit,value:Do(i.value,s.value)}}return L7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Inn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(pn(n.labelAngle)?n.labelAngle:MP(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===EBe(r,i))return!0}return e===n[t]}const knn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Rnn(e,t){var v,b;let n=t.axis(e);const r=new Wae,i=fa(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((v=o[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=o.axis)==null?void 0:b.orient)||men(e),u=t.getScaleComponent(e).get("type"),l=uen(e,u,a,t.config),c=n!==void 0?!n:IX("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=den(i,n,e,o.style,l),d=G5e(n.formatType,i,u),h=W5e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const w of i9e){const E=w in Rve?Rve[w](p):rve(w)?n[w]:void 0,T=E!==void 0,C=Inn(E,w,n,t,e);if(T&&C)r.set(w,E,C);else{const{configValue:I=void 0,configFrom:R=void 0}=rve(w)&&w!=="values"?IX(w,o.style,n.style,l):{},N=I!==void 0;T&&!N?r.set(w,E,C):(R!=="vgAxisConfig"||knn.has(w)&&N||kO(I)||pn(I))&&r.set(w,I,!1)}}const m=n.encoding??{},g=o8e.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const T=kBe(m[E]??{},t),C=E==="labels"?wnn(t,e,T):T;return C!==void 0&&!Gi(C)&&(w[E]={update:C}),w},{});return Gi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Dnn({encoding:e,size:t}){for(const n of j1){const r=cf(n);rg(t[r])&&lb(e[n])&&(delete t[r],Pt(g5e(r)))}return t}const Nnn={vgMark:"arc",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...v1(e,"radius"),...v1(e,"theta")})},Pnn={vgMark:"area",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...U8("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...U8("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Nae(e)})},Onn={vgMark:"rect",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...v1(e,"x"),...v1(e,"y")})},Mnn={vgMark:"shape",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&$t(n)&&n.type===LI?{field:Vt(n,{expr:"datum"})}:{}}]}},Lnn={vgMark:"image",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...v1(e,"x"),...v1(e,"y"),...Rae(e,"url")})},$nn={vgMark:"line",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e,{vgChannel:"strokeWidth"}),...Nae(e)})},Fnn={vgMark:"trail",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e),...Nae(e)})};function Gae(e,t){const{config:n}=e;return{...Nh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e),...yu("angle",e),...Bnn(e,n,t)}}function Bnn(e,t,n){return n?{shape:{value:n}}:yu("shape",e)}const jnn={vgMark:"symbol",encodeEntry:e=>Gae(e)},Unn={vgMark:"symbol",encodeEntry:e=>Gae(e,"circle")},znn={vgMark:"symbol",encodeEntry:e=>Gae(e,"square")},Vnn={vgMark:"rect",encodeEntry:e=>({...Nh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...v1(e,"x"),...v1(e,"y")})},Hnn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Nh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...U8("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...U8("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...yu("size",e,{vgChannel:"strokeWidth"})}}},qnn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Nh(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...Rae(e),...yu("size",e,{vgChannel:"fontSize"}),...yu("angle",e),...Cve("align",Wnn(e.markDef,n,t)),...Cve("baseline",Gnn(e.markDef,n,t)),...ql("radius",e,{defaultPos:null}),...ql("theta",e,{defaultPos:null})}}};function Wnn(e,t,n){if(Hi("align",e,n)===void 0)return"center"}function Gnn(e,t,n){if(Hi("baseline",e,n)===void 0)return"middle"}const Ynn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Nh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...v1(e,i),...ql(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:ws(Hi("thickness",n,t))}}},tM={arc:Nnn,area:Pnn,bar:Onn,circle:Unn,geoshape:Mnn,image:Lnn,line:$nn,point:jnn,rect:Vnn,rule:Hnn,square:znn,text:qnn,tick:Ynn,trail:Fnn};function Knn(e){if(Ir([T7,E7,tQt],e.mark)){const t=h8e(e.mark,e.encoding);if(t.length>0)return Xnn(e,t)}else if(e.mark===S7){const t=dX.some(n=>Hi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Qnn(e)}return Yae(e)}const Wve="faceted_path_";function Xnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Wve+e.requestDataName(Hs.Main),data:e.requestDataName(Hs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Yae(e,{fromPrefix:Wve})}]}const Gve="stack_group_";function Qnn(e){var l;const[t]=Yae(e,{fromPrefix:Gve}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...uA(t.encode.update,["y","yc","y2","height",...dX]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Xc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...uA(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Xc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of dX){const f=tg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ws(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Vt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Vt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=tg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ws(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Hs.Main),name:Gve+e.requestDataName(Hs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Jnn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!ft(o)&&Xp(o)&&cX(o.value)||!o&&cX(Hi("order",i,s)))){if((ft(o)||$t(o))&&!n)return u5e(o,{expr:"datum"});if(Hx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if($t(u))return{field:a}}}}function Yae(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Do(r.clip,Znn(e),ern(e)),a=o5e(r),u=i.key,l=Jnn(e),c=trn(e),f=Hi("aria",r,s),d=tM[n].postEncodingTransform?tM[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:tM[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Hs.Main)},encode:{update:tM[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Znn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function ern(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function trn(e){if(!e.component.selection)return null;const t=It(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=It(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class s9e extends e9e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,sve(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+Y8e)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=ng(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=FJt(o,s,{graticule:t.data&&Iae(t.data)}));const u=this.encoding=zQt(t.encoding||{},a,o.filled,s);this.markDef=O8e(o,u,s),this.size=Dnn({encoding:u,size:sve(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=P8e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Eae(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===B5e,r=t&&OYt.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Boe.reduce((r,i)=>{const s=fa(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=hu(t);return ft(n)&&(i.domain=n.map(Yf)),ft(r)&&(i.range=r.map(Yf)),i}initAxes(t){return j1.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===$s&&Qn(t.x2)||r===Ya&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=It(t),r={};for(const i of n){const s=t[i];r[i]=kO(s)?s5e(s):Yf(s)}return r}initLegends(t){return qYt.reduce((n,r)=>{const i=fa(t[r]);if(i&&GYt(r)){const s=i.legend;n[r]=s&&hu(s)}return n},{})}parseData(){this.component.data=Z7(this)}parseLayoutSize(){pnn(this)}parseSelections(){this.component.selection=ien(this,this.selection)}parseMarkGroup(){this.component.mark=Knn(this)}parseAxesAndHeaders(){this.component.axes=Enn(this)}assembleSelectionTopLevelSignals(t){return DZt(this,t)}assembleSignals(){return[...xBe(this),...kZt(this,[])]}assembleSelectionData(t){return NZt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Lae(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!UI(this.parent))&&(t=J8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return qw(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Qp(n)}typedFieldDef(t){const n=this.fieldDef(t);return tc(n)?n:null}}class Kae extends Hae{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(M7(a))return new Kae(a,this,this.getName(`layer_${u}`),o,s);if(U1(a))return new s9e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Uoe(a))})}parseData(){this.component.data=Z7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){dnn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>P0(t))&&Hoe(Voe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Tnn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),xBe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Lae(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Wt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return PZt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),$Be(this))}}function Xae(e,t,n,r,i){if(I7(e))return new pN(e,t,n,i);if(M7(e))return new Kae(e,t,n,r,i);if(U1(e))return new s9e(e,t,n,r,i);if(dJt(e))return new bnn(e,t,n,i);throw new Error(Uoe(e))}function nrn(e,t={}){t.logger&&mXt(t.logger),t.fieldTitle&&r8e(t.fieldTitle);try{const n=N8e(EI(t.config,e.config)),r=U8e(e,n),i=Xae(r,null,"",void 0,n);return i.parse(),Ctn(i.component.data,i),{spec:irn(i,rrn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&gXt(),t.fieldTitle&&PQt()}}function rrn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Gt(t)&&(t={type:t}),i&&s&&bZt(t.type)){if(i==="step"&&s==="step")Pt(V1e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Pt(V1e(y7(o)));const a=o==="width"?"height":"width";t.type=xZt(a)}}return{...It(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...yve(n,!1),...yve(e,!0)}}function irn(e,t,n={},r){const i=e.config?CJt(e.config):void 0,s=unn(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...I8e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const srn=IYt.version,orn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:cA,accessPathWithDatum:Doe,accessWithDatumToUnescapedPath:$i,compile:nrn,contains:Ir,deepEqual:ed,deleteNestedProperty:D8,duplicate:qn,entries:ix,every:Ioe,fieldIntersection:Roe,flatAccessWithDatum:jFe,getFirstDefined:Do,hasIntersection:koe,hasProperty:Rt,hash:Lr,internalField:VFe,isBoolean:OP,isEmpty:Gi,isEqual:RYt,isInternalField:HFe,isNullOrFalse:cX,isNumeric:f7,keys:It,logicalExpr:dN,mergeDeep:FFe,never:$Fe,normalize:U8e,normalizeAngle:MP,omit:Xc,pick:uA,prefixGenerator:fX,removePathFromField:OI,replaceAll:yE,replacePathInField:gh,resetIdCounter:NYt,setEqual:BFe,some:lA,stringify:Yi,titleCase:vO,unique:v0,uniqueId:zFe,vals:Eu,varName:Ms,version:srn},Symbol.toStringTag,{value:"Module"}));function o9e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var arn="vega-themes",urn="2.15.0",lrn="Themes for stylized Vega and Vega-Lite visualizations.",crn=["vega","vega-lite","themes","style"],frn="BSD-3-Clause",drn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},hrn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],prn="build/vega-themes.js",Qae="build/vega-themes.module.js",mrn="build/vega-themes.min.js",grn="build/vega-themes.min.js",yrn="build/vega-themes.module.d.ts",vrn={type:"git",url:"https://github.com/vega/vega-themes.git"},brn=["src","build"],xrn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},_rn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},wrn={vega:"*","vega-lite":"*"},Ern={},Srn={name:arn,version:urn,description:lrn,keywords:crn,license:frn,author:drn,contributors:hrn,main:prn,module:Qae,unpkg:mrn,jsdelivr:grn,types:yrn,repository:vrn,files:brn,scripts:xrn,devDependencies:_rn,peerDependencies:wrn,dependencies:Ern};const JT="#fff",Yve="#888",Trn={background:"#333",view:{stroke:Yve},title:{color:JT,subtitleColor:JT},style:{"guide-label":{fill:JT},"guide-title":{fill:JT}},axis:{domainColor:JT,gridColor:Yve,tickColor:JT}},L_="#4572a7",Crn={background:"#fff",arc:{fill:L_},area:{fill:L_},line:{stroke:L_,strokeWidth:2},path:{stroke:L_},rect:{fill:L_},shape:{stroke:L_},symbol:{fill:L_,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},$_="#30a2da",Eq="#cbcbcb",Arn="#999",Irn="#333",Kve="#f0f0f0",Xve="#333",krn={arc:{fill:$_},area:{fill:$_},axis:{domainColor:Eq,grid:!0,gridColor:Eq,gridWidth:1,labelColor:Arn,labelFontSize:10,titleColor:Irn,tickColor:Eq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Kve,group:{fill:Kve},legend:{labelColor:Xve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Xve,titleFontSize:14,titlePadding:10},line:{stroke:$_,strokeWidth:2},path:{stroke:$_,strokeWidth:.5},rect:{fill:$_},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:$_},bar:{binSpacing:2,fill:$_,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},F_="#000",Rrn={group:{fill:"#e5e5e5"},arc:{fill:F_},area:{fill:F_},line:{stroke:F_},path:{stroke:F_},rect:{fill:F_},shape:{stroke:F_},symbol:{fill:F_,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Drn=22,Nrn="normal",Qve="Benton Gothic, sans-serif",Jve=11.5,Prn="normal",B_="#82c6df",Sq="Benton Gothic Bold, sans-serif",Zve="normal",ebe=13,OR={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Orn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Sq,fontSize:Drn,fontWeight:Nrn},arc:{fill:B_},area:{fill:B_},line:{stroke:B_,strokeWidth:2},path:{stroke:B_},rect:{fill:B_},shape:{stroke:B_},symbol:{fill:B_,size:30},axis:{labelFont:Qve,labelFontSize:Jve,labelFontWeight:Prn,titleFont:Sq,titleFontSize:ebe,titleFontWeight:Zve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Qve,labelFontSize:Jve,symbolType:"square",titleFont:Sq,titleFontSize:ebe,titleFontWeight:Zve},range:{category:OR["category-6"],diverging:OR["fireandice-6"],heatmap:OR["fire-7"],ordinal:OR["fire-7"],ramp:OR["fire-7"]}},j_="#ab5787",nM="#979797",Mrn={background:"#f9f9f9",arc:{fill:j_},area:{fill:j_},line:{stroke:j_},path:{stroke:j_},rect:{fill:j_},shape:{stroke:j_},symbol:{fill:j_,size:30},axis:{domainColor:nM,domainWidth:.5,gridWidth:.2,labelColor:nM,tickColor:nM,tickWidth:.2,titleColor:nM},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},U_="#3e5c69",Lrn={background:"#fff",arc:{fill:U_},area:{fill:U_},line:{stroke:U_},path:{stroke:U_},rect:{fill:U_},shape:{stroke:U_},symbol:{fill:U_},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Wd="#1696d2",tbe="#000000",$rn="#FFFFFF",rM="Lato",Tq="Lato",Frn="Lato",Brn="#DEDDDD",jrn=18,MR={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Urn={background:$rn,title:{anchor:"start",fontSize:jrn,font:rM},axisX:{domain:!0,domainColor:tbe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Tq,labelAngle:0,tickColor:tbe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:rM},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Brn,gridWidth:1,labelFontSize:12,labelFont:Tq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:rM,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Tq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:rM,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:MR["six-groups-cat-1"],diverging:MR["diverging-colors"],heatmap:MR["diverging-colors"],ordinal:MR["six-groups-seq"],ramp:MR["shades-blue"]},area:{fill:Wd},rect:{fill:Wd},line:{color:Wd,stroke:Wd,strokeWidth:5},trail:{color:Wd,stroke:Wd,strokeWidth:0,size:1},path:{stroke:Wd,strokeWidth:.5},point:{filled:!0},text:{font:Frn,color:Wd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Wd,stroke:null}},arc:{fill:Wd},shape:{stroke:Wd},symbol:{fill:Wd,size:30}},z_="#3366CC",nbe="#ccc",iM="Arial, sans-serif",zrn={arc:{fill:z_},area:{fill:z_},path:{stroke:z_},rect:{fill:z_},shape:{stroke:z_},symbol:{stroke:z_},circle:{fill:z_},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:iM,fontSize:12},"guide-title":{font:iM,fontSize:12},"group-title":{font:iM,fontSize:12}},title:{font:iM,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:nbe,tickColor:nbe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Jae=e=>e*(1/3+1),rbe=Jae(9),ibe=Jae(10),sbe=Jae(12),LR="Segoe UI",obe="wf_standard-font, helvetica, arial, sans-serif",abe="#252423",$R="#605E5C",ube="transparent",Vrn="#C8C6C4",up="#118DFF",Hrn="#12239E",qrn="#E66C37",Wrn="#6B007B",Grn="#E044A7",Yrn="#744EC2",Krn="#D9B300",Xrn="#D64550",a9e=up,u9e="#DEEFFF",lbe=[u9e,a9e],Qrn=[u9e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",a9e],Jrn={view:{stroke:ube},background:ube,font:LR,header:{titleFont:obe,titleFontSize:sbe,titleColor:abe,labelFont:LR,labelFontSize:ibe,labelColor:$R},axis:{ticks:!1,grid:!1,domain:!1,labelColor:$R,labelFontSize:rbe,titleFont:obe,titleColor:abe,titleFontSize:sbe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Vrn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:up},line:{stroke:up,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:LR,fontSize:rbe,fill:$R},arc:{fill:up},area:{fill:up,line:!0,opacity:.6},path:{stroke:up},rect:{fill:up},point:{fill:up,filled:!0,size:75},shape:{stroke:up},symbol:{fill:up,strokeWidth:1.5,size:50},legend:{titleFont:LR,titleFontWeight:"bold",titleColor:$R,labelFont:LR,labelFontSize:ibe,labelColor:$R,symbolType:"circle",symbolSize:75},range:{category:[up,Hrn,qrn,Wrn,Grn,Yrn,Krn,Xrn],diverging:lbe,heatmap:lbe,ordinal:Qrn}},Cq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Zrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Aq=400,sM={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},ein=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],tin=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function eU({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=sM.gridBg[e],i=sM.textPrimary[e],s=sM.textSecondary[e],o=n==="dark"?ein:tin,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Cq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Zrn,labelFontWeight:Aq,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:sM.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Cq,fill:s,fontWeight:Aq},"guide-title":{font:Cq,fill:s,fontWeight:Aq}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const nin=eU({theme:"white",background:"#ffffff"}),rin=eU({theme:"g10",background:"#f4f4f4"}),iin=eU({theme:"g90",background:"#262626"}),sin=eU({theme:"g100",background:"#161616"}),oin=Srn.version,ain=Object.freeze(Object.defineProperty({__proto__:null,carbong10:rin,carbong100:sin,carbong90:iin,carbonwhite:nin,dark:Trn,excel:Crn,fivethirtyeight:krn,ggplot2:Rrn,googlecharts:zrn,latimes:Orn,powerbi:Jrn,quartz:Mrn,urbaninstitute:Urn,version:oin,vox:Lrn},Symbol.toStringTag,{value:"Module"}));function uin(e,t,n,r){if(ft(e))return`[${e.map(i=>t(Gt(i)?i:cbe(i,n))).join(", ")}]`;if(Ht(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ht(c)&&(c=cbe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function lin(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function cbe(e,t){return JSON.stringify(e,lin(t))}var cin=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const l9e="vg-tooltip-element",fin={offsetX:10,offsetY:10,id:l9e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:din,maxDepth:2,formatTooltip:uin,baseURL:""};function din(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function hin(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return cin.toString().replace(l9e,e)}function pin(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class min{constructor(t){this.options={...fin,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=hin(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=pin(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Iq={};function gin(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kq,fbe;function yin(){return fbe||(fbe=1,kq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),kq}var vin=_i;_i.Node=AE;_i.create=_i;function _i(e){var t=this;if(t instanceof _i||(t=new _i),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}_i.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};_i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};_i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};_i.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)xin(this,arguments[e]);return this.length};_i.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_in(this,arguments[e]);return this.length};_i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};_i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};_i.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};_i.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};_i.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};_i.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};_i.prototype.map=function(e,t){t=t||this;for(var n=new _i,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};_i.prototype.mapReverse=function(e,t){t=t||this;for(var n=new _i,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};_i.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};_i.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};_i.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};_i.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};_i.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};_i.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};_i.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=bin(this,i,n[r]);return s};_i.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function bin(e,t,n){var r=t===e.head?new AE(n,null,t,e):new AE(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function xin(e,t){e.tail=new AE(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _in(e,t){e.head=new AE(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function AE(e,t,n,r){if(!(this instanceof AE))return new AE(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{yin()(_i)}catch{}const win=vin,pw=Symbol("max"),my=Symbol("length"),ZT=Symbol("lengthCalculator"),mN=Symbol("allowStale"),Ow=Symbol("maxAge"),fy=Symbol("dispose"),dbe=Symbol("noDisposeOnSet"),Da=Symbol("lruList"),cp=Symbol("cache"),c9e=Symbol("updateAgeOnGet"),Rq=()=>1;class Ein{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[pw]=t.max||1/0;const n=t.length||Rq;if(this[ZT]=typeof n!="function"?Rq:n,this[mN]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ow]=t.maxAge||0,this[fy]=t.dispose,this[dbe]=t.noDisposeOnSet||!1,this[c9e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[pw]=t||1/0,FR(this)}get max(){return this[pw]}set allowStale(t){this[mN]=!!t}get allowStale(){return this[mN]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Ow]=t,FR(this)}get maxAge(){return this[Ow]}set lengthCalculator(t){typeof t!="function"&&(t=Rq),t!==this[ZT]&&(this[ZT]=t,this[my]=0,this[Da].forEach(n=>{n.length=this[ZT](n.value,n.key),this[my]+=n.length})),FR(this)}get lengthCalculator(){return this[ZT]}get length(){return this[my]}get itemCount(){return this[Da].length}rforEach(t,n){n=n||this;for(let r=this[Da].tail;r!==null;){const i=r.prev;hbe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Da].head;r!==null;){const i=r.next;hbe(this,t,r,n),r=i}}keys(){return this[Da].toArray().map(t=>t.key)}values(){return this[Da].toArray().map(t=>t.value)}reset(){this[fy]&&this[Da]&&this[Da].length&&this[Da].forEach(t=>this[fy](t.key,t.value)),this[cp]=new Map,this[Da]=new win,this[my]=0}dump(){return this[Da].map(t=>q8(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Da]}set(t,n,r){if(r=r||this[Ow],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[ZT](n,t);if(this[cp].has(t)){if(s>this[pw])return lC(this,this[cp].get(t)),!1;const u=this[cp].get(t).value;return this[fy]&&(this[dbe]||this[fy](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[my]+=s-u.length,u.length=s,this.get(t),FR(this),!0}const o=new Sin(t,n,s,i,r);return o.length>this[pw]?(this[fy]&&this[fy](t,n),!1):(this[my]+=o.length,this[Da].unshift(o),this[cp].set(t,this[Da].head),FR(this),!0)}has(t){if(!this[cp].has(t))return!1;const n=this[cp].get(t).value;return!q8(this,n)}get(t){return Dq(this,t,!0)}peek(t){return Dq(this,t,!1)}pop(){const t=this[Da].tail;return t?(lC(this,t),t.value):null}del(t){lC(this,this[cp].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[cp].forEach((t,n)=>Dq(this,n,!1))}}const Dq=(e,t,n)=>{const r=e[cp].get(t);if(r){const i=r.value;if(q8(e,i)){if(lC(e,r),!e[mN])return}else n&&(e[c9e]&&(r.value.now=Date.now()),e[Da].unshiftNode(r));return i.value}},q8=(e,t)=>{if(!t||!t.maxAge&&!e[Ow])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Ow]&&n>e[Ow]},FR=e=>{if(e[my]>e[pw])for(let t=e[Da].tail;e[my]>e[pw]&&t!==null;){const n=t.prev;lC(e,t),t=n}},lC=(e,t)=>{if(t){const n=t.value;e[fy]&&e[fy](n.key,n.value),e[my]-=n.length,e[cp].delete(n.key),e[Da].removeNode(t)}};class Sin{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const hbe=(e,t,n,r)=>{let i=n.value;q8(e,i)&&(lC(e,n),e[mN]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Tin=Ein;const Cin=Object.freeze({loose:!0}),Ain=Object.freeze({}),Iin=e=>e?typeof e!="object"?Cin:e:Ain;var Zae=Iin,FX={exports:{}};const kin="2.0.0",f9e=256,Rin=Number.MAX_SAFE_INTEGER||9007199254740991,Din=16,Nin=f9e-6,Pin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var eue={MAX_LENGTH:f9e,MAX_SAFE_COMPONENT_LENGTH:Din,MAX_SAFE_BUILD_LENGTH:Nin,MAX_SAFE_INTEGER:Rin,RELEASE_TYPES:Pin,SEMVER_SPEC_VERSION:kin,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Oin=typeof process=="object"&&Iq&&Iq.NODE_DEBUG&&/\bsemver\b/i.test(Iq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var tU=Oin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=eue,s=tU;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},p=(m,g,v)=>{const b=h(g),w=c++;s(m,w,g),l[m]=w,u[w]=g,o[w]=new RegExp(g,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(FX,FX.exports);var tue=FX.exports;const pbe=/^[0-9]+$/,d9e=(e,t)=>{const n=pbe.test(e),r=pbe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Min=(e,t)=>d9e(t,e);var Lin={compareIdentifiers:d9e,rcompareIdentifiers:Min};const oM=tU,{MAX_LENGTH:mbe,MAX_SAFE_INTEGER:aM}=eue,{safeRe:gbe,t:ybe}=tue,$in=Zae,{compareIdentifiers:e2}=Lin;let Fin=class Vm{constructor(t,n){if(n=$in(n),t instanceof Vm){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>mbe)throw new TypeError(`version is longer than ${mbe} characters`);oM("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?gbe[ybe.LOOSE]:gbe[ybe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>aM||this.major<0)throw new TypeError("Invalid major version");if(this.minor>aM||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>aM||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<aM)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(oM("SemVer.compare",this.version,this.options,t),!(t instanceof Vm)){if(typeof t=="string"&&t===this.version)return 0;t=new Vm(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Vm||(t=new Vm(t,this.options)),e2(this.major,t.major)||e2(this.minor,t.minor)||e2(this.patch,t.patch)}comparePre(t){if(t instanceof Vm||(t=new Vm(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(oM("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return e2(r,i)}while(++n)}compareBuild(t){t instanceof Vm||(t=new Vm(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(oM("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return e2(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),e2(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var nue=Fin;const vbe=nue,Bin=(e,t,n)=>new vbe(e,n).compare(new vbe(t,n));var zI=Bin;const jin=zI,Uin=(e,t,n)=>jin(e,t,n)===0;var zin=Uin;const Vin=zI,Hin=(e,t,n)=>Vin(e,t,n)!==0;var qin=Hin;const Win=zI,Gin=(e,t,n)=>Win(e,t,n)>0;var Yin=Gin;const Kin=zI,Xin=(e,t,n)=>Kin(e,t,n)>=0;var Qin=Xin;const Jin=zI,Zin=(e,t,n)=>Jin(e,t,n)<0;var esn=Zin;const tsn=zI,nsn=(e,t,n)=>tsn(e,t,n)<=0;var rsn=nsn;const isn=zin,ssn=qin,osn=Yin,asn=Qin,usn=esn,lsn=rsn,csn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return isn(e,n,r);case"!=":return ssn(e,n,r);case">":return osn(e,n,r);case">=":return asn(e,n,r);case"<":return usn(e,n,r);case"<=":return lsn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var fsn=csn,Nq,bbe;function dsn(){if(bbe)return Nq;bbe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Nq=t;const n=Zae,{safeRe:r,t:i}=tue,s=fsn,o=tU,a=nue,u=h9e();return Nq}var Pq,xbe;function h9e(){if(xbe)return Pq;xbe=1;class e{constructor(H,Q){if(Q=r(Q),H instanceof e)return H.loose===!!Q.loose&&H.includePrerelease===!!Q.includePrerelease?H:new e(H.raw,Q);if(H instanceof i)return this.raw=H.value,this.set=[[H]],this.format(),this;if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=H.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(J=>this.parseRange(J.trim())).filter(J=>J.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const J=this.set[0];if(this.set=this.set.filter(ne=>!p(ne[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(const ne of this.set)if(ne.length===1&&m(ne[0])){this.set=[ne];break}}}this.format()}format(){return this.range=this.set.map(H=>H.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(H){const J=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+H,ne=n.get(J);if(ne)return ne;const Z=this.options.loose,ie=Z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];H=H.replace(ie,L(this.options.includePrerelease)),s("hyphen replace",H),H=H.replace(a[u.COMPARATORTRIM],l),s("comparator trim",H),H=H.replace(a[u.TILDETRIM],c),s("tilde trim",H),H=H.replace(a[u.CARETTRIM],f),s("caret trim",H);let q=H.split(" ").map(Y=>v(Y,this.options)).join(" ").split(/\s+/).map(Y=>O(Y,this.options));Z&&(q=q.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(a[u.COMPARATORLOOSE])))),s("range list",q);const U=new Map,G=q.map(Y=>new i(Y,this.options));for(const Y of G){if(p(Y))return[Y];U.set(Y.value,Y)}U.size>1&&U.has("")&&U.delete("");const V=[...U.values()];return n.set(J,V),V}intersects(H,Q){if(!(H instanceof e))throw new TypeError("a Range is required");return this.set.some(J=>g(J,Q)&&H.set.some(ne=>g(ne,Q)&&J.every(Z=>ne.every(ie=>Z.intersects(ie,Q)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let Q=0;Q<this.set.length;Q++)if(j(this.set[Q],H,this.options))return!0;return!1}}Pq=e;const t=Tin,n=new t({max:1e3}),r=Zae,i=dsn(),s=tU,o=nue,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=tue,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=eue,p=F=>F.value==="<0.0.0-0",m=F=>F.value==="",g=(F,H)=>{let Q=!0;const J=F.slice();let ne=J.pop();for(;Q&&J.length;)Q=J.every(Z=>ne.intersects(Z,H)),ne=J.pop();return Q},v=(F,H)=>(s("comp",F,H),F=T(F,H),s("caret",F),F=w(F,H),s("tildes",F),F=I(F,H),s("xrange",F),F=N(F,H),s("stars",F),F),b=F=>!F||F.toLowerCase()==="x"||F==="*",w=(F,H)=>F.trim().split(/\s+/).map(Q=>E(Q,H)).join(" "),E=(F,H)=>{const Q=H.loose?a[u.TILDELOOSE]:a[u.TILDE];return F.replace(Q,(J,ne,Z,ie,q)=>{s("tilde",F,J,ne,Z,ie,q);let U;return b(ne)?U="":b(Z)?U=`>=${ne}.0.0 <${+ne+1}.0.0-0`:b(ie)?U=`>=${ne}.${Z}.0 <${ne}.${+Z+1}.0-0`:q?(s("replaceTilde pr",q),U=`>=${ne}.${Z}.${ie}-${q} <${ne}.${+Z+1}.0-0`):U=`>=${ne}.${Z}.${ie} <${ne}.${+Z+1}.0-0`,s("tilde return",U),U})},T=(F,H)=>F.trim().split(/\s+/).map(Q=>C(Q,H)).join(" "),C=(F,H)=>{s("caret",F,H);const Q=H.loose?a[u.CARETLOOSE]:a[u.CARET],J=H.includePrerelease?"-0":"";return F.replace(Q,(ne,Z,ie,q,U)=>{s("caret",F,ne,Z,ie,q,U);let G;return b(Z)?G="":b(ie)?G=`>=${Z}.0.0${J} <${+Z+1}.0.0-0`:b(q)?Z==="0"?G=`>=${Z}.${ie}.0${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.0${J} <${+Z+1}.0.0-0`:U?(s("replaceCaret pr",U),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}-${U} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}-${U} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q}-${U} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}${J} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q} <${+Z+1}.0.0-0`),s("caret return",G),G})},I=(F,H)=>(s("replaceXRanges",F,H),F.split(/\s+/).map(Q=>R(Q,H)).join(" ")),R=(F,H)=>{F=F.trim();const Q=H.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return F.replace(Q,(J,ne,Z,ie,q,U)=>{s("xRange",F,J,ne,Z,ie,q,U);const G=b(Z),V=G||b(ie),Y=V||b(q),ee=Y;return ne==="="&&ee&&(ne=""),U=H.includePrerelease?"-0":"",G?ne===">"||ne==="<"?J="<0.0.0-0":J="*":ne&&ee?(V&&(ie=0),q=0,ne===">"?(ne=">=",V?(Z=+Z+1,ie=0,q=0):(ie=+ie+1,q=0)):ne==="<="&&(ne="<",V?Z=+Z+1:ie=+ie+1),ne==="<"&&(U="-0"),J=`${ne+Z}.${ie}.${q}${U}`):V?J=`>=${Z}.0.0${U} <${+Z+1}.0.0-0`:Y&&(J=`>=${Z}.${ie}.0${U} <${Z}.${+ie+1}.0-0`),s("xRange return",J),J})},N=(F,H)=>(s("replaceStars",F,H),F.trim().replace(a[u.STAR],"")),O=(F,H)=>(s("replaceGTE0",F,H),F.trim().replace(a[H.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=F=>(H,Q,J,ne,Z,ie,q,U,G,V,Y,ee,ae)=>(b(J)?Q="":b(ne)?Q=`>=${J}.0.0${F?"-0":""}`:b(Z)?Q=`>=${J}.${ne}.0${F?"-0":""}`:ie?Q=`>=${Q}`:Q=`>=${Q}${F?"-0":""}`,b(G)?U="":b(V)?U=`<${+G+1}.0.0-0`:b(Y)?U=`<${G}.${+V+1}.0-0`:ee?U=`<=${G}.${V}.${Y}-${ee}`:F?U=`<${G}.${V}.${+Y+1}-0`:U=`<=${U}`,`${Q} ${U}`.trim()),j=(F,H,Q)=>{for(let J=0;J<F.length;J++)if(!F[J].test(H))return!1;if(H.prerelease.length&&!Q.includePrerelease){for(let J=0;J<F.length;J++)if(s(F[J].semver),F[J].semver!==i.ANY&&F[J].semver.prerelease.length>0){const ne=F[J].semver;if(ne.major===H.major&&ne.minor===H.minor&&ne.patch===H.patch)return!0}return!1}return!0};return Pq}const hsn=h9e(),psn=(e,t,n)=>{try{t=new hsn(t,n)}catch{return!1}return t.test(e)};var msn=psn,p9e=gin(msn);function gsn(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var ysn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function m9e(e,...t){for(const n of t)vsn(e,n);return e}function vsn(e,t){for(const n of Object.keys(t))SI(e,n,t[n],!0)}const fp=YGt;let jP=orn;const uM=typeof window<"u"?window:void 0;var Zxe;jP===void 0&&((Zxe=uM==null?void 0:uM.vl)!=null&&Zxe.compile)&&(jP=uM.vl);const bsn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},xsn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},kD={vega:"Vega","vega-lite":"Vega-Lite"},W8={vega:fp.version,"vega-lite":jP?jP.version:"not available"},_sn={vega:e=>e,"vega-lite":(e,t)=>jP.compile(e,{config:t}).spec},wsn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Esn="chart-wrapper";function Ssn(e){return typeof e=="function"}function _be(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${kD[r]} JSON Source`}function Tsn(e,t){if(e.$schema){const n=o9e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${kD[n.library]}, but mode argument sets ${kD[t]??t}.`);const r=n.library;return p9e(W8[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${kD[r]} ${n.version}, but the current version of ${kD[r]} is v${W8[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function g9e(e){return!!(e&&"load"in e)}function wbe(e){return g9e(e)?e:fp.loader(e)}function Csn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Gt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Asn(e,t,n={}){let r,i;Gt(t)?(i=wbe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Csn(r),o=s.loader;(!i||o)&&(i=wbe(n.loader??o));const a=await Ebe(s,i),u=await Ebe(n,i),l={...m9e(u,a),config:EI(u.config??{},a.config??{})};return await ksn(e,r,l,i)}async function Ebe(e,t){const n=Gt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Gt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Isn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ksn(e,t,n={},r){const i=n.theme?EI(ain[n.theme],n.config??{}):n.config,s=Ox(n.actions)?n.actions:m9e({},bsn,n.actions??{}),o={...xsn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??fp.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:C,rootContainer:I}=Isn(c);if(!C.getElementById(T)){const R=document.createElement("style");R.id=T,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?ysn.toString():n.defaultStyle,I.appendChild(R)}}const f=Tsn(t,n.mode);let d=_sn[f](t,i);if(f==="vega-lite"&&d.$schema){const T=o9e(d.$schema);p9e(W8.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${W8.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const T=document.createElement("div");T.classList.add(Esn),c.appendChild(T),h=T}const p=n.patch;if(p&&(d=p instanceof Function?p(d):gj(d,p,!0,!1).newDocument),n.formatLocale&&fp.formatLocale(n.formatLocale),n.timeFormatLocale&&fp.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const C=n.expressionFunctions[T];"fn"in C?fp.expressionFunction(T,C.fn,C.visitor):C instanceof Function&&fp.expressionFunction(T,C)}const{ast:m}=n,g=fp.parse(d,f==="vega-lite"?{}:i,{ast:m}),v=new(n.viewClass||fp.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:fp.expressionInterpreter??n.expr??iYt}:{}});if(v.addSignalListener("autosize",(T,C)=>{const{type:I}=C;I=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):I=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):I=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:C}=n,I=T&&!g9e(T)?T==null?void 0:T.baseURL:void 0,R=Ssn(C)?C:new min({baseURL:I,...C===!0?{}:C}).call;v.tooltip(R)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:T,updateSet:C}=typeof b=="boolean"?{}:b;v.hover(T,C)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(s!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const I=document.createElement("details");I.title=o.CLICK_TO_VIEW_ACTIONS,c.append(I),T=I;const R=document.createElement("summary");R.innerHTML=wsn,I.append(R),w=N=>{I.contains(N.target)||I.removeAttribute("open")},document.addEventListener("click",w)}const C=document.createElement("div");if(T.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const I of["svg","png"])if(s===!0||s.export===!0||s.export[I]){const R=o[`${I.toUpperCase()}_ACTION`],N=document.createElement("a"),O=Ht(n.scaleFactor)?n.scaleFactor[I]:n.scaleFactor;N.text=R,N.href="#",N.target="_blank",N.download=`${l}.${I}`,N.addEventListener("mousedown",async function(L){L.preventDefault();const j=await v.toImageURL(I,O);this.href=j}),C.append(N)}}if(s===!0||s.source!==!1){const I=document.createElement("a");I.text=o.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(R){_be(RH(t),n.sourceHeader??"",n.sourceFooter??"",f),R.preventDefault()}),C.append(I)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const I=document.createElement("a");I.text=o.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(R){_be(RH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),C.append(I)}if(s===!0||s.editor!==!1){const I=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=o.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(N){gsn(window,I,{config:i,mode:f,renderer:a,spec:RH(t)}),N.preventDefault()}),C.append(R)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function Rsn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Dsn(e,t,n){n&&(Rsn(n)?n(e.data(t)):e.change(t,fp.changeset().remove(()=>!0).insert(n)))}function Nsn(e,t){Object.keys(t).forEach(n=>{Dsn(e,n,t[n])})}function y9e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const v9e=()=>{};function Oq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Psn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=y9e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!ZR(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Sbe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Mq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function RD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b9e extends fi.PureComponent{constructor(){super(...arguments),RD(this,"containerRef",fi.createRef()),RD(this,"resultPromise",void 0),RD(this,"handleError",t=>{const{onError:n=v9e}=this.props;n(t,this.containerRef.current),console.warn(t)}),RD(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=y9e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Psn(Mq(this.props),Mq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!oK(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Sbe(a,s),i&&Oq(a,i)),a.run()})}else oK(i,s)||this.modifyView(o=>{s&&Sbe(o,s),i&&Oq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Mq(this.props);this.resultPromise=Asn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Oq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return fi.createElement("div",{ref:this.containerRef,className:t,style:n})}}RD(b9e,"propTypes",{className:Yle.string,onError:Yle.func});function BX(){return BX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BX.apply(this,arguments)}function jX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Osn={};class rue extends fi.PureComponent{constructor(){super(...arguments),jX(this,"vegaEmbed",fi.createRef()),jX(this,"handleNewView",t=>{this.update();const{onNewView:n=v9e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){oK(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Nsn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return fi.createElement(b9e,BX({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}jX(rue,"defaultProps",{data:Osn});function UX(){return UX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UX.apply(this,arguments)}function Tbe(e){return fi.createElement(rue,UX({},e,{mode:"vega-lite"}))}function Msn({currentConfig:e,provState:t}){const n=Ch(),r=Ah(),i=bl(),[s,o]=P.useState(null),[a,u]=P.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Tu(),[f,d]=P.useState(),{actions:h,trrack:p}=P.useMemo(()=>{const w=kx.create(),E=w.register("signal",(C,I)=>(C.event=I,C)),T=uI({registry:w,initialState:{event:{}}});return{actions:{signalAction:E},trrack:T}},[]),m=P.useCallback(({status:w,provenanceGraph:E,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:w,values:T,provenanceGraph:E})),i(c(T))},[r,n,i,c,l]),g=P.useCallback((w,E)=>{p.apply(w,h.signalAction({key:w,value:E}))},[h,p]),v=P.useCallback((w,E)=>{const{responseId:T,response:C}=E;m({status:!0,provenanceGraph:p.graph.backend,answers:{[T]:C}})},[m,p.graph.backend]),b=P.useMemo(()=>{var E;const w=(E=s==null?void 0:s.config)==null?void 0:E.signals;return w?w.reduce((T,C)=>(C.name==="revisitAnswer"?T[C.name]=v:T[C.name]=g,T),{}):{}},[v,g,s]);return P.useEffect(()=>{async function w(){u(!0);let E;"path"in e?E=await fvt(e.path):E=e.config,E!==void 0&&o(E),u(!1)}e&&w()},[e]),P.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?S.jsx("div",{children:"Loading..."}):"path"in e&&!s?S.jsx(Ob,{path:e.path}):s?S.jsx(rue,{spec:structuredClone(s),signalListeners:b,onNewView:w=>d(w)}):S.jsx("div",{children:"Failed to load vega config"})}function Lsn(){const e=s1(),t=Ch(),n=Ah()||"Notfound",r=e.components[n],{storageEngine:i}=ho(),s=P.useRef(null),[o,a]=P.useState(null),{setIsRecording:u}=Tu(),l=yi(N=>N.analysisProvState),c=eI(),f=Dee(),d=yi(N=>N.sequence),[h]=C1(),p=yi(N=>N.participantId),m=P.useMemo(()=>h.get("participantId"),[h]);QOe();const g=bl(),{setAlertModal:v}=Tu();P.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(v({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,g]),P.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(N=>{var O;N.stop(),(O=s.current)==null||O.stream.removeTrack(N)}),s.current.stream.getAudioTracks().forEach(N=>{var O;N.stop(),(O=s.current)==null||O.stream.removeTrack(N)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const O=new MediaRecorder(N);s.current=O,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,w]=P.useState([]),E=P.useRef([]);P.useEffect(()=>{async function N(){var j;const L=((j=Tee(d,t))==null?void 0:j.map(F=>F.currentBlock.id).filter(F=>F!==void 0))||[];w(L)}async function O(){const L=E.current;JSON.stringify(L)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}N().then(O)},[t,i,d]);const T=P.useMemo(()=>{var N;return n!=="end"&&!n.startsWith("__")&&_I(r)&&e.baseComponents?Ree({},(N=e.baseComponents)==null?void 0:N[r.baseComponent],r):r},[r,e]);if(n==="end")return S.jsx(LMt,{});if(n==="__trainingFailed")return S.jsx($Mt,{});if(n==="__timedOut")return S.jsx(FMt,{});if(n==="Notfound")return S.jsx(Ob,{email:e.uiConfig.contactEmail});if(m&&p!==m)return S.jsx(ma,{style:{height:"80vh"},children:S.jsx(df,{})});const C=T.instruction||"",{instructionLocation:I}=T,R=e.uiConfig.sidebar&&(I==="sidebar"||I===void 0);return S.jsxs(S.Fragment,{children:[I==="aboveStimulus"&&S.jsx(fl,{text:C}),S.jsx(AF,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),S.jsxs(P.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&S.jsx(TMt,{currentConfig:T}),T.type==="website"&&S.jsx(cvt,{currentConfig:T}),T.type==="image"&&S.jsx(hvt,{currentConfig:T}),T.type==="react-component"&&S.jsx(SMt,{currentConfig:T,provState:l}),T.type==="vega"&&S.jsx(Msn,{currentConfig:T,provState:l})]},`${t}-stimulus`),(I==="belowStimulus"||I===void 0&&!R)&&S.jsx(fl,{text:C}),S.jsx(AF,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function x9e(e){const[t]=C1();return S.jsx(VJ,{...e,to:{pathname:e.to,search:t.toString()}})}function _9e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=_9e(o,t,n,r),r.includes(o.orderPath))break}return i}function w9e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=w9e(s,r)}}),n}function $sn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Fsn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=GE(),c=em(),f=Ch(),[d,{close:h,open:p}]=GX(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?_9e(n,e,r,a.orderPath):-1,{trialId:v}=F0(),[b]=C1(),w=P.useMemo(()=>b.get("participantId"),[b]),E=v===e,T=s?f===g:f===`reviewer-${e}`,C=u?E:T,I=P.useCallback(()=>c(v?`./../${e}`:`./${e}`),[c,e,v]),N=u?I:()=>c(s?w?`/${l}/${bp(g)}?participantId=${w}`:`/${l}/${bp(g)}`:`/${l}/reviewer-${e}`),O=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,L=e.includes("$")&&O&&e.includes(O)?e.split(O).at(-1):e;return S.jsxs(xu,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[S.jsx(xu.Target,{children:S.jsx(je,{onMouseEnter:p,onMouseLeave:h,children:S.jsx(EB,{active:C,style:{lineHeight:"32px",height:"32px"},label:S.jsxs(je,{children:[i&&S.jsx(UZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==L&&S.jsx(tet,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),S.jsx(lt,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:L})]}),onClick:N,disabled:t})})}),m&&(m.description||m.meta)&&S.jsx(xu.Dropdown,{onMouseLeave:h,children:S.jsxs(je,{children:[m.description&&S.jsxs(je,{children:[S.jsx(lt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),S.jsx(lt,{fw:400,component:"span",children:m.description})]}),m.meta&&S.jsxs(je,{children:[S.jsx(lt,{fw:"900",component:"span",children:"Task Meta: "}),S.jsx(lt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function G8({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=By(e.components);return n&&r&&(o=$sn(By(e.components),By(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),S.jsx(S.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return S.jsx(Fsn,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?zp(c).length-w9e(u,c):0,d=zp(u);return S.jsx(EB,{label:S.jsxs(je,{style:{opacity:f>0?1:.5},children:[S.jsx(lt,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?S.jsx(ss,{label:u.order,position:"right",withArrow:!0,children:S.jsx(BZe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&S.jsxs(Dp,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&S.jsx(Dp,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:S.jsx(je,{style:{borderLeft:"1px solid #e9ecef"},children:S.jsx(G8,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function E9e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Cbe({text:e}){return S.jsx(ss,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:S.jsx(YJ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Bsn(){const e=yi(h=>h.sequence),t=yi(h=>h.metadata),{toggleStudyBrowser:n}=Tu(),r=s1(),i=bl(),s=GE(),o=jJ(`/${s}`),{storageEngine:a}=ho(),u=eI(),l=P.useMemo(()=>{let h=By(r.sequence);return h=Cee(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=P.useState("participant"),d=P.useMemo(()=>c==="allTrials"||u,[c,u]);return S.jsxs(Vi.Aside,{p:"0",children:[S.jsx(Vi.Section,{p:"md",children:S.jsxs(an,{direction:"row",justify:"space-between",children:[S.jsx(lt,{size:"md",fw:700,pt:3,children:"Study Browser"}),S.jsx(ss,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:S.jsx(gn,{variant:"light",leftSection:S.jsx(KJ,{size:14}),onClick:()=>E9e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),S.jsx(gx,{onClick:()=>i(n()),mt:1})]})}),S.jsx(Vi.Section,{grow:!0,component:Ky,p:"md",children:S.jsxs(Vr,{value:c,onChange:f,children:[S.jsx(je,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:S.jsxs(Vr.List,{grow:!0,children:[S.jsxs(Vr.Tab,{value:"participant",children:["Participant View",S.jsx(Cbe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),S.jsxs(Vr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",S.jsx(Cbe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),S.jsx(Vr.Panel,{value:"participant",children:S.jsx(G8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),S.jsx(Vr.Panel,{value:"allTrials",children:S.jsx(G8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function jsn({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=yi(R=>R.config),r=yi(R=>R.metadata),i=Aee(),s=bl(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Tu(),{storageEngine:l}=ho(),c=Ah(),f=Ch(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=P.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=GE(),w=jJ(`/${b}`),E=P.useRef(null),[T,C]=P.useState(!1),I=yi(R=>R.isRecording);return P.useEffect(()=>{const R=E.current;R&&C(R.scrollWidth>R.offsetWidth)},[n]),S.jsx(Vi.Header,{p:"md",children:S.jsxs(Xf,{mt:-7,align:"center",children:[S.jsx(Xf.Col,{span:4,children:S.jsxs(an,{align:"center",children:[S.jsx(vx,{w:40,src:`${Ha}${g}`,alt:"Study Logo"}),S.jsx(rd,{w:"md"}),S.jsx(oo,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),S.jsx(Xf.Col,{span:4,children:v&&S.jsx(MA,{radius:"md",size:"lg",value:h})}),S.jsx(Xf.Col,{span:4,children:S.jsxs(Yr,{wrap:"nowrap",justify:"right",children:[I?S.jsxs(Yr,{ml:"xl",gap:20,wrap:"nowrap",children:[S.jsx(lt,{color:"red",children:"Recording audio"}),S.jsx(WOe,{})]}):null,!t&&S.jsx(ss,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:S.jsx(Dp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&S.jsx(gn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),S.jsxs(Ll,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[S.jsx(Ll.Target,{children:S.jsx(mx,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:S.jsx(YZe,{})})}),S.jsxs(Ll.Dropdown,{children:[e&&S.jsx(Ll.Item,{leftSection:S.jsx(oet,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),S.jsx(Ll.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:S.jsx(ZZe,{size:14}),children:"Contact"}),e&&S.jsx(Ll.Item,{leftSection:S.jsx(KJ,{size:14}),onClick:()=>E9e(l,n,r,w),children:"Next Participant"}),e&&S.jsx(Ll.Item,{leftSection:S.jsx(ySe,{size:14}),component:"a",href:`${Ha}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function S9e(e,t){var n;return _I(e)&&t.baseComponents?Ree({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function Usn(){var u;const e=(u=s1())==null?void 0:u.uiConfig.sidebar,t=s1(),n=Ah(),r=t.components[n],i=P.useMemo(()=>r?S9e(r,t):null,[r,t]),s=Dee(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?S.jsxs(Vi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&S.jsxs(Vi.Section,{bg:"gray.3",p:"md",children:[S.jsx(lt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),S.jsx(fl,{text:o})]}),S.jsx(Vi.Section,{p:"md",children:S.jsx(AF,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):S.jsx(Vi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:S.jsx(AF,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function zsn(){const e=yi(u=>u.showHelpText),t=yi(u=>u.config),n=bl(),{toggleShowHelpText:r}=Tu(),[i,s]=P.useState(""),[o,a]=P.useState(!0);return P.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await Pee(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),S.jsx(Vs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?S.jsx(fl,{text:i}):S.jsx(Ob,{path:t.uiConfig.helpTextPath})})}function Vsn(){const e=yi(o=>o.alertModal),{setAlertModal:t}=Tu(),n=bl(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),S.jsx(Vs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:S.jsxs(My,{color:"red",radius:"xs",title:"Alert",icon:S.jsx(FZe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[S.jsx(lt,{my:"md",children:e.message}),S.jsx(Yr,{w:"100%",justify:"end",children:S.jsx(gn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const Abe=15,Ibe=3;function Hsn({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return S.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return S.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:S.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-Ibe/2,y:n/2-Abe/2,width:Ibe,height:Abe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?S.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,S.jsx(RQ,{position:{bottom:10,left:10},children:S.jsxs(xu,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[S.jsx(xu.Target,{children:S.jsx(gn,{children:"Show Legend"})}),S.jsx(xu.Dropdown,{children:S.jsx(uo,{children:Array.from(a.keys()).map(u=>S.jsxs(Yr,{children:[S.jsx(nJ,{color:a.get(u)}),S.jsx("span",{children:u})]},u))})})]})})]})}const kbe={left:5,top:0,right:5,bottom:0};function qsn({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=P.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=P.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=P.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return S.jsx(Hsn,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return S.jsxs("svg",{style:{width:n,height:r},children:[S.jsx("line",{stroke:"black",strokeWidth:1,x1:kbe.left,x2:n+kbe.left,y1:r/2,y2:r/2}),c]})}function Wsn(e){const t=P.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P.useLayoutEffect(()=>{t.current=e}),P.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Gsn({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=P.useRef(0),u=P.useRef(Date.now()),[l,c]=P.useState(0);P.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=Wsn(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});P.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),P.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=P.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return S.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:S.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function zX(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const Lq={left:0,top:0,right:0,bottom:0};function Ysn(e,t){return t?t.getParticipantData(e):null}function Ksn({setTimeString:e}){const[t]=C1(),n=P.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=ho(),i=yi(G=>G.analysisIsPlaying),s=yi(G=>G.analysisHasAudio),o=yi(G=>G.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Tu(),f=bl(),d=Ah(),h=Ch();P.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=td(),[g,v]=P.useState(0),[b,w]=P.useState(null),[E,T]=P.useState(0),{value:C,status:I}=e8(Ysn,[n,r]),[R,N]=Yze(0,100),O=P.useRef(null),[L,j]=P.useState(!0),F=P.useRef(null),H=P.useMemo(()=>`${d}_${h}`,[d,h]);P.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),P.useEffect(()=>{var G;if(H&&C&&((G=C.answers[H])!=null&&G.provenanceGraph)){const V=kx.create(),Y=uI({registry:V,initialState:{}});C.answers[H].provenanceGraph&&(Y.importObject(By(C.answers[H].provenanceGraph)),f(l(!0)),F.current=Y)}else f(l(!1))},[C,H,f,l]);const Q=P.useCallback(G=>{var V;G&&(H&&C&&F.current&&(f(a(F.current.getState((V=C.answers[H].provenanceGraph)==null?void 0:V.nodes[G]))),F.current.to(G)),w(G))},[C,a,f,H]);P.useEffect(()=>{var Y;if(!H||!C||!F.current||!((Y=C.answers[H])!=null&&Y.provenanceGraph))return;const G=C.answers[H].provenanceGraph;if(!G)return;if(!b||!G.nodes[b]){Q(G.root);return}let V=G.nodes[b];for(;;)if(R<V.createdOn){if(dIt(V))break;{const ee=V.parent;V=G.nodes[ee]}}else if(V.children.length>0){const ee=V.children[0];if(R>G.nodes[ee].createdOn)V=G.nodes[ee];else break}else break;V.id!==b&&Q(V.id)},[Q,b,C,n,R,H]);const J=P.useMemo(()=>(C==null?void 0:C.answers[H].startTime)||0,[C,H]);P.useEffect(()=>{E===0?e(""):R!==0&&e(`${zX(R-J)} / ${zX(E*1e3)}`)},[H,C,R,e,J,E]),P.useEffect(()=>{if(!s&&o&&C){const G=C.answers[H].endTime-C.answers[H].startTime;T(G>-1?G/1e3:0)}},[s,o,H,C]);const ne=eI(),Z=P.useRef(null),ie=P.useCallback(async G=>{if(Z.current=G,G&&C&&ne&&H&&r)try{const V=await r.getAudio(H,n);await G.load(V),j(!1),f(u(!0)),T(G.getDuration()),v(G.getWidth()),G.seekTo(0),G.on("redrawcomplete",()=>v(G.getWidth()))}catch(V){throw f(u(!1)),new Error(V)}else f(u(!1)),T(0)},[C,ne,H,r,n,f,u]),q=P.useCallback((G,V)=>{if(G>E*1e3+J){f(c(!1)),N(G);return}N(G),Z.current&&V!==void 0&&setTimeout(()=>{var Y;(Y=Z.current)==null||Y.seekTo(V)})},[c,N,J,f,E]);P.useEffect(()=>{Z.current&&(i?Z.current.play():Z.current.pause())},[Z,i,E,J,N]);const U=P.useMemo(()=>{var Y,ee;if(!C||!((Y=C.answers[H])!=null&&Y.startTime)||!((ee=C.answers[H])!=null&&ee.endTime))return null;const G=E>0?C.answers[H].startTime+E*1e3:C.answers[H].endTime;return ef([Lq.left,m+Lq.left+Lq.right]).domain([C.answers[H].startTime,G]).clamp(!0)},[C,H,m,E]);return P.useEffect(()=>{ie(Z.current)},[q,ie,C,n,Z]),S.jsx(Yr,{wrap:"nowrap",gap:10,mx:10,children:S.jsxs(uo,{ref:p,style:{width:"100%"},gap:0,children:[S.jsx(ma,{}),C!==null&&H?S.jsxs(je,{ref:O,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[S.jsx(VOe,{onMount:ie,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:S.jsx(HOe,{id:"waveform",height:50})}),L?S.jsx(df,{}):null]}):null,I==="success"&&C&&U&&H&&C.answers[H].provenanceGraph?S.jsx(qsn,{xScale:U,trialName:H,setPlayTime:q,currentNode:b,setCurrentNode:Q,participantData:C,width:g||m,height:25}):null,U&&C&&(s||o)?S.jsx(Gsn,{duration:E*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:J,width:m,xScale:U,updateTimer:q}):null]})})}function Xsn(e,t){return t?t.getParticipantData(e):null}function Qsn(e){return e?e.getAllParticipantsData():null}function Jsn(){const[e]=C1(),t=P.useMemo(()=>e.get("participantId")||void 0,[e]),n=Ah(),r=Ch(),i=em(),{setAnalysisIsPlaying:s}=Tu(),o=bl(),a=yi(v=>v.analysisIsPlaying),{storageEngine:u}=ho(),{value:l,status:c}=e8(Xsn,[t,u]),{value:f}=e8(Qsn,[u]),[d,h]=P.useMemo(()=>{if(f&&l&&t&&n){const v=f.filter(T=>T.participantConfigHash===l.participantConfigHash),b=v.findIndex(T=>T.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,zp(w.sequence).indexOf(n)],[E.participantId,zp(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=P.useMemo(()=>{const v={};return f==null||f.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=P.useState("");return S.jsx(Vi.Footer,{zIndex:101,withBorder:!1,children:S.jsxs(je,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[S.jsx(ld,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),S.jsx(Ksn,{setTimeString:g}),S.jsx(ma,{children:S.jsxs(Yr,{gap:"xs",style:{height:"50px"},children:[S.jsx(lt,{size:"sm",ff:"monospace",children:m}),S.jsx(mx,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?S.jsx(het,{}):S.jsx(pet,{})}),S.jsx(lt,{mx:"0",children:"Participant:"}),S.jsx(ME,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${bp(0)}?participantId=${v}`)},data:p}),S.jsx(gn,{onClick:()=>i(`../${bp(+r-1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(sce,{})}),S.jsx(gn,{onClick:()=>i(`../${bp(+r+1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(oce,{})}),S.jsxs(gn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${bp(h[1])}?participantId=${h[0]}`),children:[S.jsx(sce,{}),S.jsx(uce,{})]}),S.jsxs(gn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${bp(d[1])}?participantId=${d[0]}`),children:[S.jsx(uce,{}),S.jsx(oce,{})]})]})})]})})}function Zsn(){const e=P.useRef([]),t=s1(),n=t.uiConfig.windowEventDebounceTime??100,r=yi(d=>d.showStudyBrowser),i=yi(d=>d.analysisHasAudio),s=yi(d=>d.analysisHasProvenance),o=yi(d=>d.modes);P.useEffect(()=>{const d=lp(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=lp(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),p=lp(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),m=lp(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),g=lp(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),v=lp(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=lp(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),w=lp(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=lp(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=P.useMemo(()=>o,[o]),c=P.useMemo(()=>u&&r,[u,r]),f=eI();return S.jsx(lIe.Provider,{value:e,children:S.jsxs(Vi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[S.jsx(Usn,{}),S.jsx(Bsn,{}),S.jsx(jsn,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),S.jsx(zsn,{}),S.jsx(Vsn,{}),S.jsx(Vi.Main,{children:S.jsx(GJe,{})}),f&&S.jsx(Jsn,{})]})})}function eon(e,t=!1){return typeof e=="number"?Rbe(e,t):Rbe(e.length,t).map(r=>r.map(i=>e[i]))}function Rbe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function T9e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=T9e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function ton(e,t){const n=By(e);return T9e(n,t,"root")}function C9e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&C9e(s,t,i,o)})}function non(e){const t=[];return C9e(e,t,"",0),t}function Dbe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return eon(i.sort(()=>.5-Math.random()),!0)}function Nbe(e){const n=non(e.sequence).map(s=>({[s]:Dbe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=ton(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Dbe(e,o))})}),i}var lM={exports:{}},$q={},iy={},V_={},Fq={},Bq={},jq={},Pbe;function Y8(){return Pbe||(Pbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const s=new r("+");function o(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(s),a(w,b[E]),w.push(s,h(v[++E]));return u(w),new r(w)}e.str=o;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(f(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===s){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:o`${v}${b}`}e.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}e.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=p;function m(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(v){return new r(v.toString())}e.regexpCode=g}(jq)),jq}var Uq={},Obe;function Mbe(){return Obe||(Obe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Y8();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),v=g.length;return g[v]=c.ref,d.setValue(c,{property:h,itemIndex:v}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(v=>{if(g.has(v))return;g.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);g.set(v,r.Completed)})}return h}}e.ValueScope=a}(Uq)),Uq}var Lbe;function Nr(){return Lbe||(Lbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Y8(),n=Mbe();var r=Y8();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Mbe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Y,ee){return this}}class o extends s{constructor(Y,ee,ae){super(),this.varKind=Y,this.name=ee,this.rhs=ae}render({es5:Y,_n:ee}){const ae=Y?n.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${_e};`+ee}optimizeNames(Y,ee){if(Y[this.name.str])return this.rhs&&(this.rhs=H(this.rhs,Y,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Y,ee,ae){super(),this.lhs=Y,this.rhs=ee,this.sideEffects=ae}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,ee){if(!(this.lhs instanceof t.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=H(this.rhs,Y,ee),this}get names(){const Y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(Y,this.rhs)}}class u extends a{constructor(Y,ee,ae,_e){super(Y,ae,_e),this.op=ee}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class l extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class c extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class f extends s{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class d extends s{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,ee){return this.code=H(this.code,Y,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((ee,ae)=>ee+ae.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let ee=Y.length;for(;ee--;){const ae=Y[ee].optimizeNodes();Array.isArray(ae)?Y.splice(ee,1,...ae):ae?Y[ee]=ae:Y.splice(ee,1)}return Y.length>0?this:void 0}optimizeNames(Y,ee){const{nodes:ae}=this;let _e=ae.length;for(;_e--;){const pe=ae[_e];pe.optimizeNames(Y,ee)||(Q(Y,pe.names),ae.splice(_e,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((Y,ee)=>j(Y,ee.names),{})}}class p extends h{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class m extends h{}class g extends p{}g.kind="else";class v extends p{constructor(Y,ee){super(ee),this.condition=Y}render(Y){let ee=`if(${this.condition})`+super.render(Y);return this.else&&(ee+="else "+this.else.render(Y)),ee}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let ee=this.else;if(ee){const ae=ee.optimizeNodes();ee=this.else=Array.isArray(ae)?new g(ae):ae}if(ee)return Y===!1?ee instanceof v?ee:ee.nodes:this.nodes.length?this:new v(J(Y),ee instanceof v?[ee]:ee.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,ee){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(Y,ee),!!(super.optimizeNames(Y,ee)||this.else))return this.condition=H(this.condition,Y,ee),this}get names(){const Y=super.names;return F(Y,this.condition),this.else&&j(Y,this.else.names),Y}}v.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iteration=H(this.iteration,Y,ee),this}get names(){return j(super.names,this.iteration.names)}}class E extends b{constructor(Y,ee,ae,_e){super(),this.varKind=Y,this.name=ee,this.from=ae,this.to=_e}render(Y){const ee=Y.es5?n.varKinds.var:this.varKind,{name:ae,from:_e,to:pe}=this;return`for(${ee} ${ae}=${_e}; ${ae}<${pe}; ${ae}++)`+super.render(Y)}get names(){const Y=F(super.names,this.from);return F(Y,this.to)}}class T extends b{constructor(Y,ee,ae,_e){super(),this.loop=Y,this.varKind=ee,this.name=ae,this.iterable=_e}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iterable=H(this.iterable,Y,ee),this}get names(){return j(super.names,this.iterable.names)}}class C extends p{constructor(Y,ee,ae){super(),this.name=Y,this.args=ee,this.async=ae}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}C.kind="func";class I extends h{render(Y){return"return "+super.render(Y)}}I.kind="return";class R extends p{render(Y){let ee="try"+super.render(Y);return this.catch&&(ee+=this.catch.render(Y)),this.finally&&(ee+=this.finally.render(Y)),ee}optimizeNodes(){var Y,ee;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(Y,ee){var ae,_e;return super.optimizeNames(Y,ee),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(Y,ee),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(Y,ee),this}get names(){const Y=super.names;return this.catch&&j(Y,this.catch.names),this.finally&&j(Y,this.finally.names),Y}}class N extends p{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}N.kind="catch";class O extends p{render(Y){return"finally"+super.render(Y)}}O.kind="finally";class L{constructor(Y,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,ee){const ae=this._extScope.value(Y,ee);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(Y,ee){return this._extScope.getValue(Y,ee)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,ee,ae,_e){const pe=this._scope.toName(ee);return ae!==void 0&&_e&&(this._constants[pe.str]=ae),this._leafNode(new o(Y,pe,ae)),pe}const(Y,ee,ae){return this._def(n.varKinds.const,Y,ee,ae)}let(Y,ee,ae){return this._def(n.varKinds.let,Y,ee,ae)}var(Y,ee,ae){return this._def(n.varKinds.var,Y,ee,ae)}assign(Y,ee,ae){return this._leafNode(new a(Y,ee,ae))}add(Y,ee){return this._leafNode(new u(Y,e.operators.ADD,ee))}code(Y){return typeof Y=="function"?Y():Y!==t.nil&&this._leafNode(new d(Y)),this}object(...Y){const ee=["{"];for(const[ae,_e]of Y)ee.length>1&&ee.push(","),ee.push(ae),(ae!==_e||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,_e));return ee.push("}"),new t._Code(ee)}if(Y,ee,ae){if(this._blockNode(new v(Y)),ee&&ae)this.code(ee).else().code(ae).endIf();else if(ee)this.code(ee).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new v(Y))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(Y,ee){return this._blockNode(Y),ee&&this.code(ee).endFor(),this}for(Y,ee){return this._for(new w(Y),ee)}forRange(Y,ee,ae,_e,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Se=this._scope.toName(Y);return this._for(new E(pe,Se,ee,ae),()=>_e(Se))}forOf(Y,ee,ae,_e=n.varKinds.const){const pe=this._scope.toName(Y);if(this.opts.es5){const Se=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${Se}.length`,Le=>{this.var(pe,(0,t._)`${Se}[${Le}]`),ae(pe)})}return this._for(new T("of",_e,pe,ee),()=>ae(pe))}forIn(Y,ee,ae,_e=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,t._)`Object.keys(${ee})`,ae);const pe=this._scope.toName(Y);return this._for(new T("in",_e,pe,ee),()=>ae(pe))}endFor(){return this._endBlockNode(b)}label(Y){return this._leafNode(new l(Y))}break(Y){return this._leafNode(new c(Y))}return(Y){const ee=new I;if(this._blockNode(ee),this.code(Y),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(I)}try(Y,ee,ae){if(!ee&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new R;if(this._blockNode(_e),this.code(Y),ee){const pe=this.name("e");this._currNode=_e.catch=new N(pe),ee(pe)}return ae&&(this._currNode=_e.finally=new O,this.code(ae)),this._endBlockNode(N,O)}throw(Y){return this._leafNode(new f(Y))}block(Y,ee){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(ee),this}endBlock(Y){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-ee;if(ae<0||Y!==void 0&&ae!==Y)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${Y} expected`);return this._nodes.length=ee,this}func(Y,ee=t.nil,ae,_e){return this._blockNode(new C(Y,ee,ae)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,ee){const ae=this._currNode;if(ae instanceof Y||ee&&ae instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${Y.kind}/${ee.kind}`:Y.kind}"`)}_elseNode(Y){const ee=this._currNode;if(!(ee instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const ee=this._nodes;ee[ee.length-1]=Y}}e.CodeGen=L;function j(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)+(Y[ee]||0);return V}function F(V,Y){return Y instanceof t._CodeOrName?j(V,Y.names):V}function H(V,Y,ee){if(V instanceof t.Name)return ae(V);if(!_e(V))return V;return new t._Code(V._items.reduce((pe,Se)=>(Se instanceof t.Name&&(Se=ae(Se)),Se instanceof t._Code?pe.push(...Se._items):pe.push(Se),pe),[]));function ae(pe){const Se=ee[pe.str];return Se===void 0||Y[pe.str]!==1?pe:(delete Y[pe.str],Se)}function _e(pe){return pe instanceof t._Code&&pe._items.some(Se=>Se instanceof t.Name&&Y[Se.str]===1&&ee[Se.str]!==void 0)}}function Q(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)-(Y[ee]||0)}function J(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${G(V)}`}e.not=J;const ne=U(e.operators.AND);function Z(...V){return V.reduce(ne)}e.and=Z;const ie=U(e.operators.OR);function q(...V){return V.reduce(ie)}e.or=q;function U(V){return(Y,ee)=>Y===t.nil?ee:ee===t.nil?Y:(0,t._)`${G(Y)} ${V} ${G(ee)}`}function G(V){return V instanceof t.Name?V:(0,t._)`(${V})`}}(Bq)),Bq}var _r={},$be;function wi(){if($be)return _r;$be=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.checkStrictMode=_r.getErrorPath=_r.Type=_r.useFunc=_r.setEvaluated=_r.evaluatedPropsToName=_r.mergeEvaluated=_r.eachItem=_r.unescapeJsonPointer=_r.escapeJsonPointer=_r.escapeFragment=_r.unescapeFragment=_r.schemaRefOrVal=_r.schemaHasRulesButRef=_r.schemaHasRules=_r.checkUnknownRules=_r.alwaysValidSchema=_r.toHash=void 0;const e=Nr(),t=Y8();function n(T){const C={};for(const I of T)C[I]=!0;return C}_r.toHash=n;function r(T,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(T,C),!s(C,T.self.RULES.all))}_r.alwaysValidSchema=r;function i(T,C=T.schema){const{opts:I,self:R}=T;if(!I.strictSchema||typeof C=="boolean")return;const N=R.RULES.keywords;for(const O in C)N[O]||E(T,`unknown keyword: "${O}"`)}_r.checkUnknownRules=i;function s(T,C){if(typeof T=="boolean")return!T;for(const I in T)if(C[I])return!0;return!1}_r.schemaHasRules=s;function o(T,C){if(typeof T=="boolean")return!T;for(const I in T)if(I!=="$ref"&&C.all[I])return!0;return!1}_r.schemaHasRulesButRef=o;function a({topSchemaRef:T,schemaPath:C},I,R,N){if(!N){if(typeof I=="number"||typeof I=="boolean")return I;if(typeof I=="string")return(0,e._)`${I}`}return(0,e._)`${T}${C}${(0,e.getProperty)(R)}`}_r.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}_r.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}_r.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}_r.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}_r.unescapeJsonPointer=f;function d(T,C){if(Array.isArray(T))for(const I of T)C(I);else C(T)}_r.eachItem=d;function h({mergeNames:T,mergeToName:C,mergeValues:I,resultToName:R}){return(N,O,L,j)=>{const F=L===void 0?O:L instanceof e.Name?(O instanceof e.Name?T(N,O,L):C(N,O,L),L):O instanceof e.Name?(C(N,L,O),O):I(O,L);return j===e.Name&&!(F instanceof e.Name)?R(N,F):F}}_r.mergeEvaluated={props:h({mergeNames:(T,C,I)=>T.if((0,e._)`${I} !== true && ${C} !== undefined`,()=>{T.if((0,e._)`${C} === true`,()=>T.assign(I,!0),()=>T.assign(I,(0,e._)`${I} || {}`).code((0,e._)`Object.assign(${I}, ${C})`))}),mergeToName:(T,C,I)=>T.if((0,e._)`${I} !== true`,()=>{C===!0?T.assign(I,!0):(T.assign(I,(0,e._)`${I} || {}`),m(T,I,C))}),mergeValues:(T,C)=>T===!0?!0:{...T,...C},resultToName:p}),items:h({mergeNames:(T,C,I)=>T.if((0,e._)`${I} !== true && ${C} !== undefined`,()=>T.assign(I,(0,e._)`${C} === true ? true : ${I} > ${C} ? ${I} : ${C}`)),mergeToName:(T,C,I)=>T.if((0,e._)`${I} !== true`,()=>T.assign(I,C===!0?!0:(0,e._)`${I} > ${C} ? ${I} : ${C}`)),mergeValues:(T,C)=>T===!0?!0:Math.max(T,C),resultToName:(T,C)=>T.var("items",C)})};function p(T,C){if(C===!0)return T.var("props",!0);const I=T.var("props",(0,e._)`{}`);return C!==void 0&&m(T,I,C),I}_r.evaluatedPropsToName=p;function m(T,C,I){Object.keys(I).forEach(R=>T.assign((0,e._)`${C}${(0,e.getProperty)(R)}`,!0))}_r.setEvaluated=m;const g={};function v(T,C){return T.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}_r.useFunc=v;var b;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(b||(_r.Type=b={}));function w(T,C,I){if(T instanceof e.Name){const R=C===b.Num;return I?R?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:R?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return I?(0,e.getProperty)(T).toString():"/"+c(T)}_r.getErrorPath=w;function E(T,C,I=T.opts.strictSchema){if(I){if(C=`strict mode: ${C}`,I===!0)throw new Error(C);T.self.logger.warn(C)}}return _r.checkStrictMode=E,_r}var cM={},Fbe;function qx(){if(Fbe)return cM;Fbe=1,Object.defineProperty(cM,"__esModule",{value:!0});const e=Nr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return cM.default=t,cM}var Bbe;function nU(){return Bbe||(Bbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nr(),n=wi(),r=qx();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,t.str)`"${g}" keyword must be ${v} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,v=e.keywordError,b,w){const{it:E}=g,{gen:T,compositeRule:C,allErrors:I}=E,R=f(g,v,b);w??(C||I)?u(T,R):l(E,(0,t._)`[${R}]`)}e.reportError=i;function s(g,v=e.keywordError,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:C}=w,I=f(g,v,b);u(E,I),T||C||l(w,r.default.vErrors)}e.reportExtraError=s;function o(g,v){g.assign(r.default.errors,v),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,t._)`${r.default.vErrors}.length`,v),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:v,schemaValue:b,data:w,errsCount:E,it:T}){if(E===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",E,r.default.errors,I=>{g.const(C,(0,t._)`${r.default.vErrors}[${I}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${v}`),T.opts.verbose&&(g.assign((0,t._)`${C}.schema`,b),g.assign((0,t._)`${C}.data`,w))})}e.extendErrors=a;function u(g,v){const b=g.const("err",v);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,v){const{gen:b,validateName:w,schemaEnv:E}=g;E.$async?b.throw((0,t._)`new ${g.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,v,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,v,b)}function d(g,v,b={}){const{gen:w,it:E}=g,T=[h(E,b),p(g,b)];return m(g,v,T),w.object(...T)}function h({errorPath:g},{instancePath:v}){const b=v?(0,t.str)`${g}${(0,n.getErrorPath)(v,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${g}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:v,message:b},w){const{keyword:E,data:T,schemaValue:C,it:I}=g,{opts:R,propertyName:N,topSchemaRef:O,schemaPath:L}=I;w.push([c.keyword,E],[c.params,typeof v=="function"?v(g):v||(0,t._)`{}`]),R.messages&&w.push([c.message,typeof b=="function"?b(g):b]),R.verbose&&w.push([c.schema,C],[c.parentSchema,(0,t._)`${O}${L}`],[r.default.data,T]),N&&w.push([c.propertyName,N])}}(Fq)),Fq}var jbe;function ron(){if(jbe)return V_;jbe=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.boolOrEmptySchema=V_.topBoolOrEmptySchema=void 0;const e=nU(),t=Nr(),n=qx(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}V_.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}V_.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return V_}var ou={},H_={},Ube;function A9e(){if(Ube)return H_;Ube=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.getRules=H_.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}H_.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return H_.getRules=r,H_}var sy={},zbe;function I9e(){if(zbe)return sy;zbe=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.shouldUseRule=sy.shouldUseGroup=sy.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}sy.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}sy.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return sy.shouldUseRule=n,sy}var Vbe;function K8(){if(Vbe)return ou;Vbe=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.reportTypeError=ou.checkDataTypes=ou.checkDataType=ou.coerceAndCheckDataType=ou.getJSONTypes=ou.getSchemaTypes=ou.DataType=void 0;const e=A9e(),t=I9e(),n=nU(),r=Nr(),i=wi();var s;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(s||(ou.DataType=s={}));function o(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}ou.getSchemaTypes=o;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}ou.getJSONTypes=a;function u(b,w){const{gen:E,data:T,opts:C}=b,I=c(w,C.coerceTypes),R=w.length>0&&!(I.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(R){const N=p(w,T,C.strictNumbers,s.Wrong);E.if(N,()=>{I.length?f(b,w,I):g(b)})}return R}ou.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function f(b,w,E){const{gen:T,data:C,opts:I}=b,R=T.let("dataType",(0,r._)`typeof ${C}`),N=T.let("coerced",(0,r._)`undefined`);I.coerceTypes==="array"&&T.if((0,r._)`${R} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>T.assign(C,(0,r._)`${C}[0]`).assign(R,(0,r._)`typeof ${C}`).if(p(w,C,I.strictNumbers),()=>T.assign(N,C))),T.if((0,r._)`${N} !== undefined`);for(const L of E)(l.has(L)||L==="array"&&I.coerceTypes==="array")&&O(L);T.else(),g(b),T.endIf(),T.if((0,r._)`${N} !== undefined`,()=>{T.assign(C,N),d(b,N)});function O(L){switch(L){case"string":T.elseIf((0,r._)`${R} == "number" || ${R} == "boolean"`).assign(N,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(N,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${R} == "boolean" || ${C} === null
              || (${R} == "string" && ${C} && ${C} == +${C})`).assign(N,(0,r._)`+${C}`);return;case"integer":T.elseIf((0,r._)`${R} === "boolean" || ${C} === null
              || (${R} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(N,(0,r._)`+${C}`);return;case"boolean":T.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(N,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(N,!0);return;case"null":T.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),T.assign(N,null);return;case"array":T.elseIf((0,r._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${C} === null`).assign(N,(0,r._)`[${C}]`)}}}function d({gen:b,parentData:w,parentDataProperty:E},T){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,T))}function h(b,w,E,T=s.Correct){const C=T===s.Correct?r.operators.EQ:r.operators.NEQ;let I;switch(b){case"null":return(0,r._)`${w} ${C} null`;case"array":I=(0,r._)`Array.isArray(${w})`;break;case"object":I=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":I=R((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":I=R();break;default:return(0,r._)`typeof ${w} ${C} ${b}`}return T===s.Correct?I:(0,r.not)(I);function R(N=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,N,E?(0,r._)`isFinite(${w})`:r.nil)}}ou.checkDataType=h;function p(b,w,E,T){if(b.length===1)return h(b[0],w,E,T);let C;const I=(0,i.toHash)(b);if(I.array&&I.object){const R=(0,r._)`typeof ${w} != "object"`;C=I.null?R:(0,r._)`!${w} || ${R}`,delete I.null,delete I.array,delete I.object}else C=r.nil;I.number&&delete I.integer;for(const R in I)C=(0,r.and)(C,h(R,w,E,T));return C}ou.checkDataTypes=p;const m={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function g(b){const w=v(b);(0,n.reportError)(w,m)}ou.reportTypeError=g;function v(b){const{gen:w,data:E,schema:T}=b,C=(0,i.schemaRefOrVal)(b,T,"type");return{gen:w,keyword:"type",data:E,schema:T.type,schemaCode:C,schemaValue:C,parentSchema:T,params:{},it:b}}return ou}var BR={},Hbe;function ion(){if(Hbe)return BR;Hbe=1,Object.defineProperty(BR,"__esModule",{value:!0}),BR.assignDefaults=void 0;const e=Nr(),t=wi();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}BR.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return BR}var ip={},Oi={},qbe;function pm(){if(qbe)return Oi;qbe=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.validateUnion=Oi.validateArray=Oi.usePattern=Oi.callValidateCode=Oi.schemaProperties=Oi.allSchemaProperties=Oi.noPropertyInData=Oi.propertyInData=Oi.isOwnProperty=Oi.hasPropFunc=Oi.reportMissingProp=Oi.checkMissingProp=Oi.checkReportMissingProp=void 0;const e=Nr(),t=wi(),n=qx(),r=wi();function i(b,w){const{gen:E,data:T,it:C}=b;E.if(c(E,T,w,C.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}Oi.checkReportMissingProp=i;function s({gen:b,data:w,it:{opts:E}},T,C){return(0,e.or)(...T.map(I=>(0,e.and)(c(b,w,I,E.ownProperties),(0,e._)`${C} = ${I}`)))}Oi.checkMissingProp=s;function o(b,w){b.setParams({missingProperty:w},!0),b.error()}Oi.reportMissingProp=o;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Oi.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}Oi.isOwnProperty=u;function l(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return T?(0,e._)`${C} && ${u(b,w,E)}`:C}Oi.propertyInData=l;function c(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return T?(0,e.or)(C,(0,e.not)(u(b,w,E))):C}Oi.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}Oi.allSchemaProperties=f;function d(b,w){return f(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}Oi.schemaProperties=d;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:T,schemaPath:C,errorPath:I},it:R},N,O,L){const j=L?(0,e._)`${b}, ${w}, ${T}${C}`:w,F=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)],[n.default.parentData,R.parentData],[n.default.parentDataProperty,R.parentDataProperty],[n.default.rootData,n.default.rootData]];R.opts.dynamicRef&&F.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const H=(0,e._)`${j}, ${E.object(...F)}`;return O!==e.nil?(0,e._)`${N}.call(${O}, ${H})`:(0,e._)`${N}(${H})`}Oi.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:b,it:{opts:w}},E){const T=w.unicodeRegExp?"u":"",{regExp:C}=w.code,I=C(E,T);return b.scopeValue("pattern",{key:I.toString(),ref:I,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(b,C)}(${E}, ${T})`})}Oi.usePattern=m;function g(b){const{gen:w,data:E,keyword:T,it:C}=b,I=w.name("valid");if(C.allErrors){const N=w.let("valid",!0);return R(()=>w.assign(N,!1)),N}return w.var(I,!0),R(()=>w.break()),I;function R(N){const O=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,O,L=>{b.subschema({keyword:T,dataProp:L,dataPropType:t.Type.Num},I),w.if((0,e.not)(I),N)})}}Oi.validateArray=g;function v(b){const{gen:w,schema:E,keyword:T,it:C}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(O=>(0,t.alwaysValidSchema)(C,O))&&!C.opts.unevaluated)return;const R=w.let("valid",!1),N=w.name("_valid");w.block(()=>E.forEach((O,L)=>{const j=b.subschema({keyword:T,schemaProp:L,compositeRule:!0},N);w.assign(R,(0,e._)`${R} || ${N}`),b.mergeValidEvaluated(j,N)||w.if((0,e.not)(R))})),b.result(R,()=>b.reset(),()=>b.error(!0))}return Oi.validateUnion=v,Oi}var Wbe;function son(){if(Wbe)return ip;Wbe=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.validateKeywordUsage=ip.validSchemaType=ip.funcKeywordCode=ip.macroKeywordCode=void 0;const e=Nr(),t=qx(),n=pm(),r=nU();function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:v,it:b}=d,w=h.macro.call(b.self,g,v,b),E=l(p,m,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const T=p.name("valid");d.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${m}`,topSchemaRef:E,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}ip.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:v,parentSchema:b,$data:w,it:E}=d;u(E,h);const T=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,C=l(m,g,T),I=m.let("valid");d.block$data(I,R),d.ok((p=h.valid)!==null&&p!==void 0?p:I);function R(){if(h.errors===!1)L(),h.modifying&&o(d),j(()=>d.error());else{const F=h.async?N():O();h.modifying&&o(d),j(()=>a(d,F))}}function N(){const F=m.let("ruleErrs",null);return m.try(()=>L((0,e._)`await `),H=>m.assign(I,!1).if((0,e._)`${H} instanceof ${E.ValidationError}`,()=>m.assign(F,(0,e._)`${H}.errors`),()=>m.throw(H))),F}function O(){const F=(0,e._)`${C}.errors`;return m.assign(F,null),L(e.nil),F}function L(F=h.async?(0,e._)`await `:e.nil){const H=E.opts.passContext?t.default.this:t.default.self,Q=!("compile"in h&&!w||h.schema===!1);m.assign(I,(0,e._)`${F}${(0,n.callValidateCode)(d,C,H,Q)}`,h.modifying)}function j(F){var H;m.if((0,e.not)((H=h.valid)!==null&&H!==void 0?H:I),F)}}ip.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}ip.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,v){if(Array.isArray(g.keyword)?!g.keyword.includes(v):g.keyword!==v)throw new Error("ajv implementation error");const b=g.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(d,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[v])){const E=`keyword "${v}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return ip.validateKeywordUsage=f,ip}var oy={},Gbe;function oon(){if(Gbe)return oy;Gbe=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.extendSubschemaMode=oy.extendSubschemaData=oy.getSubschema=void 0;const e=Nr(),t=wi();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}oy.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,v=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(v),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}oy.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return oy.extendSubschemaMode=i,oy}var Ol={},zq={exports:{}},Ybe;function aon(){if(Ybe)return zq.exports;Ybe=1;var e=zq.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),u,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return zq.exports}var Kbe;function rU(){if(Kbe)return Ol;Kbe=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.getSchemaRefs=Ol.resolveUrl=Ol.normalizeId=Ol._getFullPath=Ol.getFullPath=Ol.inlineRef=void 0;const e=wi(),t=Nee(),n=aon(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}Ol.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const v=m[g];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function a(m){let g=0;for(const v in m){if(v==="$ref")return 1/0;if(g++,!r.has(v)&&(typeof m[v]=="object"&&(0,e.eachItem)(m[v],b=>g+=a(b)),g===1/0))return 1/0}return g}function u(m,g="",v){v!==!1&&(g=f(g));const b=m.parse(g);return l(m,b)}Ol.getFullPath=u;function l(m,g){return m.serialize(g).split("#")[0]+"#"}Ol._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}Ol.normalizeId=f;function d(m,g,v){return v=f(v),m.resolve(g,v)}Ol.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=f(m[v]||g),E={"":w},T=u(b,w,!1),C={},I=new Set;return n(m,{allKeys:!0},(O,L,j,F)=>{if(F===void 0)return;const H=T+L;let Q=E[F];typeof O[v]=="string"&&(Q=J.call(this,O[v])),ne.call(this,O.$anchor),ne.call(this,O.$dynamicAnchor),E[L]=Q;function J(Z){const ie=this.opts.uriResolver.resolve;if(Z=f(Q?ie(Q,Z):Z),I.has(Z))throw N(Z);I.add(Z);let q=this.refs[Z];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?R(O,q.schema,Z):Z!==f(H)&&(Z[0]==="#"?(R(O,C[Z],Z),C[Z]=O):this.refs[Z]=H),Z}function ne(Z){if(typeof Z=="string"){if(!h.test(Z))throw new Error(`invalid anchor "${Z}"`);J.call(this,`#${Z}`)}}}),C;function R(O,L,j){if(L!==void 0&&!t(O,L))throw N(j)}function N(O){return new Error(`reference "${O}" resolves to more than one schema`)}}return Ol.getSchemaRefs=p,Ol}var Xbe;function iU(){if(Xbe)return iy;Xbe=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.getData=iy.KeywordCxt=iy.validateFunctionCode=void 0;const e=ron(),t=K8(),n=I9e(),r=K8(),i=ion(),s=son(),o=oon(),a=Nr(),u=qx(),l=rU(),c=wi(),f=nU();function d(ye){if(T(ye)&&(I(ye),E(ye))){g(ye);return}h(ye,()=>(0,e.topBoolOrEmptySchema)(ye))}iy.validateFunctionCode=d;function h({gen:ye,validateName:he,schema:$e,schemaEnv:De,opts:tt},it){tt.code.es5?ye.func(he,(0,a._)`${u.default.data}, ${u.default.valCxt}`,De.$async,()=>{ye.code((0,a._)`"use strict"; ${b($e,tt)}`),m(ye,tt),ye.code(it)}):ye.func(he,(0,a._)`${u.default.data}, ${p(tt)}`,De.$async,()=>ye.code(b($e,tt)).code(it))}function p(ye){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ye.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ye,he){ye.if(u.default.valCxt,()=>{ye.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ye.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ye.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ye.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ye.var(u.default.instancePath,(0,a._)`""`),ye.var(u.default.parentData,(0,a._)`undefined`),ye.var(u.default.parentDataProperty,(0,a._)`undefined`),ye.var(u.default.rootData,u.default.data),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(ye){const{schema:he,opts:$e,gen:De}=ye;h(ye,()=>{$e.$comment&&he.$comment&&F(ye),O(ye),De.let(u.default.vErrors,null),De.let(u.default.errors,0),$e.unevaluated&&v(ye),R(ye),H(ye)})}function v(ye){const{gen:he,validateName:$e}=ye;ye.evaluated=he.const("evaluated",(0,a._)`${$e}.evaluated`),he.if((0,a._)`${ye.evaluated}.dynamicProps`,()=>he.assign((0,a._)`${ye.evaluated}.props`,(0,a._)`undefined`)),he.if((0,a._)`${ye.evaluated}.dynamicItems`,()=>he.assign((0,a._)`${ye.evaluated}.items`,(0,a._)`undefined`))}function b(ye,he){const $e=typeof ye=="object"&&ye[he.schemaId];return $e&&(he.code.source||he.code.process)?(0,a._)`/*# sourceURL=${$e} */`:a.nil}function w(ye,he){if(T(ye)&&(I(ye),E(ye))){C(ye,he);return}(0,e.boolOrEmptySchema)(ye,he)}function E({schema:ye,self:he}){if(typeof ye=="boolean")return!ye;for(const $e in ye)if(he.RULES.all[$e])return!0;return!1}function T(ye){return typeof ye.schema!="boolean"}function C(ye,he){const{schema:$e,gen:De,opts:tt}=ye;tt.$comment&&$e.$comment&&F(ye),L(ye),j(ye);const it=De.const("_errs",u.default.errors);R(ye,it),De.var(he,(0,a._)`${it} === ${u.default.errors}`)}function I(ye){(0,c.checkUnknownRules)(ye),N(ye)}function R(ye,he){if(ye.opts.jtd)return J(ye,[],!1,he);const $e=(0,t.getSchemaTypes)(ye.schema),De=(0,t.coerceAndCheckDataType)(ye,$e);J(ye,$e,!De,he)}function N(ye){const{schema:he,errSchemaPath:$e,opts:De,self:tt}=ye;he.$ref&&De.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(he,tt.RULES)&&tt.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function O(ye){const{schema:he,opts:$e}=ye;he.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,c.checkStrictMode)(ye,"default is ignored in the schema root")}function L(ye){const he=ye.schema[ye.opts.schemaId];he&&(ye.baseId=(0,l.resolveUrl)(ye.opts.uriResolver,ye.baseId,he))}function j(ye){if(ye.schema.$async&&!ye.schemaEnv.$async)throw new Error("async schema in sync schema")}function F({gen:ye,schemaEnv:he,schema:$e,errSchemaPath:De,opts:tt}){const it=$e.$comment;if(tt.$comment===!0)ye.code((0,a._)`${u.default.self}.logger.log(${it})`);else if(typeof tt.$comment=="function"){const Me=(0,a.str)`${De}/$comment`,Ge=ye.scopeValue("root",{ref:he.root});ye.code((0,a._)`${u.default.self}.opts.$comment(${it}, ${Me}, ${Ge}.schema)`)}}function H(ye){const{gen:he,schemaEnv:$e,validateName:De,ValidationError:tt,opts:it}=ye;$e.$async?he.if((0,a._)`${u.default.errors} === 0`,()=>he.return(u.default.data),()=>he.throw((0,a._)`new ${tt}(${u.default.vErrors})`)):(he.assign((0,a._)`${De}.errors`,u.default.vErrors),it.unevaluated&&Q(ye),he.return((0,a._)`${u.default.errors} === 0`))}function Q({gen:ye,evaluated:he,props:$e,items:De}){$e instanceof a.Name&&ye.assign((0,a._)`${he}.props`,$e),De instanceof a.Name&&ye.assign((0,a._)`${he}.items`,De)}function J(ye,he,$e,De){const{gen:tt,schema:it,data:Me,allErrors:Ge,opts:at,self:yt}=ye,{RULES:St}=yt;if(it.$ref&&(at.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(it,St))){tt.block(()=>_e(ye,"$ref",St.all.$ref.definition));return}at.jtd||Z(ye,he),tt.block(()=>{for(const qe of St.rules)Ot(qe);Ot(St.post)});function Ot(qe){(0,n.shouldUseGroup)(it,qe)&&(qe.type?(tt.if((0,r.checkDataType)(qe.type,Me,at.strictNumbers)),ne(ye,qe),he.length===1&&he[0]===qe.type&&$e&&(tt.else(),(0,r.reportTypeError)(ye)),tt.endIf()):ne(ye,qe),Ge||tt.if((0,a._)`${u.default.errors} === ${De||0}`))}}function ne(ye,he){const{gen:$e,schema:De,opts:{useDefaults:tt}}=ye;tt&&(0,i.assignDefaults)(ye,he.type),$e.block(()=>{for(const it of he.rules)(0,n.shouldUseRule)(De,it)&&_e(ye,it.keyword,it.definition,he.type)})}function Z(ye,he){ye.schemaEnv.meta||!ye.opts.strictTypes||(ie(ye,he),ye.opts.allowUnionTypes||q(ye,he),U(ye,ye.dataTypes))}function ie(ye,he){if(he.length){if(!ye.dataTypes.length){ye.dataTypes=he;return}he.forEach($e=>{V(ye.dataTypes,$e)||ee(ye,`type "${$e}" not allowed by context "${ye.dataTypes.join(",")}"`)}),Y(ye,he)}}function q(ye,he){he.length>1&&!(he.length===2&&he.includes("null"))&&ee(ye,"use allowUnionTypes to allow union type keyword")}function U(ye,he){const $e=ye.self.RULES.all;for(const De in $e){const tt=$e[De];if(typeof tt=="object"&&(0,n.shouldUseRule)(ye.schema,tt)){const{type:it}=tt.definition;it.length&&!it.some(Me=>G(he,Me))&&ee(ye,`missing type "${it.join(",")}" for keyword "${De}"`)}}}function G(ye,he){return ye.includes(he)||he==="number"&&ye.includes("integer")}function V(ye,he){return ye.includes(he)||he==="integer"&&ye.includes("number")}function Y(ye,he){const $e=[];for(const De of ye.dataTypes)V(he,De)?$e.push(De):he.includes("integer")&&De==="number"&&$e.push("integer");ye.dataTypes=$e}function ee(ye,he){const $e=ye.schemaEnv.baseId+ye.errSchemaPath;he+=` at "${$e}" (strictTypes)`,(0,c.checkStrictMode)(ye,he,ye.opts.strictTypes)}class ae{constructor(he,$e,De){if((0,s.validateKeywordUsage)(he,$e,De),this.gen=he.gen,this.allErrors=he.allErrors,this.keyword=De,this.data=he.data,this.schema=he.schema[De],this.$data=$e.$data&&he.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(he,this.schema,De,this.$data),this.schemaType=$e.schemaType,this.parentSchema=he.schema,this.params={},this.it=he,this.def=$e,this.$data)this.schemaCode=he.gen.const("vSchema",Le(this.$data,he));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${De} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=he.gen.const("_errs",u.default.errors))}result(he,$e,De){this.failResult((0,a.not)(he),$e,De)}failResult(he,$e,De){this.gen.if(he),De?De():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(he,$e){this.failResult((0,a.not)(he),void 0,$e)}fail(he){if(he===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(he),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(he){if(!this.$data)return this.fail(he);const{schemaCode:$e}=this;this.fail((0,a._)`${$e} !== undefined && (${(0,a.or)(this.invalid$data(),he)})`)}error(he,$e,De){if($e){this.setParams($e),this._error(he,De),this.setParams({});return}this._error(he,De)}_error(he,$e){(he?f.reportExtraError:f.reportError)(this,this.def.error,$e)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(he){this.allErrors||this.gen.if(he)}setParams(he,$e){$e?Object.assign(this.params,he):this.params=he}block$data(he,$e,De=a.nil){this.gen.block(()=>{this.check$data(he,De),$e()})}check$data(he=a.nil,$e=a.nil){if(!this.$data)return;const{gen:De,schemaCode:tt,schemaType:it,def:Me}=this;De.if((0,a.or)((0,a._)`${tt} === undefined`,$e)),he!==a.nil&&De.assign(he,!0),(it.length||Me.validateSchema)&&(De.elseIf(this.invalid$data()),this.$dataError(),he!==a.nil&&De.assign(he,!1)),De.else()}invalid$data(){const{gen:he,schemaCode:$e,schemaType:De,def:tt,it}=this;return(0,a.or)(Me(),Ge());function Me(){if(De.length){if(!($e instanceof a.Name))throw new Error("ajv implementation error");const at=Array.isArray(De)?De:[De];return(0,a._)`${(0,r.checkDataTypes)(at,$e,it.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Ge(){if(tt.validateSchema){const at=he.scopeValue("validate$data",{ref:tt.validateSchema});return(0,a._)`!${at}(${$e})`}return a.nil}}subschema(he,$e){const De=(0,o.getSubschema)(this.it,he);(0,o.extendSubschemaData)(De,this.it,he),(0,o.extendSubschemaMode)(De,he);const tt={...this.it,...De,items:void 0,props:void 0};return w(tt,$e),tt}mergeEvaluated(he,$e){const{it:De,gen:tt}=this;De.opts.unevaluated&&(De.props!==!0&&he.props!==void 0&&(De.props=c.mergeEvaluated.props(tt,he.props,De.props,$e)),De.items!==!0&&he.items!==void 0&&(De.items=c.mergeEvaluated.items(tt,he.items,De.items,$e)))}mergeValidEvaluated(he,$e){const{it:De,gen:tt}=this;if(De.opts.unevaluated&&(De.props!==!0||De.items!==!0))return tt.if($e,()=>this.mergeEvaluated(he,a.Name)),!0}}iy.KeywordCxt=ae;function _e(ye,he,$e,De){const tt=new ae(ye,$e,he);"code"in $e?$e.code(tt,De):tt.$data&&$e.validate?(0,s.funcKeywordCode)(tt,$e):"macro"in $e?(0,s.macroKeywordCode)(tt,$e):($e.compile||$e.validate)&&(0,s.funcKeywordCode)(tt,$e)}const pe=/^\/(?:[^~]|~0|~1)*$/,Se=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Le(ye,{dataLevel:he,dataNames:$e,dataPathArr:De}){let tt,it;if(ye==="")return u.default.rootData;if(ye[0]==="/"){if(!pe.test(ye))throw new Error(`Invalid JSON-pointer: ${ye}`);tt=ye,it=u.default.rootData}else{const yt=Se.exec(ye);if(!yt)throw new Error(`Invalid JSON-pointer: ${ye}`);const St=+yt[1];if(tt=yt[2],tt==="#"){if(St>=he)throw new Error(at("property/index",St));return De[he-St]}if(St>he)throw new Error(at("data",St));if(it=$e[he-St],!tt)return it}let Me=it;const Ge=tt.split("/");for(const yt of Ge)yt&&(it=(0,a._)`${it}${(0,a.getProperty)((0,c.unescapeJsonPointer)(yt))}`,Me=(0,a._)`${Me} && ${it}`);return Me;function at(yt,St){return`Cannot access ${yt} ${St} levels up, current level is ${he}`}}return iy.getData=Le,iy}var fM={},Qbe;function iue(){if(Qbe)return fM;Qbe=1,Object.defineProperty(fM,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return fM.default=e,fM}var dM={},Jbe;function sU(){if(Jbe)return dM;Jbe=1,Object.defineProperty(dM,"__esModule",{value:!0});const e=rU();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return dM.default=t,dM}var Bf={},Zbe;function sue(){if(Zbe)return Bf;Zbe=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.resolveSchema=Bf.getCompilingSchema=Bf.resolveRef=Bf.compileSchema=Bf.SchemaEnv=void 0;const e=Nr(),t=iue(),n=qx(),r=rU(),i=wi(),s=iU();class o{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}Bf.SchemaEnv=o;function a(g){const v=c.call(this,g);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:T}=this.opts,C=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:T});let I;g.$async&&(I=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const R=C.scopeName("validate");g.validateName=R;const N={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:R,ValidationError:I,schema:g.schema,schemaEnv:g,rootId:b,baseId:g.baseId||b,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let O;try{this._compilations.add(g),(0,s.validateFunctionCode)(N),C.optimize(this.opts.code.optimize);const L=C.toString();O=`${C.scopeRefs(n.default.scope)}return ${L}`,this.opts.code.process&&(O=this.opts.code.process(O,g));const F=new Function(`${n.default.self}`,`${n.default.scope}`,O)(this,this.scope.get());if(this.scope.value(R,{ref:F}),F.errors=null,F.schema=g.schema,F.schemaEnv=g,g.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:R,validateCode:L,scopeValues:C._values}),this.opts.unevaluated){const{props:H,items:Q}=N;F.evaluated={props:H instanceof e.Name?void 0:H,items:Q instanceof e.Name?void 0:Q,dynamicProps:H instanceof e.Name,dynamicItems:Q instanceof e.Name},F.source&&(F.source.evaluated=(0,e.stringify)(F.evaluated))}return g.validate=F,g}catch(L){throw delete g.validate,delete g.validateName,O&&this.logger.error("Error compiling schema, function code:",O),L}finally{this._compilations.delete(g)}}Bf.compileSchema=a;function u(g,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=g.refs[b];if(E)return E;let T=d.call(this,g,b);if(T===void 0){const C=(w=g.localRefs)===null||w===void 0?void 0:w[b],{schemaId:I}=this.opts;C&&(T=new o({schema:C,schemaId:I,root:g,baseId:v}))}if(T!==void 0)return g.refs[b]=l.call(this,T)}Bf.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const v of this._compilations)if(f(v,g))return v}Bf.getCompilingSchema=c;function f(g,v){return g.schema===v.schema&&g.root===v.root&&g.baseId===v.baseId}function d(g,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,g,v)}function h(g,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&w===E)return m.call(this,b,g);const T=(0,r.normalizeId)(w),C=this.refs[T]||this.schemas[T];if(typeof C=="string"){const I=h.call(this,g,C);return typeof(I==null?void 0:I.schema)!="object"?void 0:m.call(this,b,I)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),T===(0,r.normalizeId)(v)){const{schema:I}=C,{schemaId:R}=this.opts,N=I[R];return N&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,N)),new o({schema:I,schemaId:R,root:g,baseId:E})}return m.call(this,b,C)}}Bf.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:v,schema:b,root:w}){var E;if(((E=g.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const I of g.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const R=b[(0,i.unescapeFragment)(I)];if(R===void 0)return;b=R;const N=typeof b=="object"&&b[this.opts.schemaId];!p.has(I)&&N&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,N))}let T;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const I=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);T=h.call(this,w,I)}const{schemaId:C}=this.opts;if(T=T||new o({schema:b,schemaId:C,root:w,baseId:v}),T.schema!==T.root.schema)return T}return Bf}const uon="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",lon="Meta-schema for $data reference (JSON AnySchema extension proposal)",con="object",fon=["$data"],don={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},hon=!1,pon={$id:uon,description:lon,type:con,required:fon,properties:don,additionalProperties:hon};var hM={},jR={exports:{}},Vq,exe;function mon(){return exe||(exe=1,Vq={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),Vq}var Hq,txe;function gon(){if(txe)return Hq;txe=1;const{HEX:e}=mon(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[v]=g;return v?{host:o(v,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let v="",b=!0;for(const w of m){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return g&&v.length===0&&(v="0"),v}function i(m){let g=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,T=!1,C=!1;function I(){if(w.length){if(E===!1){const R=r(w);if(R!==void 0)b.push(R);else return v.error=!0,!1}w.length=0}return!0}for(let R=0;R<m.length;R++){const N=m[R];if(!(N==="["||N==="]"))if(N===":"){if(T===!0&&(C=!0),!I())break;if(g++,b.push(":"),g>7){v.error=!0;break}R-1>=0&&m[R-1]===":"&&(T=!0);continue}else if(N==="%"){if(!I())break;E=!0}else{w.push(N);continue}}return w.length&&(E?v.zone=w.join(""):C?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let v=g.address,b=g.address;return g.zone&&(v+="%"+g.zone,b+="%25"+g.zone),{host:v,escapedHost:b,isIPV6:!0}}}function o(m,g){let v="",b=!0;const w=m.length;for(let E=0;E<w;E++){const T=m[E];T==="0"&&b?(E+1<=w&&m[E+1]===g||E+1===w)&&(v+=T,b=!1):(T===g?b=!0:b=!1,v+=T)}return v}function a(m,g){let v=0;for(let b=0;b<m.length;b++)m[b]===g&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const g=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const v=m.match(f);if(v){const b=v[0];m=m.slice(b.length),g.push(b)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const v=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=v(m.scheme)),m.userinfo!==void 0&&(m.userinfo=v(m.userinfo)),m.host!==void 0&&(m.host=v(m.host)),m.path!==void 0&&(m.path=v(m.path)),m.query!==void 0&&(m.query=v(m.query)),m.fragment!==void 0&&(m.fragment=v(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let v=unescape(m.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=s(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=m.host}g.push(v)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return Hq={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},Hq}var qq,nxe;function yon(){if(nxe)return qq;nxe=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function s(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function o(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const T=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const C=`${T}:${w.nid||b.nid}`,I=v[C];b.path=void 0,I&&(b=I.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",T=b.nid.toLowerCase(),C=`${E}:${w.nid||T}`,I=v[C];I&&(b=I.serialize(b,w));const R=b,N=b.nss;return R.path=`${T||w.nid}:${N}`,w.skipEscape=!0,R}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return qq=v,qq}var rxe;function von(){if(rxe)return jR.exports;rxe=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=gon(),s=yon();function o(g,v){return typeof g=="string"?g=c(p(g,v),v):typeof g=="object"&&(g=p(c(g,v),v)),g}function a(g,v,b){const w=Object.assign({scheme:"null"},b),E=u(p(g,w),p(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(g,v,b,w){const E={};return w||(g=p(c(g,b),b),v=p(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?E.path="/"+v.path:g.path?E.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=g.path,v.query!==void 0?E.query=v.query:E.query=g.query),E.userinfo=g.userinfo,E.host=g.host,E.port=g.port),E.scheme=g.scheme),E.fragment=v.fragment,E}function l(g,v,b){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,b),!0),{...b,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(p(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),g.toLowerCase()===v.toLowerCase()}function c(g,v){const b={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},w=Object.assign({},v),E=[],T=s[(w.scheme||b.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const C=r(b);if(C!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(C),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let I=b.path;!w.absolutePath&&(!T||!T.absolutePath)&&(I=n(I)),C===void 0&&(I=I.replace(/^\/\//u,"/%2F")),E.push(I)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(g,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(g){let v=0;for(let b=0,w=g.length;b<w;++b)if(v=g.charCodeAt(b),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=g.indexOf("%")!==-1;let T=!1;b.reference==="suffix"&&(g=(b.scheme?b.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(w.scheme=C[1],w.userinfo=C[3],w.host=C[4],w.port=parseInt(C[5],10),w.path=C[6]||"",w.query=C[7],w.fragment=C[8],isNaN(w.port)&&(w.port=C[5]),w.host){const R=t(w.host);if(R.isIPV4===!1){const N=e(R.host);w.host=N.host.toLowerCase(),T=N.isIPV6}else w.host=R.host,T=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const I=s[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!I||!I.unicodeSupport)&&w.host&&(b.domainHost||I&&I.domainHost)&&T===!1&&d(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(R){w.error=w.error||"Host's domain name can not be converted to ASCII: "+R}(!I||I&&!I.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&w.path.length&&(w.path=escape(unescape(w.path))),w.fragment&&w.fragment.length&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),I&&I.parse&&I.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return jR.exports=m,jR.exports.default=m,jR.exports.fastUri=m,jR.exports}var ixe;function bon(){if(ixe)return hM;ixe=1,Object.defineProperty(hM,"__esModule",{value:!0});const e=von();return e.code='require("ajv/dist/runtime/uri").default',hM.default=e,hM}var sxe;function xon(){return sxe||(sxe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=iU();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=iue(),i=sU(),s=A9e(),o=sue(),a=Nr(),u=rU(),l=K8(),c=wi(),f=pon,d=bon(),h=(q,U)=>new RegExp(q,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(q){var U,G,V,Y,ee,ae,_e,pe,Se,Le,ye,he,$e,De,tt,it,Me,Ge,at,yt,St,Ot,qe,dt,wt;const ke=q.strict,Oe=(U=q.code)===null||U===void 0?void 0:U.optimize,ht=Oe===!0||Oe===void 0?1:Oe||0,Lt=(V=(G=q.code)===null||G===void 0?void 0:G.regExp)!==null&&V!==void 0?V:h,Ft=(Y=q.uriResolver)!==null&&Y!==void 0?Y:d.default;return{strictSchema:(ae=(ee=q.strictSchema)!==null&&ee!==void 0?ee:ke)!==null&&ae!==void 0?ae:!0,strictNumbers:(pe=(_e=q.strictNumbers)!==null&&_e!==void 0?_e:ke)!==null&&pe!==void 0?pe:!0,strictTypes:(Le=(Se=q.strictTypes)!==null&&Se!==void 0?Se:ke)!==null&&Le!==void 0?Le:"log",strictTuples:(he=(ye=q.strictTuples)!==null&&ye!==void 0?ye:ke)!==null&&he!==void 0?he:"log",strictRequired:(De=($e=q.strictRequired)!==null&&$e!==void 0?$e:ke)!==null&&De!==void 0?De:!1,code:q.code?{...q.code,optimize:ht,regExp:Lt}:{optimize:ht,regExp:Lt},loopRequired:(tt=q.loopRequired)!==null&&tt!==void 0?tt:b,loopEnum:(it=q.loopEnum)!==null&&it!==void 0?it:b,meta:(Me=q.meta)!==null&&Me!==void 0?Me:!0,messages:(Ge=q.messages)!==null&&Ge!==void 0?Ge:!0,inlineRefs:(at=q.inlineRefs)!==null&&at!==void 0?at:!0,schemaId:(yt=q.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(St=q.addUsedSchema)!==null&&St!==void 0?St:!0,validateSchema:(Ot=q.validateSchema)!==null&&Ot!==void 0?Ot:!0,validateFormats:(qe=q.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(dt=q.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(wt=q.int32range)!==null&&wt!==void 0?wt:!0,uriResolver:Ft}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...w(U)};const{es5:G,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:G,lines:V}),this.logger=j(U.logger);const Y=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,g,U,"NOT SUPPORTED"),T.call(this,v,U,"DEPRECATED","warn"),this._metaOpts=O.call(this),U.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&N.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),I.call(this),U.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:G,schemaId:V}=this.opts;let Y=f;V==="id"&&(Y={...f},Y.id=Y.$id,delete Y.$id),G&&U&&this.addMetaSchema(Y,Y[V],!1)}defaultMeta(){const{meta:U,schemaId:G}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[G]||U:void 0}validate(U,G){let V;if(typeof U=="string"){if(V=this.getSchema(U),!V)throw new Error(`no schema with key or ref "${U}"`)}else V=this.compile(U);const Y=V(G);return"$async"in V||(this.errors=V.errors),Y}compile(U,G){const V=this._addSchema(U,G);return V.validate||this._compileSchemaEnv(V)}compileAsync(U,G){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return Y.call(this,U,G);async function Y(Le,ye){await ee.call(this,Le.$schema);const he=this._addSchema(Le,ye);return he.validate||ae.call(this,he)}async function ee(Le){Le&&!this.getSchema(Le)&&await Y.call(this,{$ref:Le},!0)}async function ae(Le){try{return this._compileSchemaEnv(Le)}catch(ye){if(!(ye instanceof i.default))throw ye;return _e.call(this,ye),await pe.call(this,ye.missingSchema),ae.call(this,Le)}}function _e({missingSchema:Le,missingRef:ye}){if(this.refs[Le])throw new Error(`AnySchema ${Le} is loaded but ${ye} cannot be resolved`)}async function pe(Le){const ye=await Se.call(this,Le);this.refs[Le]||await ee.call(this,ye.$schema),this.refs[Le]||this.addSchema(ye,Le,G)}async function Se(Le){const ye=this._loading[Le];if(ye)return ye;try{return await(this._loading[Le]=V(Le))}finally{delete this._loading[Le]}}}addSchema(U,G,V,Y=this.opts.validateSchema){if(Array.isArray(U)){for(const ae of U)this.addSchema(ae,void 0,V,Y);return this}let ee;if(typeof U=="object"){const{schemaId:ae}=this.opts;if(ee=U[ae],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${ae} must be string`)}return G=(0,u.normalizeId)(G||ee),this._checkUnique(G),this.schemas[G]=this._addSchema(U,V,G,Y,!0),this}addMetaSchema(U,G,V=this.opts.validateSchema){return this.addSchema(U,G,!0,V),this}validateSchema(U,G){if(typeof U=="boolean")return!0;let V;if(V=U.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(V,U);if(!Y&&G){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return Y}getSchema(U){let G;for(;typeof(G=C.call(this,U))=="string";)U=G;if(G===void 0){const{schemaId:V}=this.opts,Y=new o.SchemaEnv({schema:{},schemaId:V});if(G=o.resolveSchema.call(this,Y,U),!G)return;this.refs[U]=G}return G.validate||this._compileSchemaEnv(G)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const G=C.call(this,U);return typeof G=="object"&&this._cache.delete(G.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const G=U;this._cache.delete(G);let V=U[this.opts.schemaId];return V&&(V=(0,u.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const G of U)this.addKeyword(G);return this}addKeyword(U,G){let V;if(typeof U=="string")V=U,typeof G=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),G.keyword=V);else if(typeof U=="object"&&G===void 0){if(G=U,V=G.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(H.call(this,V,G),!G)return(0,c.eachItem)(V,ee=>Q.call(this,ee)),this;ne.call(this,G);const Y={...G,type:(0,l.getJSONTypes)(G.type),schemaType:(0,l.getJSONTypes)(G.schemaType)};return(0,c.eachItem)(V,Y.type.length===0?ee=>Q.call(this,ee,Y):ee=>Y.type.forEach(ae=>Q.call(this,ee,Y,ae))),this}getKeyword(U){const G=this.RULES.all[U];return typeof G=="object"?G.definition:!!G}removeKeyword(U){const{RULES:G}=this;delete G.keywords[U],delete G.all[U];for(const V of G.rules){const Y=V.rules.findIndex(ee=>ee.keyword===U);Y>=0&&V.rules.splice(Y,1)}return this}addFormat(U,G){return typeof G=="string"&&(G=new RegExp(G)),this.formats[U]=G,this}errorsText(U=this.errors,{separator:G=", ",dataVar:V="data"}={}){return!U||U.length===0?"No errors":U.map(Y=>`${V}${Y.instancePath} ${Y.message}`).reduce((Y,ee)=>Y+G+ee)}$dataMetaSchema(U,G){const V=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const Y of G){const ee=Y.split("/").slice(1);let ae=U;for(const _e of ee)ae=ae[_e];for(const _e in V){const pe=V[_e];if(typeof pe!="object")continue;const{$data:Se}=pe.definition,Le=ae[_e];Se&&Le&&(ae[_e]=ie(Le))}}return U}_removeAllSchemas(U,G){for(const V in U){const Y=U[V];(!G||G.test(V))&&(typeof Y=="string"?delete U[V]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete U[V]))}}_addSchema(U,G,V,Y=this.opts.validateSchema,ee=this.opts.addUsedSchema){let ae;const{schemaId:_e}=this.opts;if(typeof U=="object")ae=U[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(U);if(pe!==void 0)return pe;V=(0,u.normalizeId)(ae||V);const Se=u.getSchemaRefs.call(this,U,V);return pe=new o.SchemaEnv({schema:U,schemaId:_e,meta:G,baseId:V,localRefs:Se}),this._cache.set(pe.schema,pe),ee&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=pe),Y&&this.validateSchema(U,!0),pe}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const G=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=G}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function T(q,U,G,V="error"){for(const Y in q){const ee=Y;ee in U&&this.logger[V](`${G}: option ${Y}. ${q[ee]}`)}}function C(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function I(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const U in q)this.addSchema(q[U],U)}function R(){for(const q in this.opts.formats){const U=this.opts.formats[q];U&&this.addFormat(q,U)}}function N(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in q){const G=q[U];G.keyword||(G.keyword=U),this.addKeyword(G)}}function O(){const q={...this.opts};for(const U of p)delete q[U];return q}const L={log(){},warn(){},error(){}};function j(q){if(q===!1)return L;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const F=/^[a-z_$][a-z0-9_$:-]*$/i;function H(q,U){const{RULES:G}=this;if((0,c.eachItem)(q,V=>{if(G.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!F.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function Q(q,U,G){var V;const Y=U==null?void 0:U.post;if(G&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let ae=Y?ee.post:ee.rules.find(({type:pe})=>pe===G);if(ae||(ae={type:G,rules:[]},ee.rules.push(ae)),ee.keywords[q]=!0,!U)return;const _e={keyword:q,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?J.call(this,ae,_e,U.before):ae.rules.push(_e),ee.all[q]=_e,(V=U.implements)===null||V===void 0||V.forEach(pe=>this.addKeyword(pe))}function J(q,U,G){const V=q.rules.findIndex(Y=>Y.keyword===G);V>=0?q.rules.splice(V,0,U):(q.rules.push(U),this.logger.warn(`rule ${G} is not defined`))}function ne(q){let{metaSchema:U}=q;U!==void 0&&(q.$data&&this.opts.$data&&(U=ie(U)),q.validateSchema=this.compile(U,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ie(q){return{anyOf:[q,Z]}}}($q)),$q}var pM={},mM={},gM={},oxe;function _on(){if(oxe)return gM;oxe=1,Object.defineProperty(gM,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return gM.default=e,gM}var kv={},axe;function won(){if(axe)return kv;axe=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.callRef=kv.getValidate=void 0;const e=sU(),t=pm(),n=Nr(),r=qx(),i=sue(),s=wi(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:v}=d,{root:b}=p;if((f==="#"||f==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,f);if(w===void 0)throw new e.default(d.opts.uriResolver,h,f);if(w instanceof i.SchemaEnv)return T(w);return C(w);function E(){if(p===b)return u(l,m,p,p.$async);const I=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${I}.validate`,b,b.$async)}function T(I){const R=a(l,I);u(l,R,I,I.$async)}function C(I){const R=c.scopeValue("schema",g.code.source===!0?{ref:I,code:(0,n.stringify)(I)}:{ref:I}),N=c.name("valid"),O=l.subschema({schema:I,dataTypes:[],schemaPath:n.nil,topSchemaRef:R,errSchemaPath:f},N);l.mergeEvaluated(O),l.ok(N)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}kv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:g,opts:v}=p,b=v.passContext?r.default.this:n.nil;d?w():E();function w(){if(!g.$async)throw new Error("async schema referenced by sync schema");const I=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),C(c),m||h.assign(I,!0)},R=>{h.if((0,n._)`!(${R} instanceof ${p.ValidationError})`,()=>h.throw(R)),T(R),m||h.assign(I,!1)}),l.ok(I)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>C(c),()=>T(c))}function T(I){const R=(0,n._)`${I}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${R} : ${r.default.vErrors}.concat(${R})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(I){var R;if(!p.opts.unevaluated)return;const N=(R=f==null?void 0:f.validate)===null||R===void 0?void 0:R.evaluated;if(p.props!==!0)if(N&&!N.dynamicProps)N.props!==void 0&&(p.props=s.mergeEvaluated.props(h,N.props,p.props));else{const O=h.var("props",(0,n._)`${I}.evaluated.props`);p.props=s.mergeEvaluated.props(h,O,p.props,n.Name)}if(p.items!==!0)if(N&&!N.dynamicItems)N.items!==void 0&&(p.items=s.mergeEvaluated.items(h,N.items,p.items));else{const O=h.var("items",(0,n._)`${I}.evaluated.items`);p.items=s.mergeEvaluated.items(h,O,p.items,n.Name)}}}return kv.callRef=u,kv.default=o,kv}var uxe;function Eon(){if(uxe)return mM;uxe=1,Object.defineProperty(mM,"__esModule",{value:!0});const e=_on(),t=won(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return mM.default=n,mM}var yM={},vM={},lxe;function Son(){if(lxe)return vM;lxe=1,Object.defineProperty(vM,"__esModule",{value:!0});const e=Nr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return vM.default=i,vM}var bM={},cxe;function Ton(){if(cxe)return bM;cxe=1,Object.defineProperty(bM,"__esModule",{value:!0});const e=Nr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return bM.default=n,bM}var xM={},_M={},fxe;function Con(){if(fxe)return _M;fxe=1,Object.defineProperty(_M,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return _M.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',_M}var dxe;function Aon(){if(dxe)return xM;dxe=1,Object.defineProperty(xM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=Con(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return xM.default=i,xM}var wM={},hxe;function Ion(){if(hxe)return wM;hxe=1,Object.defineProperty(wM,"__esModule",{value:!0});const e=pm(),t=Nr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return wM.default=r,wM}var EM={},pxe;function kon(){if(pxe)return EM;pxe=1,Object.defineProperty(EM,"__esModule",{value:!0});const e=Nr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return EM.default=n,EM}var SM={},mxe;function Ron(){if(mxe)return SM;mxe=1,Object.defineProperty(SM,"__esModule",{value:!0});const e=pm(),t=Nr(),n=wi(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const b=s.parentSchema.properties,{definedProperties:w}=s.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const T=f.schemaEnv.baseId+f.errSchemaPath,C=`required property "${E}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,C,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const b of a)(0,e.checkReportMissingProp)(s,b)}function m(){const b=o.let("missing");if(h||c){const w=o.let("valid",!0);s.block$data(w,()=>v(b,w)),s.ok(w)}else o.if((0,e.checkMissingProp)(s,a,b)),(0,e.reportMissingProp)(s,b),o.else()}function g(){o.forOf("prop",u,b=>{s.setParams({missingProperty:b}),o.if((0,e.noPropertyInData)(o,l,b,d.ownProperties),()=>s.error())})}function v(b,w){s.setParams({missingProperty:b}),o.forOf(b,u,()=>{o.assign(w,(0,e.propertyInData)(o,l,b,d.ownProperties)),o.if((0,t.not)(w),()=>{s.error(),o.break()})},t.nil)}}};return SM.default=i,SM}var TM={},gxe;function Don(){if(gxe)return TM;gxe=1,Object.defineProperty(TM,"__esModule",{value:!0});const e=Nr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return TM.default=n,TM}var CM={},AM={},yxe;function oue(){if(yxe)return AM;yxe=1,Object.defineProperty(AM,"__esModule",{value:!0});const e=Nee();return e.code='require("ajv/dist/runtime/equal").default',AM.default=e,AM}var vxe;function Non(){if(vxe)return CM;vxe=1,Object.defineProperty(CM,"__esModule",{value:!0});const e=K8(),t=Nr(),n=wi(),r=oue(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,g,(0,t._)`${d} === false`),o.ok(p);function g(){const E=a.let("i",(0,t._)`${u}.length`),T=a.let("j");o.setParams({i:E,j:T}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,T))}function v(){return m.length>0&&!m.some(E=>E==="object"||E==="array")}function b(E,T){const C=a.name("item"),I=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),R=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(C,(0,t._)`${u}[${E}]`),a.if(I,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${R}[${C}] == "number"`,()=>{a.assign(T,(0,t._)`${R}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${R}[${C}] = ${E}`)})}function w(E,T){const C=(0,n.useFunc)(a,r.default),I=a.name("outer");a.label(I).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${T} = ${E}; ${T}--;`,()=>a.if((0,t._)`${C}(${u}[${E}], ${u}[${T}])`,()=>{o.error(),a.assign(p,!1).break(I)})))}}};return CM.default=s,CM}var IM={},bxe;function Pon(){if(bxe)return IM;bxe=1,Object.defineProperty(IM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=oue(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return IM.default=i,IM}var kM={},xxe;function Oon(){if(xxe)return kM;xxe=1,Object.defineProperty(kM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=oue(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=o.const("vSchema",c);m=(0,e.or)(...l.map((w,E)=>v(b,E)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,b=>o.if((0,e._)`${p()}(${a}, ${b})`,()=>o.assign(m,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return kM.default=i,kM}var _xe;function Mon(){if(_xe)return yM;_xe=1,Object.defineProperty(yM,"__esModule",{value:!0});const e=Son(),t=Ton(),n=Aon(),r=Ion(),i=kon(),s=Ron(),o=Don(),a=Non(),u=Pon(),l=Oon(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return yM.default=c,yM}var RM={},t2={},wxe;function k9e(){if(wxe)return t2;wxe=1,Object.defineProperty(t2,"__esModule",{value:!0}),t2.validateAdditionalItems=void 0;const e=Nr(),t=wi(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return t2.validateAdditionalItems=i,t2.default=r,t2}var DM={},n2={},Exe;function R9e(){if(Exe)return n2;Exe=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.validateTuple=void 0;const e=Nr(),t=wi(),n=pm(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((g,v)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${p} > ${v}`,()=>s.subschema({keyword:f,schemaProp:v,dataProp:v},h)),s.ok(h))});function m(g){const{opts:v,errSchemaPath:b}=d,w=a.length,E=w===g.minItems&&(w===g.maxItems||g[o]===!1);if(v.strictTuples&&!E){const T=`"${f}" is ${w}-tuple, but minItems or maxItems/${o} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,T,v.strictTuples)}}}return n2.validateTuple=i,n2.default=r,n2}var Sxe;function Lon(){if(Sxe)return DM;Sxe=1,Object.defineProperty(DM,"__esModule",{value:!0});const e=R9e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return DM.default=t,DM}var NM={},Txe;function $on(){if(Txe)return NM;Txe=1,Object.defineProperty(NM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=pm(),r=k9e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return NM.default=s,NM}var PM={},Cxe;function Fon(){if(Cxe)return PM;Cxe=1,Object.defineProperty(PM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let w=(0,e._)`${p} >= ${c}`;f!==void 0&&(w=(0,e._)`${w} && ${p} <= ${f}`),i.pass(w);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?v(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const w=s.name("_valid"),E=s.let("count",0);v(w,()=>s.if(w,()=>b(E)))}function v(w,E){s.forRange("i",0,p,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){s.code((0,e._)`${w}++`),f===void 0?s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${w} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0)))}}};return PM.default=r,PM}var Wq={},Axe;function Bon(){return Axe||(Axe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nr(),n=wi(),r=pm();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const v of m)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(Wq)),Wq}var OM={},Ixe;function jon(){if(Ixe)return OM;Ixe=1,Object.defineProperty(OM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return OM.default=r,OM}var MM={},kxe;function D9e(){if(kxe)return MM;kxe=1,Object.defineProperty(MM,"__esModule",{value:!0});const e=pm(),t=Nr(),n=qx(),r=wi(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);v(),o.ok((0,t._)`${f} === ${n.default.errors}`);function v(){a.forIn("key",c,C=>{!m.length&&!g.length?E(C):a.if(b(C),()=>E(C))})}function b(C){let I;if(m.length>8){const R=(0,r.schemaRefOrVal)(d,l.properties,"properties");I=(0,e.isOwnProperty)(a,R,C)}else m.length?I=(0,t.or)(...m.map(R=>(0,t._)`${C} === ${R}`)):I=t.nil;return g.length&&(I=(0,t.or)(I,...g.map(R=>(0,t._)`${(0,e.usePattern)(o,R)}.test(${C})`))),(0,t.not)(I)}function w(C){a.code((0,t._)`delete ${c}[${C}]`)}function E(C){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){w(C);return}if(u===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const I=a.name("valid");p.removeAdditional==="failing"?(T(C,I,!1),a.if((0,t.not)(I),()=>{o.reset(),w(C)})):(T(C,I),h||a.if((0,t.not)(I),()=>a.break()))}}function T(C,I,R){const N={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};R===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(N,I)}}};return MM.default=s,MM}var LM={},Rxe;function Uon(){if(Rxe)return LM;Rxe=1,Object.defineProperty(LM,"__esModule",{value:!0});const e=iU(),t=pm(),n=wi(),r=D9e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=o.name("valid");for(const g of d)p(g)?m(g):(o.if((0,t.propertyInData)(o,l,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return LM.default=i,LM}var $M={},Dxe;function zon(){if(Dxe)return $M;Dxe=1,Object.defineProperty($M,"__esModule",{value:!0});const e=pm(),t=Nr(),n=wi(),r=wi(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;v();function v(){for(const E of d)p&&b(E),c.allErrors?w(E):(o.var(m,!0),w(E),o.if(m))}function b(E){for(const T in p)new RegExp(E).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){o.forIn("key",u,T=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${T})`,()=>{const C=h.includes(E);C||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:T,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${T}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return $M.default=i,$M}var FM={},Nxe;function Von(){if(Nxe)return FM;Nxe=1,Object.defineProperty(FM,"__esModule",{value:!0});const e=wi(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return FM.default=t,FM}var BM={},Pxe;function Hon(){if(Pxe)return BM;Pxe=1,Object.defineProperty(BM,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:pm().validateUnion,error:{message:"must match a schema in anyOf"}};return BM.default=t,BM}var jM={},Oxe;function qon(){if(Oxe)return jM;Oxe=1,Object.defineProperty(jM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return jM.default=r,jM}var UM={},Mxe;function Won(){if(Mxe)return UM;Mxe=1,Object.defineProperty(UM,"__esModule",{value:!0});const e=wi(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return UM.default=t,UM}var zM={},Lxe;function Gon(){if(Lxe)return zM;Lxe=1,Object.defineProperty(zM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,g){return()=>{const v=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(v,f),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return zM.default=r,zM}var VM={},$xe;function Yon(){if($xe)return VM;$xe=1,Object.defineProperty(VM,"__esModule",{value:!0});const e=wi(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return VM.default=t,VM}var Fxe;function Kon(){if(Fxe)return RM;Fxe=1,Object.defineProperty(RM,"__esModule",{value:!0});const e=k9e(),t=Lon(),n=R9e(),r=$on(),i=Fon(),s=Bon(),o=jon(),a=D9e(),u=Uon(),l=zon(),c=Von(),f=Hon(),d=qon(),h=Won(),p=Gon(),m=Yon();function g(v=!1){const b=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return RM.default=g,RM}var HM={},qM={},Bxe;function Xon(){if(Bxe)return qM;Bxe=1,Object.defineProperty(qM,"__esModule",{value:!0});const e=Nr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():g();function m(){const v=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),b=s.const("fDef",(0,e._)`${v}[${l}]`),w=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>s.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>s.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(T(),C()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function C(){const I=h.$async?(0,e._)`(${b}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,R=(0,e._)`(typeof ${E} == "function" ? ${I} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${R}`}}function g(){const v=p.formats[u];if(!v){T();return}if(v===!0)return;const[b,w,E]=C(v);b===i&&r.pass(I());function T(){if(f.strictSchema===!1){p.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function C(R){const N=R instanceof RegExp?(0,e.regexpCode)(R):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,O=s.scopeValue("formats",{key:u,ref:R,code:N});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,e._)`${O}.validate`]:["string",R,O]}function I(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof w=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return qM.default=n,qM}var jxe;function Qon(){if(jxe)return HM;jxe=1,Object.defineProperty(HM,"__esModule",{value:!0});const t=[Xon().default];return HM.default=t,HM}var q_={},Uxe;function Jon(){return Uxe||(Uxe=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.contentVocabulary=q_.metadataVocabulary=void 0,q_.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],q_.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),q_}var zxe;function Zon(){if(zxe)return pM;zxe=1,Object.defineProperty(pM,"__esModule",{value:!0});const e=Eon(),t=Mon(),n=Kon(),r=Qon(),i=Jon(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return pM.default=s,pM}var WM={},UR={},Vxe;function ean(){if(Vxe)return UR;Vxe=1,Object.defineProperty(UR,"__esModule",{value:!0}),UR.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(UR.DiscrError=e={})),UR}var Hxe;function tan(){if(Hxe)return WM;Hxe=1,Object.defineProperty(WM,"__esModule",{value:!0});const e=Nr(),t=ean(),n=sue(),r=sU(),i=wi(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function v(){const E=w();u.if(!1);for(const T in E)u.elseIf((0,e._)`${g} === ${T}`),u.assign(m,b(E[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),u.endIf()}function b(E){const T=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:E},T);return a.mergeEvaluated(C,e.Name),T}function w(){var E;const T={},C=R(f);let I=!0;for(let L=0;L<h.length;L++){let j=h[L];if(j!=null&&j.$ref&&!(0,i.schemaHasRulesButRef)(j,d.self.RULES)){const H=j.$ref;if(j=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,H),j instanceof n.SchemaEnv&&(j=j.schema),j===void 0)throw new r.default(d.opts.uriResolver,d.baseId,H)}const F=(E=j==null?void 0:j.properties)===null||E===void 0?void 0:E[p];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);I=I&&(C||R(j)),N(F,L)}if(!I)throw new Error(`discriminator: "${p}" must be required`);return T;function R({required:L}){return Array.isArray(L)&&L.includes(p)}function N(L,j){if(L.const)O(L.const,j);else if(L.enum)for(const F of L.enum)O(F,j);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function O(L,j){if(typeof L!="string"||L in T)throw new Error(`discriminator: "${p}" values must be unique strings`);T[L]=j}}}};return WM.default=o,WM}const nan="http://json-schema.org/draft-07/schema#",ran="http://json-schema.org/draft-07/schema#",ian="Core schema meta-schema",san={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},oan=["object","boolean"],aan={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},uan={$schema:nan,$id:ran,title:ian,definitions:san,type:oan,properties:aan,default:!0};var qxe;function lan(){return qxe||(qxe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=xon(),r=Zon(),i=tan(),s=uan,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=iU();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Nr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=iue();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=sU();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(lM,lM.exports)),lM.exports}var can=lan();const aue=vh(can),fan="#/definitions/StudyConfig",dan="http://json-schema.org/draft-07/schema#",han=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),pan={$ref:fan,$schema:dan,definitions:han},man="#/definitions/GlobalConfig",gan="http://json-schema.org/draft-07/schema#",yan={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},van={$ref:man,$schema:gan,definitions:yan};var DD={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var ban=DD.exports,Wxe;function xan(){return Wxe||(Wxe=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,v=2,b=4,w=8,E=16,T=32,C=64,I=128,R=256,N=512,O=30,L="...",j=800,F=16,H=1,Q=2,J=3,ne=1/0,Z=9007199254740991,ie=17976931348623157e292,q=NaN,U=4294967295,G=U-1,V=U>>>1,Y=[["ary",I],["bind",g],["bindKey",v],["curry",w],["curryRight",E],["flip",N],["partial",T],["partialRight",C],["rearg",R]],ee="[object Arguments]",ae="[object Array]",_e="[object AsyncFunction]",pe="[object Boolean]",Se="[object Date]",Le="[object DOMException]",ye="[object Error]",he="[object Function]",$e="[object GeneratorFunction]",De="[object Map]",tt="[object Number]",it="[object Null]",Me="[object Object]",Ge="[object Promise]",at="[object Proxy]",yt="[object RegExp]",St="[object Set]",Ot="[object String]",qe="[object Symbol]",dt="[object Undefined]",wt="[object WeakMap]",ke="[object WeakSet]",Oe="[object ArrayBuffer]",ht="[object DataView]",Lt="[object Float32Array]",Ft="[object Float64Array]",dn="[object Int8Array]",Nn="[object Int16Array]",Sr="[object Int32Array]",Ni="[object Uint8Array]",Un="[object Uint8ClampedArray]",tr="[object Uint16Array]",Ai="[object Uint32Array]",Tr=/\b__p \+= '';/g,Lo=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pi=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,Qr=RegExp(Pi.source),$o=RegExp(Zi.source),oc=/<%-([\s\S]+?)%>/g,ba=/<%([\s\S]+?)%>/g,Ru=/<%=([\s\S]+?)%>/g,Jr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ji=/^\w*$/,ai=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ws=/[\\^$.*+?()[\]{}|]/g,Fr=RegExp(Ws.source),es=/^\s+/,Fo=/\s/,mo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,xl=/,? & /,Ph=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pr=/[()=,{}\[\]\/\s]/,ac=/\\(\\)?/g,ms=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ka=/\w*$/,Jo=/^[-+]0x[0-9a-f]+$/i,mm=/^0b[01]+$/i,Oh=/^\[object .+?Constructor\]$/,_d=/^0o[0-7]+$/i,wd=/^(?:0|[1-9]\d*)$/,gf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yf=/($^)/,vf=/['\n\r\u2028\u2029\\]/g,fr="\\ud800-\\udfff",Mh="\\u0300-\\u036f",go="\\ufe20-\\ufe2f",_l="\\u20d0-\\u20ff",Gs=Mh+go+_l,uc="\\u2700-\\u27bf",Lh="a-z\\xdf-\\xf6\\xf8-\\xff",lc="\\xac\\xb1\\xd7\\xf7",yo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gm="\\u2000-\\u206f",vo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ue="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",ge=lc+yo+gm+vo,Ne="[']",Be="["+fr+"]",Re="["+ge+"]",rt="["+Gs+"]",bt="\\d+",Et="["+uc+"]",xt="["+Lh+"]",Dt="[^"+fr+ge+bt+uc+Lh+ue+"]",qt="\\ud83c[\\udffb-\\udfff]",In="(?:"+rt+"|"+qt+")",un="[^"+fr+"]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ue+"]",Ys="\\u200d",Xa="(?:"+xt+"|"+Dt+")",cc="(?:"+br+"|"+Dt+")",$h="(?:"+Ne+"(?:d|ll|m|re|s|t|ve))?",bf="(?:"+Ne+"(?:D|LL|M|RE|S|T|VE))?",Fh=In+"?",Bo="["+Te+"]?",gs="(?:"+Ys+"(?:"+[un,nr,ln].join("|")+")"+Bo+Fh+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xf=Bo+Fh+gs,Ja="(?:"+[Et,nr,ln].join("|")+")"+xf,Du="(?:"+[un+rt+"?",rt,nr,ln,Be].join("|")+")",V1=RegExp(Ne,"g"),fc=RegExp(rt,"g"),Ss=RegExp(qt+"(?="+qt+")|"+Du+xf,"g"),Wx=RegExp([br+"?"+xt+"+"+$h+"(?="+[Re,br,"$"].join("|")+")",cc+"+"+bf+"(?="+[Re,br+Xa,"$"].join("|")+")",br+"?"+Xa+"+"+$h,br+"+"+bf,Qa,jo,bt,Ja].join("|"),"g"),Eg=RegExp("["+Ys+fr+Gs+Te+"]"),_f=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ed=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],H1=-1,xr={};xr[Lt]=xr[Ft]=xr[dn]=xr[Nn]=xr[Sr]=xr[Ni]=xr[Un]=xr[tr]=xr[Ai]=!0,xr[ee]=xr[ae]=xr[Oe]=xr[pe]=xr[ht]=xr[Se]=xr[ye]=xr[he]=xr[De]=xr[tt]=xr[Me]=xr[yt]=xr[St]=xr[Ot]=xr[wt]=!1;var dr={};dr[ee]=dr[ae]=dr[Oe]=dr[ht]=dr[pe]=dr[Se]=dr[Lt]=dr[Ft]=dr[dn]=dr[Nn]=dr[Sr]=dr[De]=dr[tt]=dr[Me]=dr[yt]=dr[St]=dr[Ot]=dr[qe]=dr[Ni]=dr[Un]=dr[tr]=dr[Ai]=!0,dr[ye]=dr[he]=dr[wt]=!1;var wf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tn=parseFloat,rr=parseInt,kr=typeof la=="object"&&la&&la.Object===Object&&la,di=typeof self=="object"&&self&&self.Object===Object&&self,cn=kr||di||Function("return this")(),Br=t&&!t.nodeType&&t,Zr=Br&&!0&&e&&!e.nodeType&&e,Ks=Zr&&Zr.exports===Br,Nu=Ks&&kr.process,ts=function(){try{var Fe=Zr&&Zr.require&&Zr.require("util").types;return Fe||Nu&&Nu.binding&&Nu.binding("util")}catch{}}(),Sd=ts&&ts.isArrayBuffer,Fs=ts&&ts.isDate,dc=ts&&ts.isMap,Sg=ts&&ts.isRegExp,Ef=ts&&ts.isSet,pS=ts&&ts.isTypedArray;function Uo(Fe,st,Ye){switch(Ye.length){case 0:return Fe.call(st);case 1:return Fe.call(st,Ye[0]);case 2:return Fe.call(st,Ye[0],Ye[1]);case 3:return Fe.call(st,Ye[0],Ye[1],Ye[2])}return Fe.apply(st,Ye)}function Bh(Fe,st,Ye,Kt){for(var zn=-1,ei=Fe==null?0:Fe.length;++zn<ei;){var Xs=Fe[zn];st(Kt,Xs,Ye(Xs),Fe)}return Kt}function bo(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function Tg(Fe,st){for(var Ye=Fe==null?0:Fe.length;Ye--&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function Cg(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(!st(Fe[Ye],Ye,Fe))return!1;return!0}function hc(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=0,ei=[];++Ye<Kt;){var Xs=Fe[Ye];st(Xs,Ye,Fe)&&(ei[zn++]=Xs)}return ei}function Ag(Fe,st){var Ye=Fe==null?0:Fe.length;return!!Ye&&jh(Fe,st,0)>-1}function ym(Fe,st,Ye){for(var Kt=-1,zn=Fe==null?0:Fe.length;++Kt<zn;)if(Ye(st,Fe[Kt]))return!0;return!1}function Ei(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=Array(Kt);++Ye<Kt;)zn[Ye]=st(Fe[Ye],Ye,Fe);return zn}function Sf(Fe,st){for(var Ye=-1,Kt=st.length,zn=Fe.length;++Ye<Kt;)Fe[zn+Ye]=st[Ye];return Fe}function Tf(Fe,st,Ye,Kt){var zn=-1,ei=Fe==null?0:Fe.length;for(Kt&&ei&&(Ye=Fe[++zn]);++zn<ei;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function mS(Fe,st,Ye,Kt){var zn=Fe==null?0:Fe.length;for(Kt&&zn&&(Ye=Fe[--zn]);zn--;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function q1(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(st(Fe[Ye],Ye,Fe))return!0;return!1}var gS=te("length");function Gx(Fe){return Fe.split("")}function W1(Fe){return Fe.match(Ph)||[]}function xa(Fe,st,Ye){var Kt;return Ye(Fe,function(zn,ei,Xs){if(st(zn,ei,Xs))return Kt=ei,!1}),Kt}function Ig(Fe,st,Ye,Kt){for(var zn=Fe.length,ei=Ye+(Kt?1:-1);Kt?ei--:++ei<zn;)if(st(Fe[ei],ei,Fe))return ei;return-1}function jh(Fe,st,Ye){return st===st?vS(Fe,st,Ye):Ig(Fe,D,Ye)}function Td(Fe,st,Ye,Kt){for(var zn=Ye-1,ei=Fe.length;++zn<ei;)if(Kt(Fe[zn],st))return zn;return-1}function D(Fe){return Fe!==Fe}function W(Fe,st){var Ye=Fe==null?0:Fe.length;return Ye?Ut(Fe,st)/Ye:q}function te(Fe){return function(st){return st==null?n:st[Fe]}}function ce(Fe){return function(st){return Fe==null?n:Fe[st]}}function ze(Fe,st,Ye,Kt,zn){return zn(Fe,function(ei,Xs,Ii){Ye=Kt?(Kt=!1,ei):st(Ye,ei,Xs,Ii)}),Ye}function Ze(Fe,st){var Ye=Fe.length;for(Fe.sort(st);Ye--;)Fe[Ye]=Fe[Ye].value;return Fe}function Ut(Fe,st){for(var Ye,Kt=-1,zn=Fe.length;++Kt<zn;){var ei=st(Fe[Kt]);ei!==n&&(Ye=Ye===n?ei:Ye+ei)}return Ye}function ui(Fe,st){for(var Ye=-1,Kt=Array(Fe);++Ye<Fe;)Kt[Ye]=st(Ye);return Kt}function xo(Fe,st){return Ei(st,function(Ye){return[Ye,Fe[Ye]]})}function Rr(Fe){return Fe&&Fe.slice(0,bS(Fe)+1).replace(es,"")}function hi(Fe){return function(st){return Fe(st)}}function Ts(Fe,st){return Ei(st,function(Ye){return Fe[Ye]})}function _a(Fe,st){return Fe.has(st)}function Pu(Fe,st){for(var Ye=-1,Kt=Fe.length;++Ye<Kt&&jh(st,Fe[Ye],0)>-1;);return Ye}function vm(Fe,st){for(var Ye=Fe.length;Ye--&&jh(st,Fe[Ye],0)>-1;);return Ye}function G1(Fe,st){for(var Ye=Fe.length,Kt=0;Ye--;)Fe[Ye]===st&&++Kt;return Kt}var PO=ce(wf),OO=ce(ve);function MO(Fe){return"\\"+Qe[Fe]}function Y1(Fe,st){return Fe==null?n:Fe[st]}function K1(Fe){return Eg.test(Fe)}function oU(Fe){return _f.test(Fe)}function aU(Fe){for(var st,Ye=[];!(st=Fe.next()).done;)Ye.push(st.value);return Ye}function yS(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt,zn){Ye[++st]=[zn,Kt]}),Ye}function VI(Fe,st){return function(Ye){return Fe(st(Ye))}}function pc(Fe,st){for(var Ye=-1,Kt=Fe.length,zn=0,ei=[];++Ye<Kt;){var Xs=Fe[Ye];(Xs===st||Xs===c)&&(Fe[Ye]=c,ei[zn++]=Ye)}return ei}function bm(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=Kt}),Ye}function uU(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=[Kt,Kt]}),Ye}function vS(Fe,st,Ye){for(var Kt=Ye-1,zn=Fe.length;++Kt<zn;)if(Fe[Kt]===st)return Kt;return-1}function lU(Fe,st,Ye){for(var Kt=Ye+1;Kt--;)if(Fe[Kt]===st)return Kt;return Kt}function kg(Fe){return K1(Fe)?$O(Fe):gS(Fe)}function wl(Fe){return K1(Fe)?FO(Fe):Gx(Fe)}function bS(Fe){for(var st=Fe.length;st--&&Fo.test(Fe.charAt(st)););return st}var LO=ce(Ae);function $O(Fe){for(var st=Ss.lastIndex=0;Ss.test(Fe);)++st;return st}function FO(Fe){return Fe.match(Ss)||[]}function cU(Fe){return Fe.match(Wx)||[]}var fU=function Fe(st){st=st==null?cn:X1.defaults(cn.Object(),st,X1.pick(cn,Ed));var Ye=st.Array,Kt=st.Date,zn=st.Error,ei=st.Function,Xs=st.Math,Ii=st.Object,Yx=st.RegExp,dU=st.String,mc=st.TypeError,Uh=Ye.prototype,HI=ei.prototype,Cd=Ii.prototype,Q1=st["__core-js_shared__"],Kx=HI.toString,ti=Cd.hasOwnProperty,J1=0,xS=function(){var _=/[^.]+$/.exec(Q1&&Q1.keys&&Q1.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Xx=Cd.toString,_S=Kx.call(Ii),BO=cn._,jO=Yx("^"+Kx.call(ti).replace(Ws,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qx=Ks?st.Buffer:n,zh=st.Symbol,Jx=st.Uint8Array,qI=Qx?Qx.allocUnsafe:n,Cf=VI(Ii.getPrototypeOf,Ii),wS=Ii.create,ES=Cd.propertyIsEnumerable,SS=Uh.splice,UO=zh?zh.isConcatSpreadable:n,Vh=zh?zh.iterator:n,Rg=zh?zh.toStringTag:n,Zx=function(){try{var _=Rm(Ii,"defineProperty");return _({},"",{}),_}catch{}}(),zO=st.clearTimeout!==cn.clearTimeout&&st.clearTimeout,ns=Kt&&Kt.now!==cn.Date.now&&Kt.now,WI=st.setTimeout!==cn.setTimeout&&st.setTimeout,Dg=Xs.ceil,xm=Xs.floor,TS=Ii.getOwnPropertySymbols,GI=Qx?Qx.isBuffer:n,Z1=st.isFinite,CS=Uh.join,ev=VI(Ii.keys,Ii),Qs=Xs.max,wa=Xs.min,hU=Kt.now,VO=st.parseInt,e_=Xs.random,AS=Uh.reverse,t_=Rm(st,"DataView"),Ng=Rm(st,"Map"),n_=Rm(st,"Promise"),_m=Rm(st,"Set"),r_=Rm(st,"WeakMap"),tv=Rm(Ii,"create"),IS=r_&&new r_,nv={},YI=Dm(t_),wm=Dm(Ng),HO=Dm(n_),rv=Dm(_m),Ad=Dm(r_),Em=zh?zh.prototype:n,El=Em?Em.valueOf:n,kS=Em?Em.toString:n;function oe(_){if(Zs(_)&&!sr(_)&&!(_ instanceof ir)){if(_ instanceof Ea)return _;if(ti.call(_,"__wrapped__"))return v4(_)}return new Ea(_)}var iv=function(){function _(){}return function(A){if(!js(A))return{};if(wS)return wS(A);_.prototype=A;var $=new _;return _.prototype=n,$}}();function Id(){}function Ea(_,A){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=n}oe.templateSettings={escape:oc,evaluate:ba,interpolate:Ru,variable:"",imports:{_:oe}},oe.prototype=Id.prototype,oe.prototype.constructor=oe,Ea.prototype=iv(Id.prototype),Ea.prototype.constructor=Ea;function ir(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function RS(){var _=new ir(this.__wrapped__);return _.__actions__=eu(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=eu(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=eu(this.__views__),_}function KI(){if(this.__filtered__){var _=new ir(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function sv(){var _=this.__wrapped__.value(),A=this.__dir__,$=sr(_),X=A<0,re=$?_.length:0,fe=Ek(0,re,this.__views__),xe=fe.start,Ie=fe.end,Ue=Ie-xe,pt=X?Ie:xe-1,gt=this.__iteratees__,Ct=gt.length,Yt=0,mn=wa(Ue,this.__takeCount__);if(!$||!X&&re==Ue&&mn==Ue)return hv(_,this.__actions__);var Rn=[];e:for(;Ue--&&Yt<mn;){pt+=A;for(var yr=-1,Dn=_[pt];++yr<Ct;){var Dr=gt[yr],Ur=Dr.iteratee,Lf=Dr.type,Il=Ur(Dn);if(Lf==Q)Dn=Il;else if(!Il){if(Lf==H)continue e;break e}}Rn[Yt++]=Dn}return Rn}ir.prototype=iv(Id.prototype),ir.prototype.constructor=ir;function Ou(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function rs(){this.__data__=tv?tv(null):{},this.size=0}function Ui(_){var A=this.has(_)&&delete this.__data__[_];return this.size-=A?1:0,A}function Sm(_){var A=this.__data__;if(tv){var $=A[_];return $===u?n:$}return ti.call(A,_)?A[_]:n}function Sa(_){var A=this.__data__;return tv?A[_]!==n:ti.call(A,_)}function Mu(_,A){var $=this.__data__;return this.size+=this.has(_)?0:1,$[_]=tv&&A===n?u:A,this}Ou.prototype.clear=rs,Ou.prototype.delete=Ui,Ou.prototype.get=Sm,Ou.prototype.has=Sa,Ou.prototype.set=Mu;function Za(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function ov(){this.__data__=[],this.size=0}function Lu(_){var A=this.__data__,$=Ca(A,_);if($<0)return!1;var X=A.length-1;return $==X?A.pop():SS.call(A,$,1),--this.size,!0}function DS(_){var A=this.__data__,$=Ca(A,_);return $<0?n:A[$][1]}function qO(_){return Ca(this.__data__,_)>-1}function WO(_,A){var $=this.__data__,X=Ca($,_);return X<0?(++this.size,$.push([_,A])):$[X][1]=A,this}Za.prototype.clear=ov,Za.prototype.delete=Lu,Za.prototype.get=DS,Za.prototype.has=qO,Za.prototype.set=WO;function gc(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function GO(){this.size=0,this.__data__={hash:new Ou,map:new(Ng||Za),string:new Ou}}function Hh(_){var A=b_(this,_).delete(_);return this.size-=A?1:0,A}function NS(_){return b_(this,_).get(_)}function XI(_){return b_(this,_).has(_)}function YO(_,A){var $=b_(this,_),X=$.size;return $.set(_,A),this.size+=$.size==X?0:1,this}gc.prototype.clear=GO,gc.prototype.delete=Hh,gc.prototype.get=NS,gc.prototype.has=XI,gc.prototype.set=YO;function Pg(_){var A=-1,$=_==null?0:_.length;for(this.__data__=new gc;++A<$;)this.add(_[A])}function Tm(_){return this.__data__.set(_,u),this}function av(_){return this.__data__.has(_)}Pg.prototype.add=Pg.prototype.push=Tm,Pg.prototype.has=av;function Ta(_){var A=this.__data__=new Za(_);this.size=A.size}function PS(){this.__data__=new Za,this.size=0}function OS(_){var A=this.__data__,$=A.delete(_);return this.size=A.size,$}function yc(_){return this.__data__.get(_)}function vc(_){return this.__data__.has(_)}function Og(_,A){var $=this.__data__;if($ instanceof Za){var X=$.__data__;if(!Ng||X.length<i-1)return X.push([_,A]),this.size=++$.size,this;$=this.__data__=new gc(X)}return $.set(_,A),this.size=$.size,this}Ta.prototype.clear=PS,Ta.prototype.delete=OS,Ta.prototype.get=yc,Ta.prototype.has=vc,Ta.prototype.set=Og;function kd(_,A){var $=sr(_),X=!$&&D_(_),re=!$&&!X&&Ev(_),fe=!$&&!X&&!re&&TT(_),xe=$||X||re||fe,Ie=xe?ui(_.length,dU):[],Ue=Ie.length;for(var pt in _)(A||ti.call(_,pt))&&!(xe&&(pt=="length"||re&&(pt=="offset"||pt=="parent")||fe&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||ls(pt,Ue)))&&Ie.push(pt);return Ie}function Rd(_){var A=_.length;return A?_[fv(0,A-1)]:n}function Mg(_,A){return oT(eu(_),qh(A,0,_.length))}function KO(_){return oT(eu(_))}function i_(_,A,$){($!==n&&!tp(_[A],$)||$===n&&!(A in _))&&Dd(_,A,$)}function Lg(_,A,$){var X=_[A];(!(ti.call(_,A)&&tp(X,$))||$===n&&!(A in _))&&Dd(_,A,$)}function Ca(_,A){for(var $=_.length;$--;)if(tp(_[$][0],A))return $;return-1}function Sl(_,A,$,X){return Pd(_,function(re,fe,xe){A(X,re,$(re),xe)}),X}function is(_,A){return _&&If(A,ka(A),_)}function Af(_,A){return _&&If(A,Ac(A),_)}function Dd(_,A,$){A=="__proto__"&&Zx?Zx(_,A,{configurable:!0,enumerable:!0,value:$,writable:!0}):_[A]=$}function MS(_,A){for(var $=-1,X=A.length,re=Ye(X),fe=_==null;++$<X;)re[$]=fe?n:MU(_,A[$]);return re}function qh(_,A,$){return _===_&&($!==n&&(_=_<=$?_:$),A!==n&&(_=_>=A?_:A)),_}function $u(_,A,$,X,re,fe){var xe,Ie=A&f,Ue=A&d,pt=A&h;if($&&(xe=re?$(_,X,re,fe):$(_)),xe!==n)return xe;if(!js(_))return _;var gt=sr(_);if(gt){if(xe=__(_),!Ie)return eu(_,xe)}else{var Ct=ta(_),Yt=Ct==he||Ct==$e;if(Ev(_))return fk(_,Ie);if(Ct==Me||Ct==ee||Yt&&!re){if(xe=Ue||Yt?{}:na(_),!Ie)return Ue?mU(_,Af(xe,_)):YS(_,is(xe,_))}else{if(!dr[Ct])return re?_:{};xe=gU(_,Ct,Ie)}}fe||(fe=new Ta);var mn=fe.get(_);if(mn)return mn;fe.set(_,xe),hue(_)?_.forEach(function(Dn){xe.add($u(Dn,A,$,Dn,_,fe))}):fue(_)&&_.forEach(function(Dn,Dr){xe.set(Dr,$u(Dn,A,$,Dr,_,fe))});var Rn=pt?Ue?v_:y_:Ue?Ac:ka,yr=gt?n:Rn(_);return bo(yr||_,function(Dn,Dr){yr&&(Dr=Dn,Dn=_[Dr]),Lg(xe,Dr,$u(Dn,A,$,Dr,_,fe))}),xe}function XO(_){var A=ka(_);return function($){return s_($,_,A)}}function s_(_,A,$){var X=$.length;if(_==null)return!X;for(_=Ii(_);X--;){var re=$[X],fe=A[re],xe=_[re];if(xe===n&&!(re in _)||!fe(xe))return!1}return!0}function QI(_,A,$){if(typeof _!="function")throw new mc(o);return xv(function(){_.apply(n,$)},A)}function Nd(_,A,$,X){var re=-1,fe=Ag,xe=!0,Ie=_.length,Ue=[],pt=A.length;if(!Ie)return Ue;$&&(A=Ei(A,hi($))),X?(fe=ym,xe=!1):A.length>=i&&(fe=_a,xe=!1,A=new Pg(A));e:for(;++re<Ie;){var gt=_[re],Ct=$==null?gt:$(gt);if(gt=X||gt!==0?gt:0,xe&&Ct===Ct){for(var Yt=pt;Yt--;)if(A[Yt]===Ct)continue e;Ue.push(gt)}else fe(A,Ct,X)||Ue.push(gt)}return Ue}var Pd=Ec(Tl),QO=Ec(Cm,!0);function o_(_,A){var $=!0;return Pd(_,function(X,re,fe){return $=!!A(X,re,fe),$}),$}function $g(_,A,$){for(var X=-1,re=_.length;++X<re;){var fe=_[X],xe=A(fe);if(xe!=null&&(Ie===n?xe===xe&&!Mf(xe):$(xe,Ie)))var Ie=xe,Ue=fe}return Ue}function JO(_,A,$,X){var re=_.length;for($=pr($),$<0&&($=-$>re?0:re+$),X=X===n||X>re?re:pr(X),X<0&&(X+=re),X=$>X?0:mue(X);$<X;)_[$++]=A;return _}function JI(_,A){var $=[];return Pd(_,function(X,re,fe){A(X,re,fe)&&$.push(X)}),$}function Cs(_,A,$,X,re){var fe=-1,xe=_.length;for($||($=rT),re||(re=[]);++fe<xe;){var Ie=_[fe];A>0&&$(Ie)?A>1?Cs(Ie,A-1,$,X,re):Sf(re,Ie):X||(re[re.length]=Ie)}return re}var LS=XS(),a_=XS(!0);function Tl(_,A){return _&&LS(_,A,ka)}function Cm(_,A){return _&&a_(_,A,ka)}function uv(_,A){return hc(A,function($){return Kg(_[$])})}function Wh(_,A){A=Ld(A,_);for(var $=0,X=A.length;_!=null&&$<X;)_=_[Nf(A[$++])];return $&&$==X?_:n}function $S(_,A,$){var X=A(_);return sr(_)?X:Sf(X,$(_))}function Zo(_){return _==null?_===n?dt:it:Rg&&Rg in Ii(_)?nT(_):Tk(_)}function Am(_,A){return _>A}function bc(_,A){return _!=null&&ti.call(_,A)}function Fg(_,A){return _!=null&&A in Ii(_)}function ZI(_,A,$){return _>=wa(A,$)&&_<Qs(A,$)}function FS(_,A,$){for(var X=$?ym:Ag,re=_[0].length,fe=_.length,xe=fe,Ie=Ye(fe),Ue=1/0,pt=[];xe--;){var gt=_[xe];xe&&A&&(gt=Ei(gt,hi(A))),Ue=wa(gt.length,Ue),Ie[xe]=!$&&(A||re>=120&&gt.length>=120)?new Pg(xe&&gt):n}gt=_[0];var Ct=-1,Yt=Ie[0];e:for(;++Ct<re&&pt.length<Ue;){var mn=gt[Ct],Rn=A?A(mn):mn;if(mn=$||mn!==0?mn:0,!(Yt?_a(Yt,Rn):X(pt,Rn,$))){for(xe=fe;--xe;){var yr=Ie[xe];if(!(yr?_a(yr,Rn):X(_[xe],Rn,$)))continue e}Yt&&Yt.push(Rn),pt.push(mn)}}return pt}function Gh(_,A,$,X){return Tl(_,function(re,fe,xe){A(X,$(re),fe,xe)}),X}function xc(_,A,$){A=Ld(A,_),_=zo(_,A);var X=_==null?_:_[Nf(ru(A))];return X==null?n:Uo(X,_,$)}function BS(_){return Zs(_)&&Zo(_)==ee}function ZO(_){return Zs(_)&&Zo(_)==Oe}function Yh(_){return Zs(_)&&Zo(_)==Se}function _c(_,A,$,X,re){return _===A?!0:_==null||A==null||!Zs(_)&&!Zs(A)?_!==_&&A!==A:jS(_,A,$,X,_c,re)}function jS(_,A,$,X,re,fe){var xe=sr(_),Ie=sr(A),Ue=xe?ae:ta(_),pt=Ie?ae:ta(A);Ue=Ue==ee?Me:Ue,pt=pt==ee?Me:pt;var gt=Ue==Me,Ct=pt==Me,Yt=Ue==pt;if(Yt&&Ev(_)){if(!Ev(A))return!1;xe=!0,gt=!1}if(Yt&&!gt)return fe||(fe=new Ta),xe||TT(_)?_k(_,A,$,X,re,fe):wk(_,A,Ue,$,X,re,fe);if(!($&p)){var mn=gt&&ti.call(_,"__wrapped__"),Rn=Ct&&ti.call(A,"__wrapped__");if(mn||Rn){var yr=mn?_.value():_,Dn=Rn?A.value():A;return fe||(fe=new Ta),re(yr,Dn,$,X,fe)}}return Yt?(fe||(fe=new Ta),c4(_,A,$,X,re,fe)):!1}function e4(_){return Zs(_)&&ta(_)==De}function lv(_,A,$,X){var re=$.length,fe=re,xe=!X;if(_==null)return!fe;for(_=Ii(_);re--;){var Ie=$[re];if(xe&&Ie[2]?Ie[1]!==_[Ie[0]]:!(Ie[0]in _))return!1}for(;++re<fe;){Ie=$[re];var Ue=Ie[0],pt=_[Ue],gt=Ie[1];if(xe&&Ie[2]){if(pt===n&&!(Ue in _))return!1}else{var Ct=new Ta;if(X)var Yt=X(pt,gt,Ue,_,A,Ct);if(!(Yt===n?_c(gt,pt,p|m,X,Ct):Yt))return!1}}return!0}function ek(_){if(!js(_)||h4(_))return!1;var A=Kg(_)?jO:Oh;return A.test(Dm(_))}function u_(_){return Zs(_)&&Zo(_)==yt}function Od(_){return Zs(_)&&ta(_)==St}function l_(_){return Zs(_)&&N4(_.length)&&!!xr[Zo(_)]}function cv(_){return typeof _=="function"?_:_==null?Ic:typeof _=="object"?sr(_)?us(_[0],_[1]):US(_):Cue(_)}function Kh(_){if(!Zh(_))return ev(_);var A=[];for(var $ in Ii(_))ti.call(_,$)&&$!="constructor"&&A.push($);return A}function tk(_){if(!js(_))return g4(_);var A=Zh(_),$=[];for(var X in _)X=="constructor"&&(A||!ti.call(_,X))||$.push(X);return $}function Im(_,A){return _<A}function nk(_,A){var $=-1,X=Cc(_)?Ye(_.length):[];return Pd(_,function(re,fe,xe){X[++$]=A(re,fe,xe)}),X}function US(_){var A=x_(_);return A.length==1&&A[0][2]?iT(A[0][0],A[0][1]):function($){return $===_||lv($,_,A)}}function us(_,A){return en(_)&&E_(A)?iT(Nf(_),A):function($){var X=MU($,_);return X===n&&X===A?LU($,_):_c(A,X,p|m)}}function Bg(_,A,$,X,re){_!==A&&LS(A,function(fe,xe){if(re||(re=new Ta),js(fe))rk(_,A,xe,$,Bg,X,re);else{var Ie=X?X(Bd(_,xe),fe,xe+"",_,A,re):n;Ie===n&&(Ie=fe),i_(_,xe,Ie)}},Ac)}function rk(_,A,$,X,re,fe,xe){var Ie=Bd(_,$),Ue=Bd(A,$),pt=xe.get(Ue);if(pt){i_(_,$,pt);return}var gt=fe?fe(Ie,Ue,$+"",_,A,xe):n,Ct=gt===n;if(Ct){var Yt=sr(Ue),mn=!Yt&&Ev(Ue),Rn=!Yt&&!mn&&TT(Ue);gt=Ue,Yt||mn||Rn?sr(Ie)?gt=Ie:So(Ie)?gt=eu(Ie):mn?(Ct=!1,gt=fk(Ue,!0)):Rn?(Ct=!1,gt=s4(Ue,!0)):gt=[]:Vk(Ue)||D_(Ue)?(gt=Ie,D_(Ie)?gt=gue(Ie):(!js(Ie)||Kg(Ie))&&(gt=na(Ue))):Ct=!1}Ct&&(xe.set(Ue,gt),re(gt,Ue,X,fe,xe),xe.delete(Ue)),i_(_,$,gt)}function zS(_,A){var $=_.length;if($)return A+=A<0?$:0,ls(A,$)?_[A]:n}function c_(_,A,$){A.length?A=Ei(A,function(fe){return sr(fe)?function(xe){return Wh(xe,fe.length===1?fe[0]:fe)}:fe}):A=[Ic];var X=-1;A=Ei(A,hi(Tn()));var re=nk(_,function(fe,xe,Ie){var Ue=Ei(A,function(pt){return pt(fe)});return{criteria:Ue,index:++X,value:fe}});return Ze(re,function(fe,xe){return pU(fe,xe,$)})}function ik(_,A){return km(_,A,function($,X){return LU(_,X)})}function km(_,A,$){for(var X=-1,re=A.length,fe={};++X<re;){var xe=A[X],Ie=Wh(_,xe);$(Ie,xe)&&Ug(fe,Ld(xe,_),Ie)}return fe}function ys(_){return function(A){return Wh(A,_)}}function Bs(_,A,$,X){var re=X?Td:jh,fe=-1,xe=A.length,Ie=_;for(_===A&&(A=eu(A)),$&&(Ie=Ei(_,hi($)));++fe<xe;)for(var Ue=0,pt=A[fe],gt=$?$(pt):pt;(Ue=re(Ie,gt,Ue,X))>-1;)Ie!==_&&SS.call(Ie,Ue,1),SS.call(_,Ue,1);return _}function _o(_,A){for(var $=_?A.length:0,X=$-1;$--;){var re=A[$];if($==X||re!==fe){var fe=re;ls(re)?SS.call(_,re,1):qS(_,re)}}return _}function fv(_,A){return _+xm(e_()*(A-_+1))}function f_(_,A,$,X){for(var re=-1,fe=Qs(Dg((A-_)/($||1)),0),xe=Ye(fe);fe--;)xe[X?fe:++re]=_,_+=$;return xe}function jg(_,A){var $="";if(!_||A<1||A>Z)return $;do A%2&&($+=_),A=xm(A/2),A&&(_+=_);while(A);return $}function hr(_,A){return Cl(sT(_,A,Ic),_+"")}function Aa(_){return Rd(CT(_))}function sk(_,A){var $=CT(_);return oT($,qh(A,0,$.length))}function Ug(_,A,$,X){if(!js(_))return _;A=Ld(A,_);for(var re=-1,fe=A.length,xe=fe-1,Ie=_;Ie!=null&&++re<fe;){var Ue=Nf(A[re]),pt=$;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return _;if(re!=xe){var gt=Ie[Ue];pt=X?X(gt,Ue,Ie):n,pt===n&&(pt=js(gt)?gt:ls(A[re+1])?[]:{})}Lg(Ie,Ue,pt),Ie=Ie[Ue]}return _}var VS=IS?function(_,A){return IS.set(_,A),_}:Ic,Md=Zx?function(_,A){return Zx(_,"toString",{configurable:!0,enumerable:!1,value:FU(A),writable:!0})}:Ic;function wc(_){return oT(CT(_))}function Ia(_,A,$){var X=-1,re=_.length;A<0&&(A=-A>re?0:re+A),$=$>re?re:$,$<0&&($+=re),re=A>$?0:$-A>>>0,A>>>=0;for(var fe=Ye(re);++X<re;)fe[X]=_[X+A];return fe}function ok(_,A){var $;return Pd(_,function(X,re,fe){return $=A(X,re,fe),!$}),!!$}function dv(_,A,$){var X=0,re=_==null?X:_.length;if(typeof A=="number"&&A===A&&re<=V){for(;X<re;){var fe=X+re>>>1,xe=_[fe];xe!==null&&!Mf(xe)&&($?xe<=A:xe<A)?X=fe+1:re=fe}return re}return HS(_,A,Ic,$)}function HS(_,A,$,X){var re=0,fe=_==null?0:_.length;if(fe===0)return 0;A=$(A);for(var xe=A!==A,Ie=A===null,Ue=Mf(A),pt=A===n;re<fe;){var gt=xm((re+fe)/2),Ct=$(_[gt]),Yt=Ct!==n,mn=Ct===null,Rn=Ct===Ct,yr=Mf(Ct);if(xe)var Dn=X||Rn;else pt?Dn=Rn&&(X||Yt):Ie?Dn=Rn&&Yt&&(X||!mn):Ue?Dn=Rn&&Yt&&!mn&&(X||!yr):mn||yr?Dn=!1:Dn=X?Ct<=A:Ct<A;Dn?re=gt+1:fe=gt}return wa(fe,G)}function ak(_,A){for(var $=-1,X=_.length,re=0,fe=[];++$<X;){var xe=_[$],Ie=A?A(xe):xe;if(!$||!tp(Ie,Ue)){var Ue=Ie;fe[re++]=xe===0?0:xe}}return fe}function uk(_){return typeof _=="number"?_:Mf(_)?q:+_}function Fu(_){if(typeof _=="string")return _;if(sr(_))return Ei(_,Fu)+"";if(Mf(_))return kS?kS.call(_):"";var A=_+"";return A=="0"&&1/_==-1/0?"-0":A}function Xh(_,A,$){var X=-1,re=Ag,fe=_.length,xe=!0,Ie=[],Ue=Ie;if($)xe=!1,re=ym;else if(fe>=i){var pt=A?null:l4(_);if(pt)return bm(pt);xe=!1,re=_a,Ue=new Pg}else Ue=A?[]:Ie;e:for(;++X<fe;){var gt=_[X],Ct=A?A(gt):gt;if(gt=$||gt!==0?gt:0,xe&&Ct===Ct){for(var Yt=Ue.length;Yt--;)if(Ue[Yt]===Ct)continue e;A&&Ue.push(Ct),Ie.push(gt)}else re(Ue,Ct,$)||(Ue!==Ie&&Ue.push(Ct),Ie.push(gt))}return Ie}function qS(_,A){return A=Ld(A,_),_=zo(_,A),_==null||delete _[Nf(ru(A))]}function lk(_,A,$,X){return Ug(_,A,$(Wh(_,A)),X)}function d_(_,A,$,X){for(var re=_.length,fe=X?re:-1;(X?fe--:++fe<re)&&A(_[fe],fe,_););return $?Ia(_,X?0:fe,X?fe+1:re):Ia(_,X?fe+1:0,X?re:fe)}function hv(_,A){var $=_;return $ instanceof ir&&($=$.value()),Tf(A,function(X,re){return re.func.apply(re.thisArg,Sf([X],re.args))},$)}function WS(_,A,$){var X=_.length;if(X<2)return X?Xh(_[0]):[];for(var re=-1,fe=Ye(X);++re<X;)for(var xe=_[re],Ie=-1;++Ie<X;)Ie!=re&&(fe[re]=Nd(fe[re]||xe,_[Ie],A,$));return Xh(Cs(fe,1),A,$)}function h_(_,A,$){for(var X=-1,re=_.length,fe=A.length,xe={};++X<re;){var Ie=X<fe?A[X]:n;$(xe,_[X],Ie)}return xe}function pv(_){return So(_)?_:[]}function GS(_){return typeof _=="function"?_:Ic}function Ld(_,A){return sr(_)?_:en(_,A)?[_]:Ik(ki(_))}var t4=hr;function Qh(_,A,$){var X=_.length;return $=$===n?X:$,!A&&$>=X?_:Ia(_,A,$)}var ck=zO||function(_){return cn.clearTimeout(_)};function fk(_,A){if(A)return _.slice();var $=_.length,X=qI?qI($):new _.constructor($);return _.copy(X),X}function p_(_){var A=new _.constructor(_.byteLength);return new Jx(A).set(new Jx(_)),A}function n4(_,A){var $=A?p_(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.byteLength)}function r4(_){var A=new _.constructor(_.source,Ka.exec(_));return A.lastIndex=_.lastIndex,A}function i4(_){return El?Ii(El.call(_)):{}}function s4(_,A){var $=A?p_(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.length)}function dk(_,A){if(_!==A){var $=_!==n,X=_===null,re=_===_,fe=Mf(_),xe=A!==n,Ie=A===null,Ue=A===A,pt=Mf(A);if(!Ie&&!pt&&!fe&&_>A||fe&&xe&&Ue&&!Ie&&!pt||X&&xe&&Ue||!$&&Ue||!re)return 1;if(!X&&!fe&&!pt&&_<A||pt&&$&&re&&!X&&!fe||Ie&&$&&re||!xe&&re||!Ue)return-1}return 0}function pU(_,A,$){for(var X=-1,re=_.criteria,fe=A.criteria,xe=re.length,Ie=$.length;++X<xe;){var Ue=dk(re[X],fe[X]);if(Ue){if(X>=Ie)return Ue;var pt=$[X];return Ue*(pt=="desc"?-1:1)}}return _.index-A.index}function o4(_,A,$,X){for(var re=-1,fe=_.length,xe=$.length,Ie=-1,Ue=A.length,pt=Qs(fe-xe,0),gt=Ye(Ue+pt),Ct=!X;++Ie<Ue;)gt[Ie]=A[Ie];for(;++re<xe;)(Ct||re<fe)&&(gt[$[re]]=_[re]);for(;pt--;)gt[Ie++]=_[re++];return gt}function hk(_,A,$,X){for(var re=-1,fe=_.length,xe=-1,Ie=$.length,Ue=-1,pt=A.length,gt=Qs(fe-Ie,0),Ct=Ye(gt+pt),Yt=!X;++re<gt;)Ct[re]=_[re];for(var mn=re;++Ue<pt;)Ct[mn+Ue]=A[Ue];for(;++xe<Ie;)(Yt||re<fe)&&(Ct[mn+$[xe]]=_[re++]);return Ct}function eu(_,A){var $=-1,X=_.length;for(A||(A=Ye(X));++$<X;)A[$]=_[$];return A}function If(_,A,$,X){var re=!$;$||($={});for(var fe=-1,xe=A.length;++fe<xe;){var Ie=A[fe],Ue=X?X($[Ie],_[Ie],Ie,$,_):n;Ue===n&&(Ue=_[Ie]),re?Dd($,Ie,Ue):Lg($,Ie,Ue)}return $}function YS(_,A){return If(_,kf(_),A)}function mU(_,A){return If(_,f4(_),A)}function KS(_,A){return function($,X){var re=sr($)?Bh:Sl,fe=A?A():{};return re($,_,Tn(X,2),fe)}}function mv(_){return hr(function(A,$){var X=-1,re=$.length,fe=re>1?$[re-1]:n,xe=re>2?$[2]:n;for(fe=_.length>3&&typeof fe=="function"?(re--,fe):n,xe&&nu($[0],$[1],xe)&&(fe=re<3?n:fe,re=1),A=Ii(A);++X<re;){var Ie=$[X];Ie&&_(A,Ie,X,fe)}return A})}function Ec(_,A){return function($,X){if($==null)return $;if(!Cc($))return _($,X);for(var re=$.length,fe=A?re:-1,xe=Ii($);(A?fe--:++fe<re)&&X(xe[fe],fe,xe)!==!1;);return $}}function XS(_){return function(A,$,X){for(var re=-1,fe=Ii(A),xe=X(A),Ie=xe.length;Ie--;){var Ue=xe[_?Ie:++re];if($(fe[Ue],Ue,fe)===!1)break}return A}}function QS(_,A,$){var X=A&g,re=gv(_);function fe(){var xe=this&&this!==cn&&this instanceof fe?re:_;return xe.apply(X?$:this,arguments)}return fe}function pk(_){return function(A){A=ki(A);var $=K1(A)?wl(A):n,X=$?$[0]:A.charAt(0),re=$?Qh($,1).join(""):A.slice(1);return X[_]()+re}}function zg(_){return function(A){return Tf(Sue(Eue(A).replace(V1,"")),_,"")}}function gv(_){return function(){var A=arguments;switch(A.length){case 0:return new _;case 1:return new _(A[0]);case 2:return new _(A[0],A[1]);case 3:return new _(A[0],A[1],A[2]);case 4:return new _(A[0],A[1],A[2],A[3]);case 5:return new _(A[0],A[1],A[2],A[3],A[4]);case 6:return new _(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new _(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var $=iv(_.prototype),X=_.apply($,A);return js(X)?X:$}}function mk(_,A,$){var X=gv(_);function re(){for(var fe=arguments.length,xe=Ye(fe),Ie=fe,Ue=Jh(re);Ie--;)xe[Ie]=arguments[Ie];var pt=fe<3&&xe[0]!==Ue&&xe[fe-1]!==Ue?[]:pc(xe,Ue);if(fe-=pt.length,fe<$)return tu(_,A,yv,re.placeholder,n,xe,pt,n,n,$-fe);var gt=this&&this!==cn&&this instanceof re?X:_;return Uo(gt,this,xe)}return re}function Vg(_){return function(A,$,X){var re=Ii(A);if(!Cc(A)){var fe=Tn($,3);A=ka(A),$=function(Ie){return fe(re[Ie],Ie,re)}}var xe=_(A,$,X);return xe>-1?re[fe?A[xe]:xe]:n}}function JS(_){return Fd(function(A){var $=A.length,X=$,re=Ea.prototype.thru;for(_&&A.reverse();X--;){var fe=A[X];if(typeof fe!="function")throw new mc(o);if(re&&!xe&&vv(fe)=="wrapper")var xe=new Ea([],!0)}for(X=xe?X:$;++X<$;){fe=A[X];var Ie=vv(fe),Ue=Ie=="wrapper"?tT(fe):n;Ue&&w_(Ue[0])&&Ue[1]==(I|w|T|R)&&!Ue[4].length&&Ue[9]==1?xe=xe[vv(Ue[0])].apply(xe,Ue[3]):xe=fe.length==1&&w_(fe)?xe[Ie]():xe.thru(fe)}return function(){var pt=arguments,gt=pt[0];if(xe&&pt.length==1&&sr(gt))return xe.plant(gt).value();for(var Ct=0,Yt=$?A[Ct].apply(this,pt):gt;++Ct<$;)Yt=A[Ct].call(this,Yt);return Yt}})}function yv(_,A,$,X,re,fe,xe,Ie,Ue,pt){var gt=A&I,Ct=A&g,Yt=A&v,mn=A&(w|E),Rn=A&N,yr=Yt?n:gv(_);function Dn(){for(var Dr=arguments.length,Ur=Ye(Dr),Lf=Dr;Lf--;)Ur[Lf]=arguments[Lf];if(mn)var Il=Jh(Dn),$f=G1(Ur,Il);if(X&&(Ur=o4(Ur,X,re,mn)),fe&&(Ur=hk(Ur,fe,xe,mn)),Dr-=$f,mn&&Dr<pt){var To=pc(Ur,Il);return tu(_,A,yv,Dn.placeholder,$,Ur,To,Ie,Ue,pt-Dr)}var np=Ct?$:this,Qg=Yt?np[_]:_;return Dr=Ur.length,Ie?Ur=Rf(Ur,Ie):Rn&&Dr>1&&Ur.reverse(),gt&&Ue<Dr&&(Ur.length=Ue),this&&this!==cn&&this instanceof Dn&&(Qg=yr||gv(Qg)),Qg.apply(np,Ur)}return Dn}function a4(_,A){return function($,X){return Gh($,_,A(X),{})}}function m_(_,A){return function($,X){var re;if($===n&&X===n)return A;if($!==n&&(re=$),X!==n){if(re===n)return X;typeof $=="string"||typeof X=="string"?($=Fu($),X=Fu(X)):($=uk($),X=uk(X)),re=_($,X)}return re}}function ZS(_){return Fd(function(A){return A=Ei(A,hi(Tn())),hr(function($){var X=this;return _(A,function(re){return Uo(re,X,$)})})})}function g_(_,A){A=A===n?" ":Fu(A);var $=A.length;if($<2)return $?jg(A,_):A;var X=jg(A,Dg(_/kg(A)));return K1(A)?Qh(wl(X),0,_).join(""):X.slice(0,_)}function u4(_,A,$,X){var re=A&g,fe=gv(_);function xe(){for(var Ie=-1,Ue=arguments.length,pt=-1,gt=X.length,Ct=Ye(gt+Ue),Yt=this&&this!==cn&&this instanceof xe?fe:_;++pt<gt;)Ct[pt]=X[pt];for(;Ue--;)Ct[pt++]=arguments[++Ie];return Uo(Yt,re?$:this,Ct)}return xe}function gk(_){return function(A,$,X){return X&&typeof X!="number"&&nu(A,$,X)&&($=X=n),A=Xg(A),$===n?($=A,A=0):$=Xg($),X=X===n?A<$?1:-1:Xg(X),f_(A,$,X,_)}}function eT(_){return function(A,$){return typeof A=="string"&&typeof $=="string"||(A=jd(A),$=jd($)),_(A,$)}}function tu(_,A,$,X,re,fe,xe,Ie,Ue,pt){var gt=A&w,Ct=gt?xe:n,Yt=gt?n:xe,mn=gt?fe:n,Rn=gt?n:fe;A|=gt?T:C,A&=~(gt?C:T),A&b||(A&=-4);var yr=[_,A,re,mn,Ct,Rn,Yt,Ie,Ue,pt],Dn=$.apply(n,yr);return w_(_)&&Ck(Dn,yr),Dn.placeholder=X,Ak(Dn,_,A)}function ea(_){var A=Xs[_];return function($,X){if($=jd($),X=X==null?0:wa(pr(X),292),X&&Z1($)){var re=(ki($)+"e").split("e"),fe=A(re[0]+"e"+(+re[1]+X));return re=(ki(fe)+"e").split("e"),+(re[0]+"e"+(+re[1]-X))}return A($)}}var l4=_m&&1/bm(new _m([,-0]))[1]==ne?function(_){return new _m(_)}:UU;function yk(_){return function(A){var $=ta(A);return $==De?yS(A):$==St?uU(A):xo(A,_(A))}}function $d(_,A,$,X,re,fe,xe,Ie){var Ue=A&v;if(!Ue&&typeof _!="function")throw new mc(o);var pt=X?X.length:0;if(pt||(A&=-97,X=re=n),xe=xe===n?xe:Qs(pr(xe),0),Ie=Ie===n?Ie:pr(Ie),pt-=re?re.length:0,A&C){var gt=X,Ct=re;X=re=n}var Yt=Ue?n:tT(_),mn=[_,A,$,X,re,gt,Ct,fe,xe,Ie];if(Yt&&m4(mn,Yt),_=mn[0],A=mn[1],$=mn[2],X=mn[3],re=mn[4],Ie=mn[9]=mn[9]===n?Ue?0:_.length:Qs(mn[9]-pt,0),!Ie&&A&(w|E)&&(A&=-25),!A||A==g)var Rn=QS(_,A,$);else A==w||A==E?Rn=mk(_,A,Ie):(A==T||A==(g|T))&&!re.length?Rn=u4(_,A,$,X):Rn=yv.apply(n,mn);var yr=Yt?VS:Ck;return Ak(yr(Rn,mn),_,A)}function vk(_,A,$,X){return _===n||tp(_,Cd[$])&&!ti.call(X,$)?A:_}function bk(_,A,$,X,re,fe){return js(_)&&js(A)&&(fe.set(A,_),Bg(_,A,n,bk,fe),fe.delete(A)),_}function xk(_){return Vk(_)?n:_}function _k(_,A,$,X,re,fe){var xe=$&p,Ie=_.length,Ue=A.length;if(Ie!=Ue&&!(xe&&Ue>Ie))return!1;var pt=fe.get(_),gt=fe.get(A);if(pt&&gt)return pt==A&&gt==_;var Ct=-1,Yt=!0,mn=$&m?new Pg:n;for(fe.set(_,A),fe.set(A,_);++Ct<Ie;){var Rn=_[Ct],yr=A[Ct];if(X)var Dn=xe?X(yr,Rn,Ct,A,_,fe):X(Rn,yr,Ct,_,A,fe);if(Dn!==n){if(Dn)continue;Yt=!1;break}if(mn){if(!q1(A,function(Dr,Ur){if(!_a(mn,Ur)&&(Rn===Dr||re(Rn,Dr,$,X,fe)))return mn.push(Ur)})){Yt=!1;break}}else if(!(Rn===yr||re(Rn,yr,$,X,fe))){Yt=!1;break}}return fe.delete(_),fe.delete(A),Yt}function wk(_,A,$,X,re,fe,xe){switch($){case ht:if(_.byteLength!=A.byteLength||_.byteOffset!=A.byteOffset)return!1;_=_.buffer,A=A.buffer;case Oe:return!(_.byteLength!=A.byteLength||!fe(new Jx(_),new Jx(A)));case pe:case Se:case tt:return tp(+_,+A);case ye:return _.name==A.name&&_.message==A.message;case yt:case Ot:return _==A+"";case De:var Ie=yS;case St:var Ue=X&p;if(Ie||(Ie=bm),_.size!=A.size&&!Ue)return!1;var pt=xe.get(_);if(pt)return pt==A;X|=m,xe.set(_,A);var gt=_k(Ie(_),Ie(A),X,re,fe,xe);return xe.delete(_),gt;case qe:if(El)return El.call(_)==El.call(A)}return!1}function c4(_,A,$,X,re,fe){var xe=$&p,Ie=y_(_),Ue=Ie.length,pt=y_(A),gt=pt.length;if(Ue!=gt&&!xe)return!1;for(var Ct=Ue;Ct--;){var Yt=Ie[Ct];if(!(xe?Yt in A:ti.call(A,Yt)))return!1}var mn=fe.get(_),Rn=fe.get(A);if(mn&&Rn)return mn==A&&Rn==_;var yr=!0;fe.set(_,A),fe.set(A,_);for(var Dn=xe;++Ct<Ue;){Yt=Ie[Ct];var Dr=_[Yt],Ur=A[Yt];if(X)var Lf=xe?X(Ur,Dr,Yt,A,_,fe):X(Dr,Ur,Yt,_,A,fe);if(!(Lf===n?Dr===Ur||re(Dr,Ur,$,X,fe):Lf)){yr=!1;break}Dn||(Dn=Yt=="constructor")}if(yr&&!Dn){var Il=_.constructor,$f=A.constructor;Il!=$f&&"constructor"in _&&"constructor"in A&&!(typeof Il=="function"&&Il instanceof Il&&typeof $f=="function"&&$f instanceof $f)&&(yr=!1)}return fe.delete(_),fe.delete(A),yr}function Fd(_){return Cl(sT(_,n,uT),_+"")}function y_(_){return $S(_,ka,kf)}function v_(_){return $S(_,Ac,f4)}var tT=IS?function(_){return IS.get(_)}:UU;function vv(_){for(var A=_.name+"",$=nv[A],X=ti.call(nv,A)?$.length:0;X--;){var re=$[X],fe=re.func;if(fe==null||fe==_)return re.name}return A}function Jh(_){var A=ti.call(oe,"placeholder")?oe:_;return A.placeholder}function Tn(){var _=oe.iteratee||BU;return _=_===BU?cv:_,arguments.length?_(arguments[0],arguments[1]):_}function b_(_,A){var $=_.__data__;return bv(A)?$[typeof A=="string"?"string":"hash"]:$.map}function x_(_){for(var A=ka(_),$=A.length;$--;){var X=A[$],re=_[X];A[$]=[X,re,E_(re)]}return A}function Rm(_,A){var $=Y1(_,A);return ek($)?$:n}function nT(_){var A=ti.call(_,Rg),$=_[Rg];try{_[Rg]=n;var X=!0}catch{}var re=Xx.call(_);return X&&(A?_[Rg]=$:delete _[Rg]),re}var kf=TS?function(_){return _==null?[]:(_=Ii(_),hc(TS(_),function(A){return ES.call(_,A)}))}:zU,f4=TS?function(_){for(var A=[];_;)Sf(A,kf(_)),_=Cf(_);return A}:zU,ta=Zo;(t_&&ta(new t_(new ArrayBuffer(1)))!=ht||Ng&&ta(new Ng)!=De||n_&&ta(n_.resolve())!=Ge||_m&&ta(new _m)!=St||r_&&ta(new r_)!=wt)&&(ta=function(_){var A=Zo(_),$=A==Me?_.constructor:n,X=$?Dm($):"";if(X)switch(X){case YI:return ht;case wm:return De;case HO:return Ge;case rv:return St;case Ad:return wt}return A});function Ek(_,A,$){for(var X=-1,re=$.length;++X<re;){var fe=$[X],xe=fe.size;switch(fe.type){case"drop":_+=xe;break;case"dropRight":A-=xe;break;case"take":A=wa(A,_+xe);break;case"takeRight":_=Qs(_,A-xe);break}}return{start:_,end:A}}function d4(_){var A=_.match(Qo);return A?A[1].split(xl):[]}function Sk(_,A,$){A=Ld(A,_);for(var X=-1,re=A.length,fe=!1;++X<re;){var xe=Nf(A[X]);if(!(fe=_!=null&&$(_,xe)))break;_=_[xe]}return fe||++X!=re?fe:(re=_==null?0:_.length,!!re&&N4(re)&&ls(xe,re)&&(sr(_)||D_(_)))}function __(_){var A=_.length,$=new _.constructor(A);return A&&typeof _[0]=="string"&&ti.call(_,"index")&&($.index=_.index,$.input=_.input),$}function na(_){return typeof _.constructor=="function"&&!Zh(_)?iv(Cf(_)):{}}function gU(_,A,$){var X=_.constructor;switch(A){case Oe:return p_(_);case pe:case Se:return new X(+_);case ht:return n4(_,$);case Lt:case Ft:case dn:case Nn:case Sr:case Ni:case Un:case tr:case Ai:return s4(_,$);case De:return new X;case tt:case Ot:return new X(_);case yt:return r4(_);case St:return new X;case qe:return i4(_)}}function yU(_,A){var $=A.length;if(!$)return _;var X=$-1;return A[X]=($>1?"& ":"")+A[X],A=A.join($>2?", ":" "),_.replace(mo,`{
/* [wrapped with `+A+`] */
`)}function rT(_){return sr(_)||D_(_)||!!(UO&&_&&_[UO])}function ls(_,A){var $=typeof _;return A=A??Z,!!A&&($=="number"||$!="symbol"&&wd.test(_))&&_>-1&&_%1==0&&_<A}function nu(_,A,$){if(!js($))return!1;var X=typeof A;return(X=="number"?Cc($)&&ls(A,$.length):X=="string"&&A in $)?tp($[A],_):!1}function en(_,A){if(sr(_))return!1;var $=typeof _;return $=="number"||$=="symbol"||$=="boolean"||_==null||Mf(_)?!0:ji.test(_)||!Jr.test(_)||A!=null&&_ in Ii(A)}function bv(_){var A=typeof _;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?_!=="__proto__":_===null}function w_(_){var A=vv(_),$=oe[A];if(typeof $!="function"||!(A in ir.prototype))return!1;if(_===$)return!0;var X=tT($);return!!X&&_===X[0]}function h4(_){return!!xS&&xS in _}var vU=Q1?Kg:VU;function Zh(_){var A=_&&_.constructor,$=typeof A=="function"&&A.prototype||Cd;return _===$}function E_(_){return _===_&&!js(_)}function iT(_,A){return function($){return $==null?!1:$[_]===A&&(A!==n||_ in Ii($))}}function p4(_){var A=Mt(_,function(X){return $.size===l&&$.clear(),X}),$=A.cache;return A}function m4(_,A){var $=_[1],X=A[1],re=$|X,fe=re<(g|v|I),xe=X==I&&$==w||X==I&&$==R&&_[7].length<=A[8]||X==(I|R)&&A[7].length<=A[8]&&$==w;if(!(fe||xe))return _;X&g&&(_[2]=A[2],re|=$&g?0:b);var Ie=A[3];if(Ie){var Ue=_[3];_[3]=Ue?o4(Ue,Ie,A[4]):Ie,_[4]=Ue?pc(_[3],c):A[4]}return Ie=A[5],Ie&&(Ue=_[5],_[5]=Ue?hk(Ue,Ie,A[6]):Ie,_[6]=Ue?pc(_[5],c):A[6]),Ie=A[7],Ie&&(_[7]=Ie),X&I&&(_[8]=_[8]==null?A[8]:wa(_[8],A[8])),_[9]==null&&(_[9]=A[9]),_[0]=A[0],_[1]=re,_}function g4(_){var A=[];if(_!=null)for(var $ in Ii(_))A.push($);return A}function Tk(_){return Xx.call(_)}function sT(_,A,$){return A=Qs(A===n?_.length-1:A,0),function(){for(var X=arguments,re=-1,fe=Qs(X.length-A,0),xe=Ye(fe);++re<fe;)xe[re]=X[A+re];re=-1;for(var Ie=Ye(A+1);++re<A;)Ie[re]=X[re];return Ie[A]=$(xe),Uo(_,this,Ie)}}function zo(_,A){return A.length<2?_:Wh(_,Ia(A,0,-1))}function Rf(_,A){for(var $=_.length,X=wa(A.length,$),re=eu(_);X--;){var fe=A[X];_[X]=ls(fe,$)?re[fe]:n}return _}function Bd(_,A){if(!(A==="constructor"&&typeof _[A]=="function")&&A!="__proto__")return _[A]}var Ck=Df(VS),xv=WI||function(_,A){return cn.setTimeout(_,A)},Cl=Df(Md);function Ak(_,A,$){var X=A+"";return Cl(_,yU(X,y4(d4(X),$)))}function Df(_){var A=0,$=0;return function(){var X=hU(),re=F-(X-$);if($=X,re>0){if(++A>=j)return arguments[0]}else A=0;return _.apply(n,arguments)}}function oT(_,A){var $=-1,X=_.length,re=X-1;for(A=A===n?X:A;++$<A;){var fe=fv($,re),xe=_[fe];_[fe]=_[$],_[$]=xe}return _.length=A,_}var Ik=p4(function(_){var A=[];return _.charCodeAt(0)===46&&A.push(""),_.replace(ai,function($,X,re,fe){A.push(re?fe.replace(ac,"$1"):X||$)}),A});function Nf(_){if(typeof _=="string"||Mf(_))return _;var A=_+"";return A=="0"&&1/_==-1/0?"-0":A}function Dm(_){if(_!=null){try{return Kx.call(_)}catch{}try{return _+""}catch{}}return""}function y4(_,A){return bo(Y,function($){var X="_."+$[0];A&$[1]&&!Ag(_,X)&&_.push(X)}),_.sort()}function v4(_){if(_ instanceof ir)return _.clone();var A=new Ea(_.__wrapped__,_.__chain__);return A.__actions__=eu(_.__actions__),A.__index__=_.__index__,A.__values__=_.__values__,A}function aT(_,A,$){($?nu(_,A,$):A===n)?A=1:A=Qs(pr(A),0);var X=_==null?0:_.length;if(!X||A<1)return[];for(var re=0,fe=0,xe=Ye(Dg(X/A));re<X;)xe[fe++]=Ia(_,re,re+=A);return xe}function kk(_){for(var A=-1,$=_==null?0:_.length,X=0,re=[];++A<$;){var fe=_[A];fe&&(re[X++]=fe)}return re}function Sc(){var _=arguments.length;if(!_)return[];for(var A=Ye(_-1),$=arguments[0],X=_;X--;)A[X-1]=arguments[X];return Sf(sr($)?eu($):[$],Cs(A,1))}var jr=hr(function(_,A){return So(_)?Nd(_,Cs(A,1,So,!0)):[]}),Vo=hr(function(_,A){var $=ru(A);return So($)&&($=n),So(_)?Nd(_,Cs(A,1,So,!0),Tn($,2)):[]}),Js=hr(function(_,A){var $=ru(A);return So($)&&($=n),So(_)?Nd(_,Cs(A,1,So,!0),n,$):[]});function ra(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),Ia(_,A<0?0:A,X)):[]}function Al(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),A=X-A,Ia(_,0,A<0?0:A)):[]}function _v(_,A){return _&&_.length?d_(_,Tn(A,3),!0,!0):[]}function wo(_,A){return _&&_.length?d_(_,Tn(A,3),!0):[]}function S_(_,A,$,X){var re=_==null?0:_.length;return re?($&&typeof $!="number"&&nu(_,A,$)&&($=0,X=re),JO(_,A,$,X)):[]}function Nm(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=$==null?0:pr($);return re<0&&(re=Qs(X+re,0)),Ig(_,Tn(A,3),re)}function T_(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=X-1;return $!==n&&(re=pr($),re=$<0?Qs(X+re,0):wa(re,X-1)),Ig(_,Tn(A,3),re,!0)}function uT(_){var A=_==null?0:_.length;return A?Cs(_,1):[]}function C_(_){var A=_==null?0:_.length;return A?Cs(_,ne):[]}function Bu(_,A){var $=_==null?0:_.length;return $?(A=A===n?1:pr(A),Cs(_,A)):[]}function Rk(_){for(var A=-1,$=_==null?0:_.length,X={};++A<$;){var re=_[A];X[re[0]]=re[1]}return X}function Hg(_){return _&&_.length?_[0]:n}function ep(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=$==null?0:pr($);return re<0&&(re=Qs(X+re,0)),jh(_,A,re)}function lT(_){var A=_==null?0:_.length;return A?Ia(_,0,-1):[]}var Dk=hr(function(_){var A=Ei(_,pv);return A.length&&A[0]===_[0]?FS(A):[]}),Pm=hr(function(_){var A=ru(_),$=Ei(_,pv);return A===ru($)?A=n:$.pop(),$.length&&$[0]===_[0]?FS($,Tn(A,2)):[]}),cT=hr(function(_){var A=ru(_),$=Ei(_,pv);return A=typeof A=="function"?A:n,A&&$.pop(),$.length&&$[0]===_[0]?FS($,n,A):[]});function Om(_,A){return _==null?"":CS.call(_,A)}function ru(_){var A=_==null?0:_.length;return A?_[A-1]:n}function A_(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=X;return $!==n&&(re=pr($),re=re<0?Qs(X+re,0):wa(re,X-1)),A===A?lU(_,A,re):Ig(_,D,re,!0)}function Nk(_,A){return _&&_.length?zS(_,pr(A)):n}var fT=hr(I_);function I_(_,A){return _&&_.length&&A&&A.length?Bs(_,A):_}function iu(_,A,$){return _&&_.length&&A&&A.length?Bs(_,A,Tn($,2)):_}function Mm(_,A,$){return _&&_.length&&A&&A.length?Bs(_,A,n,$):_}var Pf=Fd(function(_,A){var $=_==null?0:_.length,X=MS(_,A);return _o(_,Ei(A,function(re){return ls(re,$)?+re:re}).sort(dk)),X});function ju(_,A){var $=[];if(!(_&&_.length))return $;var X=-1,re=[],fe=_.length;for(A=Tn(A,3);++X<fe;){var xe=_[X];A(xe,X,_)&&($.push(xe),re.push(X))}return _o(_,re),$}function dT(_){return _==null?_:AS.call(_)}function Pk(_,A,$){var X=_==null?0:_.length;return X?($&&typeof $!="number"&&nu(_,A,$)?(A=0,$=X):(A=A==null?0:pr(A),$=$===n?X:pr($)),Ia(_,A,$)):[]}function Ok(_,A){return dv(_,A)}function bU(_,A,$){return HS(_,A,Tn($,2))}function Lm(_,A){var $=_==null?0:_.length;if($){var X=dv(_,A);if(X<$&&tp(_[X],A))return X}return-1}function b4(_,A){return dv(_,A,!0)}function Mk(_,A,$){return HS(_,A,Tn($,2),!0)}function qg(_,A){var $=_==null?0:_.length;if($){var X=dv(_,A,!0)-1;if(tp(_[X],A))return X}return-1}function Lk(_){return _&&_.length?ak(_):[]}function Wg(_,A){return _&&_.length?ak(_,Tn(A,2)):[]}function x4(_){var A=_==null?0:_.length;return A?Ia(_,1,A):[]}function _4(_,A,$){return _&&_.length?(A=$||A===n?1:pr(A),Ia(_,0,A<0?0:A)):[]}function $k(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),A=X-A,Ia(_,A<0?0:A,X)):[]}function hT(_,A){return _&&_.length?d_(_,Tn(A,3),!1,!0):[]}function xU(_,A){return _&&_.length?d_(_,Tn(A,3)):[]}var _U=hr(function(_){return Xh(Cs(_,1,So,!0))}),w4=hr(function(_){var A=ru(_);return So(A)&&(A=n),Xh(Cs(_,1,So,!0),Tn(A,2))}),E4=hr(function(_){var A=ru(_);return A=typeof A=="function"?A:n,Xh(Cs(_,1,So,!0),n,A)});function Gg(_){return _&&_.length?Xh(_):[]}function wU(_,A){return _&&_.length?Xh(_,Tn(A,2)):[]}function wv(_,A){return A=typeof A=="function"?A:n,_&&_.length?Xh(_,n,A):[]}function pT(_){if(!(_&&_.length))return[];var A=0;return _=hc(_,function($){if(So($))return A=Qs($.length,A),!0}),ui(A,function($){return Ei(_,te($))})}function vs(_,A){if(!(_&&_.length))return[];var $=pT(_);return A==null?$:Ei($,function(X){return Uo(A,n,X)})}var EU=hr(function(_,A){return So(_)?Nd(_,A):[]}),S4=hr(function(_){return WS(hc(_,So))}),SU=hr(function(_){var A=ru(_);return So(A)&&(A=n),WS(hc(_,So),Tn(A,2))}),TU=hr(function(_){var A=ru(_);return A=typeof A=="function"?A:n,WS(hc(_,So),n,A)}),T4=hr(pT);function C4(_,A){return h_(_||[],A||[],Lg)}function CU(_,A){return h_(_||[],A||[],Ug)}var Tc=hr(function(_){var A=_.length,$=A>1?_[A-1]:n;return $=typeof $=="function"?(_.pop(),$):n,vs(_,$)});function mT(_){var A=oe(_);return A.__chain__=!0,A}function AU(_,A){return A(_),_}function Of(_,A){return A(_)}var gT=Fd(function(_){var A=_.length,$=A?_[0]:0,X=this.__wrapped__,re=function(fe){return MS(fe,_)};return A>1||this.__actions__.length||!(X instanceof ir)||!ls($)?this.thru(re):(X=X.slice($,+$+(A?1:0)),X.__actions__.push({func:Of,args:[re],thisArg:n}),new Ea(X,this.__chain__).thru(function(fe){return A&&!fe.length&&fe.push(n),fe}))});function Yg(){return mT(this)}function yT(){return new Ea(this.value(),this.__chain__)}function Fk(){this.__values__===n&&(this.__values__=pue(this.value()));var _=this.__index__>=this.__values__.length,A=_?n:this.__values__[this.__index__++];return{done:_,value:A}}function Bk(){return this}function IU(_){for(var A,$=this;$ instanceof Id;){var X=v4($);X.__index__=0,X.__values__=n,A?re.__wrapped__=X:A=X;var re=X;$=$.__wrapped__}return re.__wrapped__=_,A}function jk(){var _=this.__wrapped__;if(_ instanceof ir){var A=_;return this.__actions__.length&&(A=new ir(this)),A=A.reverse(),A.__actions__.push({func:Of,args:[dT],thisArg:n}),new Ea(A,this.__chain__)}return this.thru(dT)}function kU(){return hv(this.__wrapped__,this.__actions__)}var A4=KS(function(_,A,$){ti.call(_,$)?++_[$]:Dd(_,$,1)});function I4(_,A,$){var X=sr(_)?Cg:o_;return $&&nu(_,A,$)&&(A=n),X(_,Tn(A,3))}function vT(_,A){var $=sr(_)?hc:JI;return $(_,Tn(A,3))}var bT=Vg(Nm),k4=Vg(T_);function Uk(_,A){return Cs(ET(_,A),1)}function R4(_,A){return Cs(ET(_,A),ne)}function zk(_,A,$){return $=$===n?1:pr($),Cs(ET(_,A),$)}function k_(_,A){var $=sr(_)?bo:Pd;return $(_,Tn(A,3))}function xT(_,A){var $=sr(_)?Tg:QO;return $(_,Tn(A,3))}var _T=KS(function(_,A,$){ti.call(_,$)?_[$].push(A):Dd(_,$,[A])});function D4(_,A,$,X){_=Cc(_)?_:CT(_),$=$&&!X?pr($):0;var re=_.length;return $<0&&($=Qs(re+$,0)),P4(_)?$<=re&&_.indexOf(A,$)>-1:!!re&&jh(_,A,$)>-1}var RU=hr(function(_,A,$){var X=-1,re=typeof A=="function",fe=Cc(_)?Ye(_.length):[];return Pd(_,function(xe){fe[++X]=re?Uo(A,xe,$):xc(xe,A,$)}),fe}),wT=KS(function(_,A,$){Dd(_,$,A)});function ET(_,A){var $=sr(_)?Ei:nk;return $(_,Tn(A,3))}function R_(_,A,$,X){return _==null?[]:(sr(A)||(A=A==null?[]:[A]),$=X?n:$,sr($)||($=$==null?[]:[$]),c_(_,A,$))}var DU=KS(function(_,A,$){_[$?0:1].push(A)},function(){return[[],[]]});function ST(_,A,$){var X=sr(_)?Tf:ze,re=arguments.length<3;return X(_,Tn(A,4),$,re,Pd)}function y(_,A,$){var X=sr(_)?mS:ze,re=arguments.length<3;return X(_,Tn(A,4),$,re,QO)}function x(_,A){var $=sr(_)?hc:JI;return $(_,on(Tn(A,3)))}function k(_){var A=sr(_)?Rd:Aa;return A(_)}function M(_,A,$){($?nu(_,A,$):A===n)?A=1:A=pr(A);var X=sr(_)?Mg:sk;return X(_,A)}function z(_){var A=sr(_)?KO:wc;return A(_)}function K(_){if(_==null)return 0;if(Cc(_))return P4(_)?kg(_):_.length;var A=ta(_);return A==De||A==St?_.size:Kh(_).length}function se(_,A,$){var X=sr(_)?q1:ok;return $&&nu(_,A,$)&&(A=n),X(_,Tn(A,3))}var be=hr(function(_,A){if(_==null)return[];var $=A.length;return $>1&&nu(_,A[0],A[1])?A=[]:$>2&&nu(A[0],A[1],A[2])&&(A=[A[0]]),c_(_,Cs(A,1),[])}),Ce=ns||function(){return cn.Date.now()};function Xe(_,A){if(typeof A!="function")throw new mc(o);return _=pr(_),function(){if(--_<1)return A.apply(this,arguments)}}function Tt(_,A,$){return A=$?n:A,A=_&&A==null?_.length:A,$d(_,I,n,n,n,n,A)}function kt(_,A){var $;if(typeof A!="function")throw new mc(o);return _=pr(_),function(){return--_>0&&($=A.apply(this,arguments)),_<=1&&(A=n),$}}var _t=hr(function(_,A,$){var X=g;if($.length){var re=pc($,Jh(_t));X|=T}return $d(_,X,A,$,re)}),Xt=hr(function(_,A,$){var X=g|v;if($.length){var re=pc($,Jh(Xt));X|=T}return $d(A,X,_,$,re)});function rn(_,A,$){A=$?n:A;var X=$d(_,w,n,n,n,n,n,A);return X.placeholder=rn.placeholder,X}function sn(_,A,$){A=$?n:A;var X=$d(_,E,n,n,n,n,n,A);return X.placeholder=sn.placeholder,X}function As(_,A,$){var X,re,fe,xe,Ie,Ue,pt=0,gt=!1,Ct=!1,Yt=!0;if(typeof _!="function")throw new mc(o);A=jd(A)||0,js($)&&(gt=!!$.leading,Ct="maxWait"in $,fe=Ct?Qs(jd($.maxWait)||0,A):fe,Yt="trailing"in $?!!$.trailing:Yt);function mn(To){var np=X,Qg=re;return X=re=n,pt=To,xe=_.apply(Qg,np),xe}function Rn(To){return pt=To,Ie=xv(Dr,A),gt?mn(To):xe}function yr(To){var np=To-Ue,Qg=To-pt,Aue=A-np;return Ct?wa(Aue,fe-Qg):Aue}function Dn(To){var np=To-Ue,Qg=To-pt;return Ue===n||np>=A||np<0||Ct&&Qg>=fe}function Dr(){var To=Ce();if(Dn(To))return Ur(To);Ie=xv(Dr,yr(To))}function Ur(To){return Ie=n,Yt&&X?mn(To):(X=re=n,xe)}function Lf(){Ie!==n&&ck(Ie),pt=0,X=Ue=re=Ie=n}function Il(){return Ie===n?xe:Ur(Ce())}function $f(){var To=Ce(),np=Dn(To);if(X=arguments,re=this,Ue=To,np){if(Ie===n)return Rn(Ue);if(Ct)return ck(Ie),Ie=xv(Dr,A),mn(Ue)}return Ie===n&&(Ie=xv(Dr,A)),xe}return $f.cancel=Lf,$f.flush=Il,$f}var Ve=hr(function(_,A){return QI(_,1,A)}),Pe=hr(function(_,A,$){return QI(_,jd(A)||0,$)});function We(_){return $d(_,N)}function Mt(_,A){if(typeof _!="function"||A!=null&&typeof A!="function")throw new mc(o);var $=function(){var X=arguments,re=A?A.apply(this,X):X[0],fe=$.cache;if(fe.has(re))return fe.get(re);var xe=_.apply(this,X);return $.cache=fe.set(re,xe)||fe,xe};return $.cache=new(Mt.Cache||gc),$}Mt.Cache=gc;function on(_){if(typeof _!="function")throw new mc(o);return function(){var A=arguments;switch(A.length){case 0:return!_.call(this);case 1:return!_.call(this,A[0]);case 2:return!_.call(this,A[0],A[1]);case 3:return!_.call(this,A[0],A[1],A[2])}return!_.apply(this,A)}}function _n(_){return kt(2,_)}var wn=t4(function(_,A){A=A.length==1&&sr(A[0])?Ei(A[0],hi(Tn())):Ei(Cs(A,1),hi(Tn()));var $=A.length;return hr(function(X){for(var re=-1,fe=wa(X.length,$);++re<fe;)X[re]=A[re].call(this,X[re]);return Uo(_,this,X)})}),kn=hr(function(_,A){var $=pc(A,Jh(kn));return $d(_,T,n,A,$)}),Eo=hr(function(_,A){var $=pc(A,Jh(Eo));return $d(_,C,n,A,$)}),ni=Fd(function(_,A){return $d(_,R,n,n,n,A)});function $m(_,A){if(typeof _!="function")throw new mc(o);return A=A===n?A:pr(A),hr(_,A)}function NU(_,A){if(typeof _!="function")throw new mc(o);return A=A==null?0:Qs(pr(A),0),hr(function($){var X=$[A],re=Qh($,0,A);return X&&Sf(re,X),Uo(_,this,re)})}function j9e(_,A,$){var X=!0,re=!0;if(typeof _!="function")throw new mc(o);return js($)&&(X="leading"in $?!!$.leading:X,re="trailing"in $?!!$.trailing:re),As(_,A,{leading:X,maxWait:A,trailing:re})}function U9e(_){return Tt(_,1)}function z9e(_,A){return kn(GS(A),_)}function V9e(){if(!arguments.length)return[];var _=arguments[0];return sr(_)?_:[_]}function H9e(_){return $u(_,h)}function q9e(_,A){return A=typeof A=="function"?A:n,$u(_,h,A)}function W9e(_){return $u(_,f|h)}function G9e(_,A){return A=typeof A=="function"?A:n,$u(_,f|h,A)}function Y9e(_,A){return A==null||s_(_,A,ka(A))}function tp(_,A){return _===A||_!==_&&A!==A}var K9e=eT(Am),X9e=eT(function(_,A){return _>=A}),D_=BS(function(){return arguments}())?BS:function(_){return Zs(_)&&ti.call(_,"callee")&&!ES.call(_,"callee")},sr=Ye.isArray,Q9e=Sd?hi(Sd):ZO;function Cc(_){return _!=null&&N4(_.length)&&!Kg(_)}function So(_){return Zs(_)&&Cc(_)}function J9e(_){return _===!0||_===!1||Zs(_)&&Zo(_)==pe}var Ev=GI||VU,Z9e=Fs?hi(Fs):Yh;function eje(_){return Zs(_)&&_.nodeType===1&&!Vk(_)}function tje(_){if(_==null)return!0;if(Cc(_)&&(sr(_)||typeof _=="string"||typeof _.splice=="function"||Ev(_)||TT(_)||D_(_)))return!_.length;var A=ta(_);if(A==De||A==St)return!_.size;if(Zh(_))return!Kh(_).length;for(var $ in _)if(ti.call(_,$))return!1;return!0}function nje(_,A){return _c(_,A)}function rje(_,A,$){$=typeof $=="function"?$:n;var X=$?$(_,A):n;return X===n?_c(_,A,n,$):!!X}function PU(_){if(!Zs(_))return!1;var A=Zo(_);return A==ye||A==Le||typeof _.message=="string"&&typeof _.name=="string"&&!Vk(_)}function ije(_){return typeof _=="number"&&Z1(_)}function Kg(_){if(!js(_))return!1;var A=Zo(_);return A==he||A==$e||A==_e||A==at}function cue(_){return typeof _=="number"&&_==pr(_)}function N4(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Z}function js(_){var A=typeof _;return _!=null&&(A=="object"||A=="function")}function Zs(_){return _!=null&&typeof _=="object"}var fue=dc?hi(dc):e4;function sje(_,A){return _===A||lv(_,A,x_(A))}function oje(_,A,$){return $=typeof $=="function"?$:n,lv(_,A,x_(A),$)}function aje(_){return due(_)&&_!=+_}function uje(_){if(vU(_))throw new zn(s);return ek(_)}function lje(_){return _===null}function cje(_){return _==null}function due(_){return typeof _=="number"||Zs(_)&&Zo(_)==tt}function Vk(_){if(!Zs(_)||Zo(_)!=Me)return!1;var A=Cf(_);if(A===null)return!0;var $=ti.call(A,"constructor")&&A.constructor;return typeof $=="function"&&$ instanceof $&&Kx.call($)==_S}var OU=Sg?hi(Sg):u_;function fje(_){return cue(_)&&_>=-9007199254740991&&_<=Z}var hue=Ef?hi(Ef):Od;function P4(_){return typeof _=="string"||!sr(_)&&Zs(_)&&Zo(_)==Ot}function Mf(_){return typeof _=="symbol"||Zs(_)&&Zo(_)==qe}var TT=pS?hi(pS):l_;function dje(_){return _===n}function hje(_){return Zs(_)&&ta(_)==wt}function pje(_){return Zs(_)&&Zo(_)==ke}var mje=eT(Im),gje=eT(function(_,A){return _<=A});function pue(_){if(!_)return[];if(Cc(_))return P4(_)?wl(_):eu(_);if(Vh&&_[Vh])return aU(_[Vh]());var A=ta(_),$=A==De?yS:A==St?bm:CT;return $(_)}function Xg(_){if(!_)return _===0?_:0;if(_=jd(_),_===ne||_===-1/0){var A=_<0?-1:1;return A*ie}return _===_?_:0}function pr(_){var A=Xg(_),$=A%1;return A===A?$?A-$:A:0}function mue(_){return _?qh(pr(_),0,U):0}function jd(_){if(typeof _=="number")return _;if(Mf(_))return q;if(js(_)){var A=typeof _.valueOf=="function"?_.valueOf():_;_=js(A)?A+"":A}if(typeof _!="string")return _===0?_:+_;_=Rr(_);var $=mm.test(_);return $||_d.test(_)?rr(_.slice(2),$?2:8):Jo.test(_)?q:+_}function gue(_){return If(_,Ac(_))}function yje(_){return _?qh(pr(_),-9007199254740991,Z):_===0?_:0}function ki(_){return _==null?"":Fu(_)}var vje=mv(function(_,A){if(Zh(A)||Cc(A)){If(A,ka(A),_);return}for(var $ in A)ti.call(A,$)&&Lg(_,$,A[$])}),yue=mv(function(_,A){If(A,Ac(A),_)}),O4=mv(function(_,A,$,X){If(A,Ac(A),_,X)}),bje=mv(function(_,A,$,X){If(A,ka(A),_,X)}),xje=Fd(MS);function _je(_,A){var $=iv(_);return A==null?$:is($,A)}var wje=hr(function(_,A){_=Ii(_);var $=-1,X=A.length,re=X>2?A[2]:n;for(re&&nu(A[0],A[1],re)&&(X=1);++$<X;)for(var fe=A[$],xe=Ac(fe),Ie=-1,Ue=xe.length;++Ie<Ue;){var pt=xe[Ie],gt=_[pt];(gt===n||tp(gt,Cd[pt])&&!ti.call(_,pt))&&(_[pt]=fe[pt])}return _}),Eje=hr(function(_){return _.push(n,bk),Uo(vue,n,_)});function Sje(_,A){return xa(_,Tn(A,3),Tl)}function Tje(_,A){return xa(_,Tn(A,3),Cm)}function Cje(_,A){return _==null?_:LS(_,Tn(A,3),Ac)}function Aje(_,A){return _==null?_:a_(_,Tn(A,3),Ac)}function Ije(_,A){return _&&Tl(_,Tn(A,3))}function kje(_,A){return _&&Cm(_,Tn(A,3))}function Rje(_){return _==null?[]:uv(_,ka(_))}function Dje(_){return _==null?[]:uv(_,Ac(_))}function MU(_,A,$){var X=_==null?n:Wh(_,A);return X===n?$:X}function Nje(_,A){return _!=null&&Sk(_,A,bc)}function LU(_,A){return _!=null&&Sk(_,A,Fg)}var Pje=a4(function(_,A,$){A!=null&&typeof A.toString!="function"&&(A=Xx.call(A)),_[A]=$},FU(Ic)),Oje=a4(function(_,A,$){A!=null&&typeof A.toString!="function"&&(A=Xx.call(A)),ti.call(_,A)?_[A].push($):_[A]=[$]},Tn),Mje=hr(xc);function ka(_){return Cc(_)?kd(_):Kh(_)}function Ac(_){return Cc(_)?kd(_,!0):tk(_)}function Lje(_,A){var $={};return A=Tn(A,3),Tl(_,function(X,re,fe){Dd($,A(X,re,fe),X)}),$}function $je(_,A){var $={};return A=Tn(A,3),Tl(_,function(X,re,fe){Dd($,re,A(X,re,fe))}),$}var Fje=mv(function(_,A,$){Bg(_,A,$)}),vue=mv(function(_,A,$,X){Bg(_,A,$,X)}),Bje=Fd(function(_,A){var $={};if(_==null)return $;var X=!1;A=Ei(A,function(fe){return fe=Ld(fe,_),X||(X=fe.length>1),fe}),If(_,v_(_),$),X&&($=$u($,f|d|h,xk));for(var re=A.length;re--;)qS($,A[re]);return $});function jje(_,A){return bue(_,on(Tn(A)))}var Uje=Fd(function(_,A){return _==null?{}:ik(_,A)});function bue(_,A){if(_==null)return{};var $=Ei(v_(_),function(X){return[X]});return A=Tn(A),km(_,$,function(X,re){return A(X,re[0])})}function zje(_,A,$){A=Ld(A,_);var X=-1,re=A.length;for(re||(re=1,_=n);++X<re;){var fe=_==null?n:_[Nf(A[X])];fe===n&&(X=re,fe=$),_=Kg(fe)?fe.call(_):fe}return _}function Vje(_,A,$){return _==null?_:Ug(_,A,$)}function Hje(_,A,$,X){return X=typeof X=="function"?X:n,_==null?_:Ug(_,A,$,X)}var xue=yk(ka),_ue=yk(Ac);function qje(_,A,$){var X=sr(_),re=X||Ev(_)||TT(_);if(A=Tn(A,4),$==null){var fe=_&&_.constructor;re?$=X?new fe:[]:js(_)?$=Kg(fe)?iv(Cf(_)):{}:$={}}return(re?bo:Tl)(_,function(xe,Ie,Ue){return A($,xe,Ie,Ue)}),$}function Wje(_,A){return _==null?!0:qS(_,A)}function Gje(_,A,$){return _==null?_:lk(_,A,GS($))}function Yje(_,A,$,X){return X=typeof X=="function"?X:n,_==null?_:lk(_,A,GS($),X)}function CT(_){return _==null?[]:Ts(_,ka(_))}function Kje(_){return _==null?[]:Ts(_,Ac(_))}function Xje(_,A,$){return $===n&&($=A,A=n),$!==n&&($=jd($),$=$===$?$:0),A!==n&&(A=jd(A),A=A===A?A:0),qh(jd(_),A,$)}function Qje(_,A,$){return A=Xg(A),$===n?($=A,A=0):$=Xg($),_=jd(_),ZI(_,A,$)}function Jje(_,A,$){if($&&typeof $!="boolean"&&nu(_,A,$)&&(A=$=n),$===n&&(typeof A=="boolean"?($=A,A=n):typeof _=="boolean"&&($=_,_=n)),_===n&&A===n?(_=0,A=1):(_=Xg(_),A===n?(A=_,_=0):A=Xg(A)),_>A){var X=_;_=A,A=X}if($||_%1||A%1){var re=e_();return wa(_+re*(A-_+tn("1e-"+((re+"").length-1))),A)}return fv(_,A)}var Zje=zg(function(_,A,$){return A=A.toLowerCase(),_+($?wue(A):A)});function wue(_){return $U(ki(_).toLowerCase())}function Eue(_){return _=ki(_),_&&_.replace(gf,PO).replace(fc,"")}function e7e(_,A,$){_=ki(_),A=Fu(A);var X=_.length;$=$===n?X:qh(pr($),0,X);var re=$;return $-=A.length,$>=0&&_.slice($,re)==A}function t7e(_){return _=ki(_),_&&$o.test(_)?_.replace(Zi,OO):_}function n7e(_){return _=ki(_),_&&Fr.test(_)?_.replace(Ws,"\\$&"):_}var r7e=zg(function(_,A,$){return _+($?"-":"")+A.toLowerCase()}),i7e=zg(function(_,A,$){return _+($?" ":"")+A.toLowerCase()}),s7e=pk("toLowerCase");function o7e(_,A,$){_=ki(_),A=pr(A);var X=A?kg(_):0;if(!A||X>=A)return _;var re=(A-X)/2;return g_(xm(re),$)+_+g_(Dg(re),$)}function a7e(_,A,$){_=ki(_),A=pr(A);var X=A?kg(_):0;return A&&X<A?_+g_(A-X,$):_}function u7e(_,A,$){_=ki(_),A=pr(A);var X=A?kg(_):0;return A&&X<A?g_(A-X,$)+_:_}function l7e(_,A,$){return $||A==null?A=0:A&&(A=+A),VO(ki(_).replace(es,""),A||0)}function c7e(_,A,$){return($?nu(_,A,$):A===n)?A=1:A=pr(A),jg(ki(_),A)}function f7e(){var _=arguments,A=ki(_[0]);return _.length<3?A:A.replace(_[1],_[2])}var d7e=zg(function(_,A,$){return _+($?"_":"")+A.toLowerCase()});function h7e(_,A,$){return $&&typeof $!="number"&&nu(_,A,$)&&(A=$=n),$=$===n?U:$>>>0,$?(_=ki(_),_&&(typeof A=="string"||A!=null&&!OU(A))&&(A=Fu(A),!A&&K1(_))?Qh(wl(_),0,$):_.split(A,$)):[]}var p7e=zg(function(_,A,$){return _+($?" ":"")+$U(A)});function m7e(_,A,$){return _=ki(_),$=$==null?0:qh(pr($),0,_.length),A=Fu(A),_.slice($,$+A.length)==A}function g7e(_,A,$){var X=oe.templateSettings;$&&nu(_,A,$)&&(A=n),_=ki(_),A=O4({},A,X,vk);var re=O4({},A.imports,X.imports,vk),fe=ka(re),xe=Ts(re,fe),Ie,Ue,pt=0,gt=A.interpolate||yf,Ct="__p += '",Yt=Yx((A.escape||yf).source+"|"+gt.source+"|"+(gt===Ru?ms:yf).source+"|"+(A.evaluate||yf).source+"|$","g"),mn="//# sourceURL="+(ti.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++H1+"]")+`
`;_.replace(Yt,function(Dn,Dr,Ur,Lf,Il,$f){return Ur||(Ur=Lf),Ct+=_.slice(pt,$f).replace(vf,MO),Dr&&(Ie=!0,Ct+=`' +
__e(`+Dr+`) +
'`),Il&&(Ue=!0,Ct+=`';
`+Il+`;
__p += '`),Ur&&(Ct+=`' +
((__t = (`+Ur+`)) == null ? '' : __t) +
'`),pt=$f+Dn.length,Dn}),Ct+=`';
`;var Rn=ti.call(A,"variable")&&A.variable;if(!Rn)Ct=`with (obj) {
`+Ct+`
}
`;else if(Pr.test(Rn))throw new zn(a);Ct=(Ue?Ct.replace(Tr,""):Ct).replace(Lo,"$1").replace(Ji,"$1;"),Ct="function("+(Rn||"obj")+`) {
`+(Rn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ie?", __e = _.escape":"")+(Ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ct+`return __p
}`;var yr=Tue(function(){return ei(fe,mn+"return "+Ct).apply(n,xe)});if(yr.source=Ct,PU(yr))throw yr;return yr}function y7e(_){return ki(_).toLowerCase()}function v7e(_){return ki(_).toUpperCase()}function b7e(_,A,$){if(_=ki(_),_&&($||A===n))return Rr(_);if(!_||!(A=Fu(A)))return _;var X=wl(_),re=wl(A),fe=Pu(X,re),xe=vm(X,re)+1;return Qh(X,fe,xe).join("")}function x7e(_,A,$){if(_=ki(_),_&&($||A===n))return _.slice(0,bS(_)+1);if(!_||!(A=Fu(A)))return _;var X=wl(_),re=vm(X,wl(A))+1;return Qh(X,0,re).join("")}function _7e(_,A,$){if(_=ki(_),_&&($||A===n))return _.replace(es,"");if(!_||!(A=Fu(A)))return _;var X=wl(_),re=Pu(X,wl(A));return Qh(X,re).join("")}function w7e(_,A){var $=O,X=L;if(js(A)){var re="separator"in A?A.separator:re;$="length"in A?pr(A.length):$,X="omission"in A?Fu(A.omission):X}_=ki(_);var fe=_.length;if(K1(_)){var xe=wl(_);fe=xe.length}if($>=fe)return _;var Ie=$-kg(X);if(Ie<1)return X;var Ue=xe?Qh(xe,0,Ie).join(""):_.slice(0,Ie);if(re===n)return Ue+X;if(xe&&(Ie+=Ue.length-Ie),OU(re)){if(_.slice(Ie).search(re)){var pt,gt=Ue;for(re.global||(re=Yx(re.source,ki(Ka.exec(re))+"g")),re.lastIndex=0;pt=re.exec(gt);)var Ct=pt.index;Ue=Ue.slice(0,Ct===n?Ie:Ct)}}else if(_.indexOf(Fu(re),Ie)!=Ie){var Yt=Ue.lastIndexOf(re);Yt>-1&&(Ue=Ue.slice(0,Yt))}return Ue+X}function E7e(_){return _=ki(_),_&&Qr.test(_)?_.replace(Pi,LO):_}var S7e=zg(function(_,A,$){return _+($?" ":"")+A.toUpperCase()}),$U=pk("toUpperCase");function Sue(_,A,$){return _=ki(_),A=$?n:A,A===n?oU(_)?cU(_):W1(_):_.match(A)||[]}var Tue=hr(function(_,A){try{return Uo(_,n,A)}catch($){return PU($)?$:new zn($)}}),T7e=Fd(function(_,A){return bo(A,function($){$=Nf($),Dd(_,$,_t(_[$],_))}),_});function C7e(_){var A=_==null?0:_.length,$=Tn();return _=A?Ei(_,function(X){if(typeof X[1]!="function")throw new mc(o);return[$(X[0]),X[1]]}):[],hr(function(X){for(var re=-1;++re<A;){var fe=_[re];if(Uo(fe[0],this,X))return Uo(fe[1],this,X)}})}function A7e(_){return XO($u(_,f))}function FU(_){return function(){return _}}function I7e(_,A){return _==null||_!==_?A:_}var k7e=JS(),R7e=JS(!0);function Ic(_){return _}function BU(_){return cv(typeof _=="function"?_:$u(_,f))}function D7e(_){return US($u(_,f))}function N7e(_,A){return us(_,$u(A,f))}var P7e=hr(function(_,A){return function($){return xc($,_,A)}}),O7e=hr(function(_,A){return function($){return xc(_,$,A)}});function jU(_,A,$){var X=ka(A),re=uv(A,X);$==null&&!(js(A)&&(re.length||!X.length))&&($=A,A=_,_=this,re=uv(A,ka(A)));var fe=!(js($)&&"chain"in $)||!!$.chain,xe=Kg(_);return bo(re,function(Ie){var Ue=A[Ie];_[Ie]=Ue,xe&&(_.prototype[Ie]=function(){var pt=this.__chain__;if(fe||pt){var gt=_(this.__wrapped__),Ct=gt.__actions__=eu(this.__actions__);return Ct.push({func:Ue,args:arguments,thisArg:_}),gt.__chain__=pt,gt}return Ue.apply(_,Sf([this.value()],arguments))})}),_}function M7e(){return cn._===this&&(cn._=BO),this}function UU(){}function L7e(_){return _=pr(_),hr(function(A){return zS(A,_)})}var $7e=ZS(Ei),F7e=ZS(Cg),B7e=ZS(q1);function Cue(_){return en(_)?te(Nf(_)):ys(_)}function j7e(_){return function(A){return _==null?n:Wh(_,A)}}var U7e=gk(),z7e=gk(!0);function zU(){return[]}function VU(){return!1}function V7e(){return{}}function H7e(){return""}function q7e(){return!0}function W7e(_,A){if(_=pr(_),_<1||_>Z)return[];var $=U,X=wa(_,U);A=Tn(A),_-=U;for(var re=ui(X,A);++$<_;)A($);return re}function G7e(_){return sr(_)?Ei(_,Nf):Mf(_)?[_]:eu(Ik(ki(_)))}function Y7e(_){var A=++J1;return ki(_)+A}var K7e=m_(function(_,A){return _+A},0),X7e=ea("ceil"),Q7e=m_(function(_,A){return _/A},1),J7e=ea("floor");function Z7e(_){return _&&_.length?$g(_,Ic,Am):n}function eUe(_,A){return _&&_.length?$g(_,Tn(A,2),Am):n}function tUe(_){return W(_,Ic)}function nUe(_,A){return W(_,Tn(A,2))}function rUe(_){return _&&_.length?$g(_,Ic,Im):n}function iUe(_,A){return _&&_.length?$g(_,Tn(A,2),Im):n}var sUe=m_(function(_,A){return _*A},1),oUe=ea("round"),aUe=m_(function(_,A){return _-A},0);function uUe(_){return _&&_.length?Ut(_,Ic):0}function lUe(_,A){return _&&_.length?Ut(_,Tn(A,2)):0}return oe.after=Xe,oe.ary=Tt,oe.assign=vje,oe.assignIn=yue,oe.assignInWith=O4,oe.assignWith=bje,oe.at=xje,oe.before=kt,oe.bind=_t,oe.bindAll=T7e,oe.bindKey=Xt,oe.castArray=V9e,oe.chain=mT,oe.chunk=aT,oe.compact=kk,oe.concat=Sc,oe.cond=C7e,oe.conforms=A7e,oe.constant=FU,oe.countBy=A4,oe.create=_je,oe.curry=rn,oe.curryRight=sn,oe.debounce=As,oe.defaults=wje,oe.defaultsDeep=Eje,oe.defer=Ve,oe.delay=Pe,oe.difference=jr,oe.differenceBy=Vo,oe.differenceWith=Js,oe.drop=ra,oe.dropRight=Al,oe.dropRightWhile=_v,oe.dropWhile=wo,oe.fill=S_,oe.filter=vT,oe.flatMap=Uk,oe.flatMapDeep=R4,oe.flatMapDepth=zk,oe.flatten=uT,oe.flattenDeep=C_,oe.flattenDepth=Bu,oe.flip=We,oe.flow=k7e,oe.flowRight=R7e,oe.fromPairs=Rk,oe.functions=Rje,oe.functionsIn=Dje,oe.groupBy=_T,oe.initial=lT,oe.intersection=Dk,oe.intersectionBy=Pm,oe.intersectionWith=cT,oe.invert=Pje,oe.invertBy=Oje,oe.invokeMap=RU,oe.iteratee=BU,oe.keyBy=wT,oe.keys=ka,oe.keysIn=Ac,oe.map=ET,oe.mapKeys=Lje,oe.mapValues=$je,oe.matches=D7e,oe.matchesProperty=N7e,oe.memoize=Mt,oe.merge=Fje,oe.mergeWith=vue,oe.method=P7e,oe.methodOf=O7e,oe.mixin=jU,oe.negate=on,oe.nthArg=L7e,oe.omit=Bje,oe.omitBy=jje,oe.once=_n,oe.orderBy=R_,oe.over=$7e,oe.overArgs=wn,oe.overEvery=F7e,oe.overSome=B7e,oe.partial=kn,oe.partialRight=Eo,oe.partition=DU,oe.pick=Uje,oe.pickBy=bue,oe.property=Cue,oe.propertyOf=j7e,oe.pull=fT,oe.pullAll=I_,oe.pullAllBy=iu,oe.pullAllWith=Mm,oe.pullAt=Pf,oe.range=U7e,oe.rangeRight=z7e,oe.rearg=ni,oe.reject=x,oe.remove=ju,oe.rest=$m,oe.reverse=dT,oe.sampleSize=M,oe.set=Vje,oe.setWith=Hje,oe.shuffle=z,oe.slice=Pk,oe.sortBy=be,oe.sortedUniq=Lk,oe.sortedUniqBy=Wg,oe.split=h7e,oe.spread=NU,oe.tail=x4,oe.take=_4,oe.takeRight=$k,oe.takeRightWhile=hT,oe.takeWhile=xU,oe.tap=AU,oe.throttle=j9e,oe.thru=Of,oe.toArray=pue,oe.toPairs=xue,oe.toPairsIn=_ue,oe.toPath=G7e,oe.toPlainObject=gue,oe.transform=qje,oe.unary=U9e,oe.union=_U,oe.unionBy=w4,oe.unionWith=E4,oe.uniq=Gg,oe.uniqBy=wU,oe.uniqWith=wv,oe.unset=Wje,oe.unzip=pT,oe.unzipWith=vs,oe.update=Gje,oe.updateWith=Yje,oe.values=CT,oe.valuesIn=Kje,oe.without=EU,oe.words=Sue,oe.wrap=z9e,oe.xor=S4,oe.xorBy=SU,oe.xorWith=TU,oe.zip=T4,oe.zipObject=C4,oe.zipObjectDeep=CU,oe.zipWith=Tc,oe.entries=xue,oe.entriesIn=_ue,oe.extend=yue,oe.extendWith=O4,jU(oe,oe),oe.add=K7e,oe.attempt=Tue,oe.camelCase=Zje,oe.capitalize=wue,oe.ceil=X7e,oe.clamp=Xje,oe.clone=H9e,oe.cloneDeep=W9e,oe.cloneDeepWith=G9e,oe.cloneWith=q9e,oe.conformsTo=Y9e,oe.deburr=Eue,oe.defaultTo=I7e,oe.divide=Q7e,oe.endsWith=e7e,oe.eq=tp,oe.escape=t7e,oe.escapeRegExp=n7e,oe.every=I4,oe.find=bT,oe.findIndex=Nm,oe.findKey=Sje,oe.findLast=k4,oe.findLastIndex=T_,oe.findLastKey=Tje,oe.floor=J7e,oe.forEach=k_,oe.forEachRight=xT,oe.forIn=Cje,oe.forInRight=Aje,oe.forOwn=Ije,oe.forOwnRight=kje,oe.get=MU,oe.gt=K9e,oe.gte=X9e,oe.has=Nje,oe.hasIn=LU,oe.head=Hg,oe.identity=Ic,oe.includes=D4,oe.indexOf=ep,oe.inRange=Qje,oe.invoke=Mje,oe.isArguments=D_,oe.isArray=sr,oe.isArrayBuffer=Q9e,oe.isArrayLike=Cc,oe.isArrayLikeObject=So,oe.isBoolean=J9e,oe.isBuffer=Ev,oe.isDate=Z9e,oe.isElement=eje,oe.isEmpty=tje,oe.isEqual=nje,oe.isEqualWith=rje,oe.isError=PU,oe.isFinite=ije,oe.isFunction=Kg,oe.isInteger=cue,oe.isLength=N4,oe.isMap=fue,oe.isMatch=sje,oe.isMatchWith=oje,oe.isNaN=aje,oe.isNative=uje,oe.isNil=cje,oe.isNull=lje,oe.isNumber=due,oe.isObject=js,oe.isObjectLike=Zs,oe.isPlainObject=Vk,oe.isRegExp=OU,oe.isSafeInteger=fje,oe.isSet=hue,oe.isString=P4,oe.isSymbol=Mf,oe.isTypedArray=TT,oe.isUndefined=dje,oe.isWeakMap=hje,oe.isWeakSet=pje,oe.join=Om,oe.kebabCase=r7e,oe.last=ru,oe.lastIndexOf=A_,oe.lowerCase=i7e,oe.lowerFirst=s7e,oe.lt=mje,oe.lte=gje,oe.max=Z7e,oe.maxBy=eUe,oe.mean=tUe,oe.meanBy=nUe,oe.min=rUe,oe.minBy=iUe,oe.stubArray=zU,oe.stubFalse=VU,oe.stubObject=V7e,oe.stubString=H7e,oe.stubTrue=q7e,oe.multiply=sUe,oe.nth=Nk,oe.noConflict=M7e,oe.noop=UU,oe.now=Ce,oe.pad=o7e,oe.padEnd=a7e,oe.padStart=u7e,oe.parseInt=l7e,oe.random=Jje,oe.reduce=ST,oe.reduceRight=y,oe.repeat=c7e,oe.replace=f7e,oe.result=zje,oe.round=oUe,oe.runInContext=Fe,oe.sample=k,oe.size=K,oe.snakeCase=d7e,oe.some=se,oe.sortedIndex=Ok,oe.sortedIndexBy=bU,oe.sortedIndexOf=Lm,oe.sortedLastIndex=b4,oe.sortedLastIndexBy=Mk,oe.sortedLastIndexOf=qg,oe.startCase=p7e,oe.startsWith=m7e,oe.subtract=aUe,oe.sum=uUe,oe.sumBy=lUe,oe.template=g7e,oe.times=W7e,oe.toFinite=Xg,oe.toInteger=pr,oe.toLength=mue,oe.toLower=y7e,oe.toNumber=jd,oe.toSafeInteger=yje,oe.toString=ki,oe.toUpper=v7e,oe.trim=b7e,oe.trimEnd=x7e,oe.trimStart=_7e,oe.truncate=w7e,oe.unescape=E7e,oe.uniqueId=Y7e,oe.upperCase=S7e,oe.upperFirst=$U,oe.each=k_,oe.eachRight=xT,oe.first=Hg,jU(oe,function(){var _={};return Tl(oe,function(A,$){ti.call(oe.prototype,$)||(_[$]=A)}),_}(),{chain:!1}),oe.VERSION=r,bo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){oe[_].placeholder=oe}),bo(["drop","take"],function(_,A){ir.prototype[_]=function($){$=$===n?1:Qs(pr($),0);var X=this.__filtered__&&!A?new ir(this):this.clone();return X.__filtered__?X.__takeCount__=wa($,X.__takeCount__):X.__views__.push({size:wa($,U),type:_+(X.__dir__<0?"Right":"")}),X},ir.prototype[_+"Right"]=function($){return this.reverse()[_]($).reverse()}}),bo(["filter","map","takeWhile"],function(_,A){var $=A+1,X=$==H||$==J;ir.prototype[_]=function(re){var fe=this.clone();return fe.__iteratees__.push({iteratee:Tn(re,3),type:$}),fe.__filtered__=fe.__filtered__||X,fe}}),bo(["head","last"],function(_,A){var $="take"+(A?"Right":"");ir.prototype[_]=function(){return this[$](1).value()[0]}}),bo(["initial","tail"],function(_,A){var $="drop"+(A?"":"Right");ir.prototype[_]=function(){return this.__filtered__?new ir(this):this[$](1)}}),ir.prototype.compact=function(){return this.filter(Ic)},ir.prototype.find=function(_){return this.filter(_).head()},ir.prototype.findLast=function(_){return this.reverse().find(_)},ir.prototype.invokeMap=hr(function(_,A){return typeof _=="function"?new ir(this):this.map(function($){return xc($,_,A)})}),ir.prototype.reject=function(_){return this.filter(on(Tn(_)))},ir.prototype.slice=function(_,A){_=pr(_);var $=this;return $.__filtered__&&(_>0||A<0)?new ir($):(_<0?$=$.takeRight(-_):_&&($=$.drop(_)),A!==n&&(A=pr(A),$=A<0?$.dropRight(-A):$.take(A-_)),$)},ir.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},ir.prototype.toArray=function(){return this.take(U)},Tl(ir.prototype,function(_,A){var $=/^(?:filter|find|map|reject)|While$/.test(A),X=/^(?:head|last)$/.test(A),re=oe[X?"take"+(A=="last"?"Right":""):A],fe=X||/^find/.test(A);re&&(oe.prototype[A]=function(){var xe=this.__wrapped__,Ie=X?[1]:arguments,Ue=xe instanceof ir,pt=Ie[0],gt=Ue||sr(xe),Ct=function(Dr){var Ur=re.apply(oe,Sf([Dr],Ie));return X&&Yt?Ur[0]:Ur};gt&&$&&typeof pt=="function"&&pt.length!=1&&(Ue=gt=!1);var Yt=this.__chain__,mn=!!this.__actions__.length,Rn=fe&&!Yt,yr=Ue&&!mn;if(!fe&&gt){xe=yr?xe:new ir(this);var Dn=_.apply(xe,Ie);return Dn.__actions__.push({func:Of,args:[Ct],thisArg:n}),new Ea(Dn,Yt)}return Rn&&yr?_.apply(this,Ie):(Dn=this.thru(Ct),Rn?X?Dn.value()[0]:Dn.value():Dn)})}),bo(["pop","push","shift","sort","splice","unshift"],function(_){var A=Uh[_],$=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",X=/^(?:pop|shift)$/.test(_);oe.prototype[_]=function(){var re=arguments;if(X&&!this.__chain__){var fe=this.value();return A.apply(sr(fe)?fe:[],re)}return this[$](function(xe){return A.apply(sr(xe)?xe:[],re)})}}),Tl(ir.prototype,function(_,A){var $=oe[A];if($){var X=$.name+"";ti.call(nv,X)||(nv[X]=[]),nv[X].push({name:A,func:$})}}),nv[yv(n,v).name]=[{name:"wrapper",func:n}],ir.prototype.clone=RS,ir.prototype.reverse=KI,ir.prototype.value=sv,oe.prototype.at=gT,oe.prototype.chain=Yg,oe.prototype.commit=yT,oe.prototype.next=Fk,oe.prototype.plant=IU,oe.prototype.reverse=jk,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=kU,oe.prototype.first=oe.prototype.head,Vh&&(oe.prototype[Vh]=Bk),oe},X1=fU();Zr?((Zr.exports=X1)._=X1,Br._=X1):cn._=X1}).call(ban)}(DD,DD.exports)),DD.exports}var _an=xan();const wan="#/definitions/LibraryConfig",Ean="http://json-schema.org/draft-07/schema#",San=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Tan={$ref:wan,$schema:Ean,definitions:San},N9e=new aue;N9e.addSchema(Tan);const Can=N9e.getSchema("#/definitions/LibraryConfig");function P9e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?P9e(n,t):`$${t}.components.${n}`)}}function O9e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return O9e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=P9e(l,a),l}return r})}}function Aan(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;_I(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function Ian(e,t){let n=!1,r;try{r=JSON.parse(e),n=Can(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function kan(e){const t=await(await fetch(`${Ha}libraries/${e}/config.json`)).text();return Ian(t,e)}async function Ran(e,t,n){const r=e.map(async s=>{const o=await kan(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(_I(a)){const u=_an.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const M9e=new aue;M9e.addSchema(van);const Gxe=M9e.getSchema("#/definitions/GlobalConfig"),L9e=new aue;L9e.addSchema(pan);const Yxe=L9e.getSchema("#/definitions/StudyConfig");function Dan(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Nan(e){const t=JSON.parse(e),n=Gxe(t),r=Dan(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Gxe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function $9e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):$9e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Pan(e,t){const n=[],r=[];Aan(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;_I(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=nIe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return $9e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function uue(e){let t=!1,n;try{n=JSON.parse(e),t=Yxe(n)}catch{t=!1}let r=Yxe.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Ran(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=O9e(n.sequence,o,r);const{errors:a,warnings:u}=Pan(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Oan(e){const t=await(await fetch(`${Ha}${e}`)).text();return await uue(t)}async function lue(e,t){const n=t.configsList.find(r=>SSe(r)===e);if(n){const r=t.configs[n];return await Oan(`${r.path}`)}return null}async function Man(e){const t={},n=e.configsList.map(async i=>lue(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Lan({globalConfig:e}){const t=GE(),[n,r]=P.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";P.useEffect(()=>{if(t!=="__revisit-widget")return lue(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&uue(m.data.payload).then(async g=>{r(g);const v=await Nbe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=P.useState([]),[a,u]=P.useState(null),{storageEngine:l}=ho(),[c]=C1(),f=P.useMemo(()=>c.get("participantId"),[c]);P.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Nbe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(R=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},T=await l.initializeParticipantSession(t,v,n,E,f||g),C=await l.getModes(t),I=await fyt(t,n,T.sequence,E,T.answers,C,T.participantId);u(I),o([{element:S.jsx(Zsn,{}),children:[{path:"/",element:S.jsx(x9e,{to:bp(0),replace:!0})},{path:"/:index",element:n.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(oo,{order:2,mb:8,children:"Error loading config"}),S.jsx(oL,{issues:n.errors,type:"error"})]}):S.jsx(Lsn,{})}]}])}p()},[l,n,t,c,f]);const d=lSe(s);let h=null;return i?s.length===0?h=S.jsx(ld,{visible:!0}):h=d&&a?S.jsx(oIe.Provider,{value:a,children:S.jsx(fgt,{store:a.store,children:d})}):S.jsx(Ob,{}):h=S.jsx(Ob,{}),h}function B$({studyIds:e}){const t=em(),{studyId:n}=F0(),r=Sh(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return S.jsx(Vi.Header,{p:"md",children:S.jsxs(Xf,{mt:-7,align:"center",children:[S.jsx(Xf.Col,{span:6,children:S.jsxs(an,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[S.jsx(vx,{w:40,src:`${Ha}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsx(rd,{w:"md"}),S.jsx(oo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),S.jsx(Xf.Col,{span:6,children:S.jsxs(an,{justify:"flex-end",direction:"row",children:[s&&S.jsxs(S.Fragment,{children:[S.jsx(ME,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),S.jsx(gn,{component:"a",href:`${Ha}${n}`,target:"_blank",leftSection:S.jsx(bSe,{}),mr:"sm",children:"Go to Study"})]}),S.jsx(_Se,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function F9e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=GX(!1),[a,u]=P.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;mre(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return S.jsxs(S.Fragment,{children:[S.jsxs(Yr,{style:{gap:n},children:[S.jsx(ss,{label:"Download all participants data as JSON",children:S.jsx(gn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:S.jsx(GZe,{})})}),S.jsx(ss,{label:"Download all participants data as a tidy CSV",children:S.jsx(gn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:S.jsx(wSe,{})})})]}),i&&a.length>0&&S.jsx(MMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function $an({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsx(En.Td,{children:S.jsx(uo,{miw:100,children:e.timedOut?S.jsx(lt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>S.jsxs(je,{children:[S.jsxs(lt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?S.jsx(lt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):S.jsx(lt,{span:!0,children:n})]},`cell-${t}`))})}):S.jsx(En.Td,{children:"N/A"})}function Kxe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=JOe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsxs(En.Td,{children:[t.toFixed(1)," ","s",n&&S.jsxs(S.Fragment,{children:[S.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):S.jsx(En.Td,{children:"N/A"})}function Fan(e){const{metaData:t}=e;return S.jsx(En.Td,{children:S.jsx(IJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:S.jsxs(uo,{gap:"xs",children:[S.jsxs(je,{children:["IP:"," ",t.ip]}),S.jsxs(je,{children:["Language:"," ",t.language]}),S.jsxs(je,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),S.jsxs(je,{children:["User Agent:"," ",t.userAgent]})]})})})}function Ban({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=ho(),{studyId:i}=F0(),{user:s}=ZA(),o=async(E,T)=>{if(r&&i)if(s.isAdmin){const C=T===""?"Rejected by admin":T;await r.rejectParticipant(i,E,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=P.useState([]),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(""),m=async()=>{c(!0),d(!1);const E=a.map(async T=>await o(T,h));await Promise.all(E),u([]),await n(),c(!1)};function g(E){E==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(E)?u(a.filter(T=>T!==E)):u([...a,E])}const v=sIe(t.sequence),b=[S.jsx(En.Th,{children:S.jsx(an,{justify:"center",children:S.jsx(il,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),S.jsx(En.Th,{children:"ID"},"ID"),S.jsx(En.Th,{children:"Status"},"status"),S.jsx(En.Th,{children:"Tags"},"tags"),S.jsx(En.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[S.jsx(En.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),S.jsxs(En.Th,{children:[S.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),S.jsx(En.Th,{children:"Total Duration (clean)"},"total-duration")],w=e.map(E=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:S.jsx(an,{justify:"center",children:S.jsx(il,{mb:-4,checked:a.includes(E.participantId),onChange:()=>g(E.participantId)})})}),S.jsx(En.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),S.jsx(En.Td,{children:S.jsxs(an,{direction:"column",miw:100,children:[S.jsxs(an,{direction:"row",align:"center",children:[E.rejected?S.jsx(ss,{label:"Rejected",children:S.jsx(e3,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?S.jsx(ss,{label:"Completed",children:S.jsx(OB,{size:16,color:"teal",style:{marginBottom:-3}})}):S.jsx(ss,{label:"In Progress",children:S.jsx(xSe,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&S.jsxs(lt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([T,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(zp(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&S.jsx(lt,{mt:5,fz:10,children:E.rejected.reason})]})}),S.jsx(En.Td,{children:S.jsx(an,{direction:"column",miw:100,children:(E.participantTags||[]).map(T=>S.jsxs(lt,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),E.metadata?S.jsx(Fan,{metaData:E.metadata}):S.jsx(En.Td,{children:"N/A"}),v.map(T=>{const C=Tee(E.sequence,T.orderPath),I=C&&Object.entries(E.answers).sort((R,N)=>{const O=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10),L=parseInt(N[0].slice(N[0].lastIndexOf("_")+1),10);return O-L}).filter(([R])=>{const N=R.slice(0,R.lastIndexOf("_")),O=parseInt(R.slice(R.lastIndexOf("_")+1),10);return N===T.componentName&&O<=C[0].lastIndex&&O>=C[0].firstIndex});return I!==null&&I.length>=T.timesSeenInBlock+1&&I[T.timesSeenInBlock][1].endTime!==-1?S.jsxs(fi.Fragment,{children:[S.jsx($an,{cellData:I[T.timesSeenInBlock][1]}),S.jsx(Kxe,{cellData:I[T.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`):S.jsxs(fi.Fragment,{children:[S.jsx(En.Td,{children:"N/A"}),S.jsx(En.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),S.jsx(Kxe,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?S.jsxs(S.Fragment,{children:[S.jsx(ld,{visible:l,overlayProps:{blur:2}}),S.jsxs(an,{justify:"space-between",mb:8,p:8,children:[S.jsx(Yr,{children:S.jsx(ME,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:S.jsx(aet,{size:14}),onChange:E=>E&&g(E)})}),S.jsxs(Yr,{children:[S.jsx(F9e,{visibleParticipants:e,studyId:i||""}),S.jsxs(gn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),S.jsx(an,{direction:"column",style:{width:"100%",overflow:"auto"},children:S.jsxs(En,{striped:!0,withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:b})}),S.jsx(En.Tbody,{children:w})]})}),S.jsxs(Vs,{opened:f,onClose:()=>d(!1),title:S.jsxs(lt,{children:["Reject Participants (",a.length,")"]}),children:[S.jsx(Sy,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),S.jsx(gn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(rd,{h:"xl"}),S.jsx(an,{justify:"center",align:"center",children:S.jsx(lt,{children:"No data available"})})]})}function jan({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1),[c,f]=P.useState(""),[d,h]=P.useState([]),[p,m]=P.useState(""),[g,v]=P.useState(""),[b,w]=P.useState(!1),[E,T]=P.useState(!1),{storageEngine:C}=ho(),I=C,R=P.useCallback(async()=>{T(!0);const q=await I.getSnapshots(e);h(q),T(!1)},[I,e]);P.useEffect(()=>{R()},[R]);const N=async(q,...U)=>{w(!0);const G=await q(...U);G.status==="SUCCESS"?(R(),w(!1),await t(),G.notifications&&G.notifications.forEach(V=>{vP(V)})):(w(!1),vP({title:G.error.title,message:G.error.message,color:"red"}))},O=async()=>{await N(I.createSnapshot.bind(I),e,!1)},L=async()=>{m(""),r(!1),await N(I.createSnapshot.bind(I),e,!0)},j=async()=>{a(!1),await N(I.renameSnapshot.bind(I),c,g)},F=async q=>{await N(I.restoreSnapshot.bind(I),e,q)},H=async()=>{m(""),s(!1),await N(I.removeSnapshotOrLive.bind(I),c,!0)},Q=async()=>{m(""),l(!1),await N(I.removeSnapshotOrLive.bind(I),e,!0)},J=()=>rce({title:"Create a Snapshot",children:S.jsx(lt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O()}),ne=q=>rce({title:"Restore Snapshot",children:S.jsx(lt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>F(q)}),Z=q=>{const U=/-snapshot-(.+)$/,G=q.match(U);return G&&G[1]?G[1].replace("T"," "):null},ie=async q=>{const U=q.slice(q.indexOf("-")+1);return await I.getAllParticipantsDataByStudy(U)};return S.jsxs(S.Fragment,{children:[S.jsx(ld,{visible:b}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Create a Snapshot"}),S.jsxs(lt,{children:["This will create a snapshot of the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. It will"," ",S.jsx(lt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(ss,{label:"Create a snapshot",children:S.jsx(gn,{onClick:J,children:"Snapshot"})})]}),S.jsx(rd,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Archive Data"}),S.jsxs(lt,{children:["This will create a snapshot of the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(ss,{label:"Snapshot and Delete Data",children:S.jsx(gn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),S.jsx(rd,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Delete Data"}),S.jsxs(lt,{children:["This will delete the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),S.jsx(ss,{label:"Delete Data",children:S.jsx(gn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),S.jsx(rd,{h:"xl"}),S.jsxs(an,{direction:"column",children:[S.jsx(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:S.jsx(oo,{order:5,children:"Snapshots"})}),S.jsxs(je,{style:{position:"relative"},children:[S.jsx(ld,{visible:E}),d.length>0?S.jsxs(En,{children:[S.jsx(En.Thead,{children:S.jsxs(En.Tr,{children:[S.jsx(En.Th,{children:"Snapshot Name"}),S.jsx(En.Th,{children:"Date Created"}),S.jsx(En.Th,{children:"Actions"})]})}),S.jsx(En.Tbody,{children:d.map(q=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:q.alternateName}),S.jsx(En.Td,{children:Z(q.originalName)}),S.jsx(En.Td,{children:S.jsxs(an,{children:[S.jsx(ss,{label:"Rename",children:S.jsx(gn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(q.originalName)},children:S.jsx(net,{})})}),S.jsx(ss,{label:"Restore Snapshot",children:S.jsx(gn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ne(q.originalName)},children:S.jsx(set,{})})}),S.jsx(ss,{label:"Delete Snapshot",children:S.jsx(gn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(q.originalName)},children:S.jsx(ESe,{})})}),S.jsx(F9e,{visibleParticipants:()=>ie(q.originalName),studyId:e,gap:"10px",fileName:q.alternateName})]})})]},q.originalName))})]}):S.jsx(lt,{children:"No snapshots."})]})]}),S.jsxs(Vs,{opened:n,onClose:()=>{r(!1),m("")},title:S.jsx(lt,{children:"Archive Data"}),children:[S.jsx(lt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),S.jsx(Sy,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),S.jsx(gn,{color:"red",onClick:L,disabled:p!==e,children:"Archive"})]})]}),S.jsxs(Vs,{opened:i,onClose:()=>{s(!1),m("")},title:S.jsx(lt,{children:"Delete Snapshot"}),children:[S.jsxs(lt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",S.jsx(lt,{span:!0,fw:700,children:"irreversible"}),"."]}),S.jsx(Sy,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),S.jsx(gn,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]}),S.jsxs(Vs,{opened:o,onClose:()=>{a(!1),v("")},title:S.jsx(lt,{children:"Rename Snapshot"}),children:[S.jsx(Sy,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:q=>v(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),S.jsx(gn,{color:"green",onClick:j,disabled:!g||g.length===0,children:"Rename"})]})]}),S.jsxs(Vs,{opened:u,onClose:()=>{l(!1),m("")},title:S.jsx(lt,{children:"Delete Live Data"}),children:[S.jsxs(lt,{mb:"sm",children:["This will permanently delete the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","data. This action is"," ",S.jsx(lt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),S.jsx(Sy,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),S.jsx(gn,{color:"red",onClick:Q,disabled:p!==e,children:"Delete"})]})]})]})}function Uan({studyId:e}){const{storageEngine:t}=ho(),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&S.jsxs(uo,{children:[S.jsx(Lw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),S.jsx(Lw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),S.jsx(Lw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function zan({studyId:e,refresh:t}){const{storageEngine:n}=ho();return S.jsx(Qy,{children:S.jsxs(Qu,{multiple:!0,variant:"contained",children:[S.jsxs(Qu.Item,{value:"ReVISit Modes",children:[S.jsx(Qu.Control,{children:S.jsx(oo,{order:5,children:"ReVISit Modes"})}),S.jsx(Qu.Panel,{children:S.jsx(Uan,{studyId:e})})]},"modes"),S.jsxs(Qu.Item,{value:"Data Management",children:[S.jsx(Qu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:S.jsx(oo,{order:5,children:"Data Management"})}),S.jsx(Qu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&S.jsx(jan,{studyId:e,refresh:t})})]},"dataManagement")]})})}function Van({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=GX(!0),[o,a]=td(),u=P.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=P.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=P.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,v])=>v.endTime!==-1).map(([g,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return S.jsxs(SA,{p:"lg",withBorder:!0,ref:o,children:[S.jsxs(an,{direction:"row",justify:"space-between",onClick:s,children:[S.jsxs(an,{align:"center",children:[e.type==="metadata"&&S.jsx(WZe,{size:20}),e.type==="numerical"&&S.jsx(eet,{size:20}),(e.type==="shortText"||e.type==="longText")&&S.jsx(VZe,{size:20}),e.type==="likert"&&S.jsx(KZe,{size:20}),e.type==="dropdown"&&S.jsx(uet,{size:20}),e.type==="slider"&&S.jsx($Ze,{size:20}),e.type==="radio"&&S.jsx(iet,{size:20}),e.type==="checkbox"&&S.jsx(cet,{size:20}),e.type==="reactive"&&S.jsx(QZe,{size:20}),S.jsx(oo,{order:5,ml:4,children:e.id})]}),S.jsx(qZe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),S.jsxs(rB,{in:i,mah:400,children:[S.jsx(je,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:S.jsx(OE,{})}),S.jsxs(TJ,{cols:2,h:360,children:[S.jsx(Ky,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?S.jsx(Tbe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):S.jsxs(an,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&S.jsx(OD,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Response Values: "}),u.map((f,d)=>S.jsx(an,{align:"center",gap:"xs",children:S.jsx(lt,{children:f[e.id]})},d))]})]})}),S.jsx(Ky,{mih:200,children:e.type==="metadata"?S.jsx(Tbe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Response Specification: "}),S.jsx(OD,{block:!0,children:JSON.stringify(e,null,2)}),S.jsx("br",{}),l&&S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Correct Answer: "}),S.jsx(OD,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Han({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&S9e(t.components[n],t),i=P.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?S.jsx(an,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>S.jsx(Van,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:S.jsx(lt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function qan({studyConfig:e,visibleParticipants:t}){const n=P.useMemo(()=>{let i=By(e.sequence);return i=Cee(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=F0();return S.jsx(SA,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",children:S.jsx(lt,{children:"No data available."})}):S.jsxs(an,{direction:"row",children:[S.jsx(je,{w:340,children:S.jsx(G8,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),S.jsx(OE,{orientation:"vertical",mx:"md"}),S.jsx(Han,{participantData:t,studyConfig:e,trialId:r})]})})}function Wan({xScale:e,answer:t,height:n,labelHeight:r=0}){return S.jsx("g",{children:S.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const GM=3,r2=25,YM=25,KM=20,Xxe=1,Gq=15;function Gan({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=P.useState(!1),[f,{width:d}]=td();return S.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[S.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Xxe,width:e(t.endTime)-e(t.startTime)-Xxe*2,y:r-r2,height:r2}),S.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-GM,width:d+GM*2+(u?Gq:0),y:r-r2-YM-o,height:KM,fill:"whitesmoke"}),S.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-GM,x2:d+e(t.startTime)+GM+(u?Gq:0),y1:r-r2-YM+KM-o,y2:r-r2-YM+KM-o}),S.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Gq:0),y:r-r2-YM-o,height:KM,children:S.jsx(ma,{style:{width:"fit-content"},children:S.jsxs(Yr,{wrap:"nowrap",gap:2,children:[S.jsx(lt,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?S.jsx(OB,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):S.jsx(e3,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Qxe=25,Yan=8,Yq={left:20,top:0,right:20,bottom:0};function Kan({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=P.useCallback(g=>{const v=g.split("_"),b=+v[v.length-1];window.open(`${Ha}${i}/${bp(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=P.useMemo(()=>{const g=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=VN(g);return ef([Yq.left,t-Yq.left-Yq.right]).domain([v[0],o?v[0]+o:v[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=P.useMemo(()=>{let g=0;const v=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,C)=>T[1].startTime-C[1].startTime);let b=0,w=0;const E=v.map((T,C)=>{const[I,R]=T,N=C>0?v[C-g-1]:null;N&&N[0].length*(Yan+1)+u(N[1].startTime)>u(R.startTime)?g+=1:g=0;const O=I.split("_"),L=O.slice(0,O.length-1).join("_"),j=s==null?void 0:s.components[L];let F=!0,H=!1;return j&&j.correctAnswer?(j.correctAnswer.forEach(Q=>{const{id:J,answer:ne}=Q;(!j||!j.correctAnswer||R.answer[J]!==ne)&&(F=!1)}),H=!0):H=!1,H&&(w+=1,F&&(b+=1)),{line:S.jsx(Wan,{labelHeight:g*Qxe,answer:R,height:n,xScale:u},I),label:S.jsx(ss,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:S.jsx(uo,{gap:0,children:Object.entries(R.answer).map(Q=>{var ie,q;const[J,ne]=Q,Z=(q=(ie=j==null?void 0:j.correctAnswer)==null?void 0:ie.find(U=>U.id===J))==null?void 0:q.answer;return S.jsx(lt,{children:`${J}: ${ne} ${Z?`[${Z}]`:""}`},J)})}),children:S.jsx("g",{children:S.jsx(Gan,{isCorrect:F,hasCorrect:H,labelHeight:g*Qxe,isSelected:r===I,setSelectedTask:a,answer:R,height:n,name:I,xScale:u},I)})})}});return[b,w,E]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=P.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let T=[-1,-1],C="visible";if(w.windowEvents)for(let I=0;I<w.windowEvents.length;I+=1)w.windowEvents[I][1]==="visibility"&&(w.windowEvents[I][2]==="hidden"&&C==="visible"?(T=[w.windowEvents[I][0],-1],C="hidden"):w.windowEvents[I][2]==="visible"&&C==="hidden"&&(T[1]=w.windowEvents[I][0],E.push(T),T=[-1,-1],C="visible"));return E.map((I,R)=>S.jsx(ss,{withinPortal:!0,label:"Browsed away",children:S.jsx("rect",{x:u(I[0]),width:u(I[1])-u(I[0]),y:n-5,height:10})},R))}),[u,n,e.answers]),p=P.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[g,v]=s.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(w=>w.startsWith(g));if(b)return`${e.answers[b].answer[v]}`}return null},[e.answers,s]),m=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(g[g.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return S.jsx(ma,{children:S.jsxs(uo,{gap:15,style:{width:"100%"},children:[S.jsx(OE,{size:"md"}),S.jsxs(Yr,{justify:"space-between",children:[S.jsxs(Yr,{justify:"center",children:[e.participantIndex?S.jsx(lt,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,S.jsx(lt,{size:"md",fw:700,children:p||e.participantId}),S.jsx(lt,{size:"md",children:m}),e.completed?null:S.jsx(lt,{size:"xl",c:"red",children:"Not completed"}),S.jsxs(Yr,{gap:10,children:[S.jsx(Dp,{variant:"light",size:"lg",color:"green",leftSection:S.jsx(OB,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),S.jsx(Dp,{variant:"light",size:"lg",color:"red",leftSection:S.jsx(e3,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),S.jsx(Dp,{variant:"light",size:"lg",color:"gray",leftSection:S.jsx(XZe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:zX(d)})]})]}),S.jsx(gn,{rightSection:S.jsx(vSe,{size:14}),component:"a",href:`${Ha}${i}/${bp(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?S.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function Xan({visibleParticipants:e,studyConfig:t}){const{studyId:n}=F0(),[r,{width:i}]=td(),[s,o]=P.useState(!1),a=P.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return S.jsxs(uo,{ref:r,style:{width:"100%"},children:[S.jsx(Yr,{children:S.jsx(Lw,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>S.jsx(Kan,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function Qan({globalConfig:e}){const{studyId:t}=F0(),[n,r]=P.useState([]),[i,s]=P.useState(void 0),[o,a]=P.useState(!1),{storageEngine:u}=ho(),l=em(),{tab:c}=F0(),{user:f}=ZA();P.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const T=await uue(E.data.payload);s(T)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return lue(t,e).then(w=>{w&&s(w)}),()=>{}},[t,e,u]);const d=P.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);P.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=P.useState([]),[m,g,v]=P.useMemo(()=>{const w=n.filter(C=>!C.rejected&&C.completed),E=n.filter(C=>!C.rejected&&!C.completed),T=n.filter(C=>C.rejected);return p([...w,...E,...T]),[w,E,T]},[n]),b=P.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...m),w.includes("inprogress")&&E.push(...g),w.includes("rejected")&&E.push(...v),p(E)},[m,g,v]);return S.jsxs(S.Fragment,{children:[S.jsx(B$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsxs(Qy,{fluid:!0,style:{height:"100%",position:"relative"},children:[S.jsx(ld,{visible:o}),S.jsxs(an,{direction:"row",align:"center",justify:"space-between",children:[S.jsx(oo,{order:5,children:t}),S.jsxs(an,{direction:"row",align:"center",children:[S.jsx(lt,{mt:-2,size:"sm",children:"Participants: "}),S.jsx(il.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:S.jsxs(Yr,{children:[S.jsx(il,{value:"completed",label:"Completed"}),S.jsx(il,{value:"inprogress",label:"In Progress"}),S.jsx(il,{value:"rejected",label:"Rejected"})]})})]})]}),S.jsx(rd,{h:"xs"}),S.jsxs(Vr,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[S.jsxs(Vr.List,{children:[S.jsx(Vr.Tab,{value:"table",leftSection:S.jsx(fet,{size:16}),children:"Table View"}),S.jsx(Vr.Tab,{value:"stats",leftSection:S.jsx(HZe,{size:16}),children:"Trial Stats"}),S.jsx(Vr.Tab,{value:"replay",leftSection:S.jsx(ret,{size:16}),children:"Participant Replay"}),S.jsx(Vr.Tab,{value:"manage",leftSection:S.jsx(_Se,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),S.jsx(Vr.Panel,{value:"table",pt:"xs",children:i&&S.jsx(Ban,{visibleParticipants:h,studyConfig:i,refresh:d})}),S.jsx(Vr.Panel,{value:"stats",pt:"xs",children:i&&S.jsx(qan,{studyConfig:i,visibleParticipants:h})}),S.jsx(Vr.Panel,{value:"replay",pt:"xs",children:S.jsx(Xan,{visibleParticipants:h,studyConfig:i})}),S.jsx(Vr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?S.jsx(zan,{studyId:t,refresh:d}):S.jsx(Qy,{mt:20,children:S.jsx(My,{title:"Unauthorized Access",variant:"light",color:"red",icon:S.jsx(YJ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Jxe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=ZA(),{storageEngine:o}=ho(),[a,u]=P.useState(!1),l=F0();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?S.jsx(ld,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?S.jsx(VJ,{to:"/login"}):S.jsx(S.Fragment,{children:e})}async function B9e(e,t){if(e instanceof gp){t(!0);const n=new vy,r=bF();try{await Xmt(r,n,$Ae)}catch(i){vP({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Jan(){const{user:e}=ZA(),[t,n]=P.useState(!1),{storageEngine:r}=ho();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&vP({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?S.jsx(VJ,{to:"/"}):S.jsx(Qy,{children:S.jsx(NA,{padding:"lg",children:S.jsxs(an,{align:"center",direction:"column",justify:"center",children:[S.jsx(vx,{maw:200,mt:50,mb:100,src:`${Ha}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsxs(S.Fragment,{children:[S.jsx(lt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),S.jsx(gn,{onClick:()=>B9e(r,n),leftSection:S.jsx(det,{}),variant:"filled",children:"Sign In With Google"})]}),S.jsx(ld,{visible:t})]})})})}function Zan(){const{user:e,triggerAuth:t,logout:n}=ZA(),{storageEngine:r}=ho(),[i,s]=P.useState(!1),[o,a]=P.useState([]),[u,l]=P.useState(!1),[c,f]=P.useState(!1),[d,h]=P.useState(!1),[p,m]=P.useState(!1),[g,v]=P.useState(!1),[b,w]=P.useState(""),[E,T]=P.useState(null),C=dIe({initialValues:{email:""},validate:{email:H1t("Invalid email")}});P.useEffect(()=>{(async()=>{if(l(!0),r instanceof gp){const H=await(r==null?void 0:r.getUserManagementData("authentication"));s((H==null?void 0:H.isEnabled)||!1);const Q=await(r==null?void 0:r.getUserManagementData("adminUsers"));Q&&Q.adminUsersList&&a(Q==null?void 0:Q.adminUsersList.map(J=>J.email))}else s(!1);l(!1)})()},[r]);const I=async()=>{if(l(!0),r instanceof gp){const F=await B9e(r,l);F&&F.email?(T({email:F.email,uid:F.uid}),m(!0)):v(!0)}l(!1)},R=async F=>{l(!0),r instanceof gp&&F&&(await r.changeAuth(!0),await r.addAdminUser(F),a([F.email]),s(!0),t()),m(!1),l(!1)},N=async()=>{if(l(!0),r instanceof gp){await r.addAdminUser({email:C.values.email,uid:null});const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}l(!1),f(!1),C.setValues({email:""})},O=F=>{h(!0),w(F)},L=async()=>{if(l(!0),r instanceof gp){await r.removeAdminUser(b);const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}h(!1),l(!1)},j=P.useMemo(()=>r instanceof gp,[r]);return S.jsxs(S.Fragment,{children:[S.jsx(Qy,{children:S.jsxs(NA,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[S.jsx(oo,{mb:20,order:3,children:"Authentication"}),i?S.jsx(an,{children:S.jsx(lt,{children:"Authentication is enabled."})}):S.jsxs(an,{justify:"space-between",children:[S.jsx(je,{children:S.jsx(lt,{children:"Authentication is currently disabled."})}),S.jsx(ss,{label:"You can only enable auth when using Firebase",disabled:j,children:S.jsx(gn,{onClick:F=>j?I():F.preventDefault(),color:"green","data-disabled":j?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?S.jsxs(an,{mt:40,direction:"column",children:[S.jsxs(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[S.jsx(oo,{order:6,children:"Enabled Users"}),S.jsx(KJ,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(F=>{var H;return S.jsxs(an,{justify:"space-between",mb:10,children:[S.jsx(lt,{children:F}),F===((H=e.user)==null?void 0:H.email)?S.jsx(lt,{color:"blue",size:"xs",children:"You"}):S.jsx(mx,{variant:"subtle",onClick:()=>O(F),children:S.jsx(ESe,{color:"red"})})]},F)}):null,S.jsx(an,{direction:"row",justify:"left",children:S.jsx(gn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),S.jsx(Vs,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:S.jsxs(je,{component:"form",onSubmit:C.onSubmit(()=>N()),children:[S.jsx(Sy,{leftSection:S.jsx(jZe,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),S.jsxs(an,{mt:30,justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),S.jsx(gn,{type:"submit",children:"Save"})]})]})}),S.jsxs(Vs,{opened:d,size:"large",onClose:()=>h(!1),title:S.jsxs(lt,{fw:700,children:["Remove",b,"?"]}),children:[S.jsxs(lt,{mt:40,children:["Are you sure you want to remove",S.jsx("b",{children:b})," ","as an administrator?"]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),S.jsx(gn,{onClick:()=>L(),children:"Yes, I'm sure."})]})]}),S.jsxs(Vs,{opened:p,size:"md",onClose:()=>m(!1),title:S.jsx(lt,{fw:700,children:"Enable Authentication?"}),children:[S.jsxs(lt,{mt:40,children:["User"," ",S.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),S.jsx(gn,{onClick:()=>R(E),children:"Yes, I'm sure."})]})]}),S.jsxs(Vs,{opened:g,size:"md",onClose:()=>v(!1),title:S.jsx(lt,{fw:700,children:"An Error Occurred."}),children:[S.jsxs(lt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",S.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),S.jsx(an,{mt:40,justify:"right",children:S.jsx(gn,{mr:5,onClick:()=>v(!1),children:"Okay"})})]}),S.jsx(ld,{visible:u})]})}class eun extends FAe{constructor(){super("localStorage");kl(this,"studyDatabase");kl(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await f2.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await _F(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await _F(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await f2.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=xF();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=f2.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=xF();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await f2.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await f2.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function tun(){let e;{const t=new eun;await t.connect(),e=t}return e}function zR({title:e}){const t=Sh();return P.useEffect(()=>{document.title=e},[t,e]),null}async function nun(){const t=await(await fetch(`${Ha}global.json`)).text();return Nan(t)}function run(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await Man(e))}a()},[e]),P.useEffect(()=>{e||nun().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=ho();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await tun();s(u)}a()},[s,i]);const o=async a=>i instanceof gp?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?S.jsx(xZe,{basename:Ha,children:S.jsx(G0t,{children:S.jsx(MZe,{children:S.jsxs(KJe,{children:[S.jsx(Y_,{path:"/",element:S.jsxs(S.Fragment,{children:[S.jsx(zR,{title:"ReVISit | Home"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(B$,{studyIds:e.configsList}),S.jsx(X0t,{globalConfig:e,studyConfigs:n})]})]})}),S.jsx(Y_,{path:"/:studyId/*",element:S.jsxs(S.Fragment,{children:[S.jsx(zR,{title:"ReVISit | Study"}),S.jsx(Lan,{globalConfig:e})]})}),S.jsx(Y_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:S.jsxs(S.Fragment,{children:[S.jsx(zR,{title:"ReVISit | Analysis"}),S.jsx(Jxe,{paramToCheck:"studyId",paramCallback:o,children:S.jsx(Vi,{padding:"md",header:{height:70},children:S.jsx(Qan,{globalConfig:e})})})]})}),S.jsx(Y_,{path:"/analysis/stats/:studyId",element:S.jsx(x9e,{to:"./table",replace:!0})}),S.jsx(Y_,{path:"/settings",element:S.jsxs(Jxe,{children:[S.jsx(zR,{title:"ReVISit | Settings"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(B$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsx(Zan,{})})]})]})}),S.jsx(Y_,{path:"/login",element:S.jsxs(S.Fragment,{children:[S.jsx(zR,{title:"ReVISit | Login"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(B$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsx(Jan,{})})]})]})})]})})})}):null}SUe.createRoot(document.getElementById("root")).render(S.jsx(fi.StrictMode,{children:S.jsx(iJe,{children:S.jsxs(E_e,{children:[S.jsx(T1,{}),S.jsx(run,{})]})})}))});export default iun();
